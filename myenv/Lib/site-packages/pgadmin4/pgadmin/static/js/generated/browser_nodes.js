(self.webpackChunk=self.webpackChunk||[]).push([[619],{32138:(e,t,n)=>{"use strict";var a,o;n(88674),n(41539);var i=n(77077),r=s(n(97548)),l=s(n(2832));function s(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(55455),n(12030),n(5547)],void 0===(o=function(e,t,n,a,o,s){return s.Nodes["coll-cast"]||(o.Browser.Nodes["coll-cast"]=o.Browser.Collection.extend({node:"cast",label:e("Casts"),type:"coll-cast",columns:["name","description"]})),s.Nodes.cast||(o.Browser.Nodes.cast=o.Browser.Node.extend({parent_type:"database",type:"cast",sqlAlterHelp:"sql-altercast.html",sqlCreateHelp:"sql-createcast.html",dialogHelp:t("help.static",{filename:"cast_dialog.html"}),canDrop:!0,canDropCascade:!0,label:e("Cast"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,s.add_menus([{name:"create_cast_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"},enable:s.Nodes.database.is_conn_allow},{name:"create_cast_on_coll",node:"coll-cast",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"}},{name:"create_cast",node:"cast",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"}}]))},model:o.Browser.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),cell:"string",editable:!1,type:"text",readonly:!0,cellHeaderClasses:"width_percent_50"},{id:"oid",label:e("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]},{id:"description",label:e("Comment"),type:"multiline",cellHeaderClasses:"width_percent_50"}]}),getSchema:function(e,t){var n=this;return new r.default({getTypeOptions:function(){return(0,i.getNodeAjaxOptions)("get_type",n,e,t)},getFuncOptions:function(n,a){return new Promise((function(o,i){var r=(0,l.default)(),c=s.Nodes.cast.generate_url.apply(s.Nodes.cast,[null,"get_functions",t,!1,e]),d={srctyp:n,trgtyp:a};null!=n&&""!=n&&null!=a&&""!=a?r.post(c,d).then((function(e){d=e.data.data,o(d)})).catch((function(e){i(e)})):o(d=[])}))}})}})),s.Nodes["coll-cast"]}.apply(t,a))||(e.exports=o)},22226:(e,t,n)=>{"use strict";var a,o;n(68309),n(15306),n(74916);var i,r=(i=n(18272))&&i.__esModule?i:{default:i},l=n(77077);a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(5547)],void 0===(o=function(e,t,n,a,o,i,s){return i.Nodes["coll-event_trigger"]||(o.Browser.Nodes["coll-event_trigger"]=o.Browser.Collection.extend({node:"event_trigger",label:e("Event Trigger"),type:"coll-event_trigger",columns:["name","eventowner","comment"],canDrop:!0,canDropCascade:!1})),i.Nodes.event_trigger||(o.Browser.Nodes.event_trigger=o.Browser.Node.extend({parent_type:"database",type:"event_trigger",sqlAlterHelp:"sql-altereventtrigger.html",sqlCreateHelp:"sql-createeventtrigger.html",dialogHelp:t("help.static",{filename:"event_trigger_dialog.html"}),label:e("Event Trigger"),hasSQL:!0,hasDepends:!0,canDrop:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_event_trigger_on_coll",node:"coll-event_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"}},{name:"create_event_trigger",node:"event_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"}},{name:"create_event_trigger",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"},enable:i.Nodes.database.is_conn_allow}]))},getSchema:function(e,t){var n=this;return new r.default({role:function(){return(0,l.getNodeListByName)("role",e,t)},function_names:function(){return(0,l.getNodeAjaxOptions)("fopts",n,e,t,{cacheLevel:"trigger_function"})}},{eventowner:i.serverInfo[e.server._id].user.name})},model:o.Browser.Node.Model.extend({idAttribute:"oid",defaults:{oid:void 0,name:void 0,eventowner:void 0,is_sys_obj:void 0,comment:void 0,enabled:"O",eventfuncoid:void 0,eventfunname:void 0,eventname:"DDL_COMMAND_START",when:void 0,xmin:void 0,source:void 0,language:void 0},initialize:function(e,t){var n=0===a.size(e);if(n){var r=i.serverInfo[t.node_info.server._id].user;this.set({eventowner:r.name},{silent:!0})}o.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text"},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"eventowner",label:e("Owner"),cell:"string",type:"text",mode:["properties","edit","create"],node:"role",control:s.NodeListByNameControl},{id:"is_sys_obj",label:e("System event trigger?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"comment",label:e("Comment"),type:"multiline"},{id:"enabled",label:e("Trigger enabled?"),group:e("Definition"),mode:["properties","edit","create"],options:[{label:e("Enable"),value:"O"},{label:e("Disable"),value:"D"},{label:e("Replica"),value:"R"},{label:e("Always"),value:"A"}],control:"select2",select2:{allowClear:!1,width:"100%"}},{id:"eventfunname",label:e("Trigger function"),type:"text",control:"node-ajax-options",group:e("Definition"),url:"fopts",cache_node:"trigger_function"},{id:"eventname",label:e("Event"),group:e("Definition"),cell:"string",options:[{label:e("DDL COMMAND START"),value:"DDL_COMMAND_START"},{label:e("DDL COMMAND END"),value:"DDL_COMMAND_END"},{label:e("SQL DROP"),value:"SQL_DROP"}],control:"select2",select2:{allowClear:!1,width:"100%"}},{id:"when",label:e("When TAG in"),cell:"string",type:"text",group:e("Definition"),control:s.SqlFieldControl,extraClasses:["custom_height_css_class"]},{id:"seclabels",label:e("Security labels"),model:i.SecLabelModel,editable:!1,type:"collection",group:e("Security"),mode:["edit","create"],min_version:90200,canAdd:!0,canEdit:!1,canDelete:!0,control:"unique-col-collection"}],validate:function(){var t=void 0;return this.errorModel.clear(),a.isUndefined(this.get("name"))||""==String(this.get("name")).replace(/^\s+|\s+$/g,"")?(t=e("Event trigger name cannot be empty."),this.errorModel.set("name",t),t):a.isUndefined(this.get("eventowner"))||""==String(this.get("eventowner")).replace(/^\s+|\s+$/g,"")?(t=e("Event trigger owner cannot be empty."),this.errorModel.set("eventowner",t),t):a.isUndefined(this.get("enabled"))?(t=e("Event trigger enabled status cannot be empty."),this.errorModel.set("enabled",t),t):a.isUndefined(this.get("eventfunname"))||""==String(this.get("eventfunname")).replace(/^\s+|\s+$/g,"")?(t=e("Event trigger function cannot be empty."),this.errorModel.set("eventfunname",t),t):a.isUndefined(this.get("eventname"))?(t=e("Event trigger event cannot be empty."),this.errorModel.set("eventname",t),t):null}})})),i.Nodes["coll-event_trigger"]}.apply(t,a))||(e.exports=o)},61561:(e,t,n)=>{"use strict";var a,o;n(68309),n(69826),n(73210);var i,r=n(77077),l=(i=n(72876))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(5547)],void 0===(o=function(e,t,n,a,o,i,s){return i.Nodes["coll-extension"]||(o.Browser.Nodes["coll-extension"]=o.Browser.Collection.extend({node:"extension",label:e("Extensions"),type:"coll-extension",columns:["name","owner","comment"]})),i.Nodes.extension||(o.Browser.Nodes.extension=o.Browser.Node.extend({parent_type:"database",type:"extension",sqlAlterHelp:"sql-alterextension.html",sqlCreateHelp:"sql-createextension.html",dialogHelp:t("help.static",{filename:"extension_dialog.html"}),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,label:e("Extension"),Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_extension_on_coll",node:"coll-extension",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"}},{name:"create_extension",node:"extension",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"}},{name:"create_extension",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"},enable:i.Nodes.database.is_conn_allow}]))},model:o.Browser.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),first_empty:!0,type:"text",mode:["properties","create","edit"],visible:!0,url:"avails",readonly:function(e){return!e.isNew()},transform:function(e,t){var n=[],o=t||this,i=o.model.get("name");return o.model.isNew()?e&&a.isArray(e)&&a.each(e,(function(e){null===e.installed_version&&n.push({label:e.name,value:JSON.stringify(e)})})):n.push({label:i,value:i}),n},control:s.NodeAjaxOptionsControl.extend({getValueFromDOM:function(){var e=this.formatter.toRaw(a.unescape(this.$el.find("select").val()),this.model);return""===e?null:("string"==typeof e&&(e=JSON.parse(e)),e.name)},onChange:function(){s.NodeAjaxOptionsControl.prototype.onChange.apply(this,arguments);var e=this.$el.find("select").val();if(""!=e.trim()){var t=this.formatter.toRaw(e,this.model);"string"==typeof t&&(t=JSON.parse(t)),this.model.set({version:"",relocatable:a.isNull(t.relocatable[0])||a.isUndefined(t.relocatable[0])?"":t.relocatable[0]})}else this.model.set({version:"",relocatable:!0,schema:""})}})},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:e("Owner"),control:"node-list-by-name",mode:["properties"],node:"role",cell:"string",cache_level:"server"},{id:"comment",label:e("Comment"),cell:"string",type:"multiline",readonly:!0}]}),getSchema:function(e,t){var n=o.Browser.Nodes.extension;return new l.default({extensionsList:function(){return(0,r.getNodeAjaxOptions)("avails",n,e,t,{cacheLevel:"server"},(function(e){var t=[];return e&&a.isArray(e)&&a.each(e,(function(e){t.push({label:e.name,value:e.name,data:e})})),t}))},schemaList:function(){return(0,r.getNodeListByName)("schema",e,t)}})}})),i.Nodes["coll-extension"]}.apply(t,a))||(e.exports=o)},26772:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=n(77077),l=n(40345),s=(i=n(30860))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(5547),n(63563)],void 0===(o=function(e,t,n,a,o,i,c){return i.Nodes["coll-foreign_server"]||(o.Browser.Nodes["coll-foreign_server"]=o.Browser.Collection.extend({node:"foreign_server",label:e("Foreign Servers"),type:"coll-foreign_server",columns:["name","fsrvowner","description"]})),i.Nodes.foreign_server||(o.Browser.Nodes.foreign_server=o.Browser.Node.extend({parent_type:"foreign_data_wrapper",type:"foreign_server",sqlAlterHelp:"sql-alterserver.html",sqlCreateHelp:"sql-createserver.html",dialogHelp:t("help.static",{filename:"foreign_server_dialog.html"}),label:e("Foreign Server"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_foreign_server_on_coll",node:"coll-foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}},{name:"create_foreign_server",node:"foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}},{name:"create_foreign_server",node:"foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}}]))},getSchema:function(e,t){var n=this;return new s.default((function(a){return(0,l.getNodePrivilegeRoleSchema)(n,e,t,a)}),{role:function(){return(0,r.getNodeListByName)("role",e,t)}},{fsrvowner:i.serverInfo[e.server._id].user.name})},model:o.Browser.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var r=i.serverInfo[t.node_info.server._id].user;this.set({fsrvowner:r.name},{silent:!0})}o.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",disabled:function(){return"edit"==this.mode&&this.node_info.server.version<90200}},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"fsrvowner",label:e("Owner"),type:"text",control:c.NodeListByNameControl,node:"role",mode:["edit","create","properties"],select2:{allowClear:!1}},{id:"description",label:e("Comment"),cell:"string",type:"multiline"}]})})),i.Nodes["coll-foreign_server"]}.apply(t,a))||(e.exports=o)},92971:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=n(77077),l=(i=n(91161))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(5547)],void 0===(o=function(e,t,n,a,o,i,s){return i.Nodes["coll-user_mapping"]||(o.Browser.Nodes["coll-user_mapping"]=o.Browser.Collection.extend({node:"user_mapping",label:e("User Mappings"),type:"coll-user_mapping",columns:["name"]})),i.Nodes.user_mapping||(o.Browser.Nodes.user_mapping=o.Browser.Node.extend({parent_type:"foreign_server",type:"user_mapping",sqlAlterHelp:"sql-alterusermapping.html",sqlCreateHelp:"sql-createusermapping.html",dialogHelp:t("help.static",{filename:"user_mapping_dialog.html"}),label:e("User Mapping"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_user_mapping_on_coll",node:"coll-user_mapping",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}},{name:"create_user_mapping",node:"user_mapping",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}},{name:"create_user_mapping",node:"foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}}]))},getSchema:function(e,t){return new l.default({role:function(){return(0,r.getNodeListByName)("role",e,t,{},(function(){return!0}),(function(e){return e.unshift({label:"CURRENT_USER",value:"CURRENT_USER",image:"icon-role"},{label:"PUBLIC",value:"PUBLIC",image:"icon-role"}),e}))}},{name:i.serverInfo[e.server._id].user.name})},model:o.Browser.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var r=i.serverInfo[t.node_info.server._id].user;this.set({name:r.name},{silent:!0})}o.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("User"),type:"text",control:s.NodeListByNameControl,node:"role",mode:["edit","create","properties"],select2:{allowClear:!1},disabled:function(e){return!e.isNew()},transform:function(){var e=this,t=e.field.get("schema_node"),n=s.NodeListByNameControl.prototype.defaults.transform.apply(this,arguments);return n.unshift({label:"CURRENT_USER",value:"CURRENT_USER",image:"icon-"+t.type},{label:"PUBLIC",value:"PUBLIC",image:"icon-"+t.type}),n}},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]}]})})),i.Nodes["coll-user_mapping"]}.apply(t,a))||(e.exports=o)},79487:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=n(77077),l=n(40345),s=(i=n(35626))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(5547),n(63563)],void 0===(o=function(e,t,n,a,o,i,c){return i.Nodes["coll-foreign_data_wrapper"]||(i.Nodes["coll-foreign_data_wrapper"]=i.Collection.extend({node:"foreign_data_wrapper",label:e("Foreign Data Wrappers"),type:"coll-foreign_data_wrapper",columns:["name","fdwowner","description"]})),i.Nodes.foreign_data_wrapper||(i.Nodes.foreign_data_wrapper=i.Node.extend({parent_type:"database",type:"foreign_data_wrapper",sqlAlterHelp:"sql-alterforeigndatawrapper.html",sqlCreateHelp:"sql-createforeigndatawrapper.html",dialogHelp:t("help.static",{filename:"foreign_data_wrapper_dialog.html"}),label:e("Foreign Data Wrapper"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_foreign_data_wrapper_on_coll",node:"coll-foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"}},{name:"create_foreign_data_wrapper",node:"foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"}},{name:"create_foreign_data_wrapper",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"},enable:i.Nodes.database.is_conn_allow}]))},getSchema:function(e,t){var n=this;return new s.default((function(a){return(0,l.getNodePrivilegeRoleSchema)(n,e,t,a)}),{role:function(){return(0,r.getNodeListByName)("role",e,t)},fdwhan:function(){return(0,r.getNodeAjaxOptions)("get_handlers",n,e,t)},fdwvalue:function(){return(0,r.getNodeAjaxOptions)("get_validators",n,e,t)}},{fdwowner:i.serverInfo[e.server._id].user.name})},model:i.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var o=i.serverInfo[t.node_info.server._id].user;this.set({fdwowner:o.name},{silent:!0})}i.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",readonly:function(){return"edit"==this.mode}},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"fdwowner",label:e("Owner"),type:"text",control:c.NodeListByNameControl,node:"role",mode:["edit","create","properties"],select2:{allowClear:!1}},{id:"description",label:e("Comment"),cell:"string",type:"multiline"}]})})),i.Nodes.foreign_data_wrapper}.apply(t,a))||(e.exports=o)},9603:(e,t,n)=>{"use strict";var a,o;n(68309);var i=n(77077),r=c(n(80861)),l=n(40345),s=c(n(96486));function c(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(55112),n(33883),n(12030),n(5547),n(63563)],void 0===(o=function(e,t,n,a,o,c){return o.Nodes["coll-language"]||(o.Nodes["coll-language"]=o.Collection.extend({node:"language",label:e("Languages"),type:"coll-language",columns:["name","lanowner","description"]})),o.Nodes.language||(o.Nodes.language=o.Node.extend({parent_type:"database",type:"language",sqlAlterHelp:"sql-alterlanguage.html",sqlCreateHelp:"sql-createlanguage.html",dialogHelp:t("help.static",{filename:"language_dialog.html"}),label:e("Language"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_language_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"},enable:o.Nodes.database.is_conn_allow},{name:"create_language_on_coll",node:"coll-language",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"}},{name:"create_language",node:"language",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"}}]))},model:o.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===s.default.size(e);if(n){var a=o.serverInfo[t.node_info.server._id].user;this.set({lanowner:a.name},{silent:!0})}o.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),type:"text",mode:["properties"]},{id:"oid",label:e("OID"),cell:"string",mode:["properties"],type:"text"},{id:"lanowner",label:e("Owner"),type:"text",control:c.NodeListByNameControl,node:"role",mode:["edit","properties","create"],select2:{allowClear:!1}},{id:"description",label:e("Comment"),cell:"string",type:"multiline"}]}),getSchema:function(e,t){var n=this;return new r.default((function(a){return(0,l.getNodePrivilegeRoleSchema)(n,e,t,a)}),{lan_functions:function(){return(0,i.getNodeAjaxOptions)("get_functions",n,e,t)},templates_data:function(){return(0,i.getNodeAjaxOptions)("get_templates",n,e,t)},role:function(){return(0,i.getNodeListByName)("role",e,t)}},{node_info:e.server})}})),o.Nodes["coll-language"]}.apply(t,a))||(e.exports=o)},55520:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=n(77077),l=(i=n(78047))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(5547),n(63563)],void 0===(o=function(e,t,n,a,o,i,s){return i.Nodes["coll-publication"]||(i.Nodes["coll-publication"]=i.Collection.extend({node:"publication",label:e("Publications"),type:"coll-publication",columns:["name","pubowner","pubtable","all_table"]})),i.Nodes.publication||(i.Nodes.publication=i.Node.extend({parent_type:"database",type:"publication",sqlAlterHelp:"sql-alterpublication.html",sqlCreateHelp:"sql-createpublication.html",dialogHelp:t("help.static",{filename:"publication_dialog.html"}),label:e("Publication"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_publication_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),icon:"wcTabIcon icon-publication",data:{action:"create"},enable:i.Nodes.database.canCreate},{name:"create_publication_on_coll",node:"coll-publication",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),icon:"wcTabIcon icon-publication",data:{action:"create"}},{name:"create_publication",node:"publication",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),icon:"wcTabIcon icon-publication",data:{action:"create"}}]))},model:i.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var o=i.serverInfo[t.node_info.server._id].user;this.set({pubowner:o.name},{silent:!0})}i.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),type:"text",mode:["properties","create","edit"],visible:function(){return!a.isUndefined(this.node_info)&&!a.isUndefined(this.node_info.server)&&!a.isUndefined(this.node_info.server.version)&&this.node_info.server.version>=1e5}},{id:"oid",label:e("OID"),cell:"string",mode:["properties"],type:"text"},{id:"pubowner",label:e("Owner"),type:"text",control:s.NodeListByNameControl,node:"role",disabled:function(e){return!!e.isNew()},mode:["edit","properties","create"],select2:{allowClear:!1}},{id:"all_table",label:e("All tables?"),type:"switch",group:e("Definition"),mode:["edit","properties","create"],deps:["name"],readonly:function(e){return!e.isNew()}},{id:"pubtable",label:e("Tables"),type:"text",group:e("Definition"),mode:["properties"]}],sessChanged:function(){return(""!=this.sessAttrs.pubtable||""!=this.origSessAttrs.pubtable)&&i.DataModel.prototype.sessChanged.apply(this)},canCreate:function(e,t){var n=i.tree.getTreeNodeHierarchy(t).server;return!(n&&n.version<1e5)}}),getSchema:function(e,t){var n=this;return new l.default({publicationTable:function(){return(0,r.getNodeAjaxOptions)("get_tables",n,e,t)},role:function(){return(0,r.getNodeListByName)("role",e,t)}},{node_info:e.server})}})),i.Nodes["coll-publication"]}.apply(t,a))||(e.exports=o)},86048:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=(i=n(51698))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(94405),n(5547)],void 0===(o=function(e,t,n,a,o,i,l){return i.Nodes["coll-aggregate"]||(o.Browser.Nodes["coll-aggregate"]=o.Browser.Collection.extend({node:"aggregate",label:e("Aggregates"),type:"coll-aggregate",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1})),i.Nodes.aggregate||(o.Browser.Nodes.aggregate=l.SchemaChildNode.extend({type:"aggregate",sqlAlterHelp:"sql-alteraggregate.html",sqlCreateHelp:"sql-createaggregate.html",label:e("Aggregate"),collection_type:"coll-aggregate",hasSQL:!0,hasDepends:!1,canDrop:!1,canDropCascade:!1,Init:function(){this.initialized||(this.initialized=!0)},model:o.Browser.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var r=i.serverInfo[t.node_info.server._id].user,l=t.node_info.schema;this.set({owner:r.name},{silent:!0}),this.set({schema:l._label},{silent:!0})}o.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Aggregate"),cell:"string",type:"text",mode:["properties","create","edit"]},{id:"owner",label:e("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],control:"node-list-by-name",node:"role"},{id:"description",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"]}]}),getSchema:function(){return new r.default}})),i.Nodes.aggregate}.apply(t,a))||(e.exports=o)},79099:(e,t,n)=>{"use strict";var a,o,i,r=(i=n(96132))&&i.__esModule?i:{default:i};a=[n(91669),n(19755),n(81311),n(55112),n(33883),n(5547)],void 0===(o=function(e,t,n,a,o){return o.Nodes["coll-catalog_object_column"]||(a.Browser.Nodes["coll-catalog_object_column"]=a.Browser.Collection.extend({node:"catalog_object_column",label:e("catalog_object_column"),type:"coll-catalog_object_column",columns:["attname","attnum","cltype","description"],canDrop:!1,canDropCascade:!1})),o.Nodes.catalog_object_column||(a.Browser.Nodes.catalog_object_column=a.Browser.Node.extend({parent_type:"catalog_object",type:"catalog_object_column",label:e("catalog_object_column"),hasSQL:!1,hasScriptTypes:[],hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(){return new r.default},model:a.Browser.Node.Model.extend({defaults:{attname:void 0,attowner:void 0,atttypid:void 0,attnum:void 0,cltype:void 0,collspcname:void 0,attacl:void 0,is_sys_obj:void 0,description:void 0},schema:[{id:"attname",label:e("Column"),cell:"string",type:"text",readonly:!0},{id:"attnum",label:e("Position"),cell:"string",type:"text",readonly:!0},{id:"cltype",label:e("Data type"),cell:"string",group:e("Definition"),type:"text",readonly:!0},{id:"description",label:e("Comment"),cell:"string",type:"multiline",readonly:!0}]})})),o.Nodes.catalog_object_column}.apply(t,a))||(e.exports=o)},82319:(e,t,n)=>{"use strict";var a,o,i,r=(i=n(40718))&&i.__esModule?i:{default:i};a=[n(91669),n(19755),n(81311),n(55112),n(33883),n(5547)],void 0===(o=function(e,t,n,a,o){return o.Nodes["coll-catalog_object"]||(a.Browser.Nodes["coll-catalog_object"]=a.Browser.Collection.extend({node:"catalog_object",label:e("Catalog Objects"),type:"coll-catalog_object",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1})),o.Nodes.catalog_object||(a.Browser.Nodes.catalog_object=a.Browser.Node.extend({parent_type:"catalog",type:"catalog_object",label:e("Catalog Object"),hasSQL:!1,hasScriptTypes:[],hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(){return new r.default},model:a.Browser.Node.Model.extend({defaults:{name:void 0,namespaceowner:void 0,nspacl:void 0,description:void 0},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",readonly:!0},{id:"oid",label:e("OID"),cell:"string",type:"text"},{id:"owner",label:e("Owner"),cell:"string",type:"text",readonly:!0},{id:"description",label:e("Comment"),cell:"string",type:"multiline",readonly:!0}]})})),o.Nodes.catalog_object}.apply(t,a))||(e.exports=o)},78030:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=(i=n(6624))&&i.__esModule?i:{default:i},l=n(77077);a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(94405),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,s,c){return i.Nodes["coll-collation"]||(o.Browser.Nodes["coll-collation"]=o.Browser.Collection.extend({node:"collation",label:e("Collations"),type:"coll-collation",columns:["name","owner","description"],canDrop:c.isTreeItemOfChildOfSchema,canDropCascade:c.isTreeItemOfChildOfSchema})),i.Nodes.collation||(o.Browser.Nodes.collation=s.SchemaChildNode.extend({type:"collation",sqlAlterHelp:"sql-altercollation.html",sqlCreateHelp:"sql-createcollation.html",dialogHelp:t("help.static",{filename:"collation_dialog.html"}),label:e("Collation"),collection_type:"coll-collation",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_collation_on_coll",node:"coll-collation",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_collation",node:"collation",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_collation",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:!1},enable:"canCreate"}]))},model:o.Browser.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var r=i.serverInfo[t.node_info.server._id].user,l=t.node_info.schema;this.set({owner:r.name},{silent:!0}),this.set({schema:l._label},{silent:!0})}o.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"inSchema"},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:e("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"inSchema",control:"node-list-by-name",node:"role"},{id:"description",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"}]}),getSchema:function(e,t){var n=o.Browser.Nodes.collation;return new r.default({rolesList:function(){return(0,l.getNodeListByName)("role",e,t,{cacheLevel:"server"})},schemaList:function(){return(0,l.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},collationsList:function(){return(0,l.getNodeAjaxOptions)("get_collations",n,e,t,{cacheLevel:"server"})}},{owner:i.serverInfo[e.server._id].user.name,schema:"schema"in e?e.schema.label:""})}})),i.Nodes.collation}.apply(t,a))||(e.exports=o)},14767:(e,t,n)=>{"use strict";var a,o;n(15306),n(74916);var i,r=(i=n(37055))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,l){return i.Nodes["coll-domain_constraints"]||(o.Browser.Nodes["coll-domain_constraints"]=o.Browser.Collection.extend({node:"domain_constraints",label:e("Domain Constraints"),type:"coll-domain_constraints",columns:["name","description"],canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:!1})),i.Nodes.domain_constraints||(o.Browser.Nodes.domain_constraints=i.Node.extend({type:"domain_constraints",sqlAlterHelp:"sql-alterdomain.html",sqlCreateHelp:"sql-alterdomain.html",dialogHelp:t("help.static",{filename:"domain_constraint_dialog.html"}),label:e("Domain Constraints"),collection_type:"coll-domain_constraints",hasSQL:!0,hasDepends:!0,parent_type:["domain"],Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_domain_on_coll",node:"coll-domain_constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain_constraints",node:"domain_constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain_constraints",node:"domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:!1},enable:"canCreate"}]))},canDrop:l.isTreeItemOfChildOfSchema,getSchema:function(){return new r.default},model:o.Browser.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),type:"text",cell:"string"},{id:"description",label:e("Comment"),type:"multiline",cell:"string",mode:["properties","create","edit"],min_version:90500}],validate:function(){var t,n={};return(a.isUndefined(this.get("name"))||""==String(this.get("name")).replace(/^\s+|\s+$/g,""))&&(n.name=e("Name cannot be empty."),t=n.name),(a.isUndefined(this.get("consrc"))||""==String(this.get("consrc")).replace(/^\s+|\s+$/g,""))&&(n.consrc=e("Check cannot be empty."),t=t||n.consrc),this.errorModel.clear().set(n),a.size(n)?(this.trigger("on-status",{msg:t}),t):null}})})),i.Nodes.domain}.apply(t,a))||(e.exports=o)},87091:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=n(77077),l=(i=n(97570))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55112),n(33883),n(12030),n(71158),n(94405),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,s,c,d,p,u){return s.Nodes["coll-domain"]||(s.Nodes["coll-domain"]=s.Collection.extend({node:"domain",label:e("Domains"),type:"coll-domain",columns:["name","owner","description"],canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema})),s.Nodes.domain||(s.Nodes.domain=p.SchemaChildNode.extend({type:"domain",sqlAlterHelp:"sql-alterdomain.html",sqlCreateHelp:"sql-createdomain.html",dialogHelp:t("help.static",{filename:"domain_dialog.html"}),label:e("Domain"),collection_type:"coll-domain",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,s.add_menus([{name:"create_domain_on_coll",node:"coll-domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain",node:"domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var n=this;return new l.default({role:function(){return(0,r.getNodeListByName)("role",e,t)},schema:function(){return(0,r.getNodeListByName)("schema",e,t,{cacheLevel:"database",cacheNode:"database"})},basetype:function(){return(0,r.getNodeAjaxOptions)("get_types",n,e,t,{cacheNode:"type"})},collation:function(){return(0,r.getNodeAjaxOptions)("get_collations",n,e,t,{cacheLevel:"database",cacheNode:"schema"})}},{owner:s.serverInfo[e.server._id].user.name,schema:t.label,basensp:t.label})},model:s.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var o=t.node_info.schema.label;this.set({basensp:o},{silent:!0});var i=s.serverInfo[t.node_info.server._id].user;this.set({owner:i.name},{silent:!0})}s.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties","create","edit"]},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:e("Owner"),cell:"string",control:c.NodeListByNameControl,node:"role",type:"text",mode:["edit","create","properties"]},{id:"description",label:e("Comment"),cell:"string",type:"multiline"}]})})),s.Nodes.domain}.apply(t,a))||(e.exports=o)},42654:(e,t,n)=>{"use strict";var a,o;n(15306),n(74916),n(32564),n(5735),n(83753),n(23123),n(69600),n(91058),n(68309);var i,r=n(77077),l=n(14511),s=n(40345),c=(i=n(49289))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55112),n(33883),n(12030),n(71158),n(94405),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,d,p,u,m,f){d.Nodes["coll-foreign_table"]||(d.Nodes["coll-foreign_table"]=d.Collection.extend({node:"foreign_table",label:e("Foreign Tables"),type:"coll-foreign_table",columns:["name","owner","description"],canDrop:f.isTreeItemOfChildOfSchema,canDropCascade:f.isTreeItemOfChildOfSchema}));var h=d.Node.Model.extend({idAttribute:"option",defaults:{option:void 0,value:void 0},schema:[{id:"option",label:e("Option"),type:"text",editable:!0,cellHeaderClasses:"width_percent_30"},{id:"value",label:e("Value"),type:"text",editable:!0,cellHeaderClasses:"width_percent_50"}],validate:function(){if(a.isUndefined(this.get("value"))||a.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var e="Please enter a value.";return this.errorModel.set("value",e),e}return this.errorModel.unset("value"),null}}),b=d.Node.Model.extend({idAttribute:"attnum",defaults:{attname:void 0,datatype:void 0,typlen:void 0,precision:void 0,typdefault:void 0,attnotnull:void 0,collname:void 0,attnum:void 0,inheritedfrom:void 0,inheritedid:void 0,attstattarget:void 0,coloptions:[]},type_options:void 0,schema:[{id:"attname",label:e("Name"),cell:"string",type:"text",editable:"is_editable_column",cellHeaderClasses:"width_percent_40"},{id:"datatype",label:e("Data type"),cell:"node-ajax-options",control:"node-ajax-options",type:"text",url:"get_types",editable:"is_editable_column",cellHeaderClasses:"width_percent_0",group:e("Definition"),transform:function(e,t){return t.model.type_options=e,e}},{id:"typlen",label:e("Length"),cell:"string",group:e("Definition"),type:"int",deps:["datatype"],disabled:function(e){var t=e.get("typlen");if(!(a.isUndefined(e.get("inheritedid"))||a.isNull(e.get("inheritedid"))||a.isUndefined(e.get("inheritedfrom"))||a.isNull(e.get("inheritedfrom"))))return a.isUndefined(t)||setTimeout((function(){e.set("typlen",void 0)}),10),!0;var n=e.get("datatype"),o=!1;return e.type_options?(e.set("is_tlength",!1,{silent:!0}),a.each(e.type_options,(function(t){n==t.value&&t.length&&(o=!0,e.set("is_tlength",!0,{silent:!0}),e.set("min_val",t.min_val,{silent:!0}),e.set("max_val",t.max_val,{silent:!0}))})),o||a.isUndefined(t)||setTimeout((function(){e.set("typlen",void 0)}),10),!e.get("is_tlength")):(o||a.isUndefined(t)||setTimeout((function(){e.set("typlen",void 0)}),10),!0)},cellHeaderClasses:"width_percent_10"},{id:"precision",label:e("Precision"),type:"int",deps:["datatype"],cell:"string",group:e("Definition"),disabled:function(e){var t=e.get("precision");if(!(a.isUndefined(e.get("inheritedid"))||a.isNull(e.get("inheritedid"))||a.isUndefined(e.get("inheritedfrom"))||a.isNull(e.get("inheritedfrom"))))return a.isUndefined(t)||setTimeout((function(){e.set("precision",void 0)}),10),!0;var n=e.get("datatype"),o=!1;return e.type_options?(e.set("is_precision",!1,{silent:!0}),a.each(e.type_options,(function(t){n==t.value&&t.precision&&(o=!0,e.set("is_precision",!0,{silent:!0}),e.set("min_val",t.min_val,{silent:!0}),e.set("max_val",t.max_val,{silent:!0}))})),o||a.isUndefined(t)||setTimeout((function(){e.set("precision",void 0)}),10),!e.get("is_precision")):(o||a.isUndefined(t)||setTimeout((function(){e.set("precision",void 0)}),10),!0)},cellHeaderClasses:"width_percent_10"},{id:"typdefault",label:e("Default"),type:"text",cell:"string",min_version:90300,group:e("Definition"),placeholder:e("Enter an expression or a value."),cellHeaderClasses:"width_percent_10",editable:function(e){return!!(a.isUndefined(e.get("inheritedid"))||a.isNull(e.get("inheritedid"))||a.isUndefined(e.get("inheritedfrom"))||a.isNull(e.get("inheritedfrom")))&&!(this.get("node_info").server.version<90300)}},{id:"attnotnull",label:e("Not NULL?"),cell:"boolean",type:"switch",editable:"is_editable_column",cellHeaderClasses:"width_percent_10",group:e("Definition")},{id:"attstattarget",label:e("Statistics"),min_version:90200,cell:"integer",type:"int",group:e("Definition"),editable:function(e){return!a.isUndefined(e.isNew)&&!e.isNew()&&(!(this.get("node_info").server.version<90200)&&!!(a.isUndefined(e.get("inheritedid"))||a.isNull(e.get("inheritedid"))||a.isUndefined(e.get("inheritedfrom"))||a.isNull(e.get("inheritedfrom"))))},cellHeaderClasses:"width_percent_10"},{id:"collname",label:e("Collation"),cell:"node-ajax-options",control:"node-ajax-options",type:"text",url:"get_collations",min_version:90300,editable:function(e){return!(!a.isUndefined(e.isNew)&&!e.isNew())&&!!(a.isUndefined(e.get("inheritedid"))||a.isNull(e.get("inheritedid"))||a.isUndefined(e.get("inheritedfrom"))||a.isNull(e.get("inheritedfrom")))},cellHeaderClasses:"width_percent_20",group:e("Definition")},{id:"attnum",cell:"string",type:"text",visible:!1},{id:"inheritedfrom",label:e("Inherited From"),cell:"string",type:"text",visible:!1,mode:["properties","edit"],cellHeaderClasses:"width_percent_10"},{id:"coloptions",label:e("Options"),cell:"string",type:"collection",group:e("Options"),mode:["edit","create"],model:h,canAdd:!0,canDelete:!0,canEdit:!1,control:p.UniqueColCollectionControl,uniqueCol:["option"],min_version:90200}],validate:function(){var t=null;return a.isUndefined(this.get("attname"))||""==String(this.get("attname")).replace(/^\s+|\s+$/g,"")?(t=e("Column Name cannot be empty."),this.errorModel.set("attname",t)):this.errorModel.unset("attname"),a.isUndefined(this.get("datatype"))||""==String(this.get("datatype")).replace(/^\s+|\s+$/g,"")?(t=e("Column Datatype cannot be empty."),this.errorModel.set("datatype",t)):this.errorModel.unset("datatype"),t},is_editable_column:function(e){return!!(a.isUndefined(e.get("inheritedid"))||a.isNull(e.get("inheritedid"))||a.isUndefined(e.get("inheritedfrom"))||a.isNull(e.get("inheritedfrom")))},toJSON:o.Model.prototype.toJSON}),g=p.NodeAjaxOptionsControl.extend({onChange:function(){var e=this.model,t=this.field.get("name").split("."),n=t.shift(),i=t.join("."),r=this.getValueFromDOM(),l={},s=e.get("columns"),c=e.get(n);if(this.model.errorModel instanceof o.Model)if(a.isEmpty(i))this.model.errorModel.unset(n);else{var d=this.model.errorModel.get(n);d&&(this.keyPathSetter(d,i,null),this.model.errorModel.set(n,d))}var p=this;if("string"==typeof c&&(c=JSON.parse(c)),a.size(r)<a.size(c)){var u=a.difference(c,r),m=s.where({inheritedid:parseInt(u[0])});s.remove(m)}else a.each(r,(function(e){var t=s.where({inheritedid:parseInt(e)});if(t&&t.length<=0){var n=p.fetchColumns(e);s.add(n)}}));l[n]=a.isEmpty(i)?r:a.clone(e.get(n))||{},this.stopListening(this.model,"change:"+n,this.render),e.set(l),this.listenTo(this.model,"change:"+n,this.render)},fetchColumns:function(e){var t=this,a="get_columns",o=t.model.top||t.model,i=this.field.get("schema_node"),r=this.field.get("node_info"),l=i.generate_url.apply(i,[null,a,this.field.get("node_data"),this.field.get("url_with_id")||!1,r]),s=this.field.get("cache_level")||i.type,c=this.field.get("cache_node");c=c&&d.Nodes.cache_node||i,o.trigger("pgadmin:view:fetching",o,t.field);var p={attrelid:e};return n.ajax({async:!1,url:l,data:p}).done((function(e){p=c.cache(a,r,s,e.data)})).fail((function(){o.trigger("pgadmin:view:fetch:error",o,t.field)})),o.trigger("pgadmin:view:fetched",o,t.field),p=p&&p.data||[]}}),_=d.Node.Model.extend({idAttribute:"conoid",initialize:function(e){var t=0===a.size(e);t||(this.convalidated_default=this.get("convalidated")),d.Node.Model.prototype.initialize.apply(this,arguments)},defaults:{conoid:void 0,conname:void 0,consrc:void 0,connoinherit:void 0,convalidated:!0,conislocal:void 0},convalidated_default:!0,schema:[{id:"conoid",type:"text",cell:"string",visible:!1},{id:"conname",label:e("Name"),type:"text",cell:"string",editable:"is_editable",cellHeaderClasses:"width_percent_30"},{id:"consrc",label:e("Check"),type:"multiline",editable:"is_editable",cell:u.Extension.TextareaCell,cellHeaderClasses:"width_percent_30"},{id:"connoinherit",label:e("No inherit?"),type:"switch",cell:"boolean",editable:"is_editable",cellHeaderClasses:"width_percent_20"},{id:"convalidated",label:e("Validate?"),type:"switch",cell:"boolean",cellHeaderClasses:"width_percent_20",editable:function(e){return!!a.isUndefined(e.isNew)||(!!e.isNew()||(!e.get("convalidated")||!e.convalidated_default))}}],validate:function(){var t,n={};return(a.isUndefined(this.get("conname"))||""==String(this.get("conname")).replace(/^\s+|\s+$/g,""))&&(n.conname=e("Constraint Name cannot be empty."),t=n.conname),(a.isUndefined(this.get("consrc"))||""==String(this.get("consrc")).replace(/^\s+|\s+$/g,""))&&(n.consrc=e("Constraint Check cannot be empty."),t=t||n.consrc),this.errorModel.clear().set(n),t},is_editable:function(e){return!!a.isUndefined(e.isNew)||e.isNew()},toJSON:o.Model.prototype.toJSON}),y=d.Node.Model.extend({defaults:{option:void 0,value:void 0},schema:[{id:"option",label:e("Option"),cell:"string",type:"text",editable:!0,cellHeaderClasses:"width_percent_50"},{id:"value",label:e("Value"),cell:"string",type:"text",editable:!0,cellHeaderClasses:"width_percent_50"}],validate:function(){},toJSON:o.Model.prototype.toJSON});return d.Nodes.foreign_table||(d.Nodes.foreign_table=m.SchemaChildNode.extend({type:"foreign_table",sqlAlterHelp:"sql-alterforeigntable.html",sqlCreateHelp:"sql-createforeigntable.html",dialogHelp:t("help.static",{filename:"foreign_table_dialog.html"}),label:e("Foreign Table"),collection_type:"coll-foreign_table",hasSQL:!0,hasDepends:!0,width:d.stdW.md+"px",hasScriptTypes:["create","select","insert","update","delete"],parent_type:["schema"],Init:function(){this.initialized||(this.initialized=!0,d.add_menus([{name:"create_foreign_table_on_coll",node:"coll-foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_foreign_table",node:"foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_foreign_table",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var n=this;return new c.default((function(n){return(0,s.getNodePrivilegeRoleSchema)("",e,t,n)}),(function(){return(0,l.getNodeVariableSchema)(n,e,t,!1,!1)}),(function(n){return(0,r.getNodeAjaxOptions)("get_columns",d.Nodes.foreign_table,e,t,{urlParams:n,useCache:!1})}),{role:function(){return(0,r.getNodeListByName)("role",e,t)},schema:function(){return(0,r.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},foreignServers:function(){return(0,r.getNodeAjaxOptions)("get_foreign_servers",n,e,t,{cacheLevel:"database"},(function(e){return a.reject(e,(function(e){return""==e.label||null==e.label}))}))},tables:function(){return(0,r.getNodeAjaxOptions)("get_tables",n,e,t,{cacheLevel:"database"})},nodeInfo:e,nodeData:t,pgBrowser:d},{owner:d.serverInfo[e.server._id].user.name,basensp:e.schema?e.schema.label:""})},model:d.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var o=t.node_info.schema._label,i=d.serverInfo[t.node_info.server._id].user;this.set({basensp:o,owner:i.name},{silent:!0})}d.Node.Model.prototype.initialize.apply(this,arguments)},defaults:{name:void 0,oid:void 0,owner:void 0,basensp:void 0,is_sys_obj:void 0,description:void 0,ftsrvname:void 0,strftoptions:void 0,inherits:[],columns:[],constraints:[],ftoptions:[],relacl:[],stracl:[],seclabels:[]},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties","create","edit"]},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:e("Owner"),cell:"string",control:p.NodeListByNameControl,node:"role",type:"text",select2:{allowClear:!1}},{id:"basensp",label:e("Schema"),cell:"node-list-by-name",control:"node-list-by-name",cache_level:"database",type:"text",node:"schema",mode:["create","edit"]},{id:"is_sys_obj",label:e("System foreign table?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:e("Comment"),cell:"string",type:"multiline"},{id:"ftsrvname",label:e("Foreign server"),cell:"string",control:"node-ajax-options",type:"text",group:e("Definition"),url:"get_foreign_servers",readonly:function(e){return!e.isNew()},cache_node:"database"},{id:"inherits",label:e("Inherits"),group:e("Definition"),type:"array",min_version:90500,control:g,url:"get_tables",select2:{multiple:!0},cache_level:"database",transform:function(e){if("edit"==this.field.get("mode")){var t=this.model.get("oid"),n=a.findWhere(e,{id:t});n&&(e=a.reject(e,n))}return e}},{id:"columns",label:e("Columns"),cell:"string",type:"collection",group:e("Columns"),mode:["edit","create"],model:b,canAdd:!0,canDelete:!0,canEdit:!0,columns:["attname","datatype","inheritedfrom"],canDeleteRow:function(e){return!!(a.isUndefined(e.get("inheritedid"))||a.isNull(e.get("inheritedid"))||a.isUndefined(e.get("inheritedfrom"))||a.isNull(e.get("inheritedfrom")))},canEditRow:function(e){return!!(a.isUndefined(e.get("inheritedid"))||a.isNull(e.get("inheritedid"))||a.isUndefined(e.get("inheritedfrom"))||a.isNull(e.get("inheritedfrom")))}},{id:"constraints",label:e("Constraints"),cell:"string",type:"collection",group:e("Constraints"),mode:["edit","create"],model:_,canAdd:!0,canDelete:!0,columns:["conname","consrc","connoinherit","convalidated"],canEdit:function(e){return!(e instanceof o.Model&&e instanceof _)||e.isNew()},min_version:90500,canDeleteRow:function(e){return!(1!=e.get("conislocal")&&!a.isUndefined(e.get("conislocal")))}},{id:"strftoptions",label:e("Options"),cell:"string",type:"text",group:e("Definition"),mode:["properties"]},{id:"ftoptions",label:e("Options"),cell:"string",type:"collection",group:e("Options"),mode:["edit","create"],model:y,canAdd:!0,canDelete:!0,canEdit:!1,control:"unique-col-collection",uniqueCol:["option"]},{id:"relacl",label:e("Privileges"),cell:"string",type:"text",group:e("Security"),mode:["properties"],min_version:90200},d.SecurityGroupSchema,{id:"acl",label:e("Privileges"),model:i.Browser.Node.PrivilegeRoleModel.extend({privileges:["a","r","w","x"]}),uniqueCol:["grantee","grantor"],editable:!1,type:"collection",group:"security",mode:["edit","create"],canAdd:!0,canDelete:!0,control:"unique-col-collection",min_version:90200},{id:"seclabels",label:e("Security labels"),model:d.SecLabelModel,type:"collection",group:"security",mode:["edit","create"],min_version:90100,canAdd:!0,canEdit:!1,canDelete:!0,control:"unique-col-collection",uniqueCol:["provider"]}],validate:function(){var t={},n=null;return(a.isUndefined(this.get("name"))||""==String(this.get("name")).replace(/^\s+|\s+$/g,""))&&(t.name=e("Name cannot be empty."),n=t.name),(a.isUndefined(this.get("basensp"))||""==String(this.get("basensp")).replace(/^\s+|\s+$/g,""))&&(t.basensp=e("Schema cannot be empty."),n=n||t.basensp),(a.isUndefined(this.get("ftsrvname"))||""==String(this.get("ftsrvname")).replace(/^\s+|\s+$/g,""))&&(t.ftsrvname=e("Foreign server cannot be empty."),n=n||t.ftsrvname),this.errorModel.clear().set(t),n}})})),d.Nodes.foreign_table}.apply(t,a))||(e.exports=o)},17195:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=n(77077),l=(i=n(22265))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55112),n(33883),n(12030),n(71158),n(94405),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,s,c,d,p,u){return s.Nodes["coll-fts_configuration"]||(i.Browser.Nodes["coll-fts_configuration"]=i.Browser.Collection.extend({node:"fts_configuration",label:e("FTS Configurations"),type:"coll-fts_configuration",columns:["name","description"],canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema})),s.Nodes.fts_configuration||(i.Browser.Nodes.fts_configuration=p.SchemaChildNode.extend({type:"fts_configuration",sqlAlterHelp:"sql-altertsconfig.html",sqlCreateHelp:"sql-createtsconfig.html",dialogHelp:t("help.static",{filename:"fts_configuration_dialog.html"}),label:e("FTS Configuration"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,s.add_menus([{name:"create_fts_configuration_on_schema",node:"schema",module:this,category:"create",priority:4,applies:["object","context"],callback:"show_obj_properties",label:e("FTS Configuration..."),icon:"wcTabIcon icon-fts_configuration",data:{action:"create"},enable:"canCreate"},{name:"create_fts_configuration_on_coll",module:this,priority:4,node:"coll-fts_configuration",applies:["object","context"],callback:"show_obj_properties",category:"create",label:e("FTS Configuration..."),data:{action:"create"},icon:"wcTabIcon icon-fts_configuration",enable:"canCreate"},{name:"create_fts_configuration",node:"fts_configuration",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Configuration..."),data:{action:"create"},icon:"wcTabIcon icon-fts_configuration",enable:"canCreate"}]))},getSchema:function(e,t){var n=this;return new l.default({role:function(){return(0,r.getNodeListByName)("role",e,t)},schema:function(){return(0,r.getNodeListById)(s.Nodes.schema,e,t)},parsers:function(){return(0,r.getNodeAjaxOptions)("parsers",n,e,t)},copyConfig:function(){return(0,r.getNodeAjaxOptions)("copyConfig",n,e,t)},tokens:function(){return(0,r.getNodeAjaxOptions)("tokens",n,e,t,{urlWithId:!0})},dictionaries:function(){return(0,r.getNodeAjaxOptions)("dictionaries",n,e,t,{cacheLevel:"fts_configuration",cacheNode:"fts_configuration"})}},{owner:s.serverInfo[e.server._id].user.name,schema:t._id})},model:i.Browser.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(i.Browser.Node.Model.prototype.initialize.apply(this,arguments),n){var o=s.serverInfo[t.node_info.server._id].user;this.set({owner:o.name,schema:t.node_info.schema._id},{silent:!0})}},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50"},{id:"description",label:e("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"}]})})),s.Nodes["coll-fts_configuration"]}.apply(t,a))||(e.exports=o)},53794:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=n(77077),l=(i=n(81629))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(94405),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,s,c,d){return i.Nodes["coll-fts_dictionary"]||(o.Browser.Nodes["coll-fts_dictionary"]=o.Browser.Collection.extend({node:"fts_dictionary",label:e("FTS Dictionaries"),type:"coll-fts_dictionary",columns:["name","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})),i.Nodes.fts_dictionary||(o.Browser.Nodes.fts_dictionary=c.SchemaChildNode.extend({type:"fts_dictionary",sqlAlterHelp:"sql-altertsdictionary.html",sqlCreateHelp:"sql-createtsdictionary.html",dialogHelp:t("help.static",{filename:"fts_dictionary_dialog.html"}),label:e("FTS Dictionary"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_fts_dictionary_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Dictionary..."),icon:"wcTabIcon icon-fts_dictionary",data:{action:"create"},enable:"canCreate"},{name:"create_fts_dictionary_on_coll",node:"coll-fts_dictionary",module:this,applies:["object","context"],priority:4,callback:"show_obj_properties",category:"create",label:e("FTS Dictionary..."),data:{action:"create"},icon:"wcTabIcon icon-fts_dictionary",enable:"canCreate"},{name:"create_fts_dictionary",node:"fts_dictionary",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Dictionary..."),icon:"wcTabIcon icon-fts_dictionary",data:{action:"create"},enable:"canCreate"}]))},getSchema:function(e,t){var n=this;return new l.default({role:function(){return(0,r.getNodeListByName)("role",e,t)},schema:function(){return(0,r.getNodeListById)(i.Nodes.schema,e,t)},fts_template:function(){return(0,r.getNodeAjaxOptions)("fetch_templates",n,e,t,{cacheNode:"fts_template"})}},{owner:i.serverInfo[e.server._id].user.name,schema:t._id})},model:o.Browser.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(o.Browser.Node.Model.prototype.initialize.apply(this,arguments),n){var r=i.serverInfo[t.node_info.server._id].user;this.set({owner:r.name,schema:t.node_info.schema._id},{silent:!0})}},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50"},{id:"description",label:e("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"}]})})),i.Nodes.fts_dictionary}.apply(t,a))||(e.exports=o)},92660:(e,t,n)=>{"use strict";var a,o;n(15306),n(74916);var i,r=(i=n(30572))&&i.__esModule?i:{default:i},l=n(77077);a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(94405),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,s,c){return i.Nodes["coll-fts_parser"]||(o.Browser.Nodes["coll-fts_parser"]=o.Browser.Collection.extend({node:"fts_parser",label:e("FTS Parsers"),type:"coll-fts_parser",columns:["name","description"],canDrop:c.isTreeItemOfChildOfSchema,canDropCascade:c.isTreeItemOfChildOfSchema})),i.Nodes.fts_parser||(o.Browser.Nodes.fts_parser=s.SchemaChildNode.extend({type:"fts_parser",sqlAlterHelp:"sql-altertsparser.html",sqlCreateHelp:"sql-createtsparser.html",dialogHelp:t("help.static",{filename:"fts_parser_dialog.html"}),label:e("FTS Parser"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_fts_parser_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},enable:"canCreate"},{name:"create_fts_parser_on_coll",node:"coll-fts_parser",applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},module:this,enable:"canCreate"},{name:"create_fts_parser",node:"fts_parser",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},enable:"canCreate"}]))},model:o.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,is_sys_obj:void 0,description:void 0},initialize:function(e,t){var n=0===a.size(e);o.Browser.Node.Model.prototype.initialize.apply(this,arguments),n&&this.set("schema",t.node_info.schema._id)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50"},{id:"oid",label:e("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]},{id:"description",label:e("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"}],validate:function(){var t,n=this.get("name"),o=this.get("prsstart"),i=this.get("prstoken"),r=this.get("prsend"),l=this.get("prslextype"),s=this.get("schema");return a.isUndefined(n)||a.isNull(n)||""==String(n).replace(/^\s+|\s+$/g,"")?(t=e("Name must be specified."),this.errorModel.set("name",t),t):a.isUndefined(o)||a.isNull(o)||""==String(o).replace(/^\s+|\s+$/g,"")?(t=e("Start function must be selected."),this.errorModel.set("prsstart",t),t):a.isUndefined(i)||a.isNull(i)||""==String(i).replace(/^\s+|\s+$/g,"")?(t=e("Get next token function must be selected."),this.errorModel.set("prstoken",t),t):a.isUndefined(r)||a.isNull(r)||""==String(r).replace(/^\s+|\s+$/g,"")?(t=e("End function must be selected."),this.errorModel.set("prsend",t),t):a.isUndefined(l)||a.isNull(l)||""==String(l).replace(/^\s+|\s+$/g,"")?(t=e("Lextype function must be selected."),this.errorModel.set("prslextype",t),t):a.isUndefined(s)||a.isNull(s)||""==String(s).replace(/^\s+|\s+$/g,"")?(t=e("Schema must be selected."),this.errorModel.set("schema",t),t):(this.errorModel.clear(),this.trigger("on-status-clear"),null)}}),getSchema:function(e,t){var n=o.Browser.Nodes.fts_parser;return new r.default({prsstartList:function(){return(0,l.getNodeAjaxOptions)("start_functions",n,e,t,{cacheLevel:"database"})},prstokenList:function(){return(0,l.getNodeAjaxOptions)("token_functions",n,e,t,{cacheLevel:"database"})},prsendList:function(){return(0,l.getNodeAjaxOptions)("end_functions",n,e,t,{cacheLevel:"database"})},prslextypeList:function(){return(0,l.getNodeAjaxOptions)("lextype_functions",n,e,t,{cacheLevel:"database"})},prsheadlineList:function(){return(0,l.getNodeAjaxOptions)("headline_functions",n,e,t,{cacheLevel:"database"})},schemaList:function(){return(0,l.getNodeListById)(i.Nodes.schema,e,t,{cacheLevel:"database"})}},{schema:e.schema._id})}})),i.Nodes["coll-fts_parser"]}.apply(t,a))||(e.exports=o)},7215:(e,t,n)=>{"use strict";var a,o;n(15306),n(74916);var i,r=(i=n(66023))&&i.__esModule?i:{default:i},l=n(77077);a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(94405),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,s,c){return i.Nodes["coll-fts_template"]||(o.Browser.Nodes["coll-fts_template"]=o.Browser.Collection.extend({node:"fts_template",label:e("FTS Templates"),type:"coll-fts_template",columns:["name","description"],canDrop:c.isTreeItemOfChildOfSchema,canDropCascade:c.isTreeItemOfChildOfSchema})),i.Nodes.fts_template||(o.Browser.Nodes.fts_template=s.SchemaChildNode.extend({type:"fts_template",sqlAlterHelp:"sql-altertstemplate.html",sqlCreateHelp:"sql-createtstemplate.html",dialogHelp:t("help.static",{filename:"fts_template_dialog.html"}),label:e("FTS Template"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_fts_template_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"},{name:"create_fts_template_on_coll",node:"coll-fts_template",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"},{name:"create_fts_template",node:"fts_template",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"}]))},model:o.Browser.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);o.Browser.Node.Model.prototype.initialize.apply(this,arguments),n&&this.set("schema",t.node_info.schema._id)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50"},{id:"oid",label:e("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]},{id:"description",label:e("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"}],validate:function(){var t,n=this.get("name"),o=this.get("tmpllexize"),i=this.get("schema");return a.isUndefined(n)||a.isNull(n)||""==String(n).replace(/^\s+|\s+$/g,"")?(t=e("Name must be specified."),this.errorModel.set("name",t),t):a.isUndefined(o)||a.isNull(o)||""==String(o).replace(/^\s+|\s+$/g,"")?(t=e("Lexize function must be selected."),this.errorModel.set("tmpllexize",t),t):a.isUndefined(i)||a.isNull(i)||""==String(i).replace(/^\s+|\s+$/g,"")?(t=e("Schema must be selected."),this.errorModel.set("schema",t),t):(this.errorModel.clear(),this.trigger("on-status-clear"),null)}}),getSchema:function(e,t){var n=o.Browser.Nodes.fts_template;return new r.default({initFunctionList:function(){return(0,l.getNodeAjaxOptions)("get_init",n,e,t,{cacheLevel:"database"})},lexisFunctionList:function(){return(0,l.getNodeAjaxOptions)("get_lexize",n,e,t,{cacheLevel:"database"})},schemaList:function(){return(0,l.getNodeListById)(i.Nodes.schema,e,t)}},{schema:e.schema._id})}})),i.Nodes.fts_template}.apply(t,a))||(e.exports=o)},40559:(e,t,n)=>{"use strict";var a,o;n(68309);var i=n(77077),r=d(n(55066)),l=n(40345),s=n(14511),c=d(n(96486));function d(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(72316),n(55112),n(33883),n(12030),n(94405),n(56756),n(5547),n(63563)],void 0===(o=function(e,t,n,a,o,d,p,u,m){return d.Nodes["coll-function"]||(d.Nodes["coll-function"]=d.Collection.extend({node:"function",label:e("Functions"),type:"coll-function",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:m.isTreeItemOfChildOfSchema,canDropCascade:m.isTreeItemOfChildOfSchema})),d.Nodes.function||(d.Nodes.function=u.SchemaChildNode.extend({type:"function",sqlAlterHelp:"sql-alterfunction.html",sqlCreateHelp:"sql-createfunction.html",dialogHelp:t("help.static",{filename:"function_dialog.html"}),label:e("Function"),collection_type:"coll-function",hasSQL:!0,hasDepends:!0,width:d.stdW.md+"px",hasStatistics:!0,hasScriptTypes:["create","select"],Init:function(){this.initialized||(this.initialized=!0,d.add_menus([{name:"create_function_on_coll",node:"coll-function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_function",node:"function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_function",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var n=this;return new r.default((function(a){return(0,l.getNodePrivilegeRoleSchema)(n,e,t,a)}),(function(){return(0,s.getNodeVariableSchema)(n,e,t,!1,!1)}),{role:function(){return(0,i.getNodeListByName)("role",e,t)},schema:function(){return(0,i.getNodeListById)(d.Nodes.schema,e,t,{cacheLevel:"database"})},getTypes:function(){return(0,i.getNodeAjaxOptions)("get_types",n,e,t)},getLanguage:function(){return(0,i.getNodeAjaxOptions)("get_languages",n,e,t)},getSupportFunctions:function(){return(0,i.getNodeAjaxOptions)("get_support_functions",n,e,t,{cacheNode:"function"})}},{node_info:e},{type:d.Nodes.function.type},{funcowner:d.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null,lanname:"sql"})},model:d.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===c.default.size(e);if(n){var a=t.node_info.schema._id;this.set({pronamespace:a},{silent:!0});var o=d.serverInfo[t.node_info.server._id].user;this.set({funcowner:o.name},{silent:!0})}d.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"isDisabled"},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:e("Owner"),cell:"string",control:p.NodeListByNameControl,node:"role",type:"text",disabled:"isDisabled"},{id:"pronamespace",label:e("Schema"),cell:"string",control:"node-list-by-id",type:"text",cache_level:"database",node:"schema",disabled:"isDisabled",mode:["create","edit"]}]})})),d.Nodes.function}.apply(t,a))||(e.exports=o)},74119:(e,t,n)=>{"use strict";var a,o;n(68309),n(32564),n(15306),n(74916);var i=n(77077),r=d(n(55066)),l=n(40345),s=n(14511),c=d(n(96486));function d(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(55112),n(33883),n(58307),n(40559),n(94405),n(56756),n(5547),n(63563)],void 0===(o=function(e,t,n,a,o,d,p,u,m){return o.Nodes["coll-procedure"]||(a.Browser.Nodes["coll-procedure"]=a.Browser.Collection.extend({node:"procedure",label:e("Procedures"),type:"coll-procedure",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:m.isTreeItemOfChildOfSchema,canDropCascade:m.isTreeItemOfChildOfSchema})),o.Nodes.procedure||(a.Browser.Nodes.procedure=u.SchemaChildNode.extend({type:"procedure",sqlAlterHelp:"sql-alterprocedure.html",sqlCreateHelp:"sql-createprocedure.html",dialogHelp:t("help.static",{filename:"procedure_dialog.html"}),label:e("Procedure"),collection_type:"coll-procedure",hasSQL:!0,hasDepends:!0,hasStatistics:!0,hasScriptTypes:["create","exec"],width:o.stdW.md+"px",Init:function(){this.proc_initialized||(this.proc_initialized=!0,o.add_menus([{name:"create_procedure_on_coll",node:"coll-procedure",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:!1},enable:"canCreateProc"},{name:"create_procedure",node:"procedure",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:!0},enable:"canCreateProc"},{name:"create_procedure",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:!0},enable:"canCreateProc"}]))},canCreateProc:function(e,t){var n=o.tree.getTreeNodeHierarchy(t);return!("catalog"in n)&&("server"in n&&("ppas"==n.server.server_type||"pg"==n.server.server_type&&n.server.version>=11e4))},getSchema:function(e,t){var n=this;return new r.default((function(a){return(0,l.getNodePrivilegeRoleSchema)(n,e,t,a)}),(function(){return(0,s.getNodeVariableSchema)(n,e,t,!1,!1)}),{role:function(){return(0,i.getNodeListByName)("role",e,t)},schema:function(){return(0,i.getNodeListById)(o.Nodes.schema,e,t,{cacheLevel:"database"})},getTypes:function(){return(0,i.getNodeAjaxOptions)("get_types",n,e,t)},getLanguage:function(){return(0,i.getNodeAjaxOptions)("get_languages",n,e,t)},getSupportFunctions:function(){return(0,i.getNodeAjaxOptions)("get_support_functions",n,e,t,{cacheNode:"function"})}},{node_info:e},{type:o.Nodes.procedure.type},{funcowner:o.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null,lanname:"ppas"!=e.server.server_type?"sql":"edbspl"})},model:p.model.extend({defaults:c.default.extend({},p.model.prototype.defaults,{lanname:"edbspl"}),canVarAdd:function(){return this.node_info.server.version>=90500},isVisible:function(){return"sysfunc"!=this.name&&"sysproc"==this.name},isDisabled:function(e){if(this.node_info&&"catalog"in this.node_info)return!0;switch(this.name){case"provolatile":case"proisstrict":case"procost":case"proleakproof":return(this.node_info.server.version<90500||"ppas"!=this.node_info.server.server_type||"edbspl"!=e.get("lanname"))&&(setTimeout((function(){e.set("provolatile",null),e.set("proisstrict",!1),e.set("procost",null),e.set("proleakproof",!1)}),10),!0);case"variables":case"prosecdef":return this.node_info.server.version<90500;case"prorows":return!(this.node_info.server.version>=90500&&1==e.get("proretset"));case"proparallel":return(this.node_info.server.version<90600||"ppas"!=this.node_info.server.server_type||"edbspl"!=e.get("lanname"))&&(setTimeout((function(){e.set("proparallel",null)}),10),!0);case"lanname":return this.node_info.server.version<11e4;default:return!1}},validate:function(){var t,n={},a=this.get("seclabels");if((c.default.isUndefined(this.get("name"))||""==String(this.get("name")).replace(/^\s+|\s+$/g,""))&&(n.name=e("Name cannot be empty."),t=n.name),(c.default.isUndefined(this.get("pronamespace"))||""==String(this.get("pronamespace")).replace(/^\s+|\s+$/g,""))&&(n.pronamespace=e("Schema cannot be empty."),t=t||n.pronamespace),(c.default.isUndefined(this.get("lanname"))||""==String(this.get("lanname")).replace(/^\s+|\s+$/g,""))&&(n.lanname=e("Language cannot be empty."),t=t||n.lanname),"c"==String(this.get("lanname"))?((c.default.isUndefined(this.get("probin"))||""==String(this.get("probin")).replace(/^\s+|\s+$/g,""))&&(n.probin=e("Object File cannot be empty."),t=t||n.probin),(c.default.isUndefined(this.get("prosrc_c"))||""==String(this.get("prosrc_c")).replace(/^\s+|\s+$/g,""))&&(n.prosrc_c=e("Link Symbol cannot be empty."),t=t||n.prosrc_c)):(c.default.isUndefined(this.get("prosrc"))||""==String(this.get("prosrc")).replace(/^\s+|\s+$/g,""))&&(n.prosrc=e("Code cannot be empty."),t=t||n.prosrc),a)for(var o,i=0;i<a.models.length&&!o;i++)(o=a.models[i].validate.apply(a.models[i]))&&(n.seclabels=o,t=t||o);return this.errorModel.clear().set(n),null}})})),o.Nodes.procedure}.apply(t,a))||(e.exports=o)},69096:(e,t,n)=>{"use strict";var a,o;n(68309),n(15306),n(74916);var i,r=(i=n(37642))&&i.__esModule?i:{default:i},l=n(77077),s=n(14511),c=n(40345);a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(94405),n(56756),n(5547),n(63563)],void 0===(o=function(e,t,n,a,o,i,d,p,u){return i.Nodes["coll-trigger_function"]||(i.Nodes["coll-trigger_function"]=i.Collection.extend({node:"trigger_function",label:e("Trigger functions"),type:"coll-trigger_function",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema})),i.Nodes.trigger_function||(i.Nodes.trigger_function=p.SchemaChildNode.extend({type:"trigger_function",sqlAlterHelp:"plpgsql-trigger.html",sqlCreateHelp:"plpgsql-trigger.html",dialogHelp:t("help.static",{filename:"trigger_function_dialog.html"}),label:e("Trigger function"),collection_type:"coll-trigger_function",canEdit:function(e,t){var n=i.tree.findNodeByDomElement(t);return!(!n||"trigger"===n.parentNode.getData()._type)},hasSQL:!0,showMenu:function(e,t){return this.canEdit(e,t)},hasDepends:!0,hasStatistics:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_trigger_function_on_coll",node:"coll-trigger_function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_function",node:"trigger_function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_function",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var n=this;return new r.default((function(n){return(0,c.getNodePrivilegeRoleSchema)("",e,t,n)}),(function(){return(0,s.getNodeVariableSchema)(n,e,t,!1,!1)}),{role:function(){return(0,l.getNodeListByName)("role",e,t)},schema:function(){return(0,l.getNodeListById)(i.Nodes.schema,e,t,{cacheLevel:"database"})},language:function(){return(0,l.getNodeAjaxOptions)("get_languages",n,e,t,{noCache:!0},(function(e){return a.reject(e,(function(e){return"sql"==e.label||"edbspl"==e.label}))}))},nodeInfo:e},{funcowner:i.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null})},model:i.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var o=t.node_info.schema._id;this.set({pronamespace:o},{silent:!0});var r=i.serverInfo[t.node_info.server._id].user;this.set({funcowner:r.name},{silent:!0})}i.Node.Model.prototype.initialize.apply(this,arguments)},defaults:{name:void 0,oid:void 0,funcowner:void 0,description:void 0},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"isDisabled",readonly:"isReadonly"},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:e("Owner"),cell:"string",control:d.NodeListByNameControl,node:"role",type:"text",disabled:"isDisabled",readonly:"isReadonly"},{id:"description",label:e("Comment"),cell:"string",type:"multiline",disabled:"isDisabled",readonly:"isReadonly"}],validate:function(t){var n,o={},i=this.get("seclabels");if(t&&0==t.length)return this.errorModel.clear(),null;if((a.isUndefined(this.get("name"))||""==String(this.get("name")).replace(/^\s+|\s+$/g,""))&&(o.name=e("Name cannot be empty."),n=o.name),(a.isUndefined(this.get("funcowner"))||""==String(this.get("funcowner")).replace(/^\s+|\s+$/g,""))&&(o.funcowner=e("Owner cannot be empty."),n=n||o.funcowner),(a.isUndefined(this.get("pronamespace"))||""==String(this.get("pronamespace")).replace(/^\s+|\s+$/g,""))&&(o.pronamespace=e("Schema cannot be empty."),n=n||o.pronamespace),(a.isUndefined(this.get("prorettypename"))||""==String(this.get("prorettypename")).replace(/^\s+|\s+$/g,""))&&(o.prorettypename=e("Return type cannot be empty."),n=n||o.prorettypename),(a.isUndefined(this.get("lanname"))||""==String(this.get("lanname")).replace(/^\s+|\s+$/g,""))&&(o.lanname=e("Language cannot be empty."),n=n||o.lanname),"c"==String(this.get("lanname"))?((a.isUndefined(this.get("probin"))||""==String(this.get("probin")).replace(/^\s+|\s+$/g,""))&&(o.probin=e("Object File cannot be empty."),n=n||o.probin),(a.isUndefined(this.get("prosrc_c"))||""==String(this.get("prosrc_c")).replace(/^\s+|\s+$/g,""))&&(o.prosrc_c=e("Link Symbol cannot be empty."),n=n||o.prosrc_c)):(a.isUndefined(this.get("prosrc"))||""==String(this.get("prosrc")).replace(/^\s+|\s+$/g,""))&&(o.prosrc=e("Code cannot be empty."),n=n||o.prosrc),i)for(var r,l=0;l<i.models.length&&!r;l++)(r=i.models[l].validate.apply(i.models[l]))&&(o.seclabels=r,n=n||r);return this.errorModel.clear().set(o),a.size(o)?(this.trigger("on-status",{msg:n}),n):null},isVisible:function(){return"sysproc"!=this.name},isReadonly:function(e){switch(this.name){case"proargs":case"proargtypenames":case"prorettypename":case"proretset":case"proiswindow":return!e.isNew();default:return!1}},isDisabled:function(e){return!(!this.node_info||!("catalog"in this.node_info))||"prorows"===this.name&&1!=e.get("proretset")},canVarAdd:function(){return!(this.node_info&&"catalog"in this.node_info)}})})),i.Nodes.trigger_function}.apply(t,a))||(e.exports=o)},98185:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=(i=n(64916))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(94405),n(5547)],void 0===(o=function(e,t,n,a,o,i,l){return i.Nodes["coll-operator"]||(o.Browser.Nodes["coll-operator"]=o.Browser.Collection.extend({node:"operator",label:e("Operators"),type:"coll-operator",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1})),i.Nodes.operator||(o.Browser.Nodes.operator=l.SchemaChildNode.extend({type:"operator",sqlAlterHelp:"sql-alteroperator.html",sqlCreateHelp:"sql-createoperator.html",label:e("Operator"),collection_type:"coll-operator",hasSQL:!0,hasDepends:!1,canDrop:!1,canDropCascade:!1,Init:function(){this.initialized||(this.initialized=!0)},model:o.Browser.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var r=i.serverInfo[t.node_info.server._id].user,l=t.node_info.schema;this.set({owner:r.name},{silent:!0}),this.set({schema:l._label},{silent:!0})}o.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Operator"),cell:"string",type:"text",mode:["properties","create","edit"]},{id:"owner",label:e("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],control:"node-list-by-name",node:"role"},{id:"description",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"]}]}),getSchema:function(){return new r.default}})),i.Nodes.operator}.apply(t,a))||(e.exports=o)},60465:(e,t,n)=>{"use strict";var a,o,i,r=(i=n(38630))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(5547),n(63563)],void 0===(o=function(e,t,n,a,o,i){return i.Nodes["coll-edbfunc"]||(i.Nodes["coll-edbfunc"]=i.Collection.extend({node:"edbfunc",label:e("Functions"),type:"coll-edbfunc",columns:["name","funcowner","description"],canDrop:!1,canDropCascade:!1})),i.Nodes.edbfunc||(i.Nodes.edbfunc=i.Node.extend({type:"edbfunc",dialogHelp:t("help.static",{filename:"edbfunc_dialog.html"}),label:e("Function"),collection_type:"coll-edbfunc",hasDepends:!0,canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.initialized||(this.initialized=!0)},canDrop:!1,canDropCascade:!1,model:i.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties"]},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:e("Owner"),cell:"string",type:"text",readonly:!0}]}),getSchema:function(){return new r.default({},{name:"sysfunc"})}})),i.Nodes.edbfunc}.apply(t,a))||(e.exports=o)},49606:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=(i=n(38630))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(60465),n(5547),n(63563)],void 0===(o=function(e,t,n,a,o,i,l){return i.Nodes["coll-edbproc"]||(o.Browser.Nodes["coll-edbproc"]=o.Browser.Collection.extend({node:"edbproc",label:e("Procedures"),type:"coll-edbproc",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:!1,canDropCascade:!1})),i.Nodes.edbproc||(o.Browser.Nodes.edbproc=i.Node.extend({type:"edbproc",dialogHelp:t("help.static",{filename:"edbproc_dialog.html"}),label:e("Procedure"),collection_type:"coll-edbproc",hasDepends:!0,canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.proc_initialized||(this.proc_initialized=!0)},canDrop:!1,canDropCascade:!1,model:l.model.extend({defaults:a.extend({},l.model.prototype.defaults,{lanname:"edbspl"}),isVisible:function(){return"sysfunc"!=this.name&&"sysproc"==this.name},validate:function(){return null}}),getSchema:function(){return new r.default({},{name:"sysproc"})}})),i.Nodes.edbproc}.apply(t,a))||(e.exports=o)},52225:(e,t,n)=>{"use strict";var a,o,i,r=(i=n(63641))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(5547),n(63563)],void 0===(o=function(e,t,n,a,o,i){return i.Nodes["coll-edbvar"]||(i.Nodes["coll-edbvar"]=i.Collection.extend({node:"edbvar",label:e("Variables"),type:"coll-edbvar",columns:["name","funcowner","description"],canDrop:!1,canDropCascade:!1})),i.Nodes.edbvar||(i.Nodes.edbvar=i.Node.extend({type:"edbvar",dialogHelp:t("help.static",{filename:"edbvar_dialog.html"}),label:e("Function"),collection_type:"coll-edbvar",canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.initialized||(this.initialized=!0)},canDrop:!1,canDropCascade:!1,model:i.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties"]},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]}]}),getSchema:function(){return new r.default}})),i.Nodes.edbvar}.apply(t,a))||(e.exports=o)},2961:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=(i=n(12464))&&i.__esModule?i:{default:i},l=n(40345),s=n(77077);a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(94405),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,c,d,p){return i.Nodes["coll-package"]||(i.Nodes["coll-package"]=i.Collection.extend({node:"package",label:e("Packages"),type:"coll-package",columns:["name","owner","description"],canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),i.Nodes.package||(i.Nodes.package=d.SchemaChildNode.extend({type:"package",epasHelp:!0,dialogHelp:t("help.static",{filename:"package_dialog.html"}),label:e("Package"),collection_type:"coll-package",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_package_on_coll",node:"coll-package",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_package",node:"package",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_package",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},canCreate:function(e,t,n){if(n&&0==n.check)return!0;var a=i.tree.getTreeNodeHierarchy(t),o=a.server;return(!o||"pg"!==o.server_type)&&null==a.catalog},model:i.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){if(0===a.size(e)){var n=i.serverInfo[t.node_info.server._id].user,r=t.node_info.schema;this.set({owner:n.name,schema:r._label},{silent:!0})}o.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties","create","edit"],readonly:function(e){return!e.isNew()}},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:e("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],readonly:!0,editable:!1,visible:function(e){return!e.isNew()}},{id:"description",label:e("Comment"),type:"multiline",mode:["properties","create","edit"]}]}),getSchema:function(e,t){var n=i.Nodes.package;return new r.default((function(a){return(0,l.getNodePrivilegeRoleSchema)(n,e,t,a)}),{schemas:function(){return(0,s.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},node_info:e},{schema:e.schema.label})}})),i.Nodes.package}.apply(t,a))||(e.exports=o)},67872:(e,t,n)=>{"use strict";var a,o;n(4723),n(74916),n(21249),n(68309);var i,r=n(77077),l=n(40345),s=(i=n(76547))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(94405),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,c,d,p){return i.Nodes["coll-sequence"]||(i.Nodes["coll-sequence"]=i.Collection.extend({node:"sequence",label:e("Sequences"),type:"coll-sequence",columns:["name","seqowner","comment"],hasStatistics:!0,canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),i.Nodes.sequence||(i.Nodes.sequence=d.SchemaChildNode.extend({type:"sequence",sqlAlterHelp:"sql-altersequence.html",sqlCreateHelp:"sql-createsequence.html",dialogHelp:t("help.static",{filename:"sequence_dialog.html"}),label:e("Sequence"),collection_type:"coll-sequence",hasSQL:!0,hasDepends:!0,hasStatistics:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_sequence_on_coll",node:"coll-sequence",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_sequence",node:"sequence",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_sequence",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var n=this;return new s.default((function(a){return(0,l.getNodePrivilegeRoleSchema)(n,e,t,a)}),{role:function(){return(0,r.getNodeListByName)("role",e,t)},schema:function(){return(0,r.getNodeListByName)("schema",e,t,{},(function(e){return!e.label.match(/^pg_/)}))},allTables:function(){return(0,r.getNodeListByName)("table",e,t,{includeItemKeys:["_id"]})},getColumns:function(n){return(0,r.getNodeAjaxOptions)("get_columns",i.Nodes.table,e,t,{urlParams:n,useCache:!1},(function(e){return e.map((function(e){return{value:e.name,image:"icon-column",label:e.name}}))}))}},{seqowner:i.serverInfo[e.server._id].user.name,schema:t.label})},model:i.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var o=i.serverInfo[t.node_info.server._id].user,r=t.node_info.schema;this.set({seqowner:o.name},{silent:!0}),this.set({schema:r._label},{silent:!0})}i.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties","create","edit"]},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"seqowner",label:e("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],node:"role",control:c.NodeListByNameControl},{id:"comment",label:e("Comment"),type:"multiline",mode:["properties","create","edit"]}]})})),i.Nodes.sequence}.apply(t,a))||(e.exports=o)},50581:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=(i=n(41551))&&i.__esModule?i:{default:i};a=[n(91669),n(19755),n(81311),n(55112),n(33883),n(5547)],void 0===(o=function(e,t,n,a,o){return o.Nodes["coll-catalog"]||(o.Nodes["coll-catalog"]=o.Collection.extend({node:"catalog",label:e("Catalogs"),type:"coll-catalog",columns:["name","namespaceowner","description"],canDrop:!1,canDropCascade:!1})),o.Nodes.catalog||(o.Nodes.catalog=o.Node.extend({parent_type:"database",type:"catalog",label:e("Catalog"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},model:o.Node.Model.extend({initialize:function(e,t){var a=0===n.size(e);if(a){var i=o.serverInfo[t.node_info.server._id].user;this.set({namespaceowner:i.name},{silent:!0})}o.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",readonly:!0},{id:"oid",label:e("OID"),cell:"string",mode:["properties"],type:"text"}]}),getSchema:function(e){return new r.default({namespaceowner:o.serverInfo[e.server._id].user.name})}})),o.Nodes.catalog}.apply(t,a))||(e.exports=o)},94405:(e,t,n)=>{"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaChildNode=void 0;var o=l(n(66235)),i=l(n(56756));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}var s=o.extend({parent_type:["schema","catalog"],canDrop:i.isTreeItemOfChildOfSchema,canDropCascade:i.isTreeItemOfChildOfSchema,canCreate:i.childCreateMenuEnabled},!1);t.SchemaChildNode=s},30160:(e,t,n)=>{"use strict";var a,o;n(69826),n(69600),n(5735),n(83753),n(32564),n(68309);var i,r=(i=n(14497))&&i.__esModule?i:{default:i},l=n(40345),s=n(77077);a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(71158),n(5547),n(63563)],void 0===(o=function(e,t,n,a,o,i,c,d){return c.VacuumCollectionControl=c.Control.extend({grid_columns:void 0,initialize:function(){c.Control.prototype.initialize.apply(this,arguments);var e=this,t=this.model,o=e.field.get("url");if(o&&t.isNew()){var i,r=e.field.get("node"),l=e.field.get("node_data"),s=e.field.get("node_info"),d=r.generate_url.apply(r,[null,o,l,!1,s]);t.trigger("pgadmin-view:fetching",t,e.field),n.ajax({async:!1,url:d}).done((function(e){i=e})).fail((function(){t.trigger("pgadmin-view:fetch:error",t,e.field)})),t.trigger("pgadmin-view:fetched",t,e.field),i&&a.isArray(i)&&t.get(e.field.get("name")).reset(i,{silent:!0})}},events:{keydown:"keyDownHandler"},keyDownHandler:function(e){var t=n(this.$el).find("button:last"),a=n(this.$el).find("td.editable:first");9!=e.keyCode||e.shiftKey||n(a).is(":visible")&&n(e.target).is(n(t))&&(n(a).trigger("click"),e.preventDefault(),e.stopPropagation())},render:function(){var e=this,t=e.field.attributes;e.grid&&(e.grid.remove(),delete e.grid,e.grid=void 0),e.$el.empty();var o=a.template(['<div class="subnode-header">','<% if (label && label != "") %> {','    <span class="control-label col-sm-4"><%-label%></span>',"}","</div>"].join("\n")),i=n('<div class="pgadmin-control-group backgrid form-group col-12 object subnode"></div>').append(o(t)),r=e.grid=new d.Grid({columns:e.grid_columns,collection:e.model.get(e.field.get("name")),className:"backgrid table table-bordered table-noouter-border table-hover"});return e.$el.addClass("mb-0"),e.$el.append(n(i).append(r.render().$el)),e}}),c.cellFunction=function(e){switch(e.get("column_type")){case"integer":return d.IntegerCell;case"number":return d.NumberCell.extend({decimals:this.get("decimals")||d.NumberFormatter.prototype.defaults.decimals});case"string":return d.StringCell;default:return d.Cell}},c.VacuumTableModel=i.Node.Model.extend({defaults:{name:void 0,setting:void 0,label:void 0,value:void 0,column_type:void 0},toJSON:function(){var e=i.Node.Model.prototype.toJSON.apply(this);return delete e.label,delete e.setting,delete e.column_type,e}}),c.VacuumSettingsSchema=[{id:"spacer_ctrl",group:e("Table"),mode:["edit","create"],type:"spacer"},{id:"autovacuum_custom",label:e("Custom auto-vacuum?"),group:e("Table"),mode:["edit","create"],type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",disabled:function(e){return e.top&&e.top.get("is_partitioned")?(setTimeout((function(){e.set("autovacuum_custom",!1)}),10),!0):!!e.top.inSchema.apply(this,[e])}},{id:"autovacuum_enabled",label:e("Autovacuum Enabled?"),group:e("Table"),mode:["edit","create"],type:"radioModern",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",options:[{label:e("Not set"),value:"x"},{label:e("Yes"),value:"t"},{label:e("No"),value:"f"}],deps:["autovacuum_custom"],disabled:function(e){return!(!e.top.inSchema.apply(this,[e])&&1==e.get("autovacuum_custom"))&&(setTimeout((function(){e.set("autovacuum_enabled","x")}),10),!0)}},{id:"vacuum_table",label:"",model:c.VacuumTableModel,editable:!1,type:"collection",canEdit:!0,group:e("Table"),mode:["edit","create"],url:"get_table_vacuum",control:c.VacuumCollectionControl.extend({grid_columns:[{name:"label",label:e("Label"),headerCell:d.Extension.CustomHeaderCell,cell:"string",editable:!1,cellHeaderClasses:"width_percent_40"},{name:"value",label:e("Value"),cellHeaderClasses:"width_percent_30",decimals:5,cellFunction:c.cellFunction,editable:function(e){return e.handler.get("autovacuum_custom")},headerCell:d.Extension.CustomHeaderCell},{name:"setting",label:e("Default"),cellHeaderClasses:"width_percent_30",headerCell:d.Extension.CustomHeaderCell,cellFunction:c.cellFunction,editable:!1}]}),deps:["autovacuum_custom"]},{id:"spacer_ctrl",group:e("TOAST table"),mode:["edit","create"],type:"spacer"},{id:"toast_autovacuum",label:e("Custom auto-vacuum?"),group:e("TOAST table"),mode:["edit","create"],type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",disabled:function(e){return!(!e.top.inSchema.apply(this,[e])&&(e.isNew()||!0===e.get("toast_autovacuum_enabled")||!0===e.top.get("hastoasttable")))}},{id:"toast_autovacuum_enabled",label:e("Autovacuum Enabled?"),group:e("TOAST table"),mode:["edit","create"],type:"radioModern",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",options:[{label:e("Not set"),value:"x"},{label:e("Yes"),value:"t"},{label:e("No"),value:"f"}],deps:["toast_autovacuum"],disabled:function(e){return!(!e.top.inSchema.apply(this,[e])&&!0===e.get("toast_autovacuum"))&&((e.isNew()||e.get("hastoasttable"))&&setTimeout((function(){e.set("toast_autovacuum_enabled","x")}),10),!0)}},{id:"vacuum_toast",label:"",model:c.VacuumTableModel,type:"collection",editable:function(e){return e.isNew()},canEdit:!0,group:e("TOAST table"),mode:["properties","edit","create"],url:"get_toast_table_vacuum",control:c.VacuumCollectionControl.extend({grid_columns:[{name:"label",label:e("Label"),headerCell:d.Extension.CustomHeaderCell,cell:"string",editable:!1,cellHeaderClasses:"width_percent_40"},{name:"value",label:e("Value"),cellHeaderClasses:"width_percent_30",headerCell:d.Extension.CustomHeaderCell,decimals:5,cellFunction:c.cellFunction,editable:function(e){return e.handler.get("toast_autovacuum")}},{name:"setting",label:e("Default"),cellHeaderClasses:"width_percent_30",headerCell:d.Extension.CustomHeaderCell,cellFunction:c.cellFunction,editable:!1}]}),deps:["toast_autovacuum"]}],i.Nodes["coll-schema"]||(i.Nodes["coll-schema"]=i.Collection.extend({node:"schema",label:e("Schemas"),type:"coll-schema",columns:["name","namespaceowner","description"]})),i.Nodes.schema||(i.Nodes.schema=i.Node.extend({parent_type:"database",type:"schema",sqlAlterHelp:"sql-alterschema.html",sqlCreateHelp:"sql-createschema.html",dialogHelp:t("help.static",{filename:"schema_dialog.html"}),label:e("Schema"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_schema_on_coll",node:"coll-schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"}},{name:"create_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"}},{name:"create_schema",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"},enable:"can_create_schema"}]))},can_create_schema:function(e){return i.Nodes.database.is_conn_allow.call(this,e)},model:i.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var o=i.serverInfo[t.node_info.server._id].user;this.set({namespaceowner:o.name},{silent:!0})}i.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text"},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"namespaceowner",label:e("Owner"),cell:"string",type:"text",control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{id:"is_sys_obj",label:e("System schema?"),cell:"switch",type:"switch",mode:["properties"]},{id:"description",label:e("Comment"),cell:"string",type:"multiline"}]}),getSchema:function(e,t){var n=i.Nodes.schema;return new r.default((function(a){return(0,l.getNodePrivilegeRoleSchema)(n,e,t,a)}),{roles:function(){return(0,s.getNodeListByName)("role",e,t,{cacheLevel:"database"})},server_info:i.serverInfo[e.server._id]},{namespaceowner:i.serverInfo[e.server._id].user.name})}}),i.tableChildTreeNodeHierarchy=function(e){return i.tree.getTreeNodeHierarchy(e)}),d.Extension.TableChildSwitchCell=d.Extension.SwitchCell.extend({initialize:function(){d.Extension.SwitchCell.prototype.initialize.apply(this,arguments),d.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function(){var e=this.model,t=this.column,n=this.column.get("editable"),o=this.$el.find("input[type=checkbox]").first(),i=t.get("name");return(a.isFunction(n)?!!n.apply(t,[e]):!!n)?(this.$el.addClass("editable"),o.bootstrapToggle("disabled",!1)):(this.$el.removeClass("editable"),o.bootstrapToggle("disabled",!0),setTimeout((function(){e.set(i,!1)}),10)),this.delegateEvents(),this},remove:d.Extension.DependentCell.prototype.remove}),i.Nodes.schema}.apply(t,a))||(e.exports=o)},56756:(e,t,n)=>{"use strict";var a;n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.childCreateMenuEnabled=function(e,t,n){if(n&&!1===n.check)return!0;var a=o.tree.findNodeByDomElement(t);return!!a&&a.anyFamilyMember((function(e){return"schema"===e.getData()._type}))},t.isTreeItemOfChildOfSchema=function(e,t){var n=o.tree.findNodeByDomElement(t);return!!n&&i(n)},t.isTreeNodeOfSchemaChild=i;var o=((a=n(55112))&&a.__esModule?a:{default:a}).default.Browser;function i(e){return e.anyParent((function(e){return"schema"===e.getData()._type}))}},98050:(e,t,n)=>{"use strict";var a,o;n(82772),n(68309);var i,r=n(77077),l=(i=n(47471))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(55455),n(94405),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,s,c,d){return i.Nodes["coll-synonym"]||(o.Browser.Nodes["coll-synonym"]=o.Browser.Collection.extend({node:"synonym",label:e("Synonyms"),type:"coll-synonym",columns:["name","owner","is_public_synonym"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})),i.Nodes.synonym||(o.Browser.Nodes.synonym=c.SchemaChildNode.extend({type:"synonym",epasHelp:!0,dialogHelp:t("help.static",{filename:"synonym_dialog.html"}),label:e("Synonym"),collection_type:"coll-synonym",hasSQL:!0,hasDepends:!0,parent_type:["schema","catalog"],Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_synonym_on_coll",node:"coll-synonym",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_synonym",node:"synonym",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_synonym",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},getSchema:function(e,t){var n=this;return new l.default({role:function(){return(0,r.getNodeListByName)("role",e,t)},schema:function(){return(0,r.getNodeListByName)("schema",e,t,{cacheLevel:"database",cacheNode:"database"})},synobjschema:function(){return(0,r.getNodeListByName)("schema",e,t,{},(function(e){return e&&-1==a.indexOf(["pg_catalog","sys","dbo","pgagent","information_schema","dbms_job_procedure"],e.label)}))},getTargetObjectOptions:function(a,o){return(0,r.getNodeAjaxOptions)("get_target_objects",n,e,t,{urlParams:{trgTyp:a,trgSchema:o},useCache:!1})}},e,{owner:i.serverInfo[e.server._id].user.name,schema:t.label,synobjschema:t.label})},model:o.Browser.Node.Model.extend({isNew:function(){return!this.fetchFromServer},idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var r=i.serverInfo[t.node_info.server._id].user,l=t.node_info.schema;this.set({owner:r.name,synobjschema:l._label,schema:l._label,targettype:"r"},{silent:!0})}else this.fetchFromServer=!0;o.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"inSchema",readonly:function(e){return!e.isNew()}},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:e("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],readonly:!0,control:"node-list-by-name",node:"role",visible:!1}],inSchema:function(){return!(!this.node_info||!("catalog"in this.node_info))}}),canCreate:function(e,t,n){if(n&&0==n.check)return!0;var a=i.tree.getTreeNodeHierarchy(t),o=a.server;return(!o||"pg"!==o.server_type)&&null==a.catalog}})),i.Nodes.synonym}.apply(t,a))||(e.exports=o)},94622:(e,t,n)=>{"use strict";var a,o;n(82772);var i=n(15253);a=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55112),n(33883),n(12030),n(71158),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,r,l,s,c,d){return l.Nodes["coll-column"]||(l.Nodes["coll-column"]=l.Collection.extend({node:"column",label:e("Columns"),type:"coll-column",columns:["name","atttypid","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:!1})),l.Nodes.column||(l.Nodes.column=l.Node.extend({parent_type:["table","view","mview"],collection_type:["coll-table","coll-view","coll-mview"],type:"column",label:e("Column"),hasSQL:!0,sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-altertable.html",dialogHelp:t("help.static",{filename:"column_dialog.html"}),canDrop:function(e,t){var n=l.tree.findNodeByDomElement(t);return!!n&&n.anyParent((function(e){return"table"===e.getData()._type&&!e.anyParent((function(e){return"catalog"===e.getData()._type}))}))},hasDepends:!0,hasStatistics:!0,Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_column_on_coll",node:"coll-column",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column",node:"column",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"}]))},getSchema:function(e,t){return(0,i.getNodeColumnSchema)(e,t,l)},model:l.Node.Model.extend({idAttribute:"attnum",defaults:{name:void 0,attnum:void 0,description:void 0},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",disabled:"inSchemaWithColumnCheck",cellHeaderClasses:"width_percent_30",editable:"editable_check_for_table"},{id:"attnum",label:e("Position"),cell:"string",type:"text",disabled:"notInSchema",mode:["properties"]},{id:"description",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:"notInSchema"}],notInSchema:function(){return!(!this.node_info||!("catalog"in this.node_info))}}),canCreate:function(e,t,n){if(n&&0==n.check)return!0;for(var o=l.tree,i=t,r=e,s=[];i;){if(a.indexOf(["schema"],r._type)>-1)return!0;if(a.indexOf(["view","coll-view","mview","coll-mview"],r._type)>-1){s.push(r._type);break}s.push(r._type),r=(i=o.hasParent(i)?o.parent(i):null)?o.itemData(i):null}return!(a.indexOf(s,"catalog")>-1||a.indexOf(s,"coll-view")>-1||a.indexOf(s,"coll-mview")>-1||a.indexOf(s,"mview")>-1||a.indexOf(s,"view")>-1)}})),l.Nodes.column}.apply(t,a))||(e.exports=o)},76994:(e,t,n)=>{"use strict";var a,o;n(32564);var i=n(77077),r=s(n(4847)),l=s(n(55958));function s(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,s,c,d){return s.Nodes["coll-compound_trigger"]||(o.Browser.Nodes["coll-compound_trigger"]=o.Browser.Collection.extend({node:"compound_trigger",label:e("Compound Triggers"),type:"coll-compound_trigger",columns:["name","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})),s.Nodes.compound_trigger||(o.Browser.Nodes.compound_trigger=s.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"compound_trigger",label:e("Compound Trigger"),hasSQL:!0,hasDepends:!0,width:s.stdW.sm+"px",epasHelp:!0,dialogHelp:t("help.static",{filename:"compound_trigger_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,s.add_menus([{name:"create_compound_trigger_on_coll",node:"coll-compound_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"enable_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"enable_compound_trigger",category:"connect",priority:3,label:e("Enable compound trigger"),icon:"fa fa-check",enable:"canCreate_with_compound_trigger_enable"},{name:"disable_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"disable_compound_trigger",category:"drop",priority:3,label:e("Disable compound trigger"),icon:"fa fa-times",enable:"canCreate_with_compound_trigger_disable"},{name:"create_compound_trigger_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},callbacks:{enable_compound_trigger:function(e){var t=e||{},a=s.tree,o=t.item||a.selected(),i=o?a.itemData(o):void 0;if(!i)return!1;var r=i;n.ajax({url:this.generate_url(o,"enable",i,!0),type:"PUT",data:{is_enable_trigger:"O"},dataType:"json"}).done((function(e){1==e.success&&(l.default.success(e.info),a.removeIcon(o),r.icon="icon-compound_trigger",a.addIcon(o,{icon:r.icon}),a.unload(o),a.setInode(!1),a.deselect(o),setTimeout((function(){a.select(o)}),10))})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),a.unload(o)}))},disable_compound_trigger:function(t){var a=t||{},o=s.tree,i=a.item||o.selected(),r=i?o.itemData(i):void 0;if(!r)return!1;var c=r;n.ajax({url:this.generate_url(i,"enable",r,!0),type:"PUT",data:{is_enable_trigger:"D"},dataType:"json"}).done((function(e){1==e.success&&(l.default.success(e.info),o.removeIcon(i),c.icon="icon-compound_trigger-bad",o.addIcon(i,{icon:c.icon}),o.unload(i),o.setInode(!1),o.deselect(i),setTimeout((function(){o.select(i)}),10))})).fail((function(t,n,a){l.default.pgRespErrorNotify(t,a,e("Disable compound trigger failed")),o.unload(i)}))}},canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema,getSchema:function(e,t){return new r.default({columns:function(){return(0,i.getNodeListByName)("column",e,t,{cacheLevel:"column"})}},e)},model:o.Browser.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),cell:"string",type:"text"},{id:"description",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"]}]}),canCreate:function(e,t,n){if(n&&0==n.check)return!0;var a=s.tree.getTreeNodeHierarchy(t),o=a.server;return(!o||!("pg"===o.server_type||o.version<12e4))&&null==a.catalog},canCreate_with_compound_trigger_enable:function(e,t,n){return!("view"in s.tree.getTreeNodeHierarchy(t))&&("icon-compound_trigger-bad"===e.icon&&this.canCreate.apply(this,[e,t,n]))},canCreate_with_compound_trigger_disable:function(e,t,n){return!("view"in s.tree.getTreeNodeHierarchy(t))&&("icon-compound_trigger"===e.icon&&this.canCreate.apply(this,[e,t,n]))}})),s.Nodes.compound_trigger}.apply(t,a))||(e.exports=o)},89996:(e,t,n)=>{"use strict";var a,o;n(32564),n(82772);var i=l(n(29754)),r=l(n(55958));function l(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,l,s){return l.Nodes.check_constraint||(o.Browser.Nodes.check_constraint=l.Node.extend({type:"check_constraint",label:e("Check"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"check_dialog.html"}),hasSQL:!0,hasDepends:!0,parent_type:["table","partition"],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_check_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Check..."),icon:"wcTabIcon icon-check_constraint",data:{action:"create",check:!0},enable:"canCreate"},{name:"validate_check_constraint",node:"check_constraint",module:this,applies:["object","context"],callback:"validate_check_constraint",category:"validate",priority:4,label:e("Validate check constraint"),icon:"fa fa-link",enable:"is_not_valid",data:{action:"edit",check:!0}}]))},is_not_valid:function(e,t,n){return!!this.canCreate(e,t,n)&&(e&&!e.valid)},callbacks:{validate_check_constraint:function(e){var t=e||{},a=l.tree,o=t.item||a.selected(),i=o?a.itemData(o):void 0;if(i){var s=i;n.ajax({url:this.generate_url(o,"validate",i,!0),type:"GET"}).done((function(e){1==e.success&&(r.default.success(e.info),a.removeIcon(o),s.valid=!0,s.icon="icon-check_constraint",a.addIcon(o,{icon:s.icon}),setTimeout((function(){a.deselect(o)}),10),setTimeout((function(){a.select(o)}),100))})).fail((function(e,t,n){r.default.pgRespErrorNotify(e,n),a.unload(o)}))}return!1}},canDrop:s.isTreeItemOfChildOfSchema,getSchema:function(){return new i.default},canCreate:function(e,t,n){if(n&&0==n.check)return!0;for(var o=l.tree,i=t,r=e,s=[];i;){if(a.indexOf(["schema"],r._type)>-1)return!0;s.push(r._type),r=(i=o.hasParent(i)?o.parent(i):null)?o.itemData(i):null}return a.indexOf(s,"catalog")<=-1}})),l.Nodes.check_constraint}.apply(t,a))||(e.exports=o)},12447:(e,t,n)=>{"use strict";var a,o;n(82772);var i=n(81873);a=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55112),n(33883),n(5547)],void 0===(o=function(e,t,n,a,o,r,l){return l.Nodes.exclusion_constraint||(r.Browser.Nodes.exclusion_constraint=l.Node.extend({type:"exclusion_constraint",label:e("Exclusion constraint"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"exclusion_constraint_dialog.html"}),hasSQL:!0,parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],url_jump_after_node:"schema",width:l.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_exclusion_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Exclusion constraint..."),icon:"wcTabIcon icon-exclusion_constraint",data:{action:"create",check:!0},enable:"canCreate"}]))},is_not_valid:function(e){return e&&!e.valid},getSchema:function(e,t){return(0,i.getNodeExclusionConstraintSchema)(e,t,r.Browser)},canCreate:function(e,t,n){if(n&&0==n.check)return!0;for(var o=l.tree,i=t,r=e,s=[],c=!1,d=!1;i;){if(c||"table"!=r._type&&"partition"!=r._type||(c=!0,"is_partitioned"in r&&r.is_partitioned&&(d=!0)),a.indexOf(["schema"],r._type)>-1)return!d;s.push(r._type),r=(i=o.hasParent(i)?o.parent(i):null)?o.itemData(i):null}return!(a.indexOf(s,"catalog")>-1)&&!d}})),l.Nodes.exclusion_constraint}.apply(t,a))||(e.exports=o)},72474:(e,t,n)=>{"use strict";var a,o;n(32564),n(82772);var i,r=n(40175),l=(i=n(55958))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55112),n(33883),n(5547)],void 0===(o=function(e,t,n,a,o,i,s){return s.Nodes.foreign_key||(i.Browser.Nodes.foreign_key=s.Node.extend({type:"foreign_key",label:e("Foreign key"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"foreign_key_dialog.html"}),hasSQL:!0,parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,hasDepends:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,s.add_menus([{name:"create_foreign_key_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign key..."),icon:"wcTabIcon icon-foreign_key",data:{action:"create",check:!0},enable:"canCreate"},{name:"validate_foreign_key",node:"foreign_key",module:this,applies:["object","context"],callback:"validate_foreign_key",category:"validate",priority:4,label:e("Validate foreign key"),icon:"fa fa-link",enable:"is_not_valid"}]))},is_not_valid:function(e){return e&&!e.valid},callbacks:{validate_foreign_key:function(e){var t=e||{},a=s.tree,o=t.item||a.selected(),i=o?a.itemData(o):void 0;if(i){var r=i;n.ajax({url:this.generate_url(o,"validate",i,!0),type:"GET"}).done((function(e){1==e.success&&(l.default.success(e.info),a.removeIcon(o),r.valid=!0,r.icon="icon-foreign_key",a.addIcon(o,{icon:r.icon}),setTimeout((function(){a.deselect(o)}),10),setTimeout((function(){a.select(o)}),100))})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),a.unload(o)}))}return!1}},getSchema:function(e,t){return(0,r.getNodeForeignKeySchema)(e,t,i.Browser)},canCreate:function(e,t,n){if(n&&0==n.check)return!0;for(var o=s.tree,i=t,r=e,l=[],c=!1,d=!1,p=o.getTreeNodeHierarchy(i).server.version;i;){if(c||"table"!=r._type&&"partition"!=r._type||(c=!0,"is_partitioned"in r&&r.is_partitioned&&p<11e4&&(d=!0)),a.indexOf(["schema"],r._type)>-1)return!d;l.push(r._type),r=(i=o.hasParent(i)?o.parent(i):null)?o.itemData(i):null}return!(a.indexOf(l,"catalog")>-1)&&!d}})),s.Nodes.foreign_key}.apply(t,a))||(e.exports=o)},14261:(e,t,n)=>{"use strict";var a,o;n(47042),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),n(82772),n(32564),n(41539),n(39714),n(83710),n(21249),n(23123),n(74916),n(40561),n(15306);var i,r=n(77077),l=(i=n(29458))&&i.__esModule?i:{default:i};function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,i=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(71158),n(5547)],void 0===(o=function(e,t,n,a,o,i,c,d){return i.Nodes.primary_key||(o.Browser.Nodes.primary_key=i.Node.extend({type:"primary_key",label:e("Primary key"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"primary_key_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_primary_key_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Primary key"),icon:"wcTabIcon icon-primary_key",data:{action:"create",check:!0},enable:"canCreate"}]))},canCreate:function(e,t,n){if(n&&0==n.check)return!0;for(var o=i.tree,r=t,l=e,s=[],c=!1,d=!1,p=o.getTreeNodeHierarchy(r).server.version;r;){if(c||"table"!=l._type&&"partition"!=l._type||(c=!0,"is_partitioned"in l&&l.is_partitioned&&p<11e4&&(d=!0)),a.indexOf(["schema"],l._type)>-1){if(d)return!1;var u=o.children(arguments[1],!1),m=!1;return a.each(u,(function(e){n=i.tree.itemData(e),m||"primary_key"!=n._type||(m=!0)})),!m}s.push(l._type),l=(r=o.hasParent(r)?o.parent(r):null)?o.itemData(r):null}return!(a.indexOf(s,"catalog")>-1)&&!d},getSchema:function(e,t){return new l.default({columns:function(){return(0,r.getNodeListByName)("column",e,t)},spcname:function(){return(0,r.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},index:function(){return(0,r.getNodeListByName)("index",e,t,{jumpAfterNode:"schema"})}},e)},model:o.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,oid:void 0,is_sys_obj:void 0,comment:void 0,spcname:void 0,index:void 0,fillfactor:void 0,condeferrable:void 0,condeferred:void 0,columns:[],include:[]},genResetColOptions:function(){var e=this;setTimeout((function(){e.custom_options(),e.render.apply(e)}),50)},genCustomOptions:function(){var e=this.model.top.get("columns"),t=[];e.length>0&&a.each(e.models,(function(e){var n=e.get("name");a.isUndefined(n)||a.isNull(n)||t.push({label:n,value:n,image:"icon-column"})})),this.field.set("options",t)},checkReadOnly:function(e){return!a.has(e,"top")||a.isUndefined(e.top)||e.top.isNew()?!e.isNew():!a.isUndefined(e.get("oid"))},schema:[{id:"name",label:e("Name"),type:"text",mode:["properties","create","edit"],editable:!0,cellHeaderClasses:"width_percent_40"},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"],editable:!1,cellHeaderClasses:"width_percent_20"},{id:"is_sys_obj",label:e("System primary key?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"comment",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function(e){var t=e.get("name");return(!t||""==t)&&(setTimeout((function(){e.get("comment")&&""!==e.get("comment")&&e.set("comment",null)}),10),!0)}},{id:"columns",label:e("Columns"),type:"collection",group:e("Definition"),editable:!1,cell:d.StringCell.extend({initialize:function(){d.StringCell.prototype.initialize.apply(this,arguments);var e=this,t=this.model.get("columns");if(a.isUndefined(e.model.get("oid"))){var n=e.model.top.get("columns");e.listenTo(n,"remove",e.removeColumn),e.listenTo(n,"change:name",e.resetColOptions)}t.on("pgadmin:multicolumn:updated",(function(){e.render.apply(e)})),e.listenTo(t,"add",e.render),e.listenTo(t,"remove",e.render)},removeColumn:function(e){var t=this,n=t.model.get("columns").where({column:e.get("name")});t.model.get("columns").remove(n),setTimeout((function(){t.render()}),10);setTimeout((function(){var e=t.model.top.get("primary_key"),n=[];e.each((function(e){0==e.get("columns").length&&n.push(e)})),e.remove(n)}),100)},resetColOptions:function(e){var t=this,n=t.model.get("columns").where({column:e.previous("name")});n.length>0&&n[0].set({column:e.get("name")},{silent:!0}),setTimeout((function(){t.render()}),10)},formatter:{fromRaw:function(e){return e.pluck("column").toString()},toRaw:function(e){return e}},render:function(){return d.StringCell.prototype.render.apply(this,arguments)},remove:function(){var e=this.model.top.get("columns"),t=this.model.get("columns");t&&t.off("pgadmin:multicolumn:updated"),this.stopListening(e,"remove",self.removeColumn),this.stopListening(e,"change:name",self.resetColOptions),d.StringCell.prototype.remove.apply(this,arguments)}}),canDelete:!0,canAdd:!0,control:c.MultiSelectAjaxControl.extend({defaults:a.extend({},c.NodeListByNameControl.prototype.defaults,{select2:{multiple:!0,allowClear:!0,width:"style",placeholder:e("Select the column(s)")}}),keyPathAccessor:function(e,t){var n=e;if(a.isArray(n))return a.map(n,(function(e){return e.column}));var o,i=s(t=t.split("."));try{for(i.s();!(o=i.n()).done;){var r=o.value;if(a.isNull(n))return null;a.isEmpty(r)||(a.isUndefined(n[r])||(n=n[r]))}}catch(e){i.e(e)}finally{i.f()}return a.isObject(n)&&!a.isArray(n)?null:n},initialize:function(){var e=this;if(this.model.handler){if(c.Select2Control.prototype.initialize.apply(this,arguments),a.isUndefined(e.model.get("oid"))){var t=e.model.top.get("columns");e.listenTo(t,"remove",e.resetColOptions),e.listenTo(t,"change:name",e.resetColOptions)}e.custom_options()}else c.MultiSelectAjaxControl.prototype.initialize.apply(this,arguments);e.model.get("columns").on("pgadmin:multicolumn:updated",(function(){e.render.apply(e)}))},resetColOptions:function(){this.genResetColOptions()},custom_options:function(){this.genCustomOptions()},onChange:function(){var e=this,t=this.model,n=this.field.get("name").split(".").shift(),o=this.getValueFromDOM(),i=t.get(n),r=[];this.stopListening(this.model,"change:"+n,this.render),i.each((function(e){var t=e.get("column"),n=a.indexOf(o,t);n>-1?o.splice(n,1):r.push(t)})),a.each(o,(function(t){var n=new(e.field.get("model"))({column:t},{silent:!0,top:e.model.top,collection:i,handler:i});i.add(n)})),a.each(r,(function(e){i.remove(i.where({column:e}))})),this.listenTo(this.model,"change:"+n,this.render)},remove:function(){if(this.model.handler){var e=this,t=e.model.top.get("columns");e.stopListening(t,"remove",e.resetColOptions),e.stopListening(t,"change:name",e.resetColOptions),e.model.get("columns").off("pgadmin:multicolumn:updated"),c.Select2Control.prototype.remove.apply(this,arguments)}else c.MultiSelectAjaxControl.prototype.remove.apply(this,arguments)},render:function(){var e=this.model.get("index");if(!a.isUndefined(e)&&""!=e){var t=this.model.get("columns");t.reset([],{silent:!0})}return c.Select2Control.prototype.render.apply(this,arguments)}}),deps:["index"],node:"column",model:i.Node.Model.extend({defaults:{column:void 0},validate:function(){return null}}),transform:function(e){var t=[];return e&&a.isArray(e)&&a.each(e,(function(e){t.push({label:e.label,value:e.label,image:"icon-column"})})),t},select2:{allowClear:!1},readonly:function(e){return this.checkReadOnly(e)},disabled:function(e){var t=e.get("index");return!(a.isUndefined(t)||""==t)}},{id:"include",label:e("Include columns"),type:"array",group:e("Definition"),editable:!1,canDelete:!0,canAdd:!0,mode:["properties","create","edit"],visible:function(e){return e=e.top,!a.isUndefined(e.node_info)&&!a.isUndefined(e.node_info.server)&&!a.isUndefined(e.node_info.server.version)&&e.node_info.server.version>=11e4},control:c.MultiSelectAjaxControl.extend({defaults:a.extend({},c.NodeListByNameControl.prototype.defaults,{select2:{allowClear:!1,width:"style",multiple:!0,placeholder:e("Select the column(s)")}}),initialize:function(){var e=this;if(this.model.handler){if(c.Select2Control.prototype.initialize.apply(this,arguments),a.isUndefined(e.model.get("oid"))){var t=e.model.top.get("columns");e.listenTo(t,"remove",e.resetColOptions),e.listenTo(t,"change:name",e.resetColOptions)}e.custom_options()}else c.MultiSelectAjaxControl.prototype.initialize.apply(this,arguments)},resetColOptions:function(){this.genResetColOptions()},custom_options:function(){this.genCustomOptions()}}),deps:["index"],node:"column",readonly:function(e){return this.checkReadOnly(e)},disabled:function(e){var t=e.get("index");return!a.isUndefined(t)&&""!=t&&(setTimeout((function(){e.set("include",[])}),10),!0)}},{id:"spcname",label:e("Tablespace"),type:"text",group:e("Definition"),control:"node-list-by-name",node:"tablespace",deps:["index"],select2:{allowClear:!1},filter:function(e){return"pg_global"!=e.label},disabled:function(e){var t=(e=e.top||e).get("index");return!a.isUndefined(t)&&""!=t&&(setTimeout((function(){e.set("spcname","")}),10),!0)}},{id:"index",label:e("Index"),mode:["create"],type:"text",group:e("Definition"),control:c.NodeListByNameControl.extend({initialize:function(){c.NodeListByNameControl.prototype.initialize.apply(this,arguments)}}),select2:{allowClear:!0},node:"index",readonly:function(e){return!(!a.has(e,"top")||a.isUndefined(e.top)||e.top.isNew())||!e.isNew()},visible:function(e){return!a.isUndefined(e.top.node_info.table)}},{id:"fillfactor",label:e("Fill factor"),deps:["index"],type:"int",group:e("Definition"),allowNull:!0,disabled:function(e){var t=e.get("index");return!a.isUndefined(t)&&""!=t&&(setTimeout((function(){e.set("fillfactor",null)}),10),!0)}},{id:"condeferrable",label:e("Deferrable?"),type:"switch",group:e("Definition"),deps:["index"],readonly:function(e){return this.checkReadOnly(e)},disabled:function(e){var t=e.get("index");return!a.isUndefined(t)&&""!=t&&(setTimeout((function(){e.get("condeferrable")&&e.set("condeferrable",!1)}),10),!0)}},{id:"condeferred",label:e("Deferred?"),type:"switch",group:e("Definition"),deps:["condeferrable"],readonly:function(e){return this.checkReadOnly(e)},disabled:function(e){return 1!=e.get("condeferrable")&&(setTimeout((function(){e.get("condeferred")&&e.set("condeferred",!1)}),10),!0)}}],validate:function(){this.errorModel.clear(),a.has(this,"top")&&this.top.errorModel.clear();var t=this.get("columns"),n=this.get("index");if((a.isUndefined(n)||""==String(n).replace(/^\s+|\s+$/g,""))&&(a.isUndefined(t)||a.isNull(t)||t.length<1)){var o=e("Please specify columns for %s.",e("Primary key"));return this.errorModel.set("columns",o),o}return null}})})),i.Nodes.primary_key}.apply(t,a))||(e.exports=o)},90246:(e,t,n)=>{"use strict";var a,o;n(82772);var i,r=n(77077),l=(i=n(42657))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(5547)],void 0===(o=function(e,t,n,a,o,i){return i.Nodes.unique_constraint||(o.Browser.Nodes.unique_constraint=i.Node.extend({type:"unique_constraint",label:e("Unique constraint"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"unique_constraint_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_unique_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Unique constraint"),icon:"wcTabIcon icon-unique_constraint",data:{action:"create",check:!0},enable:"canCreate"}]))},canCreate:function(e,t,n){if(n&&0==n.check)return!0;for(var o=i.tree,r=t,l=e,s=[],c=!1,d=!1,p=i.tree.getTreeNodeHierarchy(r).server.version;r;){if(c||"table"!=l._type&&"partition"!=l._type||(c=!0,"is_partitioned"in l&&l.is_partitioned&&p<11e4&&(d=!0)),a.indexOf(["schema"],l._type)>-1)return!d;s.push(l._type),l=(r=o.hasParent(r)?o.parent(r):null)?o.itemData(r):null}return!(a.indexOf(s,"catalog")>-1)&&!d},getSchema:function(e,t){return new l.default({columns:function(){return(0,r.getNodeListByName)("column",e,t)},spcname:function(){return(0,r.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},index:function(){return(0,r.getNodeListByName)("index",e,t,{jumpAfterNode:"schema"})}},e)}})),i.Nodes.unique_constraint}.apply(t,a))||(e.exports=o)},56359:(e,t,n)=>{"use strict";var a,o;a=[n(91669),n(19755),n(81311),n(55112),n(33883),n(5547),n(90246),n(89996),n(72474),n(12447),n(14261)],void 0===(o=function(e,t,n,a,o){return o.Nodes["coll-constraints"]||(a.Browser.Nodes["coll-constraints"]=a.Browser.Collection.extend({node:"constraints",label:e("Constraints"),type:"coll-constraints",columns:["name","comment"],canDrop:!0,canDropCascade:!0})),o.Nodes.constraints||(a.Browser.Nodes.constraints=o.Node.extend({type:"constraints",label:e("Constraints"),collection_type:"coll-constraints",parent_type:["table","partition"],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([]))},model:a.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,oid:void 0,comment:void 0},schema:[{id:"name",label:e("Name"),type:"text",mode:["properties","create","edit"]},{id:"oid",label:e("Oid"),cell:"string",type:"text",mode:["properties"]},{id:"comment",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"]}]})})),o.Nodes.constraints}.apply(t,a))||(e.exports=o)},66668:(e,t,n)=>{"use strict";var a,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),n(82772);var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=a?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(43893)),l=n(77077);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}a=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55112),n(33883),n(55455),n(12030),n(71158),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,s,c,d,p,u){return s.Nodes["coll-index"]||(i.Browser.Nodes["coll-index"]=i.Browser.Collection.extend({node:"index",label:e("Indexes"),type:"coll-index",columns:["name","description"],hasStatistics:!0,statsPrettifyFields:[e("Size"),e("Index size")],canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema})),s.Nodes.index||(i.Browser.Nodes.index=s.Node.extend({parent_type:["table","view","mview","partition"],collection_type:["coll-table","coll-view"],sqlAlterHelp:"sql-alterindex.html",sqlCreateHelp:"sql-createindex.html",dialogHelp:t("help.static",{filename:"index_dialog.html"}),type:"index",label:e("Index"),hasSQL:!0,hasDepends:!0,hasStatistics:!0,width:s.stdW.md+"px",statsPrettifyFields:[e("Size"),e("Index size")],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,s.add_menus([{name:"create_index_on_coll",node:"coll-index",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index",node:"index",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onMatView",node:"mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"}]))},canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema,model:i.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,oid:void 0,nspname:void 0,tabname:void 0,spcname:void 0,amname:"btree"},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",disabled:"inSchema"},{id:"oid",label:e("OID"),cell:"string",type:"int",readonly:!0,mode:["properties"]},{id:"description",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"}]}),canCreate:function(e,t,n){if(n&&0==n.check)return!0;for(var o=s.tree,i=t,r=e,l=[],c=!1,d=!1,p=o.getTreeNodeHierarchy(i).server.version;i;){if(!c&&a.indexOf(["table","partition"],r._type)>-1&&(c=!0,"is_partitioned"in r&&r.is_partitioned&&p<11e4&&(d=!0)),a.indexOf(["schema"],r._type)>-1)return!d;l.push(r._type),r=(i=o.hasParent(i)?o.parent(i):null)?o.itemData(i):null}return!(a.indexOf(l,"catalog")>-1)&&!d},getSchema:function(e,t){var n=i.Browser.Nodes.index;return new r.default((function(){return(0,r.getColumnSchema)(n,e,t)}),{tablespaceList:function(){return(0,l.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},amnameList:function(){return(0,l.getNodeAjaxOptions)("get_access_methods",n,e,t,{jumpAfterNode:"schema"})},columnList:function(){return(0,l.getNodeListByName)("column",e,t,{})}},{node_info:e},{amname:"btree"})}})),s.Nodes.index}.apply(t,a))||(e.exports=o)},27587:(e,t,n)=>{"use strict";var a,o;n(82772),n(32564),n(68309);var i,r=n(52874),l=(i=n(55958))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(55455),n(12030),n(71158),n(56756),n(44092),n(5547)],void 0===(o=function(e,t,n,a,o,i,s,c,d,p,u){return i.Nodes["coll-partition"]||(o.Browser.Nodes["coll-partition"]=o.Browser.Collection.extend({node:"partition",label:e("Partitions"),type:"coll-partition",columns:["name","schema","partition_value","is_partitioned","description"],canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),i.Nodes.partition||(o.Browser.Nodes.partition=i.Node.extend({parent_type:"table",collection_type:"coll-partition",type:"partition",label:e("Partition"),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Size"),e("Indexes size"),e("Table size"),e("TOAST table size"),e("Tuple length"),e("Dead tuple length"),e("Free space")],sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-createtable.html",dialogHelp:t("help.static",{filename:"table_dialog.html"}),hasScriptTypes:["create"],width:"650px",Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"truncate_table",node:"partition",module:this,applies:["object","context"],callback:"truncate_table",category:e("Truncate"),priority:3,label:e("Truncate"),icon:"fa fa-eraser",enable:"canCreate"},{name:"truncate_table_cascade",node:"partition",module:this,applies:["object","context"],callback:"truncate_table_cascade",category:e("Truncate"),priority:3,label:e("Truncate Cascade"),icon:"fa fa-eraser",enable:"canCreate"},{name:"enable_all_triggers",node:"partition",module:this,applies:["object","context"],callback:"enable_triggers_on_table",category:e("Trigger(s)"),priority:4,label:e("Enable All"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable",data:{data_disabled:e("The selected tree node does not support this option.")}},{name:"disable_all_triggers",node:"partition",module:this,applies:["object","context"],callback:"disable_triggers_on_table",category:e("Trigger(s)"),priority:4,label:e("Disable All"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable",data:{data_disabled:e("The selected tree node does not support this option.")}},{name:"reset_table_stats",node:"partition",module:this,applies:["object","context"],callback:"reset_table_stats",category:"Reset",priority:4,label:e("Reset Statistics"),icon:"fa fa-chart-bar",enable:"canCreate"},{name:"detach_partition",node:"partition",module:this,applies:["object","context"],callback:"detach_partition",priority:2,label:e("Detach Partition"),icon:"fa fa-remove"},{name:"count_table_rows",node:"partition",module:i.Nodes.table,applies:["object","context"],callback:"count_table_rows",category:"Count",priority:2,label:e("Count Rows"),enable:!0}]))},generate_url:function(e,t,n,o,r){return-1==a.indexOf(["stats","statistics","dependency","dependent","reset","get_relations","get_oftype","get_attach_tables"],t)?i.Node.generate_url.apply(this,arguments):("statistics"==t&&(t="stats"),r=a.isUndefined(e)||a.isNull(e)?r||{}:i.tree.getTreeNodeHierarchy(e),u.sprintf("table/%s/%s/%s/%s/%s/%s",encodeURIComponent(t),encodeURIComponent(r.server_group._id),encodeURIComponent(r.server._id),encodeURIComponent(r.database._id),encodeURIComponent(r.partition.schema_id),encodeURIComponent(r.partition._id)))},on_done:function(e,t,n,a){1==e.success&&(l.default.success(e.info),n.removeIcon(a),t.icon="icon-partition",n.addIcon(a,{icon:t.icon}),n.unload(a),n.setInode(a),n.deselect(a),setTimeout((function(){n.select(a)}),10))},canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema,callbacks:{enable_triggers_on_table:function(e){this.callbacks.set_triggers.apply(this,[e,{is_enable_trigger:"O"}])},disable_triggers_on_table:function(e){this.callbacks.set_triggers.apply(this,[e,{is_enable_trigger:"D"}])},set_triggers:function(e,t){var a=e||{},o=i.tree,r=a.item||o.selected(),s=r?o.itemData(r):void 0;if(!s)return!1;n.ajax({url:this.generate_url(r,"set_trigger",s,!0),type:"PUT",data:t,dataType:"json"}).done((function(e){1==e.success&&(l.default.success(e.info),o.unload(r),o.setInode(r),o.deselect(r),setTimeout((function(){o.select(r)}),10))})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),o.unload(r)}))},truncate_table:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!1}])},truncate_table_cascade:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!0}])},truncate:function(t,a){var o=t||{},r=this,s=i.tree,c=o.item||s.selected(),d=c?s.itemData(c):void 0;if(!d)return!1;l.default.confirm(e("Truncate Table"),e("Are you sure you want to truncate table %s?",d.label),(function(){var e=d;n.ajax({url:r.generate_url(c,"truncate",d,!0),type:"PUT",data:a,dataType:"json"}).done((function(t){r.on_done(t,e,s,c)})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),s.unload(c)}))}))},reset_table_stats:function(t){var a=t||{},o=this,r=i.tree,s=a.item||r.selected(),c=s?r.itemData(s):void 0;if(!c)return!1;l.default.confirm(e("Reset statistics"),e('Are you sure you want to reset the statistics for table "%s"?',c._label),(function(){var e=c;n.ajax({url:o.generate_url(s,"reset",c,!0),type:"DELETE"}).done((function(t){o.on_done(t,e,r,s)})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),r.unload(s)}))}),(function(){}))},detach_partition:function(t){var a=t||{},o=this,r=i.tree,s=a.item||r.selected(),c=s?r.itemData(s):void 0;if(!c)return!1;l.default.confirm(e("Detach Partition"),e("Are you sure you want to detach the partition %s?",c._label),(function(){n.ajax({url:o.generate_url(s,"detach",c,!0),type:"PUT"}).done((function(e){if(1==e.success){l.default.success(e.info);var t=r.next(s);t||(t=r.prev(s))||(t=r.parent(s)),r.remove(s),t&&r.select(t)}})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n)}))}),(function(){}))}},getSchema:function(e,t){return(0,r.getNodePartitionTableSchema)(e,t,i)},model:i.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,oid:void 0,description:void 0,is_partitioned:!1,partition_value:void 0},initialize:function(e,t){if(0===a.size(e)){var n=i.serverInfo[t.node_info.server._id].user,o=t.node_info.schema;this.set({relowner:n.name,schema:o._label},{silent:!0})}i.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),type:"text",mode:["properties","create","edit"]},{id:"oid",label:e("OID"),type:"text",mode:["properties"]},{id:"schema",label:e("Schema"),type:"text",node:"schema",mode:["create","edit","properties"]},{id:"is_partitioned",label:e("Partitioned table?"),cell:"switch",type:"switch",mode:["properties","create","edit"]},{id:"partition_value",label:e("Partition Scheme"),type:"text",visible:!1},{id:"description",label:e("Comment"),type:"multiline",mode:["properties","create","edit"]}]}),canCreate:p.isTreeItemOfChildOfSchema,canCreate_with_trigger_enable:function(e,t,n){if(this.canCreate.apply(this,[e,t,n]))return e.tigger_count>0},canCreate_with_trigger_disable:function(e,t,n){if(this.canCreate.apply(this,[e,t,n]))return e.tigger_count>0&&e.has_enable_triggers>0}})),i.Nodes.partition}.apply(t,a))||(e.exports=o)},57617:(e,t,n)=>{"use strict";var a,o;n(15306),n(74916);var i,r=(i=n(55923))&&i.__esModule?i:{default:i},l=n(77077);a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(55455),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,s,c,d){return i.Nodes["coll-row_security_policy"]||(o.Browser.Nodes["coll-row_security_policy"]=o.Browser.Collection.extend({node:"row_security_policy",label:e("RLS Policies"),type:"coll-row_security_policy",columns:["name","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})),i.Nodes.row_security_policy||(o.Browser.Nodes.row_security_policy=i.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"row_security_policy",label:e("RLS Policy"),hasSQL:!0,hasDepends:!0,width:i.stdW.sm+"px",sqlAlterHelp:"sql-alterpolicy.html",sqlCreateHelp:"sql-createpolicy.html",dialogHelp:t("help.static",{filename:"rls_policy_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_row_security_policy_on_coll",node:"coll-row_security_policy",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("RLS Policy..."),icon:"wcTabIcon icon-row_security_policy",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_row_security_policy",node:"row_security_policy",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("RLS Policy..."),icon:"wcTabIcon icon-row_security_policy",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_row_security_policy_on_coll",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:6,label:e("RLS Policy..."),icon:"wcTabIcon icon-row_security_policy",data:{action:"create",check:!0},enable:"canCreate"}]))},canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema,getSchema:function(e,t){return new r.default({role:function(){return(0,l.getNodeListByName)("role",e,t,{},(function(){return!0}),(function(e){return e.unshift({label:"PUBLIC",value:"public"}),e}))},nodeInfo:e})},model:o.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",readonly:!0,cellHeaderClasses:"width_percent_50",mode:["properties"]},{id:"oid",label:e("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]}],validate:function(t){var n;return this.errorModel.clear(),t&&0==t.length?null:a.isUndefined(this.get("name"))||""==String(this.get("name")).replace(/^\s+|\s+$/g,"")?(n=e("Name cannot be empty."),this.errorModel.set("name",n),n):this.isNew()||a.isNull(this.get("using_orig"))||""==this.get("using_orig")||""!=String(this.get("using")).replace(/^\s+|\s+$/g,"")?this.isNew()||a.isNull(this.get("withcheck_orig"))||""==this.get("withcheck_orig")||""!=String(this.get("withcheck")).replace(/^\s+|\s+$/g,"")?null:(n=e('"Withcheck" can not be empty once the value is set'),this.errorModel.set("withcheck",n),n):(n=e('"USING" can not be empty once the value is set'),this.errorModel.set("using",n),n)},disableWithCheck:function(e){var t=e.get("event");return("SELECT"==t||"DELETE"==t)&&(e.set("withcheck",""),!0)},disableUsing:function(e){return"INSERT"==e.get("event")}}),canCreate:function(e,t){var n=i.tree.getTreeNodeHierarchy(t),a=n.server;return null==n.catalog&&!(a&&a.version<90500)}})),i.Nodes.row_security_policy}.apply(t,a))||(e.exports=o)},28969:(e,t,n)=>{"use strict";var a,o;n(32564),n(15306),n(74916),n(82772);var i=l(n(49663)),r=l(n(55958));function l(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(56756)],void 0===(o=function(e,t,n,a,o,l,s,c){return l.Nodes["coll-rule"]||(o.Browser.Nodes["coll-rule"]=o.Browser.Collection.extend({node:"rule",label:e("Rules"),type:"coll-rule",columns:["name","owner","comment"],canDrop:c.isTreeItemOfChildOfSchema,canDropCascade:c.isTreeItemOfChildOfSchema})),l.Nodes.rule||(o.Browser.Nodes.rule=l.Node.extend({parent_type:["table","view","partition"],type:"rule",sqlAlterHelp:"sql-alterrule.html",sqlCreateHelp:"sql-createrule.html",dialogHelp:t("help.static",{filename:"rule_dialog.html"}),label:e("rule"),collection_type:"coll-table",hasSQL:!0,hasDepends:!0,canDrop:function(e,t){return c.isTreeItemOfChildOfSchema.apply(this,[e,t]),!a.has(e,"label")||"_RETURN"!==e.label},canDropCascade:function(e,t){return c.isTreeItemOfChildOfSchema.apply(this,[e,t]),!a.has(e,"label")||"_RETURN"!==e.label},url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_rule_on_coll",node:"coll-rule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"rule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"enable_rule",node:"rule",module:this,applies:["object","context"],callback:"enable_rule",category:"connect",priority:3,label:e("Enable"),icon:"fa fa-check",enable:"canCreate_with_rule_enable"},{name:"disable_rule",node:"rule",module:this,applies:["object","context"],callback:"disable_rule",category:"drop",priority:3,label:e("Disable"),icon:"fa fa-times",enable:"canCreate_with_rule_disable"}]))},callbacks:{enable_rule:function(e){var t=e||{},a=l.tree,o=t.item||a.selected(),i=o?a.itemData(o):void 0;if(!i)return!1;var s=i;n.ajax({url:this.generate_url(o,"obj",i,!0),type:"PUT",data:{is_enable_rule:"O"},dataType:"json"}).done((function(){r.default.success("Rule updated."),a.removeIcon(o),s.icon="icon-rule",a.addIcon(o,{icon:s.icon}),a.unload(o),a.setInode(!1),a.deselect(o),setTimeout((function(){a.select(o)}),10)})).fail((function(e,t,n){r.default.pgRespErrorNotify(e,n),a.unload(o)}))},disable_rule:function(t){var a=t||{},o=l.tree,i=a.item||o.selected(),s=i?o.itemData(i):void 0;if(!s)return!1;var c=s;n.ajax({url:this.generate_url(i,"obj",s,!0),type:"PUT",data:{is_enable_rule:"D"},dataType:"json"}).done((function(){r.default.success("Rule updated"),o.removeIcon(i),c.icon="icon-rule-bad",o.addIcon(i,{icon:c.icon}),o.unload(i),o.setInode(!1),o.deselect(i),setTimeout((function(){o.select(i)}),10)})).fail((function(t,n,a){r.default.pgRespErrorNotify(t,a,e("Disable rule failed")),o.unload(i)}))}},getSchema:function(e,t){return new i.default({nodeInfo:e,nodeData:t})},model:o.Browser.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),type:"text",disabled:function(e){return!(!e||"_RETURN"!=e.get("name"))||!(e.isNew&&e.isNew()||e.node_info&&e.node_info.server.version>=90400)}},{id:"oid",label:e("OID"),type:"text",mode:["properties"]},{id:"comment",label:e("Comment"),cell:"string",type:"multiline"}],validate:function(){var t,n={},o=this.get("name");return a.isUndefined(o)||a.isNull(o)||""===String(o).replace(/^\s+|\s+$/g,"")?(n.name=e("Please specify name."),t=n.name,this.errorModel.set("name",t),t):(this.errorModel.unset("name"),null)}}),canCreate:function(e,t,n){if(n&&!1===n.check)return!0;for(var o=l.tree,i=t,r=e;i;){if(a.indexOf(["schema"],r._type)>-1)return!0;if("coll-rule"==r._type){var s=o.hasParent(i)?o.parent(i):null,c=o.hasParent(s)?o.parent(s):null,d=o.hasParent(c)?o.parent(c):null,p=d?o.itemData(d):null;return a.isNull(p)||"catalog"!=p._type}if("view"==r._type||"table"==r._type){s=o.hasParent(i)?o.parent(i):null;var u=(c=o.hasParent(s)?o.parent(s):null)?o.itemData(c):null;return!a.isNull(u)&&"schema"==u._type}r=(i=o.hasParent(i)?o.parent(i):null)?o.itemData(i):null}return!0},canCreate_with_rule_enable:function(e,t,n){return!("view"in l.tree.getTreeNodeHierarchy(t))&&("icon-rule-bad"===e.icon&&this.canCreate.apply(this,[e,t,n]))},canCreate_with_rule_disable:function(e,t,n){return!("view"in l.tree.getTreeNodeHierarchy(t))&&("icon-rule"===e.icon&&this.canCreate.apply(e,t,n))}})),l.Nodes["coll-rule"]}.apply(t,a))||(e.exports=o)},94386:(e,t,n)=>{"use strict";var a,o;n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(24812),n(32564),n(21249),n(91058),n(92222);var i,r=n(54851),l=(i=n(55958))&&i.__esModule?i:{default:i};function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n(86189),n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(55455),n(12030),n(71158),n(94405),n(56756),n(5547),n(94622),n(56359)],void 0===(o=function(e,t,n,a,o,i,s,d,p,u,m,f){return s.Nodes["coll-table"]||(s.Nodes["coll-table"]=s.Collection.extend({node:"table",label:t("Tables"),type:"coll-table",columns:["name","relowner","is_partitioned","description"],hasStatistics:!0,statsPrettifyFields:[t("Size"),t("Indexes size"),t("Table size"),t("TOAST table size"),t("Tuple length"),t("Dead tuple length"),t("Free space")],canDrop:f.isTreeItemOfChildOfSchema,canDropCascade:f.isTreeItemOfChildOfSchema})),s.Nodes.table||(s.Nodes.table=m.SchemaChildNode.extend({type:"table",label:t("Table"),collection_type:"coll-table",hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[t("Size"),t("Indexes size"),t("Table size"),t("TOAST table size"),t("Tuple length"),t("Dead tuple length"),t("Free space")],sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-createtable.html",dialogHelp:n("help.static",{filename:"table_dialog.html"}),hasScriptTypes:["create","select","insert","update","delete"],width:s.stdW.lg+"px",Init:function(){this.initialized||(this.initialized=!0,s.add_menus([{name:"create_table_on_coll",node:"coll-table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:t("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_table",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:t("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_table__on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:t("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:!1},enable:"canCreate"},{name:"truncate_table",node:"table",module:this,applies:["object","context"],callback:"truncate_table",category:t("Truncate"),priority:3,label:t("Truncate"),icon:"fa fa-eraser",enable:"canCreate"},{name:"truncate_table_cascade",node:"table",module:this,applies:["object","context"],callback:"truncate_table_cascade",category:t("Truncate"),priority:3,label:t("Truncate Cascade"),icon:"fa fa-eraser",enable:"canCreate"},{name:"truncate_table_identity",node:"table",module:this,applies:["object","context"],callback:"truncate_table_identity",category:t("Truncate"),priority:3,label:t("Truncate Restart Identity"),icon:"fa fa-eraser",enable:"canCreate"},{name:"enable_all_triggers",node:"table",module:this,applies:["object","context"],callback:"enable_triggers_on_table",category:t("Trigger(s)"),priority:4,label:t("Enable All"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable",data:{data_disabled:t("The selected tree node does not support this option.")}},{name:"disable_all_triggers",node:"table",module:this,applies:["object","context"],callback:"disable_triggers_on_table",category:t("Trigger(s)"),priority:4,label:t("Disable All"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable",data:{data_disabled:t("The selected tree node does not support this option.")}},{name:"reset_table_stats",node:"table",module:this,applies:["object","context"],callback:"reset_table_stats",category:"Reset",priority:4,label:t("Reset Statistics"),icon:"fa fa-chart-bar",enable:"canCreate"},{name:"count_table_rows",node:"table",module:this,applies:["object","context"],callback:"count_table_rows",category:"Count",priority:2,label:t("Count Rows"),enable:!0}]),s.Events.on("pgadmin:browser:node:table:updated",this.onTableUpdated,this),s.Events.on("pgadmin:browser:node:type:cache_cleared",this.handle_cache,this),s.Events.on("pgadmin:browser:node:domain:cache_cleared",this.handle_cache,this))},callbacks:{enable_triggers_on_table:function(t){e.enableTriggers(s.tree,l.default,this.generate_url.bind(this),t)},disable_triggers_on_table:function(t){e.disableTriggers(s.tree,l.default,this.generate_url.bind(this),t)},truncate_table:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!1}])},truncate_table_cascade:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!0}])},truncate_table_identity:function(e){this.callbacks.truncate.apply(this,[e,{identity:!0}])},truncate:function(e,n){var o=e||{},i=this,r=s.tree,c=o.item||r.selected(),d=c?r.itemData(c):void 0;if(!d)return!1;l.default.confirm(t("Truncate Table"),t("Are you sure you want to truncate table %s?",d.label),(function(){var e=d;a.ajax({url:i.generate_url(c,"truncate",d,!0),type:"PUT",data:n,dataType:"json"}).done((function(t){1==t.success&&(l.default.success(t.info),r.removeIcon(c),e.icon=e.is_partitioned?"icon-partition":"icon-table",r.addIcon(c,{icon:e.icon}),r.unload(c),r.setInode(c),r.deselect(c),setTimeout((function(){r.select(c)}),10)),2==t.success&&l.default.error(t.info,0)})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),r.unload(c)}))}),(function(){}))},reset_table_stats:function(e){var n=e||{},o=this,i=s.tree,r=n.item||i.selected(),c=r?i.itemData(r):void 0;if(!c)return!1;l.default.confirm(t("Reset statistics"),t('Are you sure you want to reset the statistics for table "%s"?',c._label),(function(){var e=c;a.ajax({url:o.generate_url(r,"reset",c,!0),type:"DELETE"}).done((function(t){1==t.success&&(l.default.success(t.info),i.removeIcon(r),e.icon=e.is_partitioned?"icon-partition":"icon-table",i.addIcon(r,{icon:e.icon}),i.unload(r),i.setInode(r),i.deselect(r),setTimeout((function(){i.select(r)}),10))})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),i.unload(r)}))}),(function(){}))},count_table_rows:function(e){var t=e||{},n=s.tree,o=t.item||n.selected(),i=o?n.itemData(o):void 0;if(!i)return!1;var r=c(c({},i),{},{_type:this.type});a.ajax({url:this.generate_url(o,"count_rows",r,!0),type:"GET"}).done((function(e){l.default.success(e.info),i.rows_cnt=e.data.total_rows,n.unload(o),n.setInode(o),n.deselect(o),setTimeout((function(){n.select(o)}),10)})).fail((function(e,t,a){l.default.pgRespErrorNotify(e,a),n.unload(o)}))}},getSchema:function(e,t){return(0,r.getNodeTableSchema)(e,t,s)},model:s.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,oid:void 0,relowner:void 0,description:void 0,is_partitioned:!1},schema:[{id:"name",label:t("Name"),type:"text",mode:["properties","create","edit"],disabled:"inSchema"},{id:"oid",label:t("OID"),type:"text",mode:["properties"]},{id:"relowner",label:t("Owner"),type:"text",node:"role",mode:["properties","create","edit"],select2:{allowClear:!1},disabled:"inSchema",control:"node-list-by-name"},{id:"is_partitioned",label:t("Partitioned table?"),cell:"switch",type:"switch",mode:["properties","create","edit"],visible:"isVersionGreaterThan96",readonly:function(e){return!e.isNew()}},{id:"description",label:t("Comment"),type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"}],sessChanged:function(){return 2==o.size(this.sessAttrs)&&this.sessAttrs.autovacuum_custom&&this.sessAttrs.toast_autovacuum||1==o.size(this.sessAttrs)&&(this.sessAttrs.autovacuum_custom||this.sessAttrs.toast_autovacuum)?this.get("vacuum_table").sessChanged()||this.get("vacuum_toast").sessChanged():s.DataModel.prototype.sessChanged.apply(this)},inSchema:function(){return!(!this.node_info||!("catalog"in this.node_info))}}),canCreate_with_trigger_enable:function(e,t,n){return e.tigger_count>0&&this.canCreate.apply(this,[e,t,n])},canCreate_with_trigger_disable:function(e,t,n){return e.tigger_count>0&&e.has_enable_triggers>0&&this.canCreate.apply(this,[e,t,n])},onTableUpdated:function(e,t,n){var a,r;if(n.is_partitioned&&"affected_partitions"in n){var l,c=n.affected_partitions,d=[],p=[];if("detached"in c&&c.detached.length>0){s.removeChildTreeNodesById(e,"coll-partition",o.map(c.detached,(function(e){return parseInt(e.oid)}))),l=s.findParentTreeNodeByType(e,"schema");var u=o.groupBy(c.detached,(function(e){return parseInt(e.schema_id)}));for(a in u)if(l=s.findSiblingTreeNode(l,a)){r=o.map(u[a],(function(e){return parseInt(e.oid)}));var m=s.findChildCollectionTreeNode(l,"coll-table");m&&p.push({parent:m,type:"table",treeHierarchy:i.Browser.tree.getTreeNodeHierarchy(l),childrenIDs:o.clone(r)})}}if("attached"in c&&c.attached.length>0){l=s.findParentTreeNodeByType(e,"schema");var f=o.groupBy(c.attached,(function(e){return parseInt(e.schema_id)}));for(a in f)(l=s.findSiblingTreeNode(l,a))&&(r=o.map(f[a],(function(e){return parseInt(e.oid)})),s.removeChildTreeNodesById(l,"coll-table",r)),d=d.concat(r)}if("created"in c&&c.created.length>0&&o.each(c.created,(function(e){d.push(e.oid)})),d.length){var h=s.findChildCollectionTreeNode(e,"coll-partition");h&&p.push({parent:h,type:"partition",treeHierarchy:i.Browser.tree.getTreeNodeHierarchy(e),childrenIDs:d})}!function e(){if(p.length){var t=p.pop();s.addChildTreeNodes(t.treeHierarchy,t.parent,t.type,t.childrenIDs,e)}}()}},handle_cache:function(){this.clear_cache.apply(this,null)}})),s.Nodes.table}.apply(t,a))||(e.exports=o)},40708:(e,t,n)=>{"use strict";var a,o;n(32564),n(82772),n(47941),n(15306),n(74916),n(68309);var i=n(77077),r=s(n(80136)),l=s(n(55958));function s(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,s,c,d){return s.Nodes["coll-trigger"]||(o.Browser.Nodes["coll-trigger"]=o.Browser.Collection.extend({node:"trigger",label:e("Triggers"),type:"coll-trigger",columns:["name","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})),s.Nodes.trigger||(o.Browser.Nodes.trigger=s.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"trigger",label:e("Trigger"),hasSQL:!0,hasDepends:!0,width:s.stdW.sm+"px",sqlAlterHelp:"sql-altertrigger.html",sqlCreateHelp:"sql-createtrigger.html",dialogHelp:t("help.static",{filename:"trigger_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,s.add_menus([{name:"create_trigger_on_coll",node:"coll-trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger",node:"trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"enable_trigger",node:"trigger",module:this,applies:["object","context"],callback:"enable_trigger",category:"connect",priority:3,label:e("Enable"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable"},{name:"disable_trigger",node:"trigger",module:this,applies:["object","context"],callback:"disable_trigger",category:"drop",priority:3,label:e("Disable"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable"},{name:"create_trigger_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"}]))},callbacks:{enable_trigger:function(e){var t=e||{},a=s.tree,o=t.item||a.selected(),i=o?a.itemData(o):void 0;if(!i)return!1;var r=i;n.ajax({url:this.generate_url(o,"enable",i,!0),type:"PUT",data:{is_enable_trigger:"O"},dataType:"json"}).done((function(e){1==e.success&&(l.default.success(e.info),a.removeIcon(o),r.icon="icon-trigger",a.addIcon(o,{icon:r.icon}),a.unload(o),a.setInode(!1),a.deselect(o),setTimeout((function(){a.select(o)}),10))})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),a.unload(o)}))},disable_trigger:function(t){var a=t||{},o=s.tree,i=a.item||o.selected(),r=i?o.itemData(i):void 0;if(!r)return!1;var c=r;n.ajax({url:this.generate_url(i,"enable",r,!0),type:"PUT",data:{is_enable_trigger:"D"},dataType:"json"}).done((function(e){1==e.success&&(l.default.success(e.info),o.removeIcon(i),c.icon="icon-trigger-bad",o.addIcon(i,{icon:c.icon}),o.unload(i),o.setInode(!1),o.deselect(i),setTimeout((function(){o.select(i)}),10))})).fail((function(t,n,a){l.default.pgRespErrorNotify(t,a,e("Disable trigger failed")),o.unload(i)}))}},canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema,getSchema:function(e,t){var n=this;return new r.default({triggerFunction:function(){return(0,i.getNodeAjaxOptions)("get_triggerfunctions",n,e,t,{cacheLevel:"trigger_function",jumpAfterNode:"schema"},(function(e){return a.reject(e,(function(e){return""==e.label}))}))},columns:function(){return(0,i.getNodeListByName)("column",e,t,{cacheLevel:"column"})},nodeInfo:e})},model:o.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,is_row_trigger:!0,fires:"BEFORE"},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",disabled:"inSchema"},{id:"oid",label:e("OID"),cell:"string",type:"int",mode:["properties"]},{id:"is_enable_trigger",label:e("Trigger enabled?"),mode:["edit","properties"],group:e("Definition"),disabled:function(){return!(!this.node_info||!("catalog"in this.node_info)&&!("view"in this.node_info))},options:[{label:e("Enable"),value:"O"},{label:e("Enable Replica"),value:"R"},{label:e("Enable Always"),value:"A"},{label:e("Disable"),value:"D"}],control:"select2",select2:{allowClear:!1,width:"100%"}},{id:"is_row_trigger",label:e("Row trigger?"),type:"switch",group:e("Definition"),mode:["create","edit","properties"],deps:["is_constraint_trigger"],disabled:function(e){if(!e.isNew())return!0;if(a.has(e,"node_info")&&a.has(e.node_info,"table")&&a.has(e.node_info.table,"is_partitioned")&&e.node_info.table.is_partitioned&&e.node_info.server.version<11e4)return setTimeout((function(){e.set("is_row_trigger",!1)}),10),!0;var t=e.get("is_constraint_trigger");if(e.inSchemaWithModelCheck.apply(this,[e])){var n=e.get("is_row_trigger");return!(!a.isUndefined(n)&&"ppas"==e.node_info.server.server_type)}return!a.isUndefined(t)&&!0===t&&(setTimeout((function(){e.set("is_row_trigger",!0)}),10),!0)}},{id:"is_constraint_trigger",label:e("Constraint trigger?"),type:"switch",mode:["create","edit","properties"],group:e("Definition"),deps:["tfunction"],disabled:function(e){var t=e.get("tfunction");return a.has(e,"node_info")&&a.has(e.node_info,"table")&&a.has(e.node_info.table,"is_partitioned")&&e.node_info.table.is_partitioned||-1!=a.indexOf(Object.keys(e.node_info),"view")||"ppas"===e.node_info.server.server_type&&!a.isUndefined(t)&&"Inline EDB-SPL"===t?(setTimeout((function(){e.set("is_constraint_trigger",!1)}),10),!0):e.inSchemaWithModelCheck.apply(this,[e])}},{id:"tgdeferrable",label:e("Deferrable?"),type:"switch",group:e("Definition"),mode:["create","edit","properties"],deps:["is_constraint_trigger"],disabled:function(e){var t=e.get("is_constraint_trigger");return!!e.inSchemaWithModelCheck.apply(this,[e])||!(!a.isUndefined(t)&&!0===t)&&(e.get("tgdeferrable")&&setTimeout((function(){e.set("tgdeferrable",!1)}),10),!0)}},{id:"tginitdeferred",label:e("Deferred?"),type:"switch",group:e("Definition"),mode:["create","edit","properties"],deps:["tgdeferrable","is_constraint_trigger"],disabled:function(e){var t=e.get("tgdeferrable");return!!e.inSchemaWithModelCheck.apply(this,[e])||!(!a.isUndefined(t)&&t)&&(e.get("tginitdeferred")&&setTimeout((function(){e.set("tginitdeferred",!1)}),10),!e.get("is_constraint_trigger"))}},{id:"tfunction",label:e("Trigger function"),type:"text",disabled:"inSchemaWithModelCheck",mode:["create","edit","properties"],group:e("Definition"),control:"node-ajax-options",url:"get_triggerfunctions",url_jump_after_node:"schema",cache_node:"trigger_function"},{id:"tgargs",label:e("Arguments"),cell:"string",group:e("Definition"),type:"text",mode:["create","edit","properties"],deps:["tfunction"],disabled:function(e){var t=e.get("tfunction"),n=e.node_info.server.server_type;return!!e.inSchemaWithModelCheck.apply(this,[e])||"ppas"===n&&!a.isUndefined(t)&&"Inline EDB-SPL"===t&&(e.set("tgargs",void 0),!0)}},{id:"fires",label:e("Fires"),deps:["is_constraint_trigger"],mode:["create","edit","properties"],group:e("Events"),options:function(e){return-1!=a.indexOf(Object.keys(e.model.node_info),"table")?[{label:"BEFORE",value:"BEFORE"},{label:"AFTER",value:"AFTER"}]:[{label:"BEFORE",value:"BEFORE"},{label:"AFTER",value:"AFTER"},{label:"INSTEAD OF",value:"INSTEAD OF"}]},control:"select2",select2:{allowClear:!1,width:"100%"},disabled:function(e){if(!e.isNew())return!0;var t=e.get("is_constraint_trigger");if(e.inSchemaWithModelCheck.apply(this,[e])){var n=e.get("fires");return!(!a.isUndefined(n)&&"ppas"==e.node_info.server.server_type)}return!a.isUndefined(t)&&!0===t&&(setTimeout((function(){e.set("fires","AFTER")}),10),!0)}},{type:"nested",control:"fieldset",mode:["create","edit","properties"],label:e("Events"),group:e("Events"),contentClass:"row",schema:[{id:"evnt_insert",label:e("INSERT"),type:"switch",mode:["create","edit","properties"],group:e("Events"),extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function(e){var t=e.get("evnt_insert");return!(!a.isUndefined(t)&&"ppas"==e.node_info.server.server_type&&e.isNew())&&e.inSchemaWithModelCheck.apply(this,[e])}},{id:"evnt_update",label:e("UPDATE"),type:"switch",mode:["create","edit","properties"],group:e("Events"),extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function(e){var t=e.get("evnt_update");return!(!a.isUndefined(t)&&"ppas"==e.node_info.server.server_type&&e.isNew())&&e.inSchemaWithModelCheck.apply(this,[e])}},{id:"evnt_delete",label:e("DELETE"),type:"switch",mode:["create","edit","properties"],group:e("Events"),extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function(e){var t=e.get("evnt_delete");return!(!a.isUndefined(t)&&"ppas"==e.node_info.server.server_type&&e.isNew())&&e.inSchemaWithModelCheck.apply(this,[e])}},{id:"evnt_truncate",label:e("TRUNCATE"),type:"switch",group:e("Events"),deps:["is_row_trigger","is_constraint_trigger"],extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:function(e){var t=e.get("is_constraint_trigger"),n=e.get("is_row_trigger"),o=e.node_info.server.server_type;return 1==n?(setTimeout((function(){e.set("evnt_truncate",!1)}),10),!0):!("ppas"===o&&!a.isUndefined(t)&&!a.isUndefined(n)&&!1===t&&e.isNew())&&e.inSchemaWithModelCheck.apply(this,[e])}}]},{id:"whenclause",label:e("When"),type:"text",disabled:"inSchemaWithModelCheck",mode:["create","edit","properties"],control:"sql-field",visible:!0,group:e("Events")},{id:"columns",label:e("Columns"),url:"nodes",control:"node-list-by-name",cache_node:"column",type:"array",select2:{multiple:!0},deps:["evnt_update"],node:"column",group:e("Events"),disabled:function(e){if(this.node_info&&"catalog"in this.node_info)return!0;if(!e.isNew())return!0;var t=e.get("evnt_update");return!(!a.isUndefined(t)&&t)}},{id:"tgoldtable",label:e("Old table"),type:"text",group:e("Transition"),cell:"string",mode:["create","edit","properties"],deps:["fires","is_constraint_trigger","evnt_insert","evnt_update","evnt_delete","columns"],disabled:"disableTransition"},{id:"tgnewtable",label:e("New table"),type:"text",group:e("Transition"),cell:"string",mode:["create","edit","properties"],deps:["fires","is_constraint_trigger","evnt_insert","evnt_update","evnt_delete","columns"],disabled:"disableTransition"},{id:"prosrc",label:e("Code"),group:e("Code"),type:"text",mode:["create","edit"],deps:["tfunction"],tabPanelCodeClass:"sql-code-control",control:c.SqlCodeControl,visible:!0,disabled:function(e){var t=e.get("tfunction");return"ppas"!==e.node_info.server.server_type||a.isUndefined(t)||"Inline EDB-SPL"!==t}},{id:"is_sys_trigger",label:e("System trigger?"),cell:"string",type:"switch",disabled:"inSchemaWithModelCheck",mode:["properties"]},{id:"description",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"}],validate:function(t){var n;return this.errorModel.clear(),t&&0==t.length?null:a.isUndefined(this.get("name"))||""==String(this.get("name")).replace(/^\s+|\s+$/g,"")?(n=e("Name cannot be empty."),this.errorModel.set("name",n),n):a.isUndefined(this.get("tfunction"))||""==String(this.get("tfunction")).replace(/^\s+|\s+$/g,"")?(n=e("Trigger function cannot be empty."),this.errorModel.set("tfunction",n),n):this.get("evnt_truncate")||this.get("evnt_delete")||this.get("evnt_update")||this.get("evnt_insert")?a.isUndefined(this.get("tfunction"))||"Inline EDB-SPL"!==this.get("tfunction")||!a.isUndefined(this.get("prosrc"))&&""!=String(this.get("prosrc")).replace(/^\s+|\s+$/g,"")?null:(n=e("Trigger code cannot be empty."),this.errorModel.set("prosrc",n),n):(n=e("Specify at least one event."),this.errorModel.set("evnt_truncate"," "),this.errorModel.set("evnt_delete"," "),this.errorModel.set("evnt_update"," "),this.errorModel.set("evnt_insert",n),n)},inSchema:function(){return!(!this.node_info||!("catalog"in this.node_info))},inSchemaWithModelCheck:function(e){return!this.node_info||!("schema"in this.node_info)||!e.isNew()},inSchemaWithColumnCheck:function(e){return!this.node_info||!("schema"in this.node_info)||!e.isNew()&&(a.isUndefined(e.get("attnum"))||e.get("attnum")<1)},disableTransition:function(e){if(!e.isNew())return!0;var t=!1,n=null,o=this.name,i=0;return-1==a.indexOf(Object.keys(e.node_info),"table")||e.node_info.server.version<1e5||("tgoldtable"==o?n="evnt_delete":"tgnewtable"==o&&(n="evnt_insert"),e.get("evnt_insert")&&i++,e.get("evnt_update")&&i++,e.get("evnt_delete")&&i++,e.get("is_constraint_trigger")||"AFTER"!=e.get("fires")||!e.get("evnt_update")&&!e.get(n)||1!=i||(t=e.get("evnt_update")&&a.size(e.get("columns"))>=1&&""!=e.get("columns")[0]),t&&setTimeout((function(){e.get(o)&&e.set(o,null)}),10),t)}}),canCreate:d.isTreeItemOfChildOfSchema,canCreate_with_trigger_enable:function(e,t,n){return!("view"in s.tree.getTreeNodeHierarchy(t))&&("icon-trigger-bad"===e.icon&&this.canCreate.apply(this,[e,t,n]))},canCreate_with_trigger_disable:function(e,t,n){return!("view"in s.tree.getTreeNodeHierarchy(t))&&("icon-trigger"===e.icon&&this.canCreate.apply(this,[e,t,n]))}})),s.Nodes.trigger}.apply(t,a))||(e.exports=o)},70929:(e,t,n)=>{"use strict";var a,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),n(68309);var r=n(77077),l=n(40345),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=a?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(31434));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(71158),n(94405),n(56756),n(5547)],void 0===(o=function(e,t,n,a,o,i,c,d,p,u){return i.Nodes["coll-type"]||(i.Nodes["coll-type"]=i.Collection.extend({node:"type",label:e("Types"),type:"coll-type",columns:["name","typeowner","description"],canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema})),i.Nodes.type||(i.Nodes.type=p.SchemaChildNode.extend({type:"type",sqlAlterHelp:"sql-altertype.html",sqlCreateHelp:"sql-createtype.html",dialogHelp:t("help.static",{filename:"type_dialog.html"}),label:e("Type"),collection_type:"coll-type",hasSQL:!0,hasDepends:!0,width:i.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_type_on_coll",node:"coll-type",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_type",node:"type",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_type",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:!1},enable:"canCreate"}]))},ext_funcs:void 0,model:i.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,is_sys_type:!1,typtype:void 0},initialize:function(e,t){if(0===a.size(e)){var n=i.serverInfo[t.node_info.server._id].user,o=t.node_info.schema;this.set({typeowner:n.name,schema:o._label},{silent:!0})}i.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:"schemaCheck"},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"typeowner",label:e("Owner"),cell:"string",control:"node-list-by-name",type:"text",mode:["properties","create","edit"],node:"role",disabled:"inSchema",select2:{allowClear:!1}},{id:"description",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"}]}),getSchema:function(e,t){var n=o.Browser.Nodes.type;return new s.default((function(a){return(0,l.getNodePrivilegeRoleSchema)(n,e,t,a)}),(function(){return(0,s.getCompositeSchema)(n,e,t)}),(function(){return(0,s.getRangeSchema)(n,e,t)}),(function(){return(0,s.getExternalSchema)(n,e,t)}),(function(){return(0,s.getDataTypeSchema)(n,e,t)}),{roles:function(){return(0,r.getNodeListByName)("role",e,t,{cacheLevel:"database"})},schemas:function(){return(0,r.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},server_info:i.serverInfo[e.server._id],node_info:e},{typeowner:i.serverInfo[e.server._id].user.name,schema:"catalog"in e?e.catalog.label:e.schema.label,typtype:"c"})}})),i.Nodes.type}.apply(t,a))||(e.exports=o)},21532:(e,t,n)=>{"use strict";var a,o;n(68309),n(82772),n(15306),n(74916);var i=d(n(15151)),r=n(77077),l=n(40345),s=n(87954),c=d(n(55958));function d(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(55455),n(33883),n(12030),n(94405),n(56756),n(44092),n(63563)],void 0===(o=function(e,t,n,a,o,d,p,u,m,f,h){return p.Nodes["coll-mview"]||(p.Nodes["coll-mview"]=p.Collection.extend({node:"mview",label:e("Materialized Views"),type:"coll-mview",columns:["name","owner","comment"],canDrop:f.isTreeItemOfChildOfSchema,canDropCascade:f.isTreeItemOfChildOfSchema})),p.Nodes.mview||(p.Nodes.mview=m.SchemaChildNode.extend({type:"mview",sqlAlterHelp:"sql-altermaterializedview.html",sqlCreateHelp:"sql-creatematerializedview.html",dialogHelp:t("help.static",{filename:"materialized_view_dialog.html"}),label:e("Materialized View"),hasSQL:!0,hasDepends:!0,hasScriptTypes:["create","select"],collection_type:"coll-mview",width:p.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,o.Browser.add_menu_category("refresh_mview",e("Refresh View"),18,""),p.add_menus([{name:"create_mview_on_coll",node:"coll-mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,icon:"wcTabIcon icon-mview",data:{action:"create",check:!0},enable:"canCreate",label:e("Materialized View...")},{name:"create_mview",node:"mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,icon:"wcTabIcon icon-mview",data:{action:"create",check:!0},enable:"canCreate",label:e("Materialized View...")},{name:"create_mview",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:18,icon:"wcTabIcon icon-mview",data:{action:"create",check:!1},enable:"canCreate",label:e("Materialized View...")},{name:"refresh_mview_data",node:"mview",module:this,priority:1,callback:"refresh_mview",category:"refresh_mview",applies:["object","context"],label:e("With data"),data:{concurrent:!1,with_data:!0},icon:"fa fa-recycle"},{name:"refresh_mview_nodata",node:"mview",callback:"refresh_mview",priority:2,module:this,category:"refresh_mview",applies:["object","context"],label:e("With no data"),data:{concurrent:!1,with_data:!1},icon:"fa fa-sync-alt"},{name:"refresh_mview_concurrent",node:"mview",module:this,category:"refresh_mview",enable:"is_version_supported",data:{concurrent:!0,with_data:!0},priority:3,applies:["object","context"],callback:"refresh_mview",label:e("With data (concurrently)"),icon:"fa fa-recycle"},{name:"refresh_mview_concurrent_nodata",node:"mview",module:this,category:"refresh_mview",enable:"is_version_supported",data:{concurrent:!0,with_data:!1},priority:4,applies:["object","context"],callback:"refresh_mview",label:e("With no data (concurrently)"),icon:"fa fa-sync-alt"}]))},getSchema:function(e,t){var n=this;return new i.default((function(n){return(0,l.getNodePrivilegeRoleSchema)("",e,t,n)}),(function(){return(0,s.getNodeVacuumSettingsSchema)(n,e,t)}),{role:function(){return(0,r.getNodeListByName)("role",e,t)},schema:function(){return(0,r.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},spcname:function(){return(0,r.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},nodeInfo:e},{owner:p.serverInfo[e.server._id].user.name,schema:e.schema.label})},model:p.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){if(0===a.size(e)){var n=t.node_info.schema._label||"public",o=p.serverInfo[t.node_info.server._id].user;this.set({schema:n,owner:o.name},{silent:!0})}p.Node.Model.prototype.initialize.apply(this,arguments)},defaults:{spcname:void 0},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",disabled:"inSchema"},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:e("Owner"),cell:"string",control:"node-list-by-name",select2:{allowClear:!1},node:"role",disabled:"inSchema"},{id:"comment",label:e("Comment"),cell:"string",type:"multiline"}],sessChanged:function(){return 2==a.size(this.sessAttrs)&&this.sessAttrs.autovacuum_custom&&this.sessAttrs.toast_autovacuum||1==a.size(this.sessAttrs)&&(this.sessAttrs.autovacuum_custom||this.sessAttrs.toast_autovacuum)?this.get("vacuum_table").sessChanged()||this.get("vacuum_toast").sessChanged():p.DataModel.prototype.sessChanged.apply(this)},validate:function(t){var n,o={},i=this.get("name"),r=this.get("definition");return!a.indexOf(t,"autovacuum_custom")||-1==a.indexOf(t,"autovacuum_enabled")&&-1==a.indexOf(t,"toast_autovacuum_enabled")?a.isUndefined(i)||a.isNull(i)||""==String(i).replace(/^\s+|\s+$/g,"")?(o.name=e("Please specify name."),n=o.name,this.errorModel.set("name",n),n):(this.errorModel.unset("name"),a.isUndefined(r)||a.isNull(r)||""==String(r).replace(/^\s+|\s+$/g,"")?(o.definition=e("Please enter view definition."),n=o.definition,this.errorModel.set("definition",n),n):(this.errorModel.unset("definition"),null)):null},inSchema:function(){return!(!this.node_info||!("catalog"in this.node_info))}}),refresh_mview:function(t){var a=t||{},o=this,i=p.tree,r=a.item||i.selected(),l=r?i.itemData(r):void 0,s=null;if(!l)return!1;for(var u=r;u;){var m=p.tree.itemData(u);if("server"==m._type){s=m;break}if(!p.tree.hasParent(u)){c.default.alert(e("Please select server or child node from tree."));break}u=p.tree.parent(u)}s&&h.hasBinariesConfiguration(p,s,d)&&n.ajax({url:o.generate_url(r,"check_utility_exists",l,!0),type:"GET",dataType:"json"}).done((function(a){a.success?n.ajax({url:o.generate_url(r,"refresh_data",l,!0),type:"PUT",data:{concurrent:t.concurrent,with_data:t.with_data},dataType:"json"}).done((function(t){t.data&&t.data.status?(c.default.success(t.data.info),p.Events.trigger("pgadmin-bgprocess:created",o)):c.default.alert(e("Failed to create materialized view refresh job."),t.errormsg)})).fail((function(t,n,a){c.default.pgRespErrorNotify(t,a,e("Failed to create materialized view refresh job."))})):c.default.alert(e("Utility not found"),a.errormsg)})).fail((function(){c.default.alert(e("Utility not found"),e("Failed to fetch Utility information"))}))},is_version_supported:function(e,t){var n=o.Browser.tree,i=t||n.selected(),r=n&&n.getTreeNodeHierarchy(i);return(a.isUndefined(r)?0:r.server.version)>=90400}})),p.Nodes.mview}.apply(t,a))||(e.exports=o)},12e3:(e,t,n)=>{"use strict";var a,o;n(68309),n(23123),n(74916),n(15306);var i,r=n(77077),l=n(40345),s=(i=n(45193))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(12030),n(94405),n(56756),n(63563),n(28969)],void 0===(o=function(e,t,n,a,o,i,c,d,p){return i.Nodes["coll-view"]||(i.Nodes["coll-view"]=i.Collection.extend({node:"view",label:e("Views"),type:"coll-view",columns:["name","owner","comment"],canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),i.Nodes.view||(i.Nodes.view=d.SchemaChildNode.extend({type:"view",sqlAlterHelp:"sql-alterview.html",sqlCreateHelp:"sql-createview.html",dialogHelp:t("help.static",{filename:"view_dialog.html"}),label:e("View"),hasSQL:!0,hasDepends:!0,hasScriptTypes:["create","select","insert"],collection_type:"coll-view",Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_view_on_coll",node:"coll-view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_view",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_view",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:17,label:e("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){return new s.default((function(n){return(0,l.getNodePrivilegeRoleSchema)("",e,t,n)}),e,{role:function(){return(0,r.getNodeListByName)("role",e,t)},schema:function(){return(0,r.getNodeListByName)("schema",e,t,{cacheLevel:"database"})}},{owner:i.serverInfo[e.server._id].user.name,schema:e.schema?e.schema.label:""})},model:i.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){if(0===a.size(e)){var n=t.node_info.schema._label||"public",o=i.serverInfo[t.node_info.server._id].user;this.set({schema:n,owner:o.name},{silent:!0})}i.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text",disabled:"notInSchema"},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:e("Owner"),cell:"string",control:"node-list-by-name",node:"role",disabled:"notInSchema",select2:{allowClear:!1}},{id:"schema",label:e("Schema"),cell:"string",first_empty:!1,control:"node-list-by-name",type:"text",cache_level:"database",node:"schema",disabled:"notInSchema",mode:["create","edit"],select2:{allowClear:!1},cache_node:"database"},{id:"system_view",label:e("System view?"),cell:"string",type:"switch",mode:["properties"]},{id:"acl",label:e("Privileges"),mode:["properties"],type:"text",group:e("Security")},{id:"comment",label:e("Comment"),cell:"string",type:"multiline",disabled:"notInSchema"},{id:"security_barrier",label:e("Security barrier?"),type:"switch",min_version:"90200",group:e("Definition"),disabled:"notInSchema"},{id:"check_option",label:e("Check options"),control:"select2",group:e("Definition"),type:"text",min_version:"90400",mode:["properties","create","edit"],select2:{allowClear:!1},disabled:"notInSchema",options:[{label:e("No"),value:"no"},{label:e("Local"),value:"local"},{label:e("Cascaded"),value:"cascaded"}]},{id:"definition",label:e("Code"),cell:"string",type:"text",mode:["create","edit"],group:e("Code"),tabPanelCodeClass:"sql-code-control",disabled:"notInSchema",control:c.SqlCodeControl.extend({onChange:function(){if(c.SqlCodeControl.prototype.onChange.apply(this,arguments),this.model&&this.model.changed&&"pg"==this.model.node_info.server.server_type&&void 0!==this.model.get("oid")&&this.model.origSessAttrs&&this.model.changed.definition!=this.model.origSessAttrs.definition){var t=this.model.origSessAttrs.definition&&this.model.origSessAttrs.definition.replace(/\s/gi,"").split("FROM"),n=[];void 0!==this.model.changed.definition&&(n=this.model.changed.definition.replace(/\s/gi,"").split("FROM")),t.length!=n.length||t.length>1&&t[0]!=n[0]?this.model.warn_text=e("Changing the columns in a view requires dropping and re-creating the view. This may fail if other objects are dependent upon this view, or may cause procedural functions to fail if they are not modified to take account of the changes.")+"<br><br><b>"+e("Do you wish to continue?")+"</b>":this.model.warn_text=void 0}else this.model.warn_text=void 0}})},i.SecurityGroupSchema,{id:"datacl",label:e("Privileges"),type:"collection",model:i.Node.PrivilegeRoleModel.extend({privileges:["a","r","w","d","D","x","t"]}),uniqueCol:["grantee"],editable:!1,group:"security",mode:["edit","create"],canAdd:!0,canDelete:!0,control:"unique-col-collection",disabled:"notInSchema"},{id:"seclabels",label:e("Security labels"),model:i.SecLabelModel,editable:!1,type:"collection",canEdit:!1,group:"security",canDelete:!0,mode:["edit","create"],canAdd:!0,disabled:"notInSchema",control:"unique-col-collection",uniqueCol:["provider"]}],validate:function(){var t,n={},o=this.get("name"),i=this.get("definition");return a.isUndefined(o)||a.isNull(o)||""==String(o).replace(/^\s+|\s+$/g,"")?(n.name=e("Please specify name."),t=n.name,this.errorModel.set("name",t),t):(this.errorModel.unset("name"),a.isUndefined(i)||a.isNull(i)||""==String(i).replace(/^\s+|\s+$/g,"")?(n.definition=e("Please enter view code."),t=n.definition,this.errorModel.set("definition",t),t):(this.errorModel.unset("definition"),null))},notInSchema:function(){return!(!this.node_info||!("catalog"in this.node_info))}})})),i.Nodes.view}.apply(t,a))||(e.exports=o)},68169:(e,t,n)=>{"use strict";var a,o;n(92222),n(32564),n(68309),n(64765),n(74916);var i=n(77077),r=n(40345),l=n(14511),s=d(n(82234)),c=d(n(55958));function d(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(81311),n(44092),n(55112),n(96481),n(55455),n(12030),n(10426),n(5547),n(63563),n(64096)],void 0===(o=function(e,t,n,a,o,d,p,u,m,f){if(p.Nodes["coll-database"]||(p.Nodes["coll-database"]=p.Collection.extend({node:"database",label:e("Databases"),type:"coll-database",columns:["name","datowner","comments"],hasStatistics:!0,canDrop:!0,selectParentNodeOnDelete:!0,canDropCascade:!1,statsPrettifyFields:[e("Size"),e("Size of temporary files")]})),!p.Nodes.database){p.Nodes.database=p.Node.extend({parent_type:"server",type:"database",sqlAlterHelp:"sql-alterdatabase.html",sqlCreateHelp:"sql-createdatabase.html",dialogHelp:t("help.static",{filename:"database_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Size"),e("Size of temporary files")],canDrop:function(e){return e.canDrop},selectParentNodeOnDelete:!0,label:e("Database"),node_image:function(){return"pg-icon-database"},width:"700px",Init:function(){this.initialized||(this.initialized=!0,p.add_menus([{name:"create_database_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"create_database_on_coll",node:"coll-database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"create_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"connect_database",node:"database",module:this,applies:["object","context"],callback:"connect_database",category:"connect",priority:4,label:e("Connect Database..."),icon:"fa fa-link",enable:"is_not_connected",data:{data_disabled:e("Selected database is already connected.")}},{name:"disconnect_database",node:"database",module:this,applies:["object","context"],callback:"disconnect_database",category:"drop",priority:5,label:e("Disconnect Database..."),icon:"fa fa-unlink",enable:"is_connected",data:{data_disabled:e("Selected database is already disconnected.")}},{name:"generate_erd",node:"database",module:this,applies:["object","context"],callback:"generate_erd",category:"erd",priority:5,label:e("Generate ERD")}]),a.bindAll(this,"connection_lost"),p.Events.on("pgadmin:database:connection:lost",this.connection_lost))},can_create_database:function(e,t){var n=p.tree.getTreeNodeHierarchy(t).server;return n.connected&&n.user.can_create_db},canCreate:function(e,t){var n=p.tree.getTreeNodeHierarchy(t).server;return!(n&&n.version<1e5)},is_not_connected:function(e){return e&&1!=e.connected&&1==e.allowConn},is_connected:function(e){return e&&1==e.connected&&1==e.canDisconn},is_psql_enabled:function(e){return e&&1==e.connected&&d.enable_psql},is_conn_allow:function(e){return e&&1==e.allowConn},connection_lost:function(t,n,o){if(p.tree){for(var i=p.tree,r=t&&i.itemData(t),l=this;r&&"database"!=r._type;)t=i.parent(t),r=t&&i.itemData(t);if(t&&r){if(!r.allowConn)return!1;if(a.isUndefined(r.is_connecting)||!r.is_connecting){r.is_connecting=!0;if(p.Events.on("pgadmin:database:connect:cancelled",(function e(t,n){n._id==this._id&&(r.is_connecting=!1,p.Events.off("pgadmin:database:connect:cancelled",e),n=(t=t&&i.parent(t))&&i.itemData(t),t&&n&&p.Events.trigger("pgadmin:server:disconnect",{item:t,data:n},!1))})),o)return void b(l,r,i,t,!0);c.default.confirm(e("Connection lost"),e("Would you like to reconnect to the database?"),(function(){b(l,r,i,t,!0)}),(function(){r.is_connecting=!1,i.unload(t),i.setInode(t),i.addIcon(t,{icon:"icon-database-not-connected"}),p.Events.trigger("pgadmin:database:connect:cancelled",t,r,l)}))}}}},callbacks:{connect_database:function(e){var t=e||{},n=p.tree,a=t.item||n.selected(),o=a?n.itemData(a):void 0;return o&&"template0"!=o.label&&h(this,o,n,a,!0),!1},disconnect_database:function(t){var o=t||{},i=this,r=p.tree,l=o.item||r.selected(),s=l?r.itemData(l):void 0;return s&&c.default.confirm(e("Disconnect the database"),e("Are you sure you want to disconnect the database - %s?",s.label),(function(){var e=s;n.ajax({url:i.generate_url(l,"connect",s,!0),type:"DELETE"}).done((function(t){if(1==t.success){var n=r.parent(l);t.data.info_prefix&&(t.info="".concat(a.escape(t.data.info_prefix)," - ").concat(t.info)),c.default.success(a.unescape(t.info)),r.removeIcon(l),e.connected=!1,e.icon="icon-database-not-connected",r.addIcon(l,{icon:e.icon}),r.unload(l),p.Events.trigger("pgadmin:browser:tree:update-tree-state",l),setTimeout((function(){r.select(n)}),10)}else{try{c.default.error(t.errormsg)}catch(e){console.warn(e.stack||e)}r.unload(l)}})).fail((function(e,t,n){c.default.pgRespErrorNotify(e,n),r.unload(l)}))}),(function(){return!0})),!1},generate_erd:function(e){var t=e||{},n=p.tree,a=t.item||n.selected(),o=a?n.itemData(a):void 0;p.erd.showErdTool(o,a,!0)},beforeopen:function(e,t){return!(!t||"database"!=t._type||"template0"==t.label)&&(p.tree.addIcon(e,{icon:t.icon}),!(!t.connected&&t.allowConn&&!t.is_connecting)||(t.is_connecting=!0,h(this,t,p.tree,e,!0),!1))},selected:function(e,t){return!(!t||"database"!=t._type)&&(p.tree.addIcon(e,{icon:t.icon}),t.connected||!t.allowConn||t.is_connecting||(t.is_connecting=!0,h(this,t,p.tree,e,!1)),p.Node.callbacks.selected.apply(this,arguments))},refresh:function(e,t){var n=p.tree,a=t||n.selected(),o=n.itemData(a);o.allowConn&&p.Node.callbacks.refresh.apply(this,arguments)}},getSchema:function(e,t){var n=this,o=function(){return(0,i.getNodeAjaxOptions)("get_ctypes",n,e,t,{cacheLevel:"server"})};return new s.default((function(){return(0,l.getNodeVariableSchema)(n,e,t,!1,!0)}),(function(a){return(0,r.getNodePrivilegeRoleSchema)(n,e,t,a)}),{role:function(){return(0,i.getNodeListByName)("role",e,t)},encoding:function(){return(0,i.getNodeAjaxOptions)("get_encodings",n,e,t,{cacheLevel:"server"})},template:function(){return(0,i.getNodeAjaxOptions)("get_databases",n,e,t,{cacheLevel:"server"},(function(e){var t=[];return e&&a.isArray(e)&&a.each(e,(function(e){t.push({label:e,value:e,image:"pg-icon-database"})})),t}))},spcname:function(){return(0,i.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},datcollate:o,datctype:o},{datowner:p.serverInfo[e.server._id].user.name})},model:p.Node.Model.extend({idAttribute:"did",defaults:{name:void 0,owner:void 0,comment:void 0},initialize:function(e,t){var n=0===a.size(e);if(n){var o=p.serverInfo[t.node_info.server._id].user;this.set({datowner:o.name},{silent:!0})}p.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Database"),cell:"string",editable:!1,type:"text"},{id:"did",label:e("OID"),cell:"string",mode:["properties"],editable:!1,type:"text"},{id:"datowner",label:e("Owner"),editable:!1,type:"text",node:"role",control:m.NodeListByNameControl,select2:{allowClear:!1}},{id:"comments",label:e("Comment"),editable:!1,type:"multiline"}]})}),p.SecurityGroupSchema={id:"security",label:e("Security"),type:"group",visible:function(e){return!e||!("node_info"in e)||!("catalog"in(e.node_info||e.handler.node_info))}};var h=function(e,t,n,a,o){b(e,t,n,a,o)},b=function(t,a,o,i,r){var l=r||a.connected,s=function t(n,i,l,s,p,b,g,_){(a.is_connecting=!1,200!=n.status&&-1!==n.responseText.search("Ticket expired"))?(o.addIcon(g,{icon:"icon-server-connecting"}),f.fetch_ticket().then((function(){h(s,p,b,g,r)}),(function(t){o.setInode(g),o.addIcon(g,{icon:"icon-database-not-connected"}),c.default.pgNotifier(t,n,e("Connect  to database."))}))):(_||(o.setInode(g),o.addIcon(g,{icon:"icon-database-not-connected"})),c.default.pgNotifier("error",n,l,(function(n){setTimeout((function(){"CRYPTKEY_SET"==n?h(s,p,b,g,r):u.dlgServerPass(e("Connect to database"),n,s,p,b,g,_,d,t,m).resizeTo()}),100)})))},d=function(n,a,o,i,r,l){o.is_connecting=!1,n&&n.data&&("boolean"==typeof n.data.connected&&(o.connected=n.data.connected),"string"==typeof n.data.icon&&(i.removeIcon(r),o.icon=n.data.icon,i.addIcon(r,{icon:o.icon})),n.data.already_connected&&(n.info=e("Database already connected.")),n.data.info_prefix&&(n.info="".concat(n.data.info_prefix," - ").concat(n.info)),n.data.already_connected?c.default.info(n.info):c.default.success(n.info),t.trigger("connected",t,r,o),p.Events.trigger("pgadmin:database:connected",r,o),l||setTimeout((function(){i.select(r),i.open(r)}),10))},m=function(e,n,a){a.is_connecting=!1;var o=e.parent(n);e.unload(n),e.setInode(n),e.removeIcon(n),e.addIcon(n,{icon:"icon-database-not-connected"}),t.trigger("connect:cancelled",t,n,a),p.Events.trigger("pgadmin:database:connect:cancelled",n,a,t),e.select(o)};n.post(t.generate_url(i,"connect",a,!0)).done((function(e){if(1==e.success)return d(e,t,a,o,i,l)})).fail((function(n,r,c){return 410===n.status&&(c=e("Error: Object not found - %s.",c)),s(n,0,c,t,a,o,i,l)}))}}return p.Nodes["coll-database"]}.apply(t,a))||(e.exports=o)},23612:(e,t,n)=>{"use strict";var a,o;n(68309),n(88674),n(41539);var i=n(77077),r=d(n(77826)),l=d(n(2832)),s=d(n(96486)),c=d(n(55958));function d(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(55112),n(33883),n(12030),n(5547)],void 0===(o=function(e,t,n,a,o,d){return o.Nodes["coll-subscription"]||(o.Nodes["coll-subscription"]=o.Collection.extend({node:"subscription",label:e("Subscriptions"),type:"coll-subscription",columns:["name","subowner","pub","enabled"],hasStatistics:!0})),o.Nodes.subscription||(o.Nodes.subscription=o.Node.extend({parent_type:"database",type:"subscription",sqlAlterHelp:"sql-altersubscription.html",sqlCreateHelp:"sql-createsubscription.html",dialogHelp:t("help.static",{filename:"subscription_dialog.html"}),label:e("Subscription"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,hasStatistics:!0,width:"501px",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_subscription_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),icon:"wcTabIcon icon-subscription",data:{action:"create"},enable:o.Nodes.database.canCreate},{name:"create_subscription_on_coll",node:"coll-subscription",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),icon:"wcTabIcon icon-subscription",data:{action:"create"},enable:"canCreate"},{name:"create_subscription",node:"subscription",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),icon:"wcTabIcon icon-subscription",data:{action:"create"},enable:"canCreate"}]))},model:o.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,subowner:void 0,pubtable:void 0,connect_timeout:10,pub:[],enabled:!0,create_slot:!0,copy_data:!0,connect:!0,copy_data_after_refresh:!1,sync:"off",refresh_pub:!1,password:"",sslmode:"prefer",sslcompression:!1,sslcert:"",sslkey:"",sslrootcert:"",sslcrl:"",host:"",hostaddr:"",port:5432,db:"postgres"},initialize:function(e,t){var n=0===s.default.size(e);if(n){var a=o.serverInfo[t.node_info.server._id].user;this.set({subowner:a.name},{silent:!0})}o.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),type:"text",mode:["properties","create","edit"],visible:function(){return!s.default.isUndefined(this.node_info)&&!s.default.isUndefined(this.node_info.server)&&!s.default.isUndefined(this.node_info.server.version)&&this.node_info.server.version>=1e5}},{id:"oid",label:e("OID"),cell:"string",mode:["properties"],type:"text"},{id:"subowner",label:e("Owner"),type:"text",control:d.NodeListByNameControl,node:"role",mode:["edit","properties","create"],select2:{allowClear:!1},disabled:function(e){return!!e.isNew()}},{id:"enabled",label:e("Enabled?"),type:"switch",mode:["properties"],group:e("With"),readonly:"isConnect",deps:["connect"],helpMessage:e("Specifies whether the subscription should be actively replicating, or whether it should be just setup but not started yet.")},{id:"pub",label:e("Publication"),type:"text",group:e("Connection"),mode:["properties"]}],sessChanged:function(){return!(!this.isNew()&&s.default.isUndefined(this.attributes.refresh_pub))&&o.DataModel.prototype.sessChanged.apply(this)},canCreate:function(e,t){var n=o.tree.getTreeNodeHierarchy(t).server;return!(n&&n.version<1e5)}}),getSchema:function(t,n){return new r.default({role:function(){return(0,i.getNodeListByName)("role",t,n)},getPublication:function(a,i,r,d,p,u,m,f,h,b,g,_,y){return new Promise((function(v,w){var N=(0,l.default)();if(null!=a&&null!=r&&null!=d&&null!=p){var C=o.Nodes.cast.generate_url.apply(o.Nodes.subscription,[null,"get_publications",n,!1,t]);N.get(C,{params:{host:a,password:i,port:r,username:d,db:p,connectTimeout:u,passfile:m,sslmode:f,sslcompression:h,sslcert:b,sslkey:g,sslrootcert:_,sslcrl:y}}).then((function(t){""!==t.data.errormsg||s.default.isNull(t.data.data)?!s.default.isNull(t.data.errormsg)&&s.default.isNull(t.data.data)&&(w(t.data.errormsg),c.default.alert(e("Check connection?"),e(t.data.errormsg))):(v(t.data.data),c.default.info(e("Publication fetched successfully.")))})).catch((function(e){w(e)}))}}))}},{node_info:t.server},{subowner:o.serverInfo[t.server._id].user.name})}})),o.Nodes["coll-subscription"]}.apply(t,a))||(e.exports=o)},84102:(e,t,n)=>{"use strict";var a,o,i,r=(i=n(49988))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(81311),n(33883),n(5547)],void 0===(o=function(e,t,n,a){return a.Nodes["coll-resource_group"]||(a.Nodes["coll-resource_group"]=a.Collection.extend({node:"resource_group",label:e("Resource Groups"),type:"coll-resource_group",columns:["name","cpu_rate_limit","dirty_rate_limit"],canDrop:!0,canDropCascade:!1})),a.Nodes.resource_group||(a.Nodes.resource_group=a.Node.extend({parent_type:"server",type:"resource_group",epasHelp:!0,dialogHelp:t("help.static",{filename:"resource_group_dialog.html"}),label:e("Resource Group"),hasSQL:!0,canDrop:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_resourcegroup_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")},enable:function(e,t){return a.tree.getTreeNodeHierarchy(t).server.connected&&"ppas"===e.server_type&&e.version>=90400}},{name:"create_resource_group_on_coll",node:"coll-resource_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")}},{name:"create_resource_group",node:"resource_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")}}]))},getSchema:function(){return new r.default},model:a.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),cell:"string",type:"text"},{id:"cpu_rate_limit",label:e("CPU rate limit (percentage)"),cell:"string",type:"numeric",min:0,max:16777216},{id:"dirty_rate_limit",label:e("Dirty rate limit (KB)"),cell:"string",type:"numeric",min:0,max:16777216}]})})),a.Nodes["coll-resource_group"]}.apply(t,a))||(e.exports=o)},75945:(e,t,n)=>{"use strict";var a,o;n(69826),n(73210),n(91058),n(5735),n(83753),n(68309),n(32564),n(15306),n(74916);var i=d(n(61231)),r=n(14511),l=n(77077),s=n(3011),c=d(n(55958));function d(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(58307),n(12030),n(9669),n(44092),n(72316),n(20454),n(5547),n(75270),n(64096)],void 0===(o=function(e,t,n,a,o,d,p,u,m,f,h){return d.Nodes["coll-role"]||(o.Browser.Nodes["coll-role"]=o.Browser.Collection.extend({node:"role",label:e("Login/Group Roles"),type:"coll-role",columns:["rolname","rolvaliduntil","rolconnlimit","rolcanlogin","rolsuper","rolcreaterole","rolcreatedb","rolcatupdate","rolinherit","rolreplication"],canDrop:!0,canDropCascade:!1})),d.Nodes.role||(o.Browser.Nodes.role=o.Browser.Node.extend({parent_type:"server",type:"role",sqlAlterHelp:"sql-alterrole.html",sqlCreateHelp:"sql-createrole.html",dialogHelp:t("help.static",{filename:"role_dialog.html"}),label:e("Login/Group Role"),hasSQL:!0,width:"550px",canDrop:function(e,t){var n=d.tree.getTreeNodeHierarchy(t).server;return e.is_superuser?n.connected&&n.user.is_superuser:n.connected&&n.user.can_create_role},hasDepends:!0,node_label:function(e){return e.label},node_image:function(e){return e?e.can_login?"icon-role":"icon-group":"icon-role"},title:function(t){return t?t.can_login?e("Login Role")+" - "+t.label:e("Group Role")+" - "+t.label:this.label},Init:function(){this.initialized||(this.initialized=!0,d.add_menus([{name:"create_role_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"},{name:"create_role_on_roles",node:"coll-role",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"},{name:"create_role",node:"role",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"},{name:"reassign_role",node:"role",module:this,applies:["object","context"],callback:"reassign_role",category:"role",priority:5,label:e("Reassign/Drop Owned..."),icon:"wcTabIcon icon-role",enable:"can_reassign_role"}]))},can_create_role:function(e,t){var n=d.tree.getTreeNodeHierarchy(t).server;return n.connected&&n.user.can_create_role},can_reassign_role:function(e,t){return d.tree.getTreeNodeHierarchy(t).server.connected&&e.can_login},reassign_role:function(){var i,r,l=d.tree,s=l.selected(),b=s?l.itemData(s):void 0,g=this,_=h.Model.extend({idAttribute:"id",defaults:{role_op:void 0,did:void 0,new_role_id:void 0,new_role_name:void 0,old_role_name:void 0,drop_with_cascade:!1},initialize:function(){h.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"role_op",label:e("Operation"),cell:"string",type:"radioModern",controlsClassName:"pgadmin-controls col-12 col-sm-8",controlLabelClassName:"control-label col-sm-4 col-12",group:e("General"),options:[{label:"Reassign",value:"reassign"},{label:"Drop",value:"drop"}],helpMessage:e("Change the ownership or\ndrop the database objects owned by a database role")},{id:"new_role_name",label:e("Reassign objects to"),controlsClassName:"pgadmin-controls col-12 col-sm-8",controlLabelClassName:"control-label col-sm-4 col-12",url:"nodes",helpMessage:e("New owner of the affected objects"),transform:function(e,t){var n=[],o=t||this,i=o.field.get("schema_node"),r=o.field.attributes.node_info.role.label;if(e&&a.isArray(e)){var l={label:"CURRENT_USER",value:"CURRENT_USER",image:"icon-"+i.type,_id:null},s={label:"SESSION_USER",value:"SESSION_USER",image:"icon-"+i.type,_id:null};if(l.value=JSON.stringify(l),s.value=JSON.stringify(s),n.push(l,s),o.field.attributes.node_data.version>=14e4){var c={label:"CURRENT_ROLE",value:"CURRENT_ROLE",image:"icon-"+i.type,_id:null};c.value=JSON.stringify(c),n.push(c)}a.each(e,(function(e){r!=e.label&&n.push({label:e.label,image:e.icon,value:JSON.stringify(e)})}))}return n},control:u.NodeListByIdControl.extend({getValueFromDOM:function(){var e=this.formatter.toRaw(a.unescape(this.$el.find("select").val()),this.model);return""===e?null:("string"==typeof e&&(e=JSON.parse(e)),e.label)},onChange:function(){u.NodeAjaxOptionsControl.prototype.onChange.apply(this,arguments);var e=this.$el.find("select").val();if(""!=e.trim()){var t=this.formatter.toRaw(e,this.model);"string"==typeof t&&(t=JSON.parse(t)),this.model.set({new_role_id:t._id,new_role_name:t.label})}}}),node:"role",group:e("General"),select2:{allowClear:!1},disabled:"isDisabled",deps:["role_op"],filter:function(e){var t=d.tree,n=t.selected(),a=n&&1==n.length?t.itemData(n):void 0;return!a||e&&e.label!=a.label}},{id:"drop_with_cascade",label:e("Cascade?"),cell:"string",type:"switch",controlsClassName:"pgadmin-controls col-12 col-sm-8",controlLabelClassName:"control-label col-sm-4 col-12",disabled:"isDisabled",group:e("General"),options:{onText:e("Yes"),offText:e("No"),size:"mini"},deps:["role_op"],helpMessage:e("Note: CASCADE will automatically drop objects that depend on the affected objects, and in turn all objects that depend on those objects")},{id:"did",label:e("From database"),controlsClassName:"pgadmin-controls col-12 col-sm-8",controlLabelClassName:"control-label col-sm-4 col-12",node:"database",group:e("General"),disabled:"isDisabled",control:u.NodeListByIdControl.extend({onChange:function(){u.NodeListByIdControl.prototype.onChange.apply(this,arguments);var e=this.model.get("did");this.model.set("did",parseInt(e))}}),select2:{allowClear:!1},events:{"select2:select":"onChange"},first_empty:!1,helpMessage:e("Target database on which the operation will be carried out")},{id:"sqltab",label:e("SQL"),group:e("SQL"),type:"text",disabled:!1,control:u.SqlTabControl.extend({initialize:function(){u.SqlTabControl.prototype.initialize.apply(this,arguments)},onTabChange:function(e){if(this.dialog&&e.shown==this.tabIndex){var t,a=this,o=a.model.toJSON();o.old_role_name=r,t=g.generate_url(s,"reassign",b,!0),n.ajax({url:t,type:"GET",cache:!1,data:o,dataType:"json",contentType:"application/json"}).done((function(e){a.sqlCtrl.setValue(e.data)}))}}})}],validate:function(){return null},isDisabled:function(e){var t=this;switch(this.name){case"new_role_name":return"reassign"!=e.get("role_op");case"drop_with_cascade":return"drop"!=e.get("role_op");case"did":return setTimeout((function(){if(a.isUndefined(e.get("did"))){var n=t.options[0];e.set("did",n.value)}}),10),!1;default:return!1}}});b&&(p.roleReassignDialog||p.dialog("roleReassignDialog",(function(){return{main:function(e){this.set("title",e)},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e("Users"),url:t("help.static",{filename:"role_reassign_dialog.html"})}},{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:e("OK"),key:13,className:"btn btn-primary fa fa-lg fa-save pg-alertify-button"}],focus:{element:0},options:{padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1}}},build:function(){p.pgDialogBuild.apply(this)},hooks:{onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})}},prepare:function(){var t=this,o=n("<div class='role_reassign_own'></div>");t.__internal.buttons[2].element.disabled=!0;var l=d.tree,s=l.selected(),c=s?l.itemData(s):void 0,p=c&&d.Nodes[c._type];if(i=g.generate_url(s,"reassign",c,!0),r=c.label,c){var m=d.tree.getTreeNodeHierarchy(s),f=new _({},{node_info:m}),h=u.generateViewSchema(m,f,"create",p,m.server,!0),b=t.view=new u.Dialog({el:o,model:f,schema:h});n(t.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),b.render(),t.elements.content.append(o.get(0));var y=n('<div class=\'pg-prop-status-bar pg-prop-status-bar-absolute pg-el-xs-12 d-none\'>  <div class="error-in-footer">     <div class="d-flex px-2 py-1">       <div class="pr-2">         <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>       </div>       <div class="alert-text" role="alert"></div>        <div class="ml-auto close-error-bar">           <a aria-label="'+e("Close error bar")+'" class="close-error fa fa-times text-danger"></a>         </div>     </div>   </div> </div>').appendTo(o);this.view.model.on("change",(function(){var n,o,i=this;if(y.addClass("d-none"),"reassign"!=this.get("role_op")||a.isUndefined(this.get("new_role_name")&&""!==this.get("new_role_name")))if("drop"==this.get("role_op"))this.errorModel.clear(),this.set({new_role_name:void 0,silent:!0}),this.set({new_role_id:void 0,silent:!0}),t.__internal.buttons[2].element.disabled=!1;else if(a.isUndefined(this.get("new_role_name"))){var r=e("Please provide a new role name");this.errorModel.set("new_role_name",r),n="new_role_name",o=r,i.errorModel.set(n,o),y.removeClass("d-none"),y.find(".alert-text").html(o),t.elements.dialog.querySelector(".close-error").addEventListener("click",(function(){y.addClass("d-none"),i.errorModel.set(n,o)})),t.__internal.buttons[2].element.disabled=!0}else t.__internal.buttons[2].element.disabled=!0;else this.errorModel.clear(),t.__internal.buttons[2].element.disabled=!1})),this.view.model.set({role_op:"reassign"})}},callback:function(t){if("dialog_help"==t.button.element.name)return t.cancel=!0,void d.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);if(t.button.text===e("OK")){var n=this.view.model.toJSON(),a=n.role_op,o=f.titleize(a);c.default.confirm(e("%s Objects",o),e("Are you sure you wish to %s all the objects owned by the selected role?",a),(function(){m.post(i,n).then((function(e){e.data&&c.default.success(e.data.info)})).catch((function(t){try{var n=t.response.data;c.default.alert(e("Role reassign/drop failed."),n.errormsg)}catch(e){console.warn(e.stack||e)}}))}),(function(){return!0})).set("labels",{ok:e("Yes"),cancel:e("No")})}}}})),p.roleReassignDialog(e("Reassign/Drop Owned - '%s'",b.label)).resizeTo(o.Browser.stdW.md,o.Browser.stdH.lg))},getSchema:function(e,t){var n=this;return new i.default((function(){return(0,r.getNodeVariableSchema)(n,e,t,!0,!1)}),(function(){return(0,s.getMembershipSchema)(n,e,t)}),{role:function(){return(0,l.getNodeListByName)("role",e,t)},nodeInfo:e})},model:o.Browser.Node.Model.extend({idAttribute:"oid",defaults:{oid:null,rolname:void 0,rolcanlogin:!1,rolconnlimit:-1,rolsuper:!1,rolcreaterole:!1,rolcreatedb:!1,rolinherit:!0,rolcatupdate:!1,rolreplication:!1,rolvaliduntil:null},schema:[{id:"rolname",label:e("Name"),type:"text",readonly:"readonly"},{id:"oid",label:e("OID"),cell:"string",mode:["properties"],editable:!1,type:"text",visible:!0},{id:"rolvaliduntil",readonly:"readonly",type:"text",group:e("Definition"),label:e("Account expires"),mode:["properties","edit","create"],control:"datetimepicker",deps:["rolcanlogin"],placeholder:e("No Expiry"),helpMessage:e("Please note that if you leave this field blank, then password will never expire."),setMinDate:!1},{id:"rolconnlimit",type:"int",group:e("Definition"),label:e("Connection limit"),cell:"integer",min:-1,mode:["properties","edit","create"],readonly:"readonly"},{id:"rolcanlogin",label:e("Can login?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",group:e("Privileges"),readonly:"readonly"},{id:"rolsuper",label:e("Superuser?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",group:e("Privileges"),control:u.SwitchControl.extend({onChange:function(){u.SwitchControl.prototype.onChange.apply(this,arguments),this.model.set("rolcatupdate",this.model.get("rolsuper")),this.model.set("rolcreaterole",this.model.get("rolsuper")),this.model.set("rolcreatedb",this.model.get("rolsuper"))}}),readonly:"readonly"},{id:"rolcreaterole",label:e("Create roles?"),group:e("Privileges"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",readonly:"readonly"},{id:"is_sys_obj",label:e("System role?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:e("Comments"),type:"multiline",group:null,mode:["properties","edit","create"],readonly:"readonly"},{id:"rolcreatedb",label:e("Create databases?"),group:e("Privileges"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",readonly:"readonly"},{id:"rolcatupdate",label:e("Update catalog?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",max_version:90400,group:e("Privileges"),readonly:function(e){return e.get("read_only")},disabled:function(e){return!e.get("rolsuper")}},{id:"rolinherit",group:e("Privileges"),label:e("Inherit rights from the parent roles?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",readonly:"readonly"},{id:"rolreplication",group:e("Privileges"),label:e("Can initiate streaming replication and backups?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",min_version:90100,readonly:"readonly"}],readonly:function(e){if(!e.has("read_only")){var t=this.node_info.server.user;e.set("read_only",!(t.is_superuser||t.can_create_role))}return e.get("read_only")},validate:function(){var t,n={},o=this.get("seclabels");if((a.isUndefined(this.get("rolname"))||""==String(this.get("rolname")).replace(/^\s+|\s+$/g,""))&&(n.name=e("Name cannot be empty."),t=n.name),o)for(var i,r=0;r<o.models.length&&!i;r++)(i=o.models[r].validate.apply(o.models[r]))&&(n.seclabels=i,t=t||i);return this.errorModel.clear().set(n),a.size(n)?(this.trigger("on-status",{msg:t}),t):null}})})),d.Nodes.role}.apply(t,a))||(e.exports=o)},44588:(e,t,n)=>{"use strict";var a,o;n(15306),n(74916),n(68309),n(32564),n(5735),n(83753),n(64765);var i=n(77077),r=s(n(43547)),l=s(n(55958));function s(e){return e&&e.__esModule?e:{default:e}}a=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55112),n(33883),n(6537),n(55455),n(12030),n(10426),n(63563)],void 0===(o=function(e,t,n,a,o,s,c,d,p,u,m){if(!c.Nodes.server){c.SecLabelModel=c.Node.Model.extend({defaults:{provider:void 0,label:void 0},schema:[{id:"provider",label:e("Provider"),type:"text",editable:!0,cellHeaderClasses:"width_percent_50"},{id:"label",label:e("Security label"),type:"text",editable:!0,cellHeaderClasses:"override_label_class_font_size"}],validate:function(){if(this.errorModel.clear(),a.isUndefined(this.get("label"))||a.isNull(this.get("label"))||""==String(this.get("label")).replace(/^\s+|\s+$/g,"")){var t=e("Security label must be specified.");return this.errorModel.set("label",t),t}return null}}),s.Browser.Nodes.server=s.Browser.Node.extend({parent_type:"server_group",type:"server",dialogHelp:t("help.static",{filename:"server_dialog.html"}),label:e("Server"),canDrop:function(e){var t=e.user_id;return!(t!=d.id&&!a.isUndefined(t))},dropAsRemove:!0,dropPriority:5,hasStatistics:!0,hasCollectiveStatistics:!0,can_expand:function(e){return e&&e.connected},Init:function(){this.initialized||(this.initialized=!0,c.add_menus([{name:"create_server_on_sg",node:"server_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Server..."),data:{action:"create"},icon:"wcTabIcon icon-server",enable:"canCreate"},{name:"create_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:3,label:e("Server..."),data:{action:"create"},icon:"wcTabIcon icon-server",enable:"canCreate"},{name:"connect_server",node:"server",module:this,applies:["object","context"],callback:"connect_server",category:"connect",priority:4,label:e("Connect Server"),icon:"fa fa-link",enable:"is_not_connected",data:{data_disabled:e("Database server is already connected.")}},{name:"disconnect_server",node:"server",module:this,applies:["object","context"],callback:"disconnect_server",category:"drop",priority:5,label:e("Disconnect from server"),icon:"fa fa-unlink",enable:"is_connected",data:{data_disabled:e("Database server is already disconnected.")}},{name:"reload_configuration",node:"server",module:this,applies:["tools","context"],callback:"reload_configuration",category:"reload",priority:10,label:e("Reload Configuration"),icon:"fa fa-redo-alt",enable:"enable_reload_config",data:{data_disabled:e("Please select a server from the browser tree to reload the configuration files.")}},{name:"restore_point",node:"server",module:this,applies:["tools","context"],callback:"restore_point",category:"restore",priority:7,label:e("Add Named Restore Point..."),icon:"fa fa-anchor",enable:"is_applicable",data:{data_disabled:e("Please select any server from the browser tree to Add Named Restore Point.")}},{name:"change_password",node:"server",module:this,applies:["object"],callback:"change_password",label:e("Change Password..."),priority:10,icon:"fa fa-lock",enable:"is_connected",data:{data_disabled:e("Please connect server to enable change password.")}},{name:"wal_replay_pause",node:"server",module:this,applies:["tools","context"],callback:"pause_wal_replay",category:"wal_replay_pause",priority:8,label:e("Pause Replay of WAL"),icon:"fa fa-pause-circle",enable:"wal_pause_enabled",data:{data_disabled:e("Please select a connected database as a Super user and run in Recovery mode to Pause Replay of WAL.")}},{name:"wal_replay_resume",node:"server",module:this,applies:["tools","context"],callback:"resume_wal_replay",category:"wal_replay_resume",priority:9,label:e("Resume Replay of WAL"),icon:"fa fa-play-circle",enable:"wal_resume_enabled",data:{data_disabled:e("Please select a connected database as a Super user and run in Recovery mode to Resume Replay of WAL.")}},{name:"clear_saved_password",node:"server",module:this,applies:["object","context"],callback:"clear_saved_password",label:e("Clear Saved Password"),icon:"fa fa-eraser",priority:11,enable:function(e){return!(!e||"server"!==e._type||!e.is_password_saved)}},{name:"clear_sshtunnel_password",node:"server",module:this,applies:["object","context"],callback:"clear_sshtunnel_password",label:e("Clear SSH Tunnel Password"),icon:"fa fa-eraser",priority:12,enable:function(e){return!(!e||"server"!==e._type||!e.is_tunnel_password_saved)},data:{data_disabled:e("SSH Tunnel password is not saved for selected server.")}}]),a.bindAll(this,"connection_lost"),c.Events.on("pgadmin:server:connection:lost",this.connection_lost))},is_not_connected:function(e){return e&&1!=e.connected},canCreate:function(e){var t=e.user_id;return!(t!=d.id&&!a.isUndefined(t))},is_connected:function(e){return e&&1==e.connected},enable_reload_config:function(e){return!!(e&&"server"==e._type&&e.connected&&e.user.is_superuser)},is_applicable:function(e){return!!(e&&"server"==e._type&&e.connected&&e.user.is_superuser&&0==e.in_recovery)},wal_pause_enabled:function(e){return!!(e&&"server"==e._type&&e.connected&&e.user.is_superuser&&1==e.in_recovery&&0==e.wal_pause)},wal_resume_enabled:function(e){return!!(e&&"server"==e._type&&e.connected&&e.user.is_superuser&&1==e.in_recovery&&1==e.wal_pause)},callbacks:{connect_server:function(e){var t=e||{},n=c.tree,a=t.item||n.selected(),o=a?n.itemData(a):void 0;return o&&f(this,o,n,a,!1),!1},disconnect_server:function(t,o){var i=t||{},r=this,d=c.tree,p="item"in i?i.item:d.selected(),u=p?d.itemData(p):void 0;if(u){o=o||a.isUndefined(o)||a.isNull(o);var m=function(){n.ajax({url:r.generate_url(p,"connect",u,!0),type:"DELETE"}).done((function(e){if(1==e.success)if(l.default.success(e.info),u=d.itemData(p),d.removeIcon(p),u.connected=!1,u.shared&&"True"==s.server_mode?u.icon="icon-shared-server-not-connected":u.icon="icon-server-not-connected",d.addIcon(p,{icon:u.icon}),r.callbacks.refresh.apply(r,[null,p]),d.close(p),c.serverInfo&&u._id in c.serverInfo)delete c.serverInfo[u._id];else{try{l.default.error(e.errormsg)}catch(e){console.warn(e.stack||e)}d.unload(p)}})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),d.unload(p)}))};o?l.default.confirm(e("Disconnect from server"),e("Are you sure you want to disconnect from the server %s?",u.label),(function(){m()}),(function(){return!0})):m()}return!1},beforeopen:function(e,t){return!(!t||"server"!=t._type)&&(c.tree.addIcon(e,{icon:t.icon}),!!t.connected||(f(this,t,c.tree,e,!1),!1))},added:function(e,t){return c.serverInfo=c.serverInfo||{},c.serverInfo[t._id]=a.extend({},t),s.Browser.Node.callbacks.added.apply(this,arguments),t.was_connected&&h(this,t,c.tree,e),!0},reload_configuration:function(t){var a=t||{},o=this,i=c.tree,r=a.item||i.selected(),s=r?i.itemData(r):void 0;return s&&l.default.confirm(e("Reload server configuration"),e("Are you sure you want to reload the server configuration on %s?",s.label),(function(){n.ajax({url:o.generate_url(r,"reload",s,!0),method:"GET"}).done((function(e){e.data.status?l.default.success(e.data.result):l.default.error(e.data.result)})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),i.unload(r)}))}),(function(){return!0})),!1},restore_point:function(t){var o=t||{},i=this,r=c.tree,s=o.item||r.selected(),d=s?r.itemData(s):void 0;if(!d)return!1;p.prompt(e("Enter the name of the restore point to add"),"",(function(t,o){a.isUndefined(o)||a.isNull(o)||""===o||""===String(o).replace(/^\s+|\s+$/g,"")?(t.cancel=!0,l.default.error(e("Please enter a valid name."),1e4)):n.ajax({url:i.generate_url(s,"restore_point",d,!0),method:"POST",data:{value:JSON.stringify(o)}}).done((function(e){l.default.success(e.data.result,1e4)})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),r.unload(s)}))}),(function(e){e.cancel=!1})).set({title:e("Restore point name")})},change_password:function(t){var i=t||{},r=c.tree,s=i.item||r.selected(),d=s?r.itemData(s):void 0,m=this.generate_url(s,"change_password",d,!0),f=!1,h=this.generate_url(s,"check_pgpass",d,!0);if(d){if(!p.changeServerPassword){var b=o.Model.extend({defaults:{user_name:void 0,password:void 0,newPassword:void 0,confirmPassword:void 0},validate:function(){return null}}),g=[{name:"user_name",label:e("User"),type:"text",readonly:!0,control:"input"},{name:"password",label:e("Current Password"),type:"password",disabled:function(){return f},control:"input",required:!0},{name:"newPassword",label:e("New Password"),type:"password",disabled:!1,control:"input",required:!0},{name:"confirmPassword",label:e("Confirm Password"),type:"password",disabled:!1,control:"input",required:!0}];p.dialog("changeServerPassword",(function(){return{main:function(t){var n=e("Change Password");this.set("title",n),this.user_name=t.user.name},setup:function(){return{buttons:[{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button",attrs:{name:"cancel"}},{text:e("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button",attrs:{name:"submit"}}],options:{padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1}}},hooks:{onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})}},prepare:function(){var t=this;this.__internal.buttons[1].element.disabled=!0;var o=n("<div class='change_password'></div>"),i=new b({user_name:t.user_name});(this.view=new u.Form({el:o,model:i,fields:g})).render(),this.elements.content.appendChild(o.get(0)),this.view.model.on("change",(function(){var n=this,o=this.get("password"),i=this.get("newPassword"),r=this.get("confirmPassword");!f&&(a.isUndefined(o)||a.isNull(o)||""==o)||a.isUndefined(i)||a.isNull(i)||""==i||a.isUndefined(r)||a.isNull(r)||""==r?t.__internal.buttons[1].element.disabled=!0:i!=r?(t.__internal.buttons[1].element.disabled=!0,this.errorTimeout&&clearTimeout(this.errorTimeout),this.errorTimeout=setTimeout((function(){n.errorModel.set("confirmPassword",e("Passwords do not match."))}),400)):(n.errorModel.clear(),t.__internal.buttons[1].element.disabled=!1)}))},callback:function(t){if("submit"==t.button.element.name){var a=this,o=this.view.model.toJSON();t.cancel=!0,n.ajax({url:m,method:"POST",data:{data:JSON.stringify(o)}}).done((function(t){t.success?(f&&l.default.alert(e("Change Password"),e("Please make sure to disconnect the server and update the new password in the pgpass file before performing any other operation")),l.default.success(t.info),a.close()):l.default.error(t.errormsg)})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n)}))}}}}))}n.ajax({url:h,method:"GET"}).done((function(e){e.success&&e.data.is_pgpass&&(f=!0),p.changeServerPassword(d).resizeTo("40%","52%")})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n)}))}return!1},on_done:function(e,t,n){1==e.success&&(l.default.success(e.info),t.itemData(n).wal_pause=e.data.wal_pause,t.unload(n),t.setInode(n),t.deselect(n),setTimeout((function(){t.select(n)}),10))},pause_wal_replay:function(e){var t=e||{},a=this,o=c.tree,i=t.item||o.selected(),r=i?o.itemData(i):void 0;if(!r)return!1;n.ajax({url:a.generate_url(i,"wal_replay",r,!0),type:"DELETE",dataType:"json"}).done((function(e){a.on_done(e,o,i)})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),o.unload(i)}))},resume_wal_replay:function(e){var t=e||{},a=this,o=c.tree,i=t.item||o.selected(),r=i?o.itemData(i):void 0;if(!r)return!1;n.ajax({url:a.generate_url(i,"wal_replay",r,!0),type:"PUT",dataType:"json"}).done((function(e){a.on_done(e,o,i)})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n),o.unload(i)}))},clear_saved_password:function(t){var a=t||{},o=this,i=c.tree,r=a.item||i.selected(),s=r?i.itemData(r):void 0;return s&&l.default.confirm(e("Clear saved password"),e("Are you sure you want to clear the saved password for server %s?",s.label),(function(){n.ajax({url:o.generate_url(r,"clear_saved_password",s,!0),method:"PUT"}).done((function(e){1==e.success?(l.default.success(e.info),i.itemData(r).is_password_saved=e.data.is_password_saved):l.default.error(e.info)})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n)}))}),(function(){return!0})),!1},clear_sshtunnel_password:function(t){var a=t||{},o=this,i=c.tree,r=a.item||i.selected(),s=r?i.itemData(r):void 0;return s&&l.default.confirm(e("Clear SSH Tunnel password"),e("Are you sure you want to clear the saved password of SSH Tunnel for server %s?",s.label),(function(){n.ajax({url:o.generate_url(r,"clear_sshtunnel_password",s,!0),method:"PUT"}).done((function(e){1==e.success?(l.default.success(e.info),i.itemData(r).is_tunnel_password_saved=e.data.is_tunnel_password_saved):l.default.error(e.info)})).fail((function(e,t,n){l.default.pgRespErrorNotify(e,n)}))}),(function(){return!0})),!1},server_psql_tool:function(e){var t=e||{},n=c.tree,a=t.item||n.selected(),o=a?n.itemData(a):void 0;c.psql.psql_tool(o,a,!0)}},getSchema:function(e,t){return new r.default((0,i.getNodeListById)(c.Nodes.server_group,e,t),t.user_id,{gid:e.server_group._id})},connection_lost:function(t,n){if(c.tree){for(var o=c.tree,i=t&&o.itemData(t),r=this;i&&"server"!=i._type;)t=o.parent(t),i=t&&o.itemData(t);if(t&&i&&"server"==i._type&&(a.isUndefined(i.is_connecting)||!i.is_connecting)){i.is_connecting=!0;c.Events.on("pgadmin:server:connect:cancelled",(function e(a){i._id==a&&(i.is_connecting=!1,c.Events.off("pgadmin:server:connect:cancelled",e),c.Events.trigger("pgadmin:database:connect:cancelled",a,n.data.database||i.db),c.Events.trigger("pgadmin:server:disconnect",{item:t,data:i},!1))})),l.default.confirm(e("Connection lost"),e("Would you like to reconnect to the database?"),(function(){f(r,i,o,t,!0)}),(function(){i.is_connecting=!1,o.unload(t),o.setInode(t),o.addIcon(t,{icon:"icon-database-not-connected"}),c.Events.trigger("pgadmin:server:connect:cancelled",t,i,r),o.select(t)}))}}}});var f=function t(o,i,r,u,f){var h=o.generate_url(u,"obj",i,!0);n.get(h).done((function(e){e.shared&&a.isNull(e.username)&&i.user_id!=d.id&&(e.service?(i.is_connecting=!1,r.unload(u),r.setInode(u),r.addIcon(u,{icon:"icon-shared-server-not-connected"})):(s.Browser.Node.callbacks.show_obj_properties.call(s.Browser.Nodes[r.itemData(u)._type],{action:"edit"}),i.is_connecting=!1,r.unload(u),r.setInode(u),r.addIcon(u,{icon:"icon-shared-server-not-connected"}),l.default.info("Please enter the server details to connect to the server. This server is a shared server.")))})).always((function(){i.is_connecting=!1}));var b=f||i.connected,g=function(n,a,o,c,d,u,f,h){(i.connected=!1,h||(r.close(f),d.shared&&"True"==s.server_mode?r.addIcon(f,{icon:"icon-shared-server-not-connected"}):r.addIcon(f,{icon:"icon-server-not-connected"})),200!=n.status&&-1!==n.responseText.search("Ticket expired"))?(r.addIcon(f,{icon:"icon-server-connecting"}),m.fetch_ticket().then((function(){t(c,d,u,f,h)}),(function(){r.addIcon(f,{icon:"icon-server-not-connected"}),l.default.pgNotifier("Connection error",n,e("Connect to server."))}))):l.default.pgNotifier("error",n,o,(function(n){setTimeout((function(){"CRYPTKEY_SET"==n?t(c,d,u,f,h):p.dlgServerPass(e("Connect to Server"),n,c,d,u,f,h).resizeTo()}),100)}))},_=function(t,n,i,r,s,d){t&&t.data&&("string"==typeof t.data.icon&&(r.removeIcon(s),i.icon=t.data.icon,r.addIcon(s,{icon:i.icon})),a.extend(i,t.data),i.is_connecting=!1,(c.serverInfo=c.serverInfo||{})[i._id]=a.extend({},i),i.version<90500?l.default.warning(e("You have connected to a server version that is older than is supported by pgAdmin. This may cause pgAdmin to break in strange and unpredictable ways. Or a plague of frogs. Either way, you have been warned!")+"<br /><br />"+t.info,null):l.default.success(t.info),o.trigger("connected",o,s,i),c.Events.trigger("pgadmin:server:connected",i._id,s,i),c.Events.trigger("pgadmin:database:connected",i._id,i.db,s,i),c.Events.trigger("pgadmin-browser:tree:selected",s,i,n),d?setTimeout((function(){n.callbacks.refresh.apply(n,[!0])}),10):(r.setInode(s),setTimeout((function(){r.select(s),r.open(s)}),10)))};p.dlgServerPass||p.dialog("dlgServerPass",(function(){return{main:function(e,t,n,a,o,i,r,l,s,c){this.set("title",e),this.message=t,this.tree=o,this.nodeData=a,this.nodeItem=i,this.node=n,this.connected=r,this.onSuccess=l||_,this.onFailure=s||g,this.onCancel=c||y},setup:function(){return{buttons:[{text:e("Cancel"),className:"btn btn-secondary fa fa-times pg-alertify-button",key:27},{text:e("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button"}],focus:{element:"#password",select:!0},options:{modal:0,resizable:!1,maximizable:!1,pinnable:!1}}},build:function(){},prepare:function(){this.setContent(this.message)},callback:function(t){var a=this.tree,o=this.nodeItem,i=this.node,r=this.nodeData,l=this.connected,s=this.onSuccess,c=this.onFailure,d=this.onCancel;if(t.button.text==e("OK")){var p=i.generate_url(o,"connect",r,!0);l||(a.setLeaf(o),a.removeIcon(o),a.addIcon(o,{icon:"icon-server-connecting"})),n.ajax({type:"POST",timeout:3e4,url:p,data:n("#frmPassword").serialize()}).done((function(e){return s(e,i,r,a,o,l)})).fail((function(e,t,n){return c(e,t,n,i,r,a,o,l)}))}else d&&"function"==typeof d&&d(a,o,r,l)}}}));var y=function(e,t,n,a){n.is_connecting=!1,e.unload(t),e.setInode(t),e.removeIcon(t),n.shared&&"True"==s.server_mode?e.addIcon(t,{icon:"icon-shared-server-not-connected"}):e.addIcon(t,{icon:"icon-server-not-connected"}),o.trigger("connect:cancelled",i._id,i.db,o,t,n),c.Events.trigger("pgadmin:server:connect:cancelled",i._id,t,n,o),c.Events.trigger("pgadmin:database:connect:cancelled",i._id,i.db,t,n,o),a&&e.select(t)};if(!i.is_connecting){i.is_connecting=!0,r.setLeaf(u),r.removeIcon(u),r.addIcon(u,{icon:"icon-server-connecting"});var v=o.generate_url(u,"connect",i,!0);n.post(v).done((function(e){if(1==e.success)return _(e,o,i,r,u,b)})).fail((function(e,t,n){return g(e,0,n,o,i,r,u,b)})).always((function(){i.is_connecting=!1}))}},h=function(e,t,o,i){var r=e.generate_url(i,"connect",t,!0);o.setLeaf(i),o.removeIcon(i),o.addIcon(i,{icon:"icon-server-connecting"}),n.get(r).done((function(e){(o.setInode(i),e&&e.data)&&("string"==typeof e.data.icon&&(o.removeIcon(i),t.icon=e.data.icon,o.addIcon(i,{icon:t.icon})),a.extend(t,e.data),(c.serverInfo=c.serverInfo||{})[t._id]=a.extend({},t),t.errmsg&&l.default.error(t.errmsg))})).fail((function(e,n,a){o.setInode(i),t.shared&&"True"==s.server_mode?o.addIcon(i,{icon:"icon-shared-server-not-connected"}):o.addIcon(i,{icon:"icon-server-not-connected"}),l.default.pgRespErrorNotify(e,a)}))}}return c.Nodes.server}.apply(t,a))||(e.exports=o)},76385:(e,t,n)=>{"use strict";var a,o;n(68309);var i,r=n(77077),l=n(40345),s=n(14511),c=(i=n(81051))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55112),n(33883),n(5547),n(75270),n(63563)],void 0===(o=function(e,t,n,a,o,i,d){return d.Nodes["coll-tablespace"]||(d.Nodes["coll-tablespace"]=d.Collection.extend({node:"tablespace",label:e("Tablespaces"),type:"coll-tablespace",columns:["name","spcuser","description"],hasStatistics:!0,statsPrettifyFields:[e("Size")],canDrop:!0,canDropCascade:!1})),d.Nodes.tablespace||(d.Nodes.tablespace=d.Node.extend({parent_type:"server",type:"tablespace",sqlAlterHelp:"sql-altertablespace.html",sqlCreateHelp:"sql-createtablespace.html",dialogHelp:t("help.static",{filename:"tablespace_dialog.html"}),label:e("Tablespace"),hasSQL:!0,canDrop:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Size")],Init:function(){this.initialized||(this.initialized=!0,d.add_menus([{name:"create_tablespace_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"},{name:"create_tablespace_on_coll",node:"coll-tablespace",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"},{name:"create_tablespace",node:"tablespace",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"}]))},can_create_tablespace:function(e,t){var n=d.tree.getTreeNodeHierarchy(t).server;return n.connected&&n.user.is_superuser},callbacks:{},getSchema:function(e,t){var n=this;return new c.default((function(){return(0,s.getNodeVariableSchema)(n,e,t,!1,!1)}),(function(a){return(0,l.getNodePrivilegeRoleSchema)(n,e,t,a)}),{role:function(){return(0,r.getNodeListByName)("role",e,t)}},{spcuser:d.serverInfo[e.server._id].user.name})},model:d.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var n=0===a.size(e);if(n){var o=d.serverInfo[t.node_info.server._id].user;this.set({spcuser:o.name},{silent:!0})}d.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text"},{id:"spcuser",label:e("Owner"),cell:"string",type:"text",control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{id:"description",label:e("Comment"),cell:"string",type:"multiline"}]})})),d.Nodes["coll-tablespace"]}.apply(t,a))||(e.exports=o)},57455:(e,t,n)=>{"use strict";var a,o,i,r=(i=n(46675))&&i.__esModule?i:{default:i};a=[n(91669),n(28008),n(19755),n(81311),n(55112),n(6537),n(33883),n(66235)],void 0===(o=function(e,t,n,a,o,i){return o.Browser.Nodes.server_group||(o.Browser.Nodes.server_group=o.Browser.Node.extend({parent_type:null,type:"server_group",dialogHelp:t("help.static",{filename:"server_group_dialog.html"}),label:e("Server Group"),width:"250px",height:"150px",is_collection:!0,Init:function(){this.initialized||(this.initialized=!0,o.Browser.add_menus([{name:"create_server_group",node:"server_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Server Group..."),data:{action:"create"},icon:"wcTabIcon icon-server_group"}]))},getSchema:function(){return new r.default},canDrop:function(e){var t=e.user_id;return!(t!=i.id&&!a.isUndefined(t))},dropAsRemove:!0,canDelete:function(e){var t=o.Browser.tree.siblings(e,!0);return!(!t||0==t.length)}})),o.Browser.Nodes.server_group}.apply(t,a))||(e.exports=o)}}]);
//# sourceMappingURL=browser_nodes.js.map