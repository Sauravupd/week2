define(["pgadmin.browser.constants","pgadmin.browser.endpoints","pgadmin.browser.messages","pgadmin.browser.utils","pgadmin.server.supported_servers","pgadmin.user_management.current_user","translations"],((e,t,n,r,o,i,a)=>(()=>{"use strict";var l,s={81400:(e,t,n)=>{var r,o;n(32564),n(82772),n(26699),n(32023),n(15306),n(74916),n(73210),n(71151),n(76916),n(90491),n(11769),n(24149),n(57455),n(44588),n(68169),n(75945),n(32138),n(55520),n(23612),n(76385),n(84102),n(22226),n(61561),n(9603),n(79487),n(26772),n(92971),n(30160),n(50581),n(82319),n(78030),n(87091),n(14767),n(42654),n(17195),n(53794),n(92660),n(7215),n(40559),n(74119),n(60465),n(49606),n(52225),n(69096),n(2961),n(67872),n(98050),n(70929),n(28969),n(66668),n(57617),n(40708),n(79099),n(12e3),n(21532),n(94386),n(27587),n(76994),n(86048),n(98185),r=[n(91669),n(28008),n(19755),n(81311),n(55455),n(55112),n(20811),n(81240),n(72316),n(52934),n(7167),n(85530),n(9807),n(44092),n(35816)],void 0===(o=function(e,t,n,r,o,i,a,l,s,u,d,c,f,p){var m=window.wcDocker,b=i.Browser;return i.DataGrid||(i.DataGrid=r.extend({init:function(){if(!this.initialized){this.initialized=!0,this.title_index=1;var t=this,n=setInterval((function(){b.preference_version()>0&&(t.preferences=b.get_preferences_for_module("sqleditor"),clearInterval(n))}),0);b.onPreferencesChange("sqleditor",(function(){t.preferences=b.get_preferences_for_module("sqleditor")}));for(var o=["table","view","mview","foreign_table","catalog_object","partition"],a=function(t){var n=!r.isUndefined(t)&&!r.isNull(t)&&-1!==r.indexOf(o,t._type);return c.enable(e("View Data"),n),c.enable(e("Filtered Rows"),n),n},l=[{name:"query_tool",module:this,applies:["tools"],callback:"show_query_tool",enable:function(t){var n=!(r.isUndefined(t)||r.isNull(t)||-1!=r.indexOf(i.unsupported_nodes,t._type)||("database"!=t._type||!t.allowConn)&&"database"==t._type);return c.enable(e("Query Tool"),n),n},priority:1,label:e("Query Tool"),icon:"pg-font-icon icon-query_tool",data:{applies:"tools",data_disabled:e("Please select a database from the browser tree to access Query Tool.")}}],s=0,u=o;s<u.length;s++){var d=u[s];l.push({name:"view_all_rows_context_"+d,node:d,module:this,data:{mnuid:3},applies:["context","object"],callback:"show_data_grid",enable:a,category:"view_data",priority:101,label:e("All Rows")},{name:"view_first_100_rows_context_"+d,node:d,module:this,data:{mnuid:1},applies:["context","object"],callback:"show_data_grid",enable:a,category:"view_data",priority:102,label:e("First 100 Rows")},{name:"view_last_100_rows_context_"+d,node:d,module:this,data:{mnuid:2},applies:["context","object"],callback:"show_data_grid",enable:a,category:"view_data",priority:103,label:e("Last 100 Rows")},{name:"view_filtered_rows_context_"+d,node:d,module:this,data:{mnuid:4},applies:["context","object"],callback:"show_filtered_row",enable:a,category:"view_data",priority:104,label:e("Filtered Rows...")})}i.Browser.add_menu_category("view_data",e("View/Edit Data"),100,""),i.Browser.add_menus(l),new i.Browser.Frame({name:"frm_datagrid",showTitle:!0,isCloseable:!0,isRenamable:!0,isPrivate:!0,url:"about:blank"}).load(b.docker),this.on("pgadmin-datagrid:transaction:created",(function(e){this.launch_grid(e)}))}},show_data_grid:function(e,t){var n=p.getRandomInt(1,9999999);u.showDataGrid(this,b,o,e,t,n)},show_filtered_row:function(e,t){var n=p.getRandomInt(1,9999999);u.showDataGrid(this,b,o,e,t,n,!0,this.preferences)},show_query_tool:function(t,n){var r=p.getRandomInt(1,9999999),o=b.tree,i=n||o.selected(),a=i?o.itemData(i):void 0;if(!b.get_preference("sqleditor","copy_sql_to_query_tool").value||a._type.includes("coll-")||""!==t&&"tools"!==t.applies)a._type.includes("coll-")&&(t=""),d.showQueryTool(this,b,t,n,r);else{var l={script:a._type.toLowerCase(),data_disabled:e("The selected tree node does not support this option.")};b.Node.callbacks.show_script(l)}},launch_grid:function(i,a,l,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h='\n          <form id="queryToolForm" action="'.concat(a,'" method="post">\n            <input id="title" name="title" hidden />');c&&(h+='<input name="query_url" value="'.concat(c,'" hidden />')),y&&(h+='<textarea name="sql_filter" hidden>'.concat(y,"</textarea>")),h+='\n          </form>\n            <script>\n              document.getElementById("title").value = "'.concat(r.escape(s.replace("\\","\\\\")),'";\n              document.getElementById("queryToolForm").submit();\n            <\/script>\n          ');var g=b.get_preferences_for_module("browser"),v=g.new_browser_tab_open;if(v&&v.includes("qt")){var _=window.open("","_blank");if(!_)return!1;_.document.write(h),_.document.title=s,setTimeout((function(){b.send_signal_to_runtime("Runtime new window opened")}),500)}else{var w=b.docker.findPanels("properties"),O=b.docker.addPanel("frm_datagrid",m.DOCK.STACKED,w[0]);O.trans_id=i,d._set_dynamic_tab(b,g.dynamic_tabs),f.setQueryToolDockerTitle(O,l,r.unescape(s)),O.focus(),O.isVisible()&&O.on(m.EVENT.CLOSED,(function(){n.ajax({url:t("datagrid.close",{trans_id:i}),method:"DELETE"})})),O.on(m.EVENT.VISIBILITY_CHANGED,(function(){O.trigger(m.EVENT.RESIZED)})),p.registerDetachEvent(O),O.on(m.EVENT.RENAME,(function(t){var n=t.$titleText[0].textContent,i=!!O.is_dirty_editor&&O.is_dirty_editor,a=O.is_dirty_editor?t.$titleText[0].textContent.replace(/.$/,""):n;o.prompt("",a,(function(e,n){if(n=n.trim()){var o=!1;t.$titleText[0].innerHTML.includes("File - ")&&(o=!0);var a=b.tree.selected(),s="";s=l?f.getPanelTitle(b,a,n):u.generateDatagridTitle(b,a,n),i&&(s+=" *"),f.setQueryToolDockerTitle(O,l,r.unescape(s),o)}}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})}));var S=function(e){var t=n('<div class="pg-sp-container">\n                    <div class="pg-sp-content">\n                        <div class="row">\n                            <div class="col-12 pg-sp-icon"></div>\n                        </div>\n                    </div>\n                </div>').appendTo(n(e).data("embeddedFrame").$container),r=setInterval((function(){if(n(e).data("frameInitialized")){clearInterval(r);var o=n(e).data("embeddedFrame");o&&(o.onLoaded((function(){t.remove()})),o.openHTML(h))}}),100)};S(O)}return!0}},s.Events)),i.DataGrid}.apply(t,r))||(e.exports=o)},97548:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=l(n(91669)),i=l(n(89406)),a=n(76055);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,i=m(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,l),(e=i.call(this,u({name:void 0,encoding:"UTF8",srctyp:void 0,trgtyp:void 0,proname:void 0,castcontext:!1,syscast:void 0,description:void 0},n))).fieldOptions=t,e}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"getCastName",value:function(e){var t=e.srctyp,n=e.trgtyp;return e.name=null!=t&&""!=t&&null!=n&&""!=n?t+"->"+n:""}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",editable:!1,type:"text",readonly:!0,cellHeaderClasses:"width_percent_50"},{id:"oid",label:(0,o.default)("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]},{id:"srctyp",label:(0,o.default)("Source type"),type:"select",group:(0,o.default)("Definition"),readonly:function(t){return!e.isNew(t)},mode:["create"],options:this.fieldOptions.getTypeOptions,depChange:function(t){return e.getCastName(t)}},{id:"srctyp",label:(0,o.default)("Source type"),type:"text",group:(0,o.default)("Definition"),readonly:!0,mode:["properties","edit"]},{id:"trgtyp",label:(0,o.default)("Target type"),type:"select",group:(0,o.default)("Definition"),readonly:function(t){return!e.isNew(t)},mode:["create"],options:this.fieldOptions.getTypeOptions,depChange:function(t){return e.getCastName(t)}},{id:"trgtyp",label:(0,o.default)("Target type"),type:"text",group:(0,o.default)("Definition"),readonly:!0,mode:["properties","edit"]},{id:"proname",label:(0,o.default)("Function"),deps:["srctyp","trgtyp"],readonly:function(t){return!e.isNew(t)},group:(0,o.default)("Definition"),mode:["create"],first_empty:!0,type:function(t){return{type:"select",options:function(){return e.fieldOptions.getFuncOptions(t.srctyp,t.trgtyp)},optionsReloadBasis:t.srctyp+t.trgtyp}}},{id:"proname",label:(0,o.default)("Function"),type:"text",group:(0,o.default)("Definition"),readonly:!0,mode:["properties","edit"]},{id:"castcontext",label:(0,o.default)("Context"),type:"toggle",options:[{label:(0,o.default)("IMPLICIT"),value:!0},{label:(0,o.default)("EXPLICIT"),value:!1}],group:(0,o.default)("Definition"),mode:["create"]},{id:"castcontext",label:(0,o.default)("Context"),readonly:!0,options:[{label:"IMPLICIT",value:"IMPLICIT"},{label:"EXPLICIT",value:"EXPLICIT"},{label:"ASSIGNMENT",value:"ASSIGNMENT"}],type:"select",group:(0,o.default)("Definition"),mode:["properties","edit"],controlProps:{editable:!1}},{id:"syscast",label:(0,o.default)("System cast?"),cell:"switch",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),type:"multiline",cellHeaderClasses:"width_percent_50"}]}},{key:"validate",value:function(e,t){return(0,a.isEmptyString)(e.srctyp)?(t("srctyp",(0,o.default)("Source type must be selected.")),!0):(t("srctyp",null),(0,a.isEmptyString)(e.trgtyp)?(t("trgtyp",(0,o.default)("Target type must be selected.")),!0):(t("trgtyp",null),!1))}}])&&f(t.prototype,n),r&&f(t,r),l}(i.default);t.default=h},18272:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var i=u(n(91669)),a=u(n(89406)),l=u(n(67091)),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,o,a=y(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,u),(e=a.call(this,c({oid:void 0,name:void 0,eventowner:void 0,is_sys_obj:void 0,comment:void 0,enabled:"O",eventfuncoid:void 0,eventfunname:void 0,eventname:"DDL_COMMAND_START",when:void 0,xmin:void 0,source:void 0,language:void 0},n))).fieldOptions=c({role:[],function_names:[]},t),e}return t=u,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"name",label:(0,i.default)("Name"),cell:"text",type:"text",noEmpty:!0},{id:"oid",label:(0,i.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"eventowner",label:(0,i.default)("Owner"),type:"select",mode:["properties","edit","create"],node:"role",options:this.fieldOptions.role},{id:"is_sys_obj",label:(0,i.default)("System event trigger?"),cell:"switch",type:"switch",mode:["properties"]},{id:"comment",label:(0,i.default)("Comment"),type:"multiline"},{id:"enabled",label:(0,i.default)("Trigger enabled?"),group:(0,i.default)("Definition"),mode:["properties","edit","create"],options:[{label:(0,i.default)("Enable"),value:"O"},{label:(0,i.default)("Disable"),value:"D"},{label:(0,i.default)("Replica"),value:"R"},{label:(0,i.default)("Always"),value:"A"}],type:"select",controlProps:{allowClear:!1,width:"100%"}},{id:"eventfunname",label:(0,i.default)("Trigger function"),type:"select",group:(0,i.default)("Definition"),options:this.fieldOptions.function_names},{id:"eventname",label:(0,i.default)("Event"),group:(0,i.default)("Definition"),cell:"text",options:[{label:(0,i.default)("DDL COMMAND START"),value:"DDL_COMMAND_START"},{label:(0,i.default)("DDL COMMAND END"),value:"DDL_COMMAND_END"},{label:(0,i.default)("SQL DROP"),value:"SQL_DROP"}],type:"select",controlProps:{allowClear:!1,width:"100%"}},{id:"when",label:(0,i.default)("When TAG in"),cell:"string",type:"sql",group:(0,i.default)("Definition"),controlProps:{className:["custom_height_css_class"]}},{id:"seclabels",label:(0,i.default)("Security labels"),type:"collection",schema:new l.default,editable:!1,group:(0,i.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90200}]}},{key:"validate",value:function(e,t){var n=null;if((0,s.isEmptyString)(e.service)){if((0,s.isEmptyString)(e.eventfunname))return n=(0,i.default)("Event trigger function cannot be empty."),t("eventfunname",n),!0;t("eventfunname",null)}else r.each(["eventfunname"],(function(e){t(e,null)}))}}])&&m(t.prototype,n),o&&m(t,o),u}(a.default);t.default=v},72876:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(89554),n(54747),n(68309),n(68304),n(30489);var i=s(n(91669)),a=s(n(89406)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,e);var t,n,o,a=b(s);function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,s),e=a.call(this,{name:null,oid:void 0,version:"",schema:"",relocatable:!1,is_sys_obj:!1,comment:null}),t=d({extensionsList:[],schemaList:[]},t),e.extensionsList=t.extensionsList,e.schemaList=t.schemaList,e}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,i.default)("Name"),mode:["properties","create","edit"],editable:!1,noEmpty:!0,readonly:function(e){return!t.isNew(e)},type:function(e){return{type:"select",options:t.extensionsList,optionsLoaded:function(e){t.extensionData=e},controlProps:{allowClear:!1,filter:function(n){var r=[];return e&&t.isNew(e)?n.forEach((function(e){null===e.data.installed_version&&r.push({label:e.label,value:e.value})})):r=n,r}}}},depChange:function(e){var n=t.extensionData;e&&t.isNew(e)&&n.forEach((function(t){if(e.name==t.data.name){var n=t.data;e.version="",e.relocatable=r.isNull(n.relocatable[0])||r.isUndefined(n.relocatable[0])?"":n.relocatable[0]}}))}},{id:"oid",label:(0,i.default)("OID"),type:"text",mode:["properties"]},{id:"schema",label:(0,i.default)("Schema"),type:"select",mode:["properties","create","edit"],group:(0,i.default)("Definition"),first_empty:!0,deps:["name"],controlProps:{allowClear:!0},editable:!1,options:this.schemaList,disabled:function(e){return!t.isNew(e)&&!e.relocatable}},{id:"relocatable",label:(0,i.default)("Relocatable?"),cell:"switch",group:(0,i.default)("Definition"),type:"switch",mode:["properties"],deps:["name"]},{id:"version",label:(0,i.default)("Version"),mode:["properties","create","edit"],group:(0,i.default)("Definition"),first_empty:!0,deps:["name"],type:function(t){return{type:"select",options:e.extensionsList,controlProps:{allowClear:!1,filter:function(e){var n=[];return t?t.name&&e.forEach((function(e){if(t.name==e.data.name){var o=e.data;o.version&&r.isArray(o.version)&&r.each(o.version,(function(e){n.push({label:e,value:e})}))}})):e.forEach((function(e){var t=e.data;t.version&&r.isArray(t.version)&&r.each(t.version,(function(e){n.push({label:e,value:e})}))})),n}}}}},{id:"is_sys_obj",label:(0,i.default)("System extension?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"comment",label:(0,i.default)("Comment"),cell:"string",type:"multiline",readonly:!0}]}},{key:"validate",value:function(e,t){return(0,l.isEmptyString)(e.name)?(t("name",(0,i.default)("Name cannot be empty.")),!0):(t("name",null),!1)}}])&&p(t.prototype,n),o&&p(t,o),s}(a.default);t.default=g},30860:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),i=l(n(89406)),a=l(n(28296));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,i=m(l);function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c(this,l),(t=i.call(this,u({name:void 0,fsrvtype:void 0,fsrvversion:void 0,fsrvvalue:void 0,fsrvoptions:[],fsrvowner:void 0,is_sys_obj:void 0,description:void 0,fsrvacl:[]},r))).getPrivilegeRoleSchema=e,t.fieldOptions=u({role:[]},n),t}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"fsrvowner",label:(0,o.default)("Owner"),editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"is_sys_obj",label:(0,o.default)("System foreign server?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"fsrvtype",label:(0,o.default)("Type"),type:"text",group:(0,o.default)("Definition"),readonly:function(t){return!e.isNew(t)}},{id:"fsrvversion",label:(0,o.default)("Version"),type:"text",group:(0,o.default)("Definition")},{id:"fsrvoptions",label:(0,o.default)("Options"),type:"collection",schema:new a.default("fsrvoption","fsrvvalue"),group:(0,o.default)("Options"),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["fsrvoption"]},{id:"security",label:(0,o.default)("Security"),type:"group"},{id:"fsrvacl",label:(0,o.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["U"]),uniqueCol:["grantee"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]}]}}])&&f(t.prototype,n),r&&f(t,r),l}(i.default);t.default=h},91161:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),i=l(n(89406)),a=l(n(28296));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,i=m(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,l),(e=i.call(this,u({name:void 0,is_sys_obj:void 0,um_options:[]},n))).fieldOptions=u({role:[]},t),e}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("User"),type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1},readonly:function(t){return!e.isNew(t)},mode:["edit","create","properties"]},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System user mapping?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"umoptions",label:(0,o.default)("Options"),type:"collection",schema:new a.default("umoption","umvalue"),group:(0,o.default)("Options"),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["umoption"]}]}}])&&f(t.prototype,n),r&&f(t,r),l}(i.default);t.default=h},35626:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),i=l(n(89406)),a=l(n(28296));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,i=m(l);function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c(this,l),(t=i.call(this,u({name:void 0,fdwowner:void 0,is_sys_obj:void 0,comment:void 0,fdwvalue:void 0,fdwhan:void 0,fdwoption:void 0,fdwacl:[]},r))).getPrivilegeRoleSchema=e,t.fieldOptions=u({role:[],fdwhan:[],fdwvalue:[]},n),t}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",noEmpty:!0,readonly:function(t){return!e.isNew(t)}},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"fdwowner",label:(0,o.default)("Owner"),editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"is_sys_obj",label:(0,o.default)("System foreign data wrapper?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"fdwhan",label:(0,o.default)("Handler"),editable:!1,type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.fdwhan,mode:["edit","create","properties"]},{id:"fdwvalue",label:(0,o.default)("Validator"),editable:!1,type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.fdwvalue,mode:["edit","create","properties"]},{id:"fdwoptions",label:(0,o.default)("Options"),type:"collection",schema:new a.default("fdwoption","fdwvalue"),group:(0,o.default)("Options"),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["fdwoption"]},{id:"security",label:(0,o.default)("Security"),type:"group"},{id:"fdwacl",label:(0,o.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["U"]),uniqueCol:["grantee"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]}]}}])&&f(t.prototype,n),r&&f(t,r),l}(i.default);t.default=h},80861:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(5212),n(89554),n(54747),n(68304),n(30489);var o=u(n(91669)),i=u(n(89406)),a=n(76055),l=u(n(67091)),s=u(n(96486));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,r,i=y(u);function u(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return p(this,u),(t=i.call(this,c({name:void 0,lanowner:r?r.node_info.user.name:void 0,comment:void 0,lanacl:[],seclabels:[],trusted:!0,lanproc:void 0,laninl:void 0,lanval:void 0},o))).fieldOptions=n,t.getPrivilegeRoleSchema=e,t.node_info=r,t.templateList=[],t.isTemplate=!1,t}return t=u,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"isLessThan13",value:function(){return!s.default.isUndefined(this.node_info)&&!s.default.isUndefined(this.node_info.node_info)&&!s.default.isUndefined(this.node_info.node_info.version)&&this.node_info.node_info.version<13e4}},{key:"isDisabled",value:function(e){return this.templateList.some((function(t){return t.tmplname===e.name}))?(this.isTemplate=!1,!0):(this.isTemplate=!0,!1)}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),noEmpty:!0,mode:["properties","create","edit"],optionsLoaded:function(e){t.templateList=e},type:function(n){return t.isLessThan13()?{type:"select",options:e.fieldOptions.templates_data,controlProps:{allowClear:!1,multiple:!1,creatable:!0,filter:function(e){var r=[];return n&&t.isNew()?e.forEach((function(e){r.push({label:e.tmplname,value:e.tmplname})})):r.push({label:n.name,value:n.name}),r}}}:{type:"text"}}},{id:"oid",label:(0,o.default)("OID"),cell:"string",mode:["properties"],type:"text"},{id:"lanowner",label:(0,o.default)("Owner"),type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1},mode:["edit","properties","create"]},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System language?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline"},{id:"trusted",label:(0,o.default)("Trusted?"),type:"switch",group:(0,o.default)("Definition"),mode:["edit","properties","create"],disabled:t.isDisabled,deps:["name"],readonly:function(e){return!t.isNew(e)}},{id:"lanproc",label:(0,o.default)("Handler function"),group:(0,o.default)("Definition"),mode:["properties"],type:"text"},{id:"lanproc",label:(0,o.default)("Handler function"),deps:["name"],group:(0,o.default)("Definition"),mode:["edit","create"],type:function(t){return{type:"select",options:e.fieldOptions.lan_functions,controlProps:{allowClear:!1,filter:function(e){var n=[];return t&&e.forEach((function(e){"handler"==e.prop_type&&n.push({label:e.label,value:e.label})})),n}}}},disabled:t.isDisabled,readonly:function(e){return!t.isNew(e)}},{id:"laninl",label:(0,o.default)("Inline function"),group:(0,o.default)("Definition"),mode:["edit","create"],deps:["name"],first_empty:!1,type:function(t){return{type:"select",options:e.fieldOptions.lan_functions,controlProps:{allowClear:!1,filter:function(e){var n=[];return t&&e.forEach((function(e){"inline"==e.prop_type&&n.push({label:e.label,value:e.label})})),n}}}},disabled:t.isDisabled,readonly:function(e){return!t.isNew(e)}},{id:"laninl",label:(0,o.default)("Inline function"),group:(0,o.default)("Definition"),mode:["properties"],type:"text"},{id:"lanval",label:(0,o.default)("Validator function"),deps:["name"],group:(0,o.default)("Definition"),mode:["edit","create"],type:function(t){return{type:"select",options:e.fieldOptions.lan_functions,optionsLoaded:function(t){e.fieldOptions.lan_functions=t},controlProps:{allowClear:!1,filter:function(e){var n=[];return t&&e.forEach((function(e){"validator"==e.prop_type&&n.push({label:e.label,value:e.label})})),n}}}},disabled:t.isDisabled,readonly:function(e){return!t.isNew(e)}},{id:"lanval",label:(0,o.default)("Validator function"),group:(0,o.default)("Definition"),mode:["properties"],type:"text"},{id:"lanacl",label:(0,o.default)("Privileges"),type:"collection",group:(0,o.default)("Security"),mode:["edit","create"],schema:this.getPrivilegeRoleSchema(["U"]),canAdd:!0,canDelete:!0,uniqueCol:["grantee"]},{id:"seclabels",label:(0,o.default)("Security labels"),mode:["edit","create"],schema:new l.default,editable:!1,type:"collection",group:(0,o.default)("Security"),min_version:90200,canAdd:!0,canEdit:!1,canDelete:!0}]}},{key:"validate",value:function(e,t){return this.isTemplate&&(0,a.isEmptyString)(e.lanproc)?(t("lanproc",(0,o.default)("Handler function cannot be empty.")),!0):(t("lanproc",null),!1)}}])&&m(t.prototype,n),r&&m(t,r),u}(i.default);t.default=v},78047:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DefaultWithSchema=void 0,n(68309),n(68304),n(30489);var o=l(n(91669)),i=l(n(89406)),a=l(n(96486));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){m(n,e);var t=y(n);function n(e){var r;return c(this,n),(r=t.call(this)).node_info=e,r}return p(n,[{key:"baseFields",get:function(){return[{id:"evnt_insert",label:(0,o.default)("INSERT"),type:"switch",mode:["create","edit","properties"],group:(0,o.default)("With")},{id:"evnt_update",label:(0,o.default)("UPDATE"),type:"switch",mode:["create","edit","properties"],group:(0,o.default)("With")},{id:"evnt_delete",label:(0,o.default)("DELETE"),type:"switch",mode:["create","edit","properties"],group:(0,o.default)("With")},{id:"evnt_truncate",label:(0,o.default)("TRUNCATE"),type:"switch",group:(0,o.default)("With"),visible:function(){return!a.default.isUndefined(this.node_info.node_info)&&!a.default.isUndefined(this.node_info.node_info.version)&&this.node_info.node_info.version>=11e4}},{id:"publish_via_partition_root",label:(0,o.default)("Publish via root?"),type:"switch",group:(0,o.default)("With"),visible:function(){return!a.default.isUndefined(this.node_info.node_info)&&!a.default.isUndefined(this.node_info.node_info.version)&&this.node_info.node_info.version>=13e4}}]}}]),n}(i.default);t.DefaultWithSchema=v;var _=function(e){m(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c(this,n),(e=t.call(this,u({name:void 0,pubowner:o?o.node_info.user.name:void 0,pubtable:void 0,all_table:void 0,evnt_insert:!0,evnt_delete:!0,evnt_update:!0,evnt_truncate:!0,only_table:void 0,publish_via_partition_root:!1},i))).fieldOptions=u({role:[],publicationTable:[]},r),e.node_info=o,e}return p(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"isAllTable",value:function(e){return!!e.all_table&&(e.pubtable="",!0)}},{key:"isTable",value:function(e){var t=e.all_table,n=e.pubtable;return(t||!(!a.default.isUndefined(n)&&n.length>0&&!a.default.isEqual(this._origData.pubtable,e.pubtable)))&&(e.only_table=!1,!0)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",mode:["properties","create","edit"],noEmpty:!0,visible:function(){return!a.default.isUndefined(this.node_info.node_info)&&!a.default.isUndefined(this.node_info.node_info.version)&&this.node_info.node_info.version>=1e5}},{id:"oid",label:(0,o.default)("OID"),cell:"string",mode:["properties"],type:"text"},{id:"pubowner",label:(0,o.default)("Owner"),type:"select",options:this.fieldOptions.role,disabled:function(){return!!e.isNew()},mode:["edit","properties","create"],controlProps:{allowClear:!1}},{id:"all_table",label:(0,o.default)("All tables?"),type:"switch",group:(0,o.default)("Definition"),mode:["edit","properties","create"],deps:["name"],readonly:function(t){return!e.isNew(t)}},{id:"only_table",label:(0,o.default)("Only table?"),type:"switch",group:(0,o.default)("Definition"),mode:["edit","create"],deps:["name","pubtable","all_table"],readonly:e.isTable,helpMessageMode:["edit","create"],helpMessage:(0,o.default)("If ONLY is specified before the table name, only that table is added to the publication. If ONLY is not specified, the table and all its descendant tables (if any) are added.")},{id:"pubtable",label:(0,o.default)("Tables"),type:"select",controlProps:{allowClear:!0,multiple:!0,creatable:!0},options:this.fieldOptions.publicationTable,group:(0,o.default)("Definition"),mode:["edit","create"],deps:["all_table"],disabled:e.isAllTable},{id:"pubtable",label:(0,o.default)("Tables"),type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{type:"nested-fieldset",mode:["create","edit","properties"],label:(0,o.default)("With"),group:(0,o.default)("Definition"),schema:new v(this.node_info)}]}}]),n}(i.default);t.default=_},51698:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(89406)),i=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o=p(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d(this,a),(e=o.call(this,s({name:void 0,oid:void 0,owner:void 0,description:void 0,schema:null,input_types:void 0,state_type:void 0,state_func:void 0,state_data_size:0,final_type:void 0,final_func:void 0,final_func_modify:void 0,final_extra_param:void 0,initial_val:void 0,moving_state_type:void 0,moving_state_func:void 0,moving_state_data_size:0,moving_final_type:void 0,moving_final_func:void 0,moving_final_func_modify:void 0,moving_final_extra_param:void 0,moving_initial_val:void 0,moving_inverse_func:void 0,combine_func:void 0,serialization_func:void 0,deserialization_func:void 0,sort_oper:void 0},n))).fieldOptions=t,e}return t=a,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"name",label:(0,i.default)("Name"),type:"text",readonly:!0},{id:"oid",label:(0,i.default)("OID"),type:"text",mode:["properties"]},{id:"owner",label:(0,i.default)("Owner"),type:"text",readonly:!0},{id:"schema",label:(0,i.default)("Schema"),mode:["create","edit"],type:"text",readonly:!0},{id:"is_sys_obj",label:(0,i.default)("System aggregate?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,i.default)("Comment"),type:"multiline",mode:["properties","create","edit"],readonly:!0},{id:"input_types",label:(0,i.default)("Input types"),group:(0,i.default)("Options"),type:"text",readonly:!0},{id:"state_type",label:(0,i.default)("State type"),group:(0,i.default)("Options"),type:"text",readonly:!0},{id:"state_func",label:(0,i.default)("State function"),group:(0,i.default)("Options"),type:"text",readonly:!0},{id:"state_data_size",label:(0,i.default)("State data size"),group:(0,i.default)("Options"),type:"text",readonly:!0},{id:"final_type",label:(0,i.default)("Final type"),group:(0,i.default)("Options"),type:"text",readonly:!0},{id:"final_func",label:(0,i.default)("Final function"),group:(0,i.default)("Options"),type:"text",readonly:!0},{id:"final_func_modify",label:(0,i.default)("Final function modify"),group:(0,i.default)("Options"),min_version:11e4,type:"text",readonly:!0},{id:"final_extra_param",label:(0,i.default)("Pass extra arguments to final function"),group:(0,i.default)("Options"),type:"switch",readonly:!0},{id:"initial_val",label:(0,i.default)("Initial condition"),group:(0,i.default)("Options"),type:"text",readonly:!0},{id:"moving_state_type",label:(0,i.default)("State type"),group:(0,i.default)("Moving Options"),type:"text",readonly:!0},{id:"moving_state_func",label:(0,i.default)("State function"),group:(0,i.default)("Moving Options"),type:"text",readonly:!0},{id:"moving_state_data_size",label:(0,i.default)("State data size"),group:(0,i.default)("Moving Options"),type:"text",readonly:!0},{id:"moving_final_func",label:(0,i.default)("Final function"),group:(0,i.default)("Moving Options"),type:"text",readonly:!0},{id:"moving_final_func_modify",label:(0,i.default)("Final function modify"),group:(0,i.default)("Moving Options"),min_version:11e4,type:"text",readonly:!0},{id:"moving_final_extra_param",label:(0,i.default)("Pass extra arguments to final function"),group:(0,i.default)("Moving Options"),type:"switch",readonly:!0},{id:"moving_inverse_func",label:(0,i.default)("Inverse function"),group:(0,i.default)("Moving Options"),type:"text",readonly:!0},{id:"moving_initial_val",label:(0,i.default)("Initial condition"),group:(0,i.default)("Moving Options"),type:"text",readonly:!0},{id:"sort_oper",label:(0,i.default)("Sort operator"),group:(0,i.default)("Advanced"),type:"text",readonly:!0},{id:"combine_func",label:(0,i.default)("Combine function"),group:(0,i.default)("Advanced"),type:"text",readonly:!0},{id:"serialization_func",label:(0,i.default)("Serialization function"),group:(0,i.default)("Advanced"),type:"text",readonly:!0},{id:"deserialization_func",label:(0,i.default)("Deserialization function"),group:(0,i.default)("Advanced"),type:"text",readonly:!0}]}}])&&c(t.prototype,n),r&&c(t,r),a}(o.default);t.default=y},96132:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,e);var t,n,r,i=f(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,a),(e=i.call(this,l({attname:void 0,attowner:void 0,attnum:void 0,cltype:void 0,collspcname:void 0,attacl:void 0,description:void 0},n))).fieldOptions=l({},t),e}return t=a,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"attname",label:(0,o.default)("Column"),cell:"string",type:"text",readonly:!0},{id:"attowner",label:(0,o.default)("Owner"),cell:"string",type:"text",readonly:!0},{id:"attnum",label:(0,o.default)("Position"),cell:"string",type:"text",readonly:!0},{id:"cltype",label:(0,o.default)("Data type"),cell:"string",group:(0,o.default)("Definition"),type:"text",readonly:!0},{id:"collspcname",label:(0,o.default)("Collation"),cell:"string",group:(0,o.default)("Definition"),type:"text",readonly:!0},{id:"attacl",label:(0,o.default)("Privileges"),cell:"string",group:(0,o.default)("Security"),type:"text",readonly:!0},{id:"is_sys_obj",label:(0,o.default)("System column?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",readonly:!0}]}}])&&d(t.prototype,n),r&&d(t,r),a}(i(n(89406)).default);t.default=b},40718:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=s(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,{name:void 0,is_sys_obj:void 0,description:void 0})}return t=u,(n=[{key:"baseFields",get:function(){return[{id:"name",label:(0,o.default)("Name"),cell:"text",editable:!1,type:"text",mode:["properties","edit"]},{id:"oid",label:(0,o.default)("OID"),cell:"text",editable:!1,type:"text",mode:["properties","edit"]},{id:"owner",label:(0,o.default)("Owner"),editable:!1,type:"text",mode:["properties","edit"]},{id:"is_sys_obj",label:(0,o.default)("System database?"),cell:"switch",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),editable:!1,type:"multiline",mode:["properties","edit"]}]}}])&&a(t.prototype,n),r&&a(t,r),u}(i(n(89406)).default);t.default=c},6624:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(89554),n(54747),n(4723),n(74916),n(68309),n(68304),n(30489);var o=l(n(89406)),i=l(n(91669)),a=n(76055);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,o=m(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,l),(e=o.call(this,u({name:void 0,oid:void 0,owner:void 0,copy_collation:null,locale:void 0,lc_type:void 0,lc_collate:void 0,description:void 0,schema:null},n))).schemaList=t.schemaList,e.ownerList=t.rolesList,e.collationsList=t.collationsList,e}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,i.default)("Name"),type:"text",mode:["properties","create","edit"]},{id:"oid",label:(0,i.default)("OID"),type:"text",mode:["properties"]},{id:"owner",label:(0,i.default)("Owner"),type:"select",mode:["properties","create","edit"],options:e.ownerList,controlProps:{allowClear:!1}},{id:"schema",label:(0,i.default)("Schema"),mode:["create","edit"],node:"schema",type:function(){return{type:"select",options:e.schemaList,controlProps:{filter:function(e){var t=[];return e.forEach((function(e){e&&e.label.match(/^pg_/)||t.push(e)})),t},allowClear:!1}}}},{id:"copy_collation",label:(0,i.default)("Copy collation"),type:"select",mode:["create","edit"],group:(0,i.default)("Definition"),readonly:function(t){return!e.isNew(t)},options:e.collationsList,disabled:function(e){return!!e.locale||!(!e.lc_collate&&!e.lc_type)},deps:["locale","lc_collate","lc_type"]},{id:"locale",label:(0,i.default)("Locale"),type:"text",mode:["create","edit"],group:(0,i.default)("Definition"),readonly:function(t){return!e.isNew(t)},deps:["lc_collate","lc_type","copy_collation"],disabled:function(e){return!(!e.lc_collate&&!e.lc_type&&!e.copy_collation)}},{id:"lc_collate",label:(0,i.default)("LC_COLLATE"),type:"text",mode:["properties","create","edit"],group:(0,i.default)("Definition"),readonly:function(t){return!e.isNew(t)},disabled:e.disableFields,deps:["locale","copy_collation"]},{id:"lc_type",label:(0,i.default)("LC_TYPE"),type:"text",mode:["properties","create","edit"],group:(0,i.default)("Definition"),readonly:function(t){return!e.isNew(t)},disabled:e.disableFields,deps:["locale","copy_collation"]},{id:"is_sys_obj",label:(0,i.default)("System collation?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,i.default)("Comment"),type:"multiline",mode:["properties","create","edit"]}]}},{key:"disableFields",value:function(e){if(e.locale||e.copy_collation){if(e.locale)return!0;if(e.copy_collation)return!0}return!1}},{key:"validate",value:function(e,t){var n=!1,r=!1,o=!1,l=!1;return(0,a.isEmptyString)(e.name)?(t("name",(0,i.default)("Name cannot be empty.")),!0):((0,a.isEmptyString)(e.locale)&&(n=!0),(0,a.isEmptyString)(e.copy_collation)&&(l=!0),(0,a.isEmptyString)(e.lc_collate)&&(o=!0),(0,a.isEmptyString)(e.lc_type)&&(r=!0),n&&(o||r)&&l?(t("copy_collation",(0,i.default)("Definition incomplete. Please provide Locale OR Copy Collation OR LC_TYPE/LC_COLLATE.")),!0):null)}}])&&f(t.prototype,n),r&&f(t,r),l}(o.default);t.default=h},37055:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,e);var t,n,r,i=d(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:void 0,oid:void 0,description:void 0,consrc:void 0,convalidated:!0},e))}return t=c,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",cell:"text",noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System domain constraint?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),type:"multiline",cell:"text",mode:["properties","create","edit"],min_version:90500},{id:"consrc",label:(0,o.default)("Check"),type:"multiline",group:(0,o.default)("Definition"),mode:["properties","create","edit"],readonly:function(t){return!e.isNew(t)},noEmpty:!0},{id:"convalidated",label:(0,o.default)("Validate?"),type:"switch",cell:"boolean",group:(0,o.default)("Definition"),min_version:90200,mode:["properties","create","edit"],readonly:function(t){return!(e.isNew(t)||!e._origData.convalidated)}}]}}])&&s(t.prototype,n),r&&s(t,r),c}(i(n(89406)).default);t.default=p},97570:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DomainConstSchema=void 0,n(69826),n(68304),n(30489);var o=u(n(91669)),i=u(n(89406)),a=u(n(67091)),l=n(76055),s=u(n(96486));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.call(this,{conoid:void 0,conname:void 0,consrc:void 0,convalidated:!0})}return b(n,[{key:"idAttribute",get:function(){return"conoid"}},{key:"baseFields",get:function(){var e=this;return[{id:"conname",label:(0,o.default)("Name"),cell:"text",type:"text"},{id:"consrc",label:(0,o.default)("Check"),cell:"text",type:"text",editable:function(t){return e.isNew(t)}},{id:"convalidated",label:(0,o.default)("Validate?"),cell:"checkbox",type:"checkbox",readonly:function(t){var n=s.default.find(e.top.origData.constraints,(function(e){return e.conoid==t.conoid}));return!(e.isNew(t)||!n.convalidated)}}]}},{key:"validate",value:function(e,t){return(0,l.isEmptyString)(e.conname)?(t("conname","Constraint Name cannot be empty."),!0):(t("conname",null),(0,l.isEmptyString)(e.consrc)?(t("consrc","Constraint Check cannot be empty."),!0):void t("consrc",null))}}]),n}(i.default);t.DomainConstSchema=w;var O=function(e){y(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,n),(e=t.call(this,c({name:void 0,oid:void 0,owner:void 0,basensp:void 0,description:void 0,basetype:void 0,typlen:void 0,precision:void 0,typdefault:void 0,typnotnull:void 0,sysdomain:void 0,collname:void 0,constraints:[],seclabels:[]},o))).fieldOptions=c({role:[],schema:[],basetype:[],collation:[]},r),e}return b(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"owner",label:(0,o.default)("Owner"),editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"basensp",label:(0,o.default)("Schema"),editable:!1,type:"select",options:this.fieldOptions.schema,controlProps:{allowClear:!1},mode:["create","edit"]},{id:"sysdomain",label:(0,o.default)("System domain?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"basetype",label:(0,o.default)("Base type"),type:"select",options:this.fieldOptions.basetype,optionsLoaded:function(t){e.type_options=t},mode:["properties","create","edit"],group:(0,o.default)("Definition"),readonly:function(t){return!e.isNew(t)},noEmpty:!0},{id:"typlen",label:(0,o.default)("Length"),cell:"text",type:"text",group:(0,o.default)("Definition"),deps:["basetype"],readonly:function(t){return!e.isNew(t)},disabled:function(t){var n=t.basetype;return e.type_options&&(s.default.each(e.type_options,(function(e){n==e.value&&(e.length?(t.is_tlength=!0,t.min_val=e.min_val,t.max_val=e.max_val):t.is_tlength=!1)})),t.is_tlength||t.typlen&&(t.typlen=null)),!t.is_tlength}},{id:"precision",label:(0,o.default)("Precision"),cell:"text",type:"text",group:(0,o.default)("Definition"),deps:["basetype"],readonly:function(t){return!e.isNew(t)},disabled:function(t){var n=t.basetype;return e.type_options&&(s.default.each(e.type_options,(function(e){n==e.value&&(e.precision?(t.is_precision=!0,t.min_val=e.min_val,t.max_val=e.max_val):t.is_precision=!1)})),t.is_precision||t.precision&&(t.precision=null)),!t.is_precision}},{id:"typdefault",label:(0,o.default)("Default"),cell:"text",type:"text",group:(0,o.default)("Definition"),controlProps:{placeholder:(0,o.default)("Enter an expression or a value.")}},{id:"typnotnull",label:(0,o.default)("Not NULL?"),cell:"boolean",type:"switch",group:(0,o.default)("Definition")},{id:"collname",label:(0,o.default)("Collation"),cell:"text",type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.collation,readonly:function(t){return!e.isNew(t)}},{id:"constraints",label:(0,o.default)("Constraints"),type:"collection",schema:new w,editable:!1,group:(0,o.default)("Constraints"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["conname"]},{id:"seclabels",label:(0,o.default)("Security labels"),type:"collection",schema:new a.default,editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90200}]}}]),n}(i.default);t.default=O},49289:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(47042),n(68309),n(91038),n(78783),n(41817),n(32165),n(66992),n(33948),n(79753),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeColumnSchema=j,t.CheckConstraintSchema=t.ColumnSchema=t.default=void 0,n(88674),n(41539),n(21249),n(92222),n(68304),n(30489);var o=f(n(91669)),i=f(n(67091)),a=f(n(89406)),l=f(n(28296)),s=n(76055),u=f(n(96486)),d=n(40345),c=n(77077);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){O(n,e);var t=x(n);function n(e,r,o){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return v(this,n),(i=t.call(this,h({name:void 0,oid:void 0,owner:void 0,basensp:void 0,is_sys_obj:void 0,description:void 0,ftsrvname:void 0,strftoptions:void 0,inherits:[],columns:[],ftoptions:[],relacl:[],stracl:[],seclabels:[]},l))).getPrivilegeRoleSchema=e,i.getVariableSchema=r,i.getColumns=o,i.inheritedTableList=[],i.fieldOptions=h({role:[],schema:[],foreignServers:[],tables:[],nodeInfo:null},a),i.columnsObj=j(i.fieldOptions.nodeInfo,i.fieldOptions.nodeData,i.fieldOptions.pgBrowser),i}return w(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"canEditDeleteRowColumns",value:function(e){return!!(0,s.isEmptyString)(e.inheritedfrom)}},{key:"getTableOid",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=m(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.inheritedTableList);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.value===e)return r.value}}catch(e){n.e(e)}finally{n.f()}}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"owner",label:(0,o.default)("Owner"),cell:"text",type:"select",controlProps:{allowClear:!1},options:t.fieldOptions.role},{id:"basensp",label:(0,o.default)("Schema"),cell:"text",type:"select",mode:["create","edit"],options:t.fieldOptions.schema},{id:"is_sys_obj",label:(0,o.default)("System foreign table?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"ftsrvname",label:(0,o.default)("Foreign server"),cell:"text",type:"select",group:(0,o.default)("Definition"),options:t.fieldOptions.foreignServers,readonly:function(e){return!t.isNew(e)}},{id:"inherits",label:(0,o.default)("Inherits"),group:(0,o.default)("Definition"),type:"select",min_version:90500,controlProps:{multiple:!0},options:t.fieldOptions.tables,optionsLoaded:function(e){return t.inheritedTableList=e},deferredDepChange:function(n,r,o,i){return new Promise((function(r){var o,a,l=n.inherits||[],s=i.oldState.inherits||[],d=void 0;l.length>1&&l.length>s.length?(d=u.default.difference(l,s),o=t.getColumns({attrelid:e.getTableOid(d[0])})):1==l.length&&(o=t.getColumns({attrelid:e.getTableOid(l[0])})),o&&o.then((function(e){r((function(n){var r=e.map((function(e){return t.columnsObj.getNewData(e)}));return{adding_inherit_cols:!1,columns:r=[].concat(p(n.columns),p(r))}}))})),l.length>0&&l.length<s.length?(d=u.default.difference(s,l),a=e.getTableOid(d[0])):1===s.length&&l.length<1&&(d=s[0],a=e.getTableOid(d)),a&&r((function(e){var t=e.columns;return u.default.remove(e.columns,(function(e){return e.inheritedid==a})),{adding_inherit_cols:!1,columns:t}}))}))}},{id:"columns",label:(0,o.default)("Columns"),cell:"text",type:"collection",group:(0,o.default)("Columns"),mode:["edit","create"],schema:this.columnsObj,canAdd:!0,canDelete:!0,canEdit:!0,columns:["attname","datatype","inheritedfrom"],canEditRow:this.canEditDeleteRowColumns,canDeleteRow:this.canEditDeleteRowColumns},{id:"constraints",label:(0,o.default)("Constraints"),cell:"text",type:"collection",group:(0,o.default)("Constraints"),mode:["edit","create"],schema:new D,canAdd:!0,canDelete:!0,columns:["conname","consrc","connoinherit","convalidated"],canEdit:!0,canDeleteRow:function(e){return!(1!=e.conislocal&&!u.default.isUndefined(e.conislocal))},canEditRow:function(e){return t.isNew(e)}},{id:"strftoptions",label:(0,o.default)("Options"),cell:"text",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"ftoptions",label:(0,o.default)("Options"),type:"collection",schema:new l.default("option","value"),group:(0,o.default)("Options"),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["option"]},{id:"relacl",label:(0,o.default)("Privileges"),cell:"text",type:"text",group:(0,o.default)("Security"),mode:["properties"],min_version:90200},{id:"acl",label:(0,o.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["a","r","w","x"]),uniqueCol:["grantee","grantor"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0,min_version:90200},{id:"seclabels",label:(0,o.default)("Security labels"),type:"collection",schema:new i.default,editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90100,disabled:t.inCatalog()}]}},{key:"validate",value:function(e,t){if((0,s.isEmptyString)(e.service)){if((0,s.isEmptyString)(e.ftsrvname))return t("ftsrvname",(0,o.default)("Foreign server cannot be empty.")),!0;t("ftsrvname",null)}}}]),n}(a.default);function j(e,t,n){var r=this;return new k({},(function(n){return(0,d.getNodePrivilegeRoleSchema)(r,e,t,n)}),e,(function(){return(0,c.getNodeAjaxOptions)("get_types",n.Nodes.table,e,t,{cacheLevel:"table"})}),(function(){return(0,c.getNodeAjaxOptions)("get_collations",n.Nodes.collation,e,t)}))}t.default=E;var k=function(e){O(n,e);var t=x(n);function n(e,r,o,i,a){var l;return v(this,n),(l=t.call(this,{attname:void 0,datatype:void 0,typlen:void 0,precision:void 0,typdefault:void 0,attnotnull:void 0,collname:void 0,attnum:void 0,inheritedfrom:void 0,inheritedid:void 0,attstattarget:void 0,coloptions:[]})).getPrivilegeRoleSchema=r,l.nodeInfo=o,l.datatypeOptions=i,l.collspcnameOptions=a,l.datatypes=[],l}return w(n,[{key:"idAttribute",get:function(){return"attnum"}},{key:"editable_check_for_column",value:function(e){return!!(u.default.isUndefined(e.inheritedid)||u.default.isNull(e.inheritedid)||u.default.isUndefined(e.inheritedfrom)||u.default.isNull(e.inheritedfrom))}},{key:"baseFields",get:function(){var e=this;return[{id:"attname",label:(0,o.default)("Name"),cell:"text",type:"text",editable:e.editable_check_for_column,noEmpty:!0,minWidth:115},{id:"datatype",label:(0,o.default)("Data type"),minWidth:150,group:(0,o.default)("Definition"),noEmpty:!0,editable:e.editable_check_for_column,options:e.datatypeOptions,optionsLoaded:function(t){e.datatypes=t,e.type_options=t},cell:"select",controlProps:{allowClear:!1},type:"select"},{id:"inheritedfrom",label:(0,o.default)("Inherited From"),cell:"label",type:"label",readonly:!0,editable:!1,mode:["properties","edit"]},{id:"attnum",label:(0,o.default)("Position"),cell:"text",type:"text",disabled:e.inCatalog(),mode:["properties"]},{id:"typlen",label:(0,o.default)("Length"),cell:"int",deps:["datatype"],type:"int",group:(0,o.default)("Definition"),width:120,minWidth:120,disabled:function(t){var n=t.typlen;if(!(u.default.isUndefined(t.inheritedid)||u.default.isNull(t.inheritedid)||u.default.isUndefined(t.inheritedfrom)||u.default.isNull(t.inheritedfrom)))return u.default.isUndefined(n)||(t.typlen=void 0),!0;var r=t.datatype,o=!1;return e.type_options?(t.is_tlength=!1,u.default.each(e.type_options,(function(e){r==e.value&&e.length&&(o=!0,t.is_tlength=!0,t.min_val=e.min_val,t.max_val=e.max_val)})),o||u.default.isUndefined(n)||(t.typlen=void 0),!t.is_tlength):(o||u.default.isUndefined(n)||(t.typlen=void 0),!0)}},{id:"precision",label:(0,o.default)("Precision"),cell:"int",minWidth:60,deps:["datatype"],type:"int",group:(0,o.default)("Definition"),disabled:function(t){var n=t.precision;if(!(u.default.isUndefined(t.inheritedid)||u.default.isNull(t.inheritedid)||u.default.isUndefined(t.inheritedfrom)||u.default.isNull(t.inheritedfrom)))return u.default.isUndefined(n)||(t.precision=void 0),!0;var r=t.datatype,o=!1;return e.type_options?(t.is_precision=!1,u.default.each(e.type_options,(function(e){r==e.value&&e.precision&&(o=!0,t.is_precision=!0,t.min_val=e.min_val,t.max_val=e.max_val)})),o||u.default.isUndefined(n)||(t.precision=void 0),!t.is_precision):(o||u.default.isUndefined(n)||(t.precision=void 0),!0)}},{id:"typdefault",label:(0,o.default)("Default"),cell:"text",type:"text",group:(0,o.default)("Definition"),controlProps:{placeholder:(0,o.default)("Enter an expression or a value.")},editable:function(t){return!!(u.default.isUndefined(t.inheritedid)||u.default.isNull(t.inheritedid)||u.default.isUndefined(t.inheritedfrom)||u.default.isNull(t.inheritedfrom))&&!(e.nodeInfo.server.version<90300)}},{id:"attnotnull",label:(0,o.default)("Not NULL?"),cell:"switch",type:"switch",minWidth:80,group:(0,o.default)("Definition"),editable:e.editable_check_for_column},{id:"attstattarget",label:(0,o.default)("Statistics"),cell:"text",type:"text",disabled:function(t){return!e.isNew()&&(!(e.nodeInfo.server.version<90200)&&!!(u.default.isUndefined(t.inheritedid)||u.default.isNull(t.inheritedid)||u.default.isUndefined(t.inheritedfrom)||u.default.isNull(t.inheritedfrom)))},mode:["properties","edit"],group:(0,o.default)("Definition")},{id:"collname",label:(0,o.default)("Collation"),cell:"select",type:"select",group:(0,o.default)("Definition"),deps:["datatype"],options:e.collspcnameOptions,disabled:function(t){return!(!u.default.isUndefined(e.isNew)&&!e.isNew(t))&&!!(u.default.isUndefined(t.inheritedid)||u.default.isNull(t.inheritedid)||u.default.isUndefined(t.inheritedfrom)||u.default.isNull(t.inheritedfrom))}},{id:"coloptions",label:(0,o.default)("Options"),type:"collection",group:(0,o.default)("Options"),schema:new l.default("option","value"),uniqueCol:["option"],mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0}]}}]),n}(a.default);t.ColumnSchema=k;var D=function(e){O(n,e);var t=x(n);function n(){var e;return v(this,n),(e=t.call(this,{name:void 0,oid:void 0,description:void 0,consrc:void 0,connoinherit:void 0,convalidated:!0})).convalidated_default=!0,e}return w(n,[{key:"idAttribute",get:function(){return"conoid"}},{key:"isReadonly",value:function(e){return!this.isNew(e)}},{key:"baseFields",get:function(){var e=this;return[{id:"conname",label:(0,o.default)("Name"),type:"text",cell:"text",mode:["properties","create","edit"],editable:function(t){return!!u.default.isUndefined(e.isNew)||e.isNew(t)},noEmpty:!0,readonly:e.isReadonly},{id:"consrc",label:(0,o.default)("Check"),type:"multiline",cell:"text",mode:["properties","create","edit"],editable:function(t){return!!u.default.isUndefined(e.isNew)||e.isNew(t)},noEmpty:!0,readonly:e.isReadonly},{id:"connoinherit",label:(0,o.default)("No inherit?"),type:"switch",cell:"switch",mode:["properties","create","edit"],deps:[["is_partitioned"]],editable:function(t){return!!u.default.isUndefined(e.isNew)||e.isNew(t)},readonly:e.isReadonly},{id:"convalidated",label:(0,o.default)("Validate?"),type:"switch",cell:"switch",readonly:e.isReadonly,editable:function(t){return!!u.default.isUndefined(e.isNew)||(!!e.isNew(t)||(!t.convalidated||!e.convalidated_default))},mode:["properties","create","edit"]}]}}]),n}(a.default);t.CheckConstraintSchema=D},22265:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var i=u(n(91669)),a=u(n(89406)),l=u(n(35971)),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,{token:void 0})).tokenOptions=e,r.isNewFTSConf=!0,r}return b(n,[{key:"addDisabled",value:function(){return this.isNewFTSConf}},{key:"getNewData",value:function(e){return{token:e.token,dictname:[]}}},{key:"baseFields",get:function(){var e=this;return[{id:"token",label:(0,i.default)("Tokens"),type:"select",editable:!1,options:this.tokenOptions,disabled:function(){return e.isNewFTSConf}}]}}]),n}(a.default),O=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,{token:void 0,dictname:void 0})).dictOptions=e,r}return b(n,[{key:"baseFields",get:function(){return[{id:"token",label:(0,i.default)("Token"),type:"text",editable:!1,cell:"",minWidth:150,noEmpty:!0},{id:"dictname",label:(0,i.default)("Dictionaries"),editable:!0,controlProps:{multiple:!0},cell:"select",options:this.dictOptions,minWidth:260,noEmpty:!0}]}}]),n}(a.default),S=function(e){y(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,n),(e=t.call(this,c({name:void 0,owner:void 0,is_sys_obj:void 0,description:void 0,schema:void 0,prsname:void 0,copy_config:void 0,tokens:void 0},o))).fieldOptions=c({role:[],schema:[],parsers:[],copyConfig:[],tokens:[],dictionaries:[]},r),e.tokHeaderSchema=new w(e.fieldOptions.tokens),e.tokColumnSchema=new O(e.fieldOptions.dictionaries),e}return b(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"initialise",value:function(e){this.tokHeaderSchema.isNewFTSConf=this.isNew(e)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,i.default)("Name"),cell:"text",type:"text",noEmpty:!0},{id:"oid",label:(0,i.default)("OID"),cell:"text",editable:!1,type:"text",mode:["properties"]},{id:"owner",label:(0,i.default)("Owner"),cell:"text",editable:!1,type:"select",options:this.fieldOptions.role,mode:["properties","edit","create"],noEmpty:!0},{id:"schema",label:(0,i.default)("Schema"),editable:!1,type:"select",options:this.fieldOptions.schema,mode:["create","edit"],noEmpty:!0},{id:"is_sys_obj",label:(0,i.default)("System FTS configuration?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,i.default)("Comment"),cell:"text",type:"multiline"},{id:"prsname",label:(0,i.default)("Parser"),editable:!1,type:"select",group:(0,i.default)("Definition"),deps:["copy_config"],options:this.fieldOptions.parsers,disabled:function(e){var t=e.copy_config;return!r.isNull(t)&&!r.isUndefined(t)&&""!==t},readonly:function(t){return!e.isNew(t)}},{id:"copy_config",label:(0,i.default)("Copy config"),editable:!1,type:"select",group:(0,i.default)("Definition"),mode:["create"],deps:["prsname"],options:this.fieldOptions.copyConfig,disabled:function(e){var t=e.prsname;return!r.isNull(t)&&!r.isUndefined(t)&&""!==t},readonly:function(t){return!e.isNew(t)}},{id:"tokens",label:"",type:"collection",group:(0,i.default)("Tokens"),mode:["create","edit"],editable:!1,schema:this.tokColumnSchema,headerSchema:this.tokHeaderSchema,headerVisible:function(){return!0},CustomControl:l.default,uniqueCol:["token"],canAdd:!0,canEdit:!1,canDelete:!0}]}},{key:"validate",value:function(e,t){var n=e.prsname,o=e.copy_config,a=""===n||r.isUndefined(n)||r.isNull(n)?o:n;if((0,s.isEmptyString)(a))return t("prsname",(0,i.default)("Select parser or configuration to copy.")),!0;t("prsname",null)}}]),n}(a.default);t.default=S},81629:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),i=l(n(89406)),a=l(n(28296));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,i=m(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,l),(e=i.call(this,u({name:void 0,owner:void 0,is_sys_obj:void 0,description:void 0,schema:void 0,template:void 0,options:void 0},n))).fieldOptions=u({role:[],schema:[],fts_template:[]},t),e}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",editable:!1,type:"text",mode:["properties"]},{id:"owner",label:(0,o.default)("Owner"),cell:"text",editable:!1,type:"select",options:this.fieldOptions.role,mode:["properties","edit","create"],noEmpty:!0},{id:"schema",label:(0,o.default)("Schema"),editable:!1,type:"select",options:this.fieldOptions.schema,mode:["create","edit"],noEmpty:!0},{id:"is_sys_obj",label:(0,o.default)("System FTS dictionary?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"template",label:(0,o.default)("Template"),editable:!1,type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.fts_template,noEmpty:!0,mode:["edit","create","properties"],readonly:function(t){return!e.isNew(t)}},{id:"options",label:(0,o.default)("Options"),type:"collection",schema:new a.default("option","value"),group:(0,o.default)("Options"),mode:["edit","create"],uniqueCol:["option"],canAdd:!0,canEdit:!1,canDelete:!0}]}}])&&f(t.prototype,n),r&&f(t,r),l}(i.default);t.default=h},30572:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,e);var t,n,r,i=f(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,a),(e=i.call(this,l({name:null,oid:void 0,version:"",schema:void 0,description:"",is_sys_obj:!1},n))).fieldOptions=l({prsstartList:[],prstokenList:[],prsendList:[],prslextypeList:[],prsheadlineList:[],schemaList:[]},t),e}return t=a,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50",noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]},{id:"schema",label:(0,o.default)("Schema"),cell:"string",type:"select",mode:["create","edit"],node:"schema",noEmpty:!0,options:this.fieldOptions.schemaList},{id:"is_sys_obj",label:(0,o.default)("System FTS parser?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"},{id:"prsstart",label:(0,o.default)("Start function"),group:(0,o.default)("Definition"),noEmpty:!0,readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.prsstartList,optionsLoaded:function(t){e.fieldOptions.prsstartList=t},controlProps:{allowClear:!0,filter:function(n){return e.getFilterOptions(t,n)}}}}},{id:"prstoken",label:(0,o.default)("Get next token function"),group:(0,o.default)("Definition"),noEmpty:!0,readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.prstokenList,optionsLoaded:function(t){e.fieldOptions.prstokenList=t},controlProps:{allowClear:!0,filter:function(n){return e.getFilterOptions(t,n)}}}}},{id:"prsend",label:(0,o.default)("End function"),group:(0,o.default)("Definition"),noEmpty:!0,readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.prsendList,optionsLoaded:function(t){e.fieldOptions.prsendList=t},controlProps:{allowClear:!0,filter:function(n){return e.getFilterOptions(t,n)}}}}},{id:"prslextype",label:(0,o.default)("Lextypes function"),group:(0,o.default)("Definition"),noEmpty:!0,readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.prslextypeList,optionsLoaded:function(t){e.fieldOptions.prslextypeList=t},controlProps:{allowClear:!0,filter:function(n){return e.getFilterOptions(t,n)}}}}},{id:"prsheadline",label:(0,o.default)("Headline function"),group:(0,o.default)("Definition"),readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.prsheadlineList,optionsLoaded:function(t){e.fieldOptions.prsheadlineList=t},controlProps:{allowClear:!0,filter:function(n){return e.getFilterOptions(t,n)}}}}}]}}])&&d(t.prototype,n),r&&d(t,r),a}(i(n(89406)).default);t.default=b},66023:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,e);var t,n,r,i=f(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,a),(e=i.call(this,l({name:null,oid:void 0,version:"",schema:void 0,description:"",is_sys_obj:!1,tmplinit:void 0,tmpllexize:void 0},n))).fieldOptions=l({schemaList:[],initFunctionList:[],lexisFunctionList:[]},t),e}return t=a,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50",noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]},{id:"schema",label:(0,o.default)("Schema"),mode:["create","edit"],node:"schema",type:"select",editable:!1,noEmpty:!0,options:this.fieldOptions.schemaList},{id:"is_sys_obj",label:(0,o.default)("System FTS template?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"},{id:"tmplinit",label:(0,o.default)("Init function"),group:(0,o.default)("Definition"),cache_level:"database",cache_node:"schema",readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.initFunctionList,optionsLoaded:function(t){e.fieldOptions.initFunctionData=t},controlProps:{allowClear:!0,filter:function(n){return e.getFilterOptions(t,n)}}}}},{id:"tmpllexize",label:(0,o.default)("Lexize function"),group:(0,o.default)("Definition"),noEmpty:!0,cache_level:"database",cache_node:"schema",readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.lexisFunctionList,optionsLoaded:function(t){e.fieldOptions.lexisFunctionData=t},controlProps:{allowClear:!0,filter:function(n){return e.getFilterOptions(t,n)}}}}}]}}])&&d(t.prototype,n),r&&d(t,r),a}(i(n(89406)).default);t.default=b},55066:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DefaultArgumentSchema=void 0,n(89554),n(54747),n(68309),n(68304),n(30489);var o=u(n(91669)),i=u(n(89406)),a=u(n(67091)),l=n(76055),s=u(n(96486));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){y(n,e);var t=g(n);function n(e,r){var o;return p(this,n),(o=t.call(this)).node_info=e,o.getTypes=r,o.type_options={},o}return b(n,[{key:"setTypeOptions",value:function(e){var t=this;e.forEach((function(e){t.type_options[e.value]=c({},e)}))}},{key:"baseFields",get:function(){var e=this;return[{id:"argid",visible:!1,type:"text",mode:["properties","edit","create"]},{id:"argtype",label:(0,o.default)("Data type"),options:this.getTypes,type:"text",cell:function(){return{cell:"select",options:e.getTypes,optionsLoaded:function(t){e.setTypeOptions(t)},controlProps:{allowClear:!1}}},editable:this.isEditable,first_empty:!0},{id:"argmode",label:(0,o.default)("Mode"),type:"text",cell:function(){return{cell:"select",options:[{label:"IN",value:"IN"},{label:"OUT",value:"OUT"},{label:"INOUT",value:"INOUT"},{label:"VARIADIC",value:"VARIADIC"}],optionsLoaded:function(t){e.setTypeOptions(t)},controlProps:{allowClear:!1}}},editable:this.isEditable},{id:"argname",label:(0,o.default)("Argument name"),type:"text",editable:this.isInCatalog,cell:function(){return{cell:"text"}}},{id:"argdefval",label:(0,o.default)("Default"),type:"text",cell:function(){return{cell:"text"}},editable:this.isInCatalog}]}},{key:"isEditable",value:function(){var e=this.node_info;return(!e||!("catalog"in e))&&(!!s.default.isUndefined(this.isNew)||this.isNew())}},{key:"isInCatalog",value:function(e){var t=this.node_info;return(!t||!("catalog"in t))&&!!(s.default.isUndefined(e.argmode)||s.default.isUndefined(e.name)||"argdefval"!=e.name||"INOUT"!=e.argmode&&"OUT"!=e.argmode)}}]),n}(i.default);t.DefaultArgumentSchema=w;var O=function(e){y(n,e);var t=g(n);function n(e,r){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"function",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return p(this,n),(o=t.call(this,c({name:void 0,oid:void 0,xmin:void 0,funcowner:void 0,pronamespace:void 0,description:void 0,pronargs:void 0,proargs:void 0,proargtypenames:void 0,prorettypename:void 0,lanname:void 0,provolatile:void 0,proretset:void 0,proisstrict:void 0,prosecdef:void 0,proiswindow:void 0,proparallel:void 0,procost:void 0,prorows:0,proleakproof:void 0,prosupportfunc:void 0,arguments:[],prosrc:void 0,prosrc_c:void 0,probin:"$libdir/",options:[],variables:[],proacl:void 0,seclabels:[],acl:[],sysfunc:void 0,sysproc:void 0},s))).getPrivilegeRoleSchema=e,o.getNodeVariableSchema=r,o.node_info=a,o.type=l.type,o.fieldOptions=c({role:[],schema:[],getTypes:[]},i),o}return b(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"isVisible",value:function(e){return"procedure"!==this.type?!e.sysproc:!e.sysfunc&&!!e.sysproc}},{key:"isGreaterThan95",value:function(e){return(this.node_info.node_info.server.version<90500||"ppas"!=this.node_info.node_info.server.server_type||"edbspl"!=e.lanname)&&(e.provolatile=null,e.proisstrict=!1,e.procost=null,e.proleakproof=!1,!0)}},{key:"isGreaterThan96",value:function(e){return(this.node_info.node_info.server.version<90600||"ppas"!=this.node_info.node_info.server.server_type||"edbspl"!=e.lanname)&&(e.proparallel=null,!0)}},{key:"isReadonly",value:function(){return!this.isNew()}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:t.inCatalog(),noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:(0,o.default)("Owner"),cell:"string",options:this.fieldOptions.role,type:"select",disabled:function(n){"procedure"!==e.type?t.inCatalog(n):t.isGreaterThan95(n)},noEmpty:!0},{id:"pronamespace",label:(0,o.default)("Schema"),cell:"string",type:"select",disabled:t.inCatalog(),mode:["create","edit"],controlProps:{allowClear:!1,first_empty:!1},options:t.fieldOptions.schema,noEmpty:!0},{id:"sysfunc",label:(0,o.default)("System function?"),cell:"boolean",type:"switch",mode:["properties"],visible:t.isVisible},{id:"sysproc",label:(0,o.default)("System procedure?"),cell:"boolean",type:"switch",mode:["properties"],visible:function(){return"procedure"===e.type}},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",disabled:t.inCatalog()},{id:"pronargs",label:(0,o.default)("Argument count"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"proargs",label:(0,o.default)("Arguments"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"proargtypenames",label:(0,o.default)("Signature arguments"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"prorettypename",label:(0,o.default)("Return type"),cell:"string",type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.getTypes,readonly:t.isReadonly,first_empty:!0,mode:["create"],visible:t.isVisible},{id:"prorettypename",label:(0,o.default)("Return type"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties","edit"],readonly:t.isReadonly,visible:t.isVisible},{id:"lanname",label:(0,o.default)("Language"),cell:"string",noEmpty:!0,options:this.fieldOptions.getLanguage,type:"select",group:(0,o.default)("Definition"),disabled:function(){return"procedure"===this.type?this.node_info.node_info.server.version<11e4:!(!this.node_info||!("catalog"in this.node_info))}},{id:"probin",label:(0,o.default)("Object file"),cell:"string",type:"text",group:(0,o.default)("Definition"),deps:["lanname"],visible:function(e){return"c"==e.lanname},disabled:t.inCatalog()},{id:"prosrc_c",label:(0,o.default)("Link symbol"),cell:"string",type:"text",group:(0,o.default)("Definition"),deps:["lanname"],visible:function(e){return"c"==e.lanname},disabled:t.inCatalog()},{id:"arguments",label:(0,o.default)("Arguments"),cell:"string",group:(0,o.default)("Definition"),type:"collection",canAdd:function(){return t.isNew()},canDelete:!0,mode:["create","edit"],columns:["argtype","argmode","argname","argdefval"],schema:new w(this.node_info,this.fieldOptions.getTypes),disabled:t.inCatalog(),canDeleteRow:function(){return t.isNew()}},{id:"prosrc",label:(0,o.default)("Code"),cell:"text",type:"sql",mode:["properties","create","edit"],group:(0,o.default)("Code"),deps:["lanname"],isFullTab:!0,visible:function(e){return"c"!==e.lanname},disabled:t.inCatalog()},{id:"provolatile",label:(0,o.default)("Volatility"),cell:"text",type:"select",group:(0,o.default)("Options"),deps:["lanname"],options:[{label:"VOLATILE",value:"v"},{label:"STABLE",value:"s"},{label:"IMMUTABLE",value:"i"}],disabled:"procedure"!==this.type?t.inCatalog():t.isGreaterThan95,controlProps:{allowClear:!1}},{id:"proretset",label:(0,o.default)("Returns a set?"),type:"switch",disabled:function(){return!t.isNew()},group:(0,o.default)("Options"),visible:t.isVisible,readonly:t.isReadonly},{id:"proisstrict",label:(0,o.default)("Strict?"),type:"switch",group:(0,o.default)("Options"),disabled:t.inCatalog(),deps:["lanname"]},{id:"prosecdef",label:(0,o.default)("Security of definer?"),group:(0,o.default)("Options"),type:"switch",disabled:"procedure"!==this.type?t.inCatalog():function(){return t.node_info.node_info.server.version<90500}},{id:"proiswindow",label:(0,o.default)("Window?"),group:(0,o.default)("Options"),cell:"boolean",type:"switch",disabled:function(){return!t.isNew()},visible:t.isVisible,readonly:t.isReadonly},{id:"proparallel",label:(0,o.default)("Parallel"),cell:"string",type:"select",group:(0,o.default)("Options"),deps:["lanname"],options:[{label:"UNSAFE",value:"u"},{label:"RESTRICTED",value:"r"},{label:"SAFE",value:"s"}],disabled:"procedure"!==this.type?t.inCatalog():t.isGreaterThan96,min_version:90600,controlProps:{allowClear:!1}},{id:"procost",label:(0,o.default)("Estimated cost"),group:(0,o.default)("Options"),cell:"string",type:"text",deps:["lanname"],disabled:"procedure"!==this.type?t.isDisabled:t.isGreaterThan95},{id:"prorows",label:(0,o.default)("Estimated rows"),type:"text",deps:["proretset"],visible:t.isVisible,readonly:function(e){var t=!0;return 1==e.proretset&&(t=!1),t},group:(0,o.default)("Options")},{id:"proleakproof",label:(0,o.default)("Leak proof?"),group:(0,o.default)("Options"),cell:"boolean",type:"switch",min_version:90200,disabled:"procedure"!==this.type?t.inCatalog():t.isGreaterThan95,deps:["lanname"]},{id:"prosupportfunc",label:(0,o.default)("Support function"),type:"select",disabled:function(){return!(!t.node_info||!("catalog"in t.node_info))||!t.node_info.node_info.server.user.is_superuser},group:(0,o.default)("Options"),visible:t.isVisible,options:this.fieldOptions.getSupportFunctions,min_version:12e4},{id:"proacl",label:(0,o.default)("Privileges"),type:"text",mode:["properties"],group:(0,o.default)("Security")},{id:"variables",label:"",type:"collection",group:(0,o.default)("Parameters"),schema:this.getNodeVariableSchema(),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0},{id:"acl",label:(0,o.default)("Privileges"),editable:!1,schema:this.getPrivilegeRoleSchema(["X"]),uniqueCol:["grantee","grantor"],type:"collection",group:"Security",mode:["edit","create"],canAdd:!0,canDelete:!0,disabled:t.inCatalog()},{id:"seclabels",label:(0,o.default)("Security labels"),canAdd:!0,schema:new a.default,type:"collection",min_version:90100,group:"Security",mode:["edit","create"],canEdit:!1,canDelete:!0,uniqueCol:["provider"],disabled:t.inCatalog(),visible:function(){return this.node_info&&"procedure"!==this.type}}]}},{key:"validate",value:function(e,t){if("procedure"!==this.type&&(0,l.isEmptyString)(e.prorettypename))return t("prorettypename",(0,o.default)("Return type cannot be empty.")),!0;if(t("prorettypename",null),"c"==String(e.lanname)){if((0,l.isEmptyString)(e.probin))return t("probin",(0,o.default)("Object File cannot be empty.")),!0;if(t("probin",null),(0,l.isEmptyString)(e.prosrc_c))return t("prosrc_c",(0,o.default)("Link Symbol cannot be empty.")),!0;t("prosrc_c",null)}else{if((0,l.isEmptyString)(e.prosrc))return t("prosrc",(0,o.default)("Code cannot be empty.")),!0;t("prosrc",null)}}}]),n}(i.default);t.default=O},37642:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(57327),n(68304),n(30489);var o=s(n(91669)),i=s(n(67091)),a=s(n(89406)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,e);var t,n,r,a=b(s);function s(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return f(this,s),(n=a.call(this,d({name:null,oid:null,xmin:null,funcowner:null,pronamespace:null,description:null,pronargs:null,proargs:null,proargtypenames:null,prorettypename:"trigger",lanname:"plpgsql",provolatile:null,proretset:null,proisstrict:null,prosecdef:null,proiswindow:null,procost:null,prorows:null,proleakproof:null,args:[],prosrc:null,prosrc_c:null,probin:"$libdir/",options:[],variables:[],proacl:null,seclabels:[],acl:[],sysfunc:null,sysproc:null},o))).getPrivilegeRoleSchema=e,n.getVariableSchema=t,n.fieldOptions=d({role:[],schema:[],language:[],nodeInfo:null},r),n}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"isReadonly",value:function(){return!1}},{key:"setReadonlyInEditMode",value:function(){return!this.isNew()}},{key:"isVisible",value:function(e){return"sysproc"!=e.name}},{key:"isDisabled",value:function(){return"catalog"in this.fieldOptions.nodeInfo}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],disabled:e.isDisabled,readonly:e.isReadonly,noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"funcowner",label:(0,o.default)("Owner"),cell:"text",type:"select",disabled:e.isDisabled,readonly:e.isReadonly,options:e.fieldOptions.role,controlProps:{allowClear:!1}},{id:"pronamespace",label:(0,o.default)("Schema"),cell:"string",type:"select",cache_level:"database",disabled:e.isDisabled,readonly:e.isReadonly,mode:["create","edit"],options:e.fieldOptions.schema,controlProps:{allowClear:!1}},{id:"sysfunc",label:(0,o.default)("System trigger function?"),cell:"boolean",type:"switch",mode:["properties"],visible:e.isVisible},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",disabled:e.isDisabled,readonly:e.isReadonly},{id:"pronargs",label:(0,o.default)("Argument count"),cell:"text",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"proargs",label:(0,o.default)("Arguments"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties","edit"],disabled:e.isDisabled,readonly:e.setReadonlyInEditMode},{id:"proargtypenames",label:(0,o.default)("Signature arguments"),cell:"text",type:"text",group:(0,o.default)("Definition"),mode:["properties"],disabled:e.isDisabled,readonly:e.setReadonlyInEditMode},{id:"prorettypename",label:(0,o.default)("Return type"),cell:"text",type:"select",group:(0,o.default)("Definition"),disabled:e.isDisabled,readonly:e.setReadonlyInEditMode,controlProps:{width:"100%",allowClear:!1},mode:["create"],visible:e.isVisible,options:[{label:(0,o.default)("trigger"),value:"trigger"},{label:(0,o.default)("event_trigger"),value:"event_trigger"}]},{id:"prorettypename",label:(0,o.default)("Return type"),cell:"text",type:"text",group:(0,o.default)("Definition"),mode:["properties","edit"],disabled:e.isDisabled,readonly:e.setReadonlyInEditMode,visible:e.isVisible},{id:"lanname",label:(0,o.default)("Language"),cell:"text",type:"select",group:(0,o.default)("Definition"),disabled:e.isDisabled,readonly:e.isReadonly,options:e.fieldOptions.language,controlProps:{allowClear:!1,filter:function(e){return(e||[]).filter((function(e){return""!=e.label}))}}},{id:"prosrc",label:(0,o.default)("Code"),cell:"text",type:"sql",isFullTab:!0,mode:["properties","create","edit"],group:(0,o.default)("Code"),deps:["lanname"],visible:function(e){return"c"!=e.lanname},disabled:e.isDisabled,readonly:e.isReadonly},{id:"probin",label:(0,o.default)("Object file"),cell:"string",type:"text",group:(0,o.default)("Definition"),deps:["lanname"],visible:function(e){return"c"==e.lanname},disabled:e.isDisabled,readonly:e.isReadonly},{id:"prosrc_c",label:(0,o.default)("Link symbol"),cell:"string",type:"text",group:(0,o.default)("Definition"),deps:["lanname"],visible:function(e){return"c"==e.lanname},disabled:e.isDisabled,readonly:e.isReadonly},{id:"provolatile",label:(0,o.default)("Volatility"),cell:"text",type:"select",group:(0,o.default)("Options"),options:[{label:"VOLATILE",value:"v"},{label:"STABLE",value:"s"},{label:"IMMUTABLE",value:"i"}],disabled:e.isDisabled,readonly:e.isReadonly,controlProps:{allowClear:!1}},{id:"proretset",label:(0,o.default)("Returns a set?"),type:"switch",group:(0,o.default)("Options"),disabled:e.isDisabled,readonly:e.setReadonlyInEditMode,visible:e.isVisible},{id:"proisstrict",label:(0,o.default)("Strict?"),type:"switch",disabled:e.isDisabled,readonly:e.isReadonly,group:(0,o.default)("Options")},{id:"prosecdef",label:(0,o.default)("Security of definer?"),group:(0,o.default)("Options"),cell:"boolean",type:"switch",disabled:e.isDisabled,readonly:e.isReadonly},{id:"proiswindow",label:(0,o.default)("Window?"),group:(0,o.default)("Options"),cell:"boolean",type:"switch",disabled:e.isDisabled,readonly:e.setReadonlyInEditMode,visible:e.isVisible},{id:"procost",label:(0,o.default)("Estimated cost"),type:"text",group:(0,o.default)("Options"),disabled:e.isDisabled,readonly:e.isReadonly},{id:"prorows",label:(0,o.default)("Estimated rows"),type:"text",group:(0,o.default)("Options"),disabled:function(e){var t=!0;return 1==e.proretset&&(t=!1),t},readonly:e.isReadonly,deps:["proretset"],visible:e.isVisible},{id:"proleakproof",label:(0,o.default)("Leak proof?"),group:(0,o.default)("Options"),cell:"boolean",type:"switch",min_version:90200,disabled:e.isDisabled,readonly:e.isReadonly},{id:"proacl",label:(0,o.default)("Privileges"),mode:["properties"],group:(0,o.default)("Security"),type:"text"},{id:"variables",label:"",type:"collection",group:(0,o.default)("Parameters"),control:"variable-collection",mode:["edit","create"],canEdit:!1,canDelete:!0,disabled:e.isDisabled,readonly:e.isReadonly,schema:this.getVariableSchema(),editable:!1},{id:"acl",label:(0,o.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["X"]),uniqueCol:["grantee"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"seclabels",label:(0,o.default)("Security labels"),type:"collection",schema:new i.default,editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!0,canDelete:!0,uniqueCol:["provider"],min_version:90200,disabled:e.isDisabled,readonly:e.isReadonly}]}},{key:"validate",value:function(e,t){if((0,l.isEmptyString)(e.service)){if((0,l.isEmptyString)(e.prosrc))return t("prosrc",(0,o.default)("Code cannot be empty.")),!0;t("prosrc",null)}}}])&&p(t.prototype,n),r&&p(t,r),s}(a.default);t.default=g},64916:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(89406)),i=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o=p(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d(this,a),(e=o.call(this,s({name:void 0,oid:void 0,owner:void 0,description:void 0,schema:null,lefttype:void 0,righttype:void 0,operproc:void 0,joinproc:void 0,restrproc:void 0,commutator:void 0,negator:void 0,support_hash:!1,support_merge:!1},n))).fieldOptions=t,e}return t=a,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"name",label:(0,i.default)("Name"),type:"tel",readonly:!0},{id:"oid",label:(0,i.default)("OID"),type:"text",mode:["properties"]},{id:"owner",label:(0,i.default)("Owner"),type:"text",readonly:!0},{id:"schema",label:(0,i.default)("Schema"),mode:["create","edit"],type:"text",readonly:!0},{id:"is_sys_obj",label:(0,i.default)("System operator?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,i.default)("Comment"),type:"multiline",mode:["properties","create","edit"],readonly:!0},{id:"lefttype",label:(0,i.default)("Left type"),group:(0,i.default)("Definition"),type:"text",readonly:!0},{id:"righttype",label:(0,i.default)("Right type"),group:(0,i.default)("Definition"),type:"text",readonly:!0},{id:"resulttype",label:(0,i.default)("Result type"),group:(0,i.default)("Definition"),type:"text",mode:["properties"]},{id:"oprkind",label:(0,i.default)("Kind"),group:(0,i.default)("Definition"),type:"text",mode:["properties"]},{id:"operproc",label:(0,i.default)("Operator function"),group:(0,i.default)("Definition"),type:"text",readonly:!0},{id:"restrproc",label:(0,i.default)("Restrict function"),group:(0,i.default)("Implementation"),type:"text",readonly:!0},{id:"joinproc",label:(0,i.default)("Join function"),group:(0,i.default)("Implementation"),type:"text",readonly:!0},{id:"commutator",label:(0,i.default)("Commutator"),group:(0,i.default)("Implementation"),type:"text",readonly:!0},{id:"negator",label:(0,i.default)("Negator"),group:(0,i.default)("Implementation"),type:"text",readonly:!0},{id:"support_hash",label:(0,i.default)("Supports hash"),group:(0,i.default)("Implementation"),cell:"boolean",type:"switch",readonly:!0},{id:"support_merge",label:(0,i.default)("Supports merge"),group:(0,i.default)("Implementation"),cell:"boolean",type:"switch",readonly:!0}]}}])&&c(t.prototype,n),r&&c(t,r),a}(o.default);t.default=y},38630:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,e);var t,n,r,i=f(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,a),(e=i.call(this,l({name:void 0,oid:void 0,funcowner:void 0,pronargs:void 0,proargs:void 0,proargtypenames:void 0,prorettypename:void 0,lanname:"sql",prosrc:void 0,proacl:void 0,visibility:"Unknown",warn_text:void 0},n))).fieldOptions=l({},t),e}return t=a,(n=[{key:"isVisible",value:function(e){return"sysfunc"==e.name||"sysproc"==e.name}},{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",mode:["properties"]},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:(0,o.default)("Owner"),cell:"string",type:"text",readonly:!0},{id:"pronargs",label:(0,o.default)("Argument count"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"proargs",label:(0,o.default)("Arguments"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"proargtypenames",label:(0,o.default)("Signature arguments"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"prorettypename",label:(0,o.default)("Return type"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"],visible:function(t){return e.isVisible(t)}},{id:"visibility",label:(0,o.default)("Visibility"),cell:"string",type:"text",mode:["properties"]},{id:"lanname",label:(0,o.default)("Language"),cell:"string",type:"text",group:(0,o.default)("Definition"),readonly:!0},{id:"prosrc",label:(0,o.default)("Code"),cell:"string",mode:["properties"],group:(0,o.default)("Code"),type:"sql",isFullTab:!0,visible:function(e){return"c"!=e.lanname},disabled:!0}]}}])&&d(t.prototype,n),r&&d(t,r),a}(i(n(89406)).default);t.default=b},63641:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,e);var t,n,r,i=f(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,a),(e=i.call(this,l({name:void 0,oid:void 0,datatype:void 0,visibility:"Unknown"},n))).fieldOptions=l({},t),e}return t=a,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",mode:["properties"]},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"datatype",label:(0,o.default)("Data type"),cell:"string",type:"text",readonly:!0},{id:"visibility",label:(0,o.default)("Visibility"),cell:"string",type:"text",mode:["properties"]}]}}])&&d(t.prototype,n),r&&d(t,r),a}(i(n(89406)).default);t.default=b},12464:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(89554),n(54747),n(4723),n(74916),n(68304),n(30489);var o=l(n(91669)),i=l(n(89406)),a=n(76055);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,i=m(l);function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c(this,l),(t=i.call(this,u({name:void 0,oid:void 0,owner:void 0,is_sys_object:void 0,description:void 0,pkgheadsrc:void 0,pkgbodysrc:void 0,acl:void 0,pkgacl:[],warn_text:void 0},r))).fieldOptions=u({schemas:[]},n),t.warningText=null,t.getPrivilegeRoleSchema=e,t}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",mode:["properties","create","edit"],noEmpty:!0,readonly:function(t){return!e.isNew(t)}},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:(0,o.default)("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],readonly:!0,editable:!1,visible:function(t){return!e.isNew(t)}},{id:"schema",label:(0,o.default)("Schema"),node:"schema",readonly:function(t){return!e.isNew(t)},noEmpty:!0,type:function(t){return{type:"select",options:e.fieldOptions.schemas,optionsLoaded:function(t){e.fieldOptions.schemas=t},controlProps:{allowClear:!0,filter:function(n){var r=[];return t&&e.isNew(t)?n.forEach((function(e){e&&e.label.match(/^pg_/)||r.push({label:e.label,value:e.value,image:"icon-schema"})})):r=n,r}}}}},{id:"is_sys_object",label:(0,o.default)("System package?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),type:"multiline",mode:["properties","create","edit"]},{id:"pkgheadsrc",type:"sql",isFullTab:!0,cell:"text",mode:["properties","create","edit"],group:(0,o.default)("Header"),depChange:function(t,n,r,i){e._origData.oid&&t.pkgheadsrc!=i.oldState.pkgheadsrc?e.warningText=(0,o.default)("Updating the package header definition may remove its existing body.")+"<br><br><b>"+(0,o.default)("Do you want to continue?")+"</b>":e.warningText=null}},{id:"pkgbodysrc",type:"sql",isFullTab:!0,cell:"text",mode:["properties","create","edit"],group:(0,o.default)("Body"),depChange:function(t,n,r,i){e._origData.oid&&t.pkgbodysrc!=i.oldState.pkgbodysrc?e.warningText=(0,o.default)("Updating the package header definition may remove its existing body.")+"<br><br><b>"+(0,o.default)("Do you want to continue?")+"</b>":e.warningText=null}},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"pkgacl",label:(0,o.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["X"]),uniqueCol:["grantee","grantor"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0}]}},{key:"validate",value:function(e,t){return(0,a.isEmptyString)(e.pkgheadsrc)?(t("pkgheadsrc",(0,o.default)("Header cannot be empty.")),!0):(t("pkgheadsrc",null),null)}}])&&f(t.prototype,n),r&&f(t,r),l}(i.default);t.default=h},76547:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47042),n(41539),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),n(47941),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OwnedBySchema=void 0,n(91058),n(68304),n(30489);var o=s(n(91669)),i=s(n(89406)),a=s(n(67091)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){h(n,e);var t=v(n);function n(e,r){var o;return m(this,n),(o=t.call(this,{owned_table:void 0,owned_column:void 0})).allTables=e,o.allTablesOptions=[],o.getColumns=r,o}return y(n,[{key:"getTableOid",value:function(e){var t,n=f(this.allTablesOptions);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.label===e)return r._id}}catch(e){n.e(e)}finally{n.f()}}},{key:"baseFields",get:function(){var e=this;return[{id:"owned_table",label:(0,o.default)("Table"),type:"select",editable:!1,options:e.allTables,optionsLoaded:function(t){return e.allTablesOptions=t}},{id:"owned_column",label:(0,o.default)("Column"),editable:!1,deps:["owned_table"],type:function(t){var n=e.getTableOid(t.owned_table);return{type:"select",options:t.owned_table?function(){return e.getColumns({tid:n})}:[],optionsReloadBasis:t.owned_table}}}]}},{key:"validate",value:function(e,t){if(!(0,l.isEmptyString)(e.owned_table)&&(0,l.isEmptyString)(e.owned_column))return t("owned_column",(0,o.default)("Column cannot be empty.")),!0;t("owned_column",null)}}]),n}(i.default);t.OwnedBySchema=O;var S=function(e){h(n,e);var t=v(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(this,n),(r=t.call(this,d({name:void 0,oid:void 0,seqowner:void 0,schema:void 0,is_sys_obj:void 0,comment:void 0,increment:void 0,start:void 0,current_value:void 0,minimum:void 0,maximum:void 0,cache:void 0,cycled:void 0,relacl:[],securities:[]},i))).getPrivilegeRoleSchema=e,r.fieldOptions=d({role:[],schema:[],allTables:[]},o),r.ownedSchemaObj=new O(r.fieldOptions.allTables,r.fieldOptions.getColumns),r}return y(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"seqowner",label:(0,o.default)("Owner"),editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"schema",label:(0,o.default)("Schema"),editable:!1,type:"select",options:this.fieldOptions.schema,controlProps:{allowClear:!1},mode:["create","edit"],cache_node:"database",cache_level:"database"},{id:"is_sys_obj",label:(0,o.default)("System sequence?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),type:"multiline",mode:["properties","create","edit"]},{id:"current_value",label:(0,o.default)("Current value"),type:"int",mode:["properties","edit"],group:(0,o.default)("Definition")},{id:"increment",label:(0,o.default)("Increment"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Definition")},{id:"start",label:(0,o.default)("Start"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Definition")},{id:"minimum",label:(0,o.default)("Minimum"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Definition")},{id:"maximum",label:(0,o.default)("Maximum"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Definition")},{id:"cache",label:(0,o.default)("Cache"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Definition"),min:1},{id:"cycled",label:(0,o.default)("Cycled"),type:"switch",mode:["properties","create","edit"],group:(0,o.default)("Definition")},{type:"nested-fieldset",label:(0,o.default)("Owned By"),group:(0,o.default)("Definition"),schema:this.ownedSchemaObj},{id:"owned_by_note",type:"note",group:(0,o.default)("Definition"),mode:["create","edit"],text:(0,o.default)("The OWNED BY option causes the sequence to be associated with a specific table column, such that if that column (or its whole table) is dropped, the sequence will be automatically dropped as well. The specified table must have the same owner and be in the same schema as the sequence.")},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"relacl",label:(0,o.default)("Privileges"),group:(0,o.default)("Security"),type:"collection",schema:this.getPrivilegeRoleSchema(["r","w","U"]),uniqueCol:["grantee","grantor"],mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"securities",label:(0,o.default)("Security labels"),type:"collection",editable:!1,group:(0,o.default)("Security"),schema:new a.default,mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90200}]}},{key:"validate",value:function(e,t){var n=null,r=e.minimum,i=e.maximum,a=e.start;if(n=(0,l.emptyValidator)("Owner",e.seqowner))return t("seqowner",n),!0;if(t("seqowner",n),n=(0,l.emptyValidator)("Schema",e.schema))return t("schema",n),!0;if(t("schema",n),!this.isNew(e)){if(n=(0,l.emptyValidator)("Current value",e.current_value))return t("current_value",n),!0;if(t("current_value",n),n=(0,l.emptyValidator)("Increment value",e.increment))return t("increment",n),!0;if(t("increment",n),n=(0,l.emptyValidator)("Minimum value",e.minimum))return t("minimum",n),!0;if(t("minimum",n),n=(0,l.emptyValidator)("Maximum value",e.maximum))return t("maximum",n),!0;if(t("maximum",n),n=(0,l.emptyValidator)("Cache value",e.cache))return t("cache",n),!0;t("cache",n)}var s=(0,o.default)("Minimum value must be less than maximum value."),u=(0,o.default)("Start value cannot be less than minimum value."),d=(0,o.default)("Start value cannot be greater than maximum value.");return(0,l.isEmptyString)(r)||(0,l.isEmptyString)(i)?null:0==r&&0==i||parseInt(r,10)>=parseInt(i,10)?(t("minimum",s),!0):(t("minimum",null),a&&r&&parseInt(a)<parseInt(r)?(t("start",u),!0):(t("start",null),a&&i&&parseInt(a)>parseInt(i)?(t("start",d),!0):(t("start",null),null)))}}]),n}(i.default);t.default=S},41551:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,e);var t,n,r,i=f(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,a),(e=i.call(this,l({name:void 0,namespaceowner:void 0,nspacl:void 0,is_sys_obj:void 0,description:void 0,securitylabel:[]},n))).fieldOptions=l({},t),e}return t=a,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",readonly:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",mode:["properties"],type:"text"},{id:"namespaceowner",label:(0,o.default)("Owner"),cell:"string",type:"text",readonly:!0},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System catalog?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline"}]}}])&&d(t.prototype,n),r&&d(t,r),a}(i(n(89406)).default);t.default=b},14497:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=u(n(91669)),i=u(n(89406)),a=n(82234),l=u(n(67091)),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,r,i=y(u);function u(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return p(this,u),(t=i.call(this,c({name:void 0,namespaceowner:void 0,description:void 0,is_system_obj:void 0},r))).fieldOptions=c({roles:[],server_info:[]},n),t.getPrivilegeRoleSchema=e,t}return t=u,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text"},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"namespaceowner",label:(0,o.default)("Owner"),cell:"string",type:"select",options:e.fieldOptions.roles,controlProps:{allowClear:!1}},{id:"is_sys_obj",label:(0,o.default)("System schema?"),cell:"switch",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline"},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"tblacl",label:(0,o.default)("Default TABLE privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"seqacl",label:(0,o.default)("Default SEQUENCE privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"funcacl",label:(0,o.default)("Default FUNCTION privileges"),group:(0,o.default)("Security"),type:"text",mode:["properties"]},{id:"typeacl",label:(0,o.default)("Default TYPE privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"],min_version:90200},{id:"nspacl",label:(0,o.default)("Privileges"),type:"collection",schema:e.getPrivilegeRoleSchema(["C","U"]),uniqueCol:["grantee","grantor"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"seclabels",label:(0,o.default)("Security labels"),schema:new l.default,editable:!1,type:"collection",group:(0,o.default)("Security"),mode:["edit","create"],min_version:90200,canAdd:!0,canEdit:!1,canDelete:!0},{type:"nested-tab",group:(0,o.default)("Default privileges"),mode:["create","edit"],schema:new a.DefaultPrivSchema(e.getPrivilegeRoleSchema)}]}},{key:"validate",value:function(e,t){return(0,s.isEmptyString)(e.name)?(t("name",(0,o.default)("Name cannot be empty.")),!0):(0,s.isEmptyString)(e.namespaceowner)?(t("namespaceowner",(0,o.default)("Owner cannot be empty.")),!0):null}}])&&m(t.prototype,n),r&&m(t,r),u}(i.default);t.default=v},47471:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=l(n(91669)),i=l(n(89406)),a=n(76055);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,i=m(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c(this,l),(e=i.call(this,u({targettype:"r"},r))).fieldOptions=t,e.nodeInfo=n,e}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],readonly:function(t){return!e.isNew(t)}},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"owner",label:(0,o.default)("Owner"),options:this.fieldOptions.role,controlProps:{allowClear:!1,editable:!1},type:"select",mode:["properties","create","edit"],readonly:!0,visible:!1},{id:"schema",label:(0,o.default)("Schema"),type:"select",mode:["properties","create","edit"],options:this.fieldOptions.schema,controlProps:{allowClear:!1,editable:!1},readonly:function(t){return!e.isNew(t)}},{id:"targettype",label:(0,o.default)("Target type"),readonly:e.inCatalog(),group:(0,o.default)("Definition"),controlProps:{allowClear:!1},type:"select",options:[{label:(0,o.default)("Function"),value:"f"},{label:(0,o.default)("Package"),value:"P"},{label:(0,o.default)("Procedure"),value:"p"},{label:(0,o.default)("Public Synonym"),value:"s"},{label:(0,o.default)("Sequence"),value:"S"},{label:(0,o.default)("Table"),value:"r"},{label:(0,o.default)("View"),value:"v"}]},{id:"synobjschema",label:(0,o.default)("Target schema"),type:"select",mode:["properties","create","edit"],group:(0,o.default)("Definition"),deps:["targettype"],controlProps:{allowClear:!1},options:this.fieldOptions.synobjschema,readonly:function(t){return!!e.inCatalog()||"s"==t.targettype},depChange:function(t){if(!e.inCatalog()&&"s"==t.targettype)return{synobjschema:"public"}}},{id:"synobjname",label:(0,o.default)("Target object"),group:(0,o.default)("Definition"),deps:["targettype","synobjschema"],depChange:function(e,t){if("targettype"==t[0]||"synobjschema"==t[0])return{synobjname:null}},type:function(t){return{type:"select",options:function(){return e.fieldOptions.getTargetObjectOptions(t.targettype,t.synobjschema)},optionsReloadBasis:t.targettype+t.synobjschema}},readonly:function(){return!!e.inCatalog()}},{id:"is_sys_obj",label:(0,o.default)("System synonym?"),cell:"boolean",type:"switch",mode:["properties"]}]}},{key:"validate",value:function(e,t){var n=null;return(n=(0,a.emptyValidator)("Name",e.name))?(t("name",n),!0):(t("name",n),(n=(0,a.emptyValidator)("Target schema",e.synobjschema))?(t("synobjschema",n),!0):(t("synobjschema",n),(n=(0,a.emptyValidator)("Target object",e.synobjname))?(t("synobjname",n),!0):void t("synobjname",n)))}}])&&f(t.prototype,n),r&&f(t,r),l}(i.default);t.default=h},15253:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47042),n(41539),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),n(47941),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeColumnSchema=function(e,t,n){var r=this;return new x((function(n){return(0,d.getNodePrivilegeRoleSchema)(r,e,t,n)}),e,(function(){return(0,c.getNodeAjaxOptions)("get_types",n.Nodes.table,e,t,{cacheLevel:"table"})}),(function(){return(0,c.getNodeAjaxOptions)("get_collations",n.Nodes.collation,e,t)}))},t.default=void 0,n(68309),n(57327),n(82772),n(91058),n(68304),n(30489);var o=f(n(91669)),i=f(n(89406)),a=f(n(14511)),l=f(n(67091)),s=f(n(96486)),u=n(76055),d=n(40345),c=n(77077);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(d,e);var t,n,r,i=w(d);function d(e,t,n,r){var o,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return g(this,d),(o=i.call(this,{name:void 0,attowner:void 0,atttypid:void 0,attnum:void 0,cltype:void 0,collspcname:void 0,attacl:void 0,description:void 0,parent_tbl:void 0,min_val_attlen:void 0,min_val_attprecision:void 0,max_val_attlen:void 0,max_val_attprecision:void 0,edit_types:void 0,is_primary_key:!1,inheritedfrom:void 0,attstattarget:void 0,attnotnull:!1,attlen:null,attprecision:null,attidentity:"a",attoptions:[],seqincrement:void 0,seqstart:void 0,seqmin:void 0,seqmax:void 0,seqcache:void 0,seqcycle:void 0,colconstype:"n",genexpr:void 0})).getPrivilegeRoleSchema=e,o.nodeInfo=t,o.cltypeOptions=n,o.collspcnameOptions=r,o.inErd=a,o.datatypes=[],o}return t=d,(n=[{key:"idAttribute",get:function(){return"attnum"}},{key:"inSchemaWithColumnCheck",value:function(e){return!((!this.nodeInfo||!("view"in this.nodeInfo)&&!("mview"in this.nodeInfo))&&(!this.nodeInfo||!("schema"in this.nodeInfo)||s.default.isUndefined(e.inheritedfrom)&&(this.isNew(e)||!s.default.isUndefined(e.attnum)&&e.attnum>0)))}},{key:"editableCheckForTable",value:function(e){return!this.inSchemaWithColumnCheck(e)}},{key:"isIdentityColumn",value:function(e){var t=e.attidentity;return!!(s.default.isUndefined(t)||s.default.isNull(t)||s.default.isEmpty(t))}},{key:"isTypeIdentity",value:function(e){var t=e.colconstype;return!s.default.isUndefined(t)&&!s.default.isNull(t)&&"i"==t}},{key:"isTypeGenerated",value:function(e){var t=e.colconstype;return!s.default.isUndefined(t)&&!s.default.isNull(t)&&"g"==t}},{key:"inSchemaWithModelCheck",value:function(e){return!this.nodeInfo||!("schema"in this.nodeInfo)||!this.isNew(e)}},{key:"attlenRange",value:function(e){var t,n=y(this.datatypes);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.cltype==r.value&&r.length)return{min:r.min_val||0,max:r.max_val}}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"attprecisionRange",value:function(e){var t,n=y(this.datatypes);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.cltype==r.value&&r.precision)return{min:r.min_val||0,max:r.max_val}}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"attCell",value:function(e){return{cell:this.attlenRange(e)?"int":""}}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",readonly:t.inSchemaWithColumnCheck,editable:this.editableCheckForTable,noEmpty:!0,width:115},{id:"is_primary_key",label:(0,o.default)("Primary key?"),cell:"switch",type:"switch",width:100,disableResizing:!0,deps:["name"],visible:function(){var e,n;return(null===(e=t.top)||void 0===e?void 0:e.nodeInfo)&&s.default.isUndefined(t.top.nodeInfo.table||t.top.nodeInfo.view||(null===(n=t.top)||void 0===n?void 0:n.nodeInfo.mview))},readonly:function(e){if(t.top&&(!s.default.isUndefined(t.top.origData.oid)&&!s.default.isUndefined(t.top.origData.primary_key)&&t.top.origData.primary_key.length>0&&!s.default.isUndefined(t.top.origData.primary_key[0].oid)||"is_partitioned"in t.top.origData&&t.top.origData.is_partitioned&&t.getServerVersion()<11e3))return!0;var n=e.name;return!(t.inSchemaWithColumnCheck(e)||!s.default.isUndefined(n)&&!s.default.isNull(n)&&""!=n)},editable:function(e){return!(t.top&&!s.default.isUndefined(t.top.origData.oid)&&!s.default.isUndefined(t.top.origData.primary_key)&&t.top.origData.primary_key.length>0&&!s.default.isUndefined(t.top.origData.primary_key[0].oid)||t.top&&"is_partitioned"in t.top.origData&&t.top.origData.is_partitioned&&t.getServerVersion()<11e3||t.inSchemaWithColumnCheck(e))}},{id:"attnum",label:(0,o.default)("Position"),cell:"text",type:"text",disabled:this.inCatalog,mode:["properties"]},{id:"cltype",label:(0,o.default)("Data type"),readonly:t.inSchemaWithColumnCheck,width:150,group:(0,o.default)("Definition"),noEmpty:!0,editable:this.editableCheckForTable,options:this.cltypeOptions,optionsLoaded:function(e){t.datatypes=e},type:function(n){return{type:"select",options:e.cltypeOptions,controlProps:{allowClear:!1,filter:function(r){var o=r,i=(null==n?void 0:n.edit_types)||[];return t.isNew(n)||e.inErd||(o=s.default.filter(r,(function(e){return i.indexOf(e.value)>-1}))),o}}}},cell:function(n){return{cell:"select",options:e.cltypeOptions,controlProps:{allowClear:!1,filter:function(r){var o=r,i=(null==n?void 0:n.edit_types)||[];return t.isNew(n)||e.inErd||(o=s.default.filter(r,(function(e){return i.indexOf(e.value)>-1}))),o}}}}},{id:"inheritedid",label:(0,o.default)(""),type:"text",visible:!1},{id:"inheritedfrom",label:(0,o.default)("Inherited from table"),type:"text",readonly:!0,editable:!1,visible:function(){return!!this.nodeInfo&&s.default.isUndefined(this.nodeInfo.table||this.nodeInfo.view||this.nodeInfo.mview)}},{id:"attlen",label:(0,o.default)("Length/Precision"),deps:["cltype"],type:"int",group:(0,o.default)("Definition"),width:120,disableResizing:!0,cell:function(e){return t.attCell(e)},depChange:function(t){var n=e.attlenRange(t);return m(m({},t),{},n?{min_val_attlen:n.min,max_val_attlen:n.max}:{attlen:null})},disabled:function(e){return!t.attlenRange(e)},editable:function(e){return!!(0,u.isEmptyString)(e.inheritedfrom)&&Boolean(t.attlenRange(e))}},{id:"attprecision",label:(0,o.default)("Scale"),width:60,disableResizing:!0,deps:["cltype"],type:"int",group:(0,o.default)("Definition"),cell:function(e){return t.attCell(e)},depChange:function(t){var n=e.attprecisionRange(t);return m(m({},t),{},n?{min_val_attprecision:n.min,max_val_attprecision:n.max}:{attprecision:null})},disabled:function(e){return!this.attprecisionRange(e)},editable:function(e){return!!(0,u.isEmptyString)(e.inheritedfrom)&&Boolean(this.attprecisionRange(e))}},{id:"collspcname",label:(0,o.default)("Collation"),cell:"select",type:"select",group:(0,o.default)("Definition"),deps:["cltype"],options:this.collspcnameOptions,disabled:function(t){var n,r=y(e.datatypes);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(t.cltype==o.value&&o.is_collatable)return!1}}catch(e){r.e(e)}finally{r.f()}return!0},depChange:function(t){var n,r=y(e.datatypes);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(t.cltype==o.value&&o.is_collatable)return{}}}catch(e){r.e(e)}finally{r.f()}return{collspcname:null}}},{id:"attstattarget",label:(0,o.default)("Statistics"),cell:"text",type:"text",readonly:t.inSchemaWithColumnCheck,mode:["properties","edit"],group:(0,o.default)("Definition")},{id:"attstorage",label:(0,o.default)("Storage"),group:(0,o.default)("Definition"),type:"select",mode:["properties","edit"],cell:"select",readonly:t.inSchemaWithColumnCheck,controlProps:{placeholder:(0,o.default)("Select storage"),allowClear:!1},options:[{label:"PLAIN",value:"p"},{label:"MAIN",value:"m"},{label:"EXTERNAL",value:"e"},{label:"EXTENDED",value:"x"}]},{id:"defval",label:(0,o.default)("Default"),cell:"text",type:"text",group:(0,o.default)("Constraints"),deps:["cltype","colconstype"],readonly:t.inSchemaWithColumnCheck,disabled:function(e){var t=["serial","bigserial","smallserial"].indexOf(e.cltype)>-1;return t=t||"n"!=e.colconstype},depChange:function(e){var n=!1;if(t.inSchemaWithModelCheck(e)||(n=["serial","bigserial","smallserial"].indexOf(e.cltype)>-1),(n=n||"n"!=e.colconstype)&&t.isNew(e))return{defval:void 0}},editable:function(e){return!(!(0,u.isEmptyString)(e.inheritedfrom)||!this.editableCheckForTable(e))}},{id:"attnotnull",label:(0,o.default)("Not NULL?"),cell:"switch",type:"switch",width:80,disableResizing:!0,group:(0,o.default)("Constraints"),editable:this.editableCheckForTable,deps:["colconstype"],readonly:function(e){return t.inSchemaWithColumnCheck(e)},depChange:function(e){if("i"==e.colconstype)return{attnotnull:!0}}},{id:"colconstype",label:(0,o.default)("Type"),cell:"text",group:(0,o.default)("Constraints"),type:function(t){var n=[{label:(0,o.default)("NONE"),value:"n"},{label:(0,o.default)("IDENTITY"),value:"i"}];return e.getServerVersion()>=12e4&&(e.isNew(t)?n.push({label:(0,o.default)("GENERATED"),value:"g"}):n.push({label:(0,o.default)("GENERATED"),value:"g",disabled:!0})),{type:"toggle",options:n}},disabled:function(e){return!this.isNew(e)&&"g"==e.colconstype},min_version:1e5},{id:"attidentity",label:(0,o.default)("Identity"),cell:"select",type:"select",controlProps:{placeholder:(0,o.default)("Select identity"),allowClear:!1},min_version:1e5,group:(0,o.default)("Constraints"),options:[{label:(0,o.default)("ALWAYS"),value:"a"},{label:(0,o.default)("BY DEFAULT"),value:"d"}],deps:["colconstype"],visible:this.isTypeIdentity,disabled:!1},{id:"seqincrement",label:(0,o.default)("Increment"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),min:1,deps:["attidentity","colconstype"],disabled:this.isIdentityColumn,visible:this.isTypeIdentity},{id:"seqstart",label:(0,o.default)("Start"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),disabled:this.isIdentityColumn,deps:["attidentity","colconstype"],visible:this.isTypeIdentity},{id:"seqmin",label:(0,o.default)("Minimum"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),deps:["attidentity","colconstype"],disabled:this.isIdentityColumn,visible:this.isTypeIdentity},{id:"seqmax",label:(0,o.default)("Maximum"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),deps:["attidentity","colconstype"],disabled:this.isIdentityColumn,visible:this.isTypeIdentity},{id:"seqcache",label:(0,o.default)("Cache"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),min:1,deps:["attidentity","colconstype"],disabled:this.isIdentityColumn,visible:this.isTypeIdentity},{id:"seqcycle",label:(0,o.default)("Cycled"),type:"switch",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),deps:["attidentity","colconstype"],disabled:this.isIdentityColumn,visible:this.isTypeIdentity},{id:"genexpr",label:(0,o.default)("Expression"),type:"text",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),min_version:12e4,deps:["colconstype"],visible:this.isTypeGenerated,readonly:function(e){return!this.isNew(e)}},{id:"is_pk",label:(0,o.default)("Primary key?"),type:"switch",mode:["properties"],group:(0,o.default)("Definition")},{id:"is_fk",label:(0,o.default)("Foreign key?"),type:"switch",mode:["properties"],group:(0,o.default)("Definition")},{id:"is_inherited",label:(0,o.default)("Inherited?"),type:"switch",mode:["properties"],group:(0,o.default)("Definition")},{id:"tbls_inherited",label:(0,o.default)("Inherited from table(s)"),type:"text",mode:["properties"],deps:["is_inherited"],group:(0,o.default)("Definition"),visible:function(e){return!s.default.isUndefined(e.is_inherited)&&e.is_inherited}},{id:"is_sys_column",label:(0,o.default)("System column?"),cell:"text",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline",mode:["properties","create","edit"],disabled:this.inCatalog},{id:"attoptions",label:(0,o.default)("Variables"),type:"collection",group:(0,o.default)("Variables"),schema:new a.default([{label:"n_distinct",value:"n_distinct",vartype:"string"},{label:"n_distinct_inherited",value:"n_distinct_inherited",vartype:"string"}],null,null,["name","value"]),uniqueCol:["name"],mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0},{id:"security",label:(0,o.default)("Security"),type:"group",visible:!this.inErd},{id:"attacl",label:(0,o.default)("Privileges"),type:"collection",group:"security",schema:this.getPrivilegeRoleSchema(["a","r","w","x"]),mode:["edit"],canAdd:!0,canDelete:!0,uniqueCol:["grantee"]},{id:"seclabels",label:(0,o.default)("Security labels"),canAdd:!0,schema:new l.default,group:"security",mode:["edit","create"],editable:!1,type:"collection",min_version:90100,canEdit:!1,canDelete:!0,uniqueCol:["provider"]}]}},{key:"validate",value:function(e,t){var n=void 0;if(!s.default.isUndefined(e.cltype)&&!(0,u.isEmptyString)(e.attlen)&&(e.attlen<e.min_val_attlen&&(n=(0,o.default)("Length/Precision should not be less than: ")+e.min_val_attlen),e.attlen>e.max_val_attlen&&(n=(0,o.default)("Length/Precision should not be greater than: ")+e.max_val_attlen),n))return t("attlen",n),!0;if(!s.default.isUndefined(e.cltype)&&!(0,u.isEmptyString)(e.attprecision)&&(e.attprecision<e.min_val_attprecision&&(n=(0,o.default)("Scale should not be less than: ")+e.min_val_attprecision),e.attprecision>e.max_val_attprecision&&(n=(0,o.default)("Scale should not be greater than: ")+e.max_val_attprecision),n))return t("attprecision",n),!0;if("g"==e.colconstype&&(0,u.isEmptyString)(e.genexpr))return t("genexpr",n=(0,o.default)("Expression value cannot be empty.")),!0;if(!(this.isNew(e)||"i"!=e.colconstype||"a"!=this.origData.attidentity&&"d"!=this.origData.attidentity||"a"!=e.attidentity&&"d"!=e.attidentity)){if((0,u.isEmptyString)(e.seqincrement))return t("seqincrement",n=(0,o.default)("Increment value cannot be empty.")),!0;if((0,u.isEmptyString)(e.seqmin))return t("seqmin",n=(0,o.default)("Minimum value cannot be empty.")),!0;if((0,u.isEmptyString)(e.seqmax))return t("seqmax",n=(0,o.default)("Maximum value cannot be empty.")),!0;if((0,u.isEmptyString)(e.seqcache))return t("seqcache",n=(0,o.default)("Cache value cannot be empty.")),!0}return!((0,u.isEmptyString)(e.seqmin)||(0,u.isEmptyString)(e.seqmax)||(0==e.seqmin&&0==e.seqmax||parseInt(e.seqmin,10)>=parseInt(e.seqmax,10)?(t("seqmin",(0,o.default)("Minimum value must be less than maximum value.")),0):e.seqstart&&e.seqmin&&parseInt(e.seqstart)<parseInt(e.seqmin)?(t("seqstart",(0,o.default)("Start value cannot be less than minimum value.")),0):!(e.seqstart&&e.seqmax&&parseInt(e.seqstart)>parseInt(e.seqmax))||(t("seqstart",(0,o.default)("Start value cannot be greater than maximum value.")),0)))}}])&&v(t.prototype,n),r&&v(t,r),d}(i.default);t.default=x},4847:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ForEventsSchema=void 0,n(68304),n(30489);var i=s(n(91669)),a=s(n(89406)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){b(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f(this,n),(e=t.call(this,d({},i))).fieldOptions=d({},r),e.nodeInfo=o,e}return m(n,[{key:"baseFields",get:function(){var e=this;return[{id:"evnt_insert",label:(0,i.default)("INSERT"),type:"switch",readonly:function(t){var n=t.evnt_insert;return!(!r.isUndefined(n)&&"ppas"==e.nodeInfo.server.server_type)&&e.inCatalog()}},{id:"evnt_update",label:(0,i.default)("UPDATE"),type:"switch",readonly:function(t){var n=t.evnt_update;return!(!r.isUndefined(n)&&"ppas"==e.nodeInfo.server.server_type)&&e.inCatalog()}},{id:"evnt_delete",label:(0,i.default)("DELETE"),type:"switch",readonly:function(t){var n=t.evnt_delete;return!(!r.isUndefined(n)&&"ppas"==e.nodeInfo.server.server_type)&&e.inCatalog()}},{id:"evnt_truncate",label:(0,i.default)("TRUNCATE"),type:"switch",readonly:function(t){var n=t.evnt_truncate;return"view"in e.nodeInfo||!(!r.isUndefined(n)&&"ppas"==e.nodeInfo.server.server_type)&&e.inCatalog()}}]}}]),n}(a.default);t.ForEventsSchema=_;var w=function(e){b(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f(this,n),(e=t.call(this,d({name:void 0},i))).fieldOptions=d({columns:[]},r),e.nodeInfo=o,e}return m(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,i.default)("Name"),cell:"text",type:"text",noEmpty:!0,disabled:e.inCatalog()},{id:"oid",label:(0,i.default)("OID"),cell:"text",type:"int",mode:["properties"]},{id:"is_enable_trigger",label:(0,i.default)("Trigger enabled?"),mode:["edit","properties"],disabled:e.inCatalog(),type:"select",controlProps:{allowClear:!1},options:[{label:(0,i.default)("Enable"),value:"O"},{label:(0,i.default)("Enable Replica"),value:"R"},{label:(0,i.default)("Enable Always"),value:"A"},{label:(0,i.default)("Disable"),value:"D"}]},{type:"nested-fieldset",label:(0,i.default)("FOR Events"),group:(0,i.default)("Events"),schema:new _({},this.nodeInfo)},{id:"whenclause",label:(0,i.default)("When"),group:(0,i.default)("Events"),type:"sql",disabled:e.inCatalog(),readonly:function(t){return!e.isNew(t)}},{id:"columns",label:(0,i.default)("Columns"),group:(0,i.default)("Events"),editable:!1,type:"select",options:this.fieldOptions.columns,controlProps:{allowClear:!1,multiple:!0},deps:["evnt_update"],disabled:function(t){if(e.inCatalog())return!0;var n=t.evnt_update;return!(!r.isUndefined(n)&&n)},readonly:function(t){return!e.isNew(t)}},{id:"prosrc",label:(0,i.default)("Code"),group:(0,i.default)("Code"),type:"sql",mode:["create","edit"],isFullTab:!0,disabled:function(t){return e.isNew(t)&&r.isUndefined(t.prosrc)&&(t.prosrc=e.getCodeTemplate()),!1}},{id:"is_sys_trigger",label:(0,i.default)("System trigger?"),type:"switch",disabled:e.inCatalog(),mode:["properties"],readonly:function(t){return!e.isNew(t)}},{id:"description",label:(0,i.default)("Comment"),type:"multiline",disabled:e.inCatalog()}]}},{key:"validate",value:function(e,t){return e.evnt_truncate||e.evnt_delete||e.evnt_update||e.evnt_insert?(t("evnt_insert",null),(0,l.isEmptyString)(e.prosrc)?(t(e.prosrc,(0,i.default)("Code cannot be empty.")),!0):void t(e.prosrc,null)):(t("evnt_insert",(0,i.default)("Specify at least one event.")),!0)}},{key:"getCodeTemplate",value:function(){return(0,i.default)("-- Enter any global declarations below:\n\n-- BEFORE STATEMENT block. Delete if not required.\nBEFORE STATEMENT IS\n    -- Enter any local declarations here\nBEGIN\n    -- Enter any required code here\nEND;\n\n-- AFTER STATEMENT block. Delete if not required.\nAFTER STATEMENT IS\n    -- Enter any local declarations here\nBEGIN\n    -- Enter any required code here\nEND;\n\n-- BEFORE EACH ROW block. Delete if not required.\nBEFORE EACH ROW IS\n    -- Enter any local declarations here\nBEGIN\n    -- Enter any required code here\nEND;\n\n-- AFTER EACH ROW block. Delete if not required.\nAFTER EACH ROW IS\n    -- Enter any local declarations here\nBEGIN\n    -- Enter any required code here\nEND;\n\n-- INSTEAD OF EACH ROW block. Delete if not required.\nINSTEAD OF EACH ROW IS\n    -- Enter any local declarations here\nBEGIN\n    -- Enter any required code here\nEND;")}}]),n}(a.default);t.default=w},29754:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=s(n(91669)),i=s(n(89406)),a=s(n(96486)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,n,r,i=c(s);function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,{name:void 0,oid:void 0,description:void 0,consrc:void 0,connoinherit:void 0,convalidated:!0})}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"inTable",get:function(){return!!a.default.isUndefined(this.nodeInfo)||a.default.isUndefined(this.nodeInfo.check_constraint)}},{key:"isReadonly",value:function(e){return this.top?!a.default.isUndefined(e.oid):!this.isNew(e)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",cell:"text",mode:["properties","create","edit"],editable:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System check constraint?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),type:"multiline",cell:"text",mode:["properties","create","edit"],deps:["name"],disabled:function(e){return!!(0,l.isEmptyString)(e.name)},depChange:function(e){if((0,l.isEmptyString)(e.name))return{comment:""}}},{id:"consrc",label:(0,o.default)("Check"),type:"multiline",cell:"text",group:(0,o.default)("Definition"),mode:["properties","create","edit"],readonly:e.isReadonly,editable:!1,noEmpty:!0},{id:"connoinherit",label:(0,o.default)("No inherit?"),type:"switch",cell:"switch",group:(0,o.default)("Definition"),mode:["properties","create","edit"],min_version:90200,deps:[["is_partitioned"]],disabled:function(){var t;return!(!e.inTable||null===(t=e.top)||void 0===t||!t.sessData.is_partitioned)},depChange:function(){var t;if(e.inTable&&null!==(t=e.top)&&void 0!==t&&t.sessData.is_partitioned)return{connoinherit:!1}},readonly:e.isReadonly},{id:"convalidated",label:(0,o.default)("Don't validate?"),type:"switch",cell:"switch",group:(0,o.default)("Definition"),min_version:90200,readonly:function(t){return e.inTable&&e.top&&!e.top.isNew()?!(a.default.isUndefined(t.oid)||t.convalidated):!e.isNew(t)&&!e.origData.convalidated},mode:["properties","create","edit"]}]}},{key:"validate",value:function(){return!1}}])&&u(t.prototype,n),r&&u(t,r),s}(i.default);t.default=m},81873:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(74819),n(38880),n(47941),n(82526),n(89554),n(54747),n(49337),n(33321),n(41817),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeExclusionConstraintSchema=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=n.Nodes.table;return new k({columns:r?[]:function(){return(0,d.getNodeListByName)("column",e,t,{includeItemKeys:["datatype"]})},amname:function(){return(0,d.getNodeAjaxOptions)("get_access_methods",o,e,t)},spcname:function(){return(0,d.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},getOperClass:function(n){return(0,d.getNodeAjaxOptions)("get_oper_class",o,e,t,{urlParams:n,useCache:!1},(function(e){return P(e)}))},getOperator:function(n){return(0,d.getNodeAjaxOptions)("get_operator",o,e,t,{urlParams:n,useCache:!1},(function(e){return P(e)}))}},e)},t.default=void 0,n(69826),n(21249),n(69600),n(68304),n(30489),n(68309),n(88674),n(41539),n(92222),n(57327),n(47042),n(34553);var o=p(n(91669)),i=p(n(89406)),a=p(n(96486)),l=n(76055),s=n(52237),u=p(n(35971)),d=n(77077),c=p(n(54851)),f=p(n(55958));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){var t=[];return e&&a.default.isArray(e)&&a.default.each(e,(function(e){t.push({label:e[0],value:e[1]})})),t}var E=function(e){w(n,e);var t=S(n);function n(e){var r;return g(this,n),(r=t.call(this,{is_exp:void 0,column:void 0,expression:void 0})).columns=e,r}return _(n,[{key:"changeColumnOptions",value:function(e){this.columns=e}},{key:"addDisabled",value:function(e){return!(e.is_exp?e.expression:e.column)}},{key:"getNewData",value:function(e){var t,n=e.is_exp?null:null===(t=a.default.find(this.columnOptions,(function(t){return t.value==e.column})))||void 0===t?void 0:t.datatype;return this.exColumnSchema.getNewData({is_exp:e.is_exp,column:e.is_exp?e.expression:e.column,col_type:n})}},{key:"baseFields",get:function(){var e,t=this;return[{id:"is_exp",label:(0,o.default)("Is expression"),type:"switch",editable:!1},{id:"column",label:(0,o.default)("Column"),type:"select",editable:!1,options:this.columns,deps:["is_exp"],optionsReloadBasis:null!==(e=this.columns)&&void 0!==e&&e.map?a.default.join(this.columns.map((function(e){return e.label})),","):null,optionsLoaded:function(e){return t.columnOptions=e},disabled:function(e){return e.is_exp}},{id:"expression",label:(0,o.default)("Expression"),editable:!1,deps:["is_exp"],type:"text",disabled:function(e){return!e.is_exp}}]}}]),n}(i.default),j=function(e){w(n,e);var t=S(n);function n(e){var r;return g(this,n),(r=t.call(this,{column:void 0,is_exp:!1,oper_class:void 0,order:!1,nulls_order:!1,operator:void 0,col_type:void 0,is_sort_nulls_applicable:!1})).operClassOptions=[],r.operatorOptions=[],r.getOperator=e,r.isNewExCons=!0,r.amname=null,r}return _(n,[{key:"isEditable",value:function(){return!!this.isNewExCons&&"btree"===this.amname}},{key:"setOperClassOptions",value:function(e){this.operClassOptions=e}},{key:"changeDefaults",value:function(e){this.defaultColVals=e}},{key:"getNewData",value:function(e){return b(b({},h(C(n.prototype),"getNewData",this).call(this,e)),this.defaultColVals)}},{key:"baseFields",get:function(){var e=this;return[{id:"is_exp",label:"",type:"",cell:"",editable:!1,width:20,disableResizing:!0,controlProps:{formatter:{fromRaw:function(e){return e?"E":"C"}}},visible:!1},{id:"column",label:(0,o.default)("Col/Exp"),type:"",editable:!1,cell:"",width:125},{id:"oper_class",label:(0,o.default)("Operator class"),cell:"select",options:this.operClassOptions,width:185,editable:e.isEditable,controlProps:{allowClear:!0,placeholder:(0,o.default)("Select the operator class")}},{id:"order",label:(0,o.default)("Order"),type:"select",cell:"select",options:[{label:"ASC",value:!0},{label:"DESC",value:!1}],editable:e.isEditable,width:110,disableResizing:!0,controlProps:{allowClear:!1}},{id:"nulls_order",label:(0,o.default)("NULLs order"),type:"select",cell:"select",options:[{label:"FIRST",value:!0},{label:"LAST",value:!1}],controlProps:{allowClear:!1},editable:e.isEditable,width:110,disableResizing:!0},{id:"operator",label:(0,o.default)("Operator"),type:"select",width:95,editable:function(){return e.isNewExCons},cell:function(t){return{cell:"select",options:function(){return e.getOperator({col_type:t.col_type})},controlProps:{allowClear:!1}}}}]}}]),n}(i.default),k=function(e){w(n,e);var t=S(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(this,n),(e=t.call(this,{name:void 0,oid:void 0,is_sys_obj:void 0,comment:void 0,spcname:void 0,amname:"gist",fillfactor:void 0,condeferrable:void 0,condeferred:void 0,columns:[],include:[]})).nodeInfo=o,e.fieldOptions=r,e.exHeaderSchema=new E(r.columns),e.exColumnSchema=new j(r.getOperator),e.exHeaderSchema.exColumnSchema=e.exColumnSchema,e}return _(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"inTable",get:function(){return!!(this.top&&this.top instanceof c.default)}},{key:"initialise",value:function(e){this.exColumnSchema.isNewExCons=this.isNew(e),this.amname=e.amname,"btree"===e.amname&&this.exColumnSchema.setOperClassOptions(this.fieldOptions.getOperClass({indextype:e.amname}))}},{key:"changeColumnOptions",value:function(e){this.exHeaderSchema.changeColumnOptions(e),this.fieldOptions.columns=e}},{key:"isReadonly",value:function(e){return this.top?!a.default.isUndefined(e.oid):!this.isNew(e)}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",cell:"text",mode:["properties","create","edit"],editable:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System exclusion constraint?"),type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),cell:"text",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function(e){return!!(0,l.isEmptyString)(e.name)},depChange:function(e){if((0,l.isEmptyString)(e.name))return{comment:""}}},{id:"spcname",label:(0,o.default)("Tablespace"),type:"select",group:(0,o.default)("Definition"),controlProps:{allowClear:!1},options:this.fieldOptions.spcname},{id:"amname",label:(0,o.default)("Access method"),type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.amname,deferredDepChange:function(e,n,r,i){return new Promise((function(n){f.default.confirm((0,o.default)("Change access method?"),(0,o.default)("Changing access method will clear columns collection"),(function(){if("btree"==e.amname||(0,l.isEmptyString)(e.amname)){t.exColumnSchema.setOperClassOptions(t.fieldOptions.getOperClass({indextype:"btree"})),t.exColumnSchema.changeDefaults({order:!0,nulls_order:!0,is_sort_nulls_applicable:!0})}else t.exColumnSchema.setOperClassOptions([]),t.exColumnSchema.changeDefaults({order:!1,nulls_order:!1,is_sort_nulls_applicable:!1});t.exColumnSchema.amname=e.amname,n((function(){return{columns:[]}}))}),(function(){n((function(){return{amname:i.oldState.amname}}))}))}))},controlProps:{allowClear:!0},readonly:t.isReadonly},{id:"fillfactor",label:(0,o.default)("Fill factor"),type:"int",group:(0,o.default)("Definition"),allowNull:!0},{id:"condeferrable",label:(0,o.default)("Deferrable?"),type:"switch",group:(0,o.default)("Definition"),readonly:t.isReadonly},{id:"condeferred",label:(0,o.default)("Deferred?"),type:"switch",group:(0,o.default)("Definition"),deps:["condeferrable"],disabled:function(e){return!e.condeferrable},readonly:t.isReadonly,depChange:function(e){if(!e.condeferrable)return{condeferred:!1}}},{id:"indconstraint",label:(0,o.default)("Constraint"),cell:"text",type:"multiline",mode:["create","edit","properties"],editable:!1,group:(0,o.default)("Definition"),readonly:t.isReadonly},{id:"columns",label:(0,o.default)("Columns/Expressions"),group:(0,o.default)("Columns"),type:"collection",mode:["create","edit","properties"],editable:!1,schema:this.exColumnSchema,headerSchema:this.exHeaderSchema,headerVisible:function(e){return t.isNew(e)},CustomControl:u.default,uniqueCol:["column"],canAdd:!1,canDelete:function(e){return t.isNew(e)},readonly:t.isReadonly,cell:function(){return{cell:"",controlProps:{formatter:{fromRaw:function(e){return a.default.map(e||[],"column").join(", ")}}},width:245}},deps:function(){var e=[];return t.inTable&&e.push(["columns"]),e},depChange:function(e,n,r,o){if(!t.inTable||e){var i=e.columns||[];if(t.inTable&&"columns"==n[0])if(o.type==s.SCHEMA_STATE_ACTIONS.DELETE_ROW){var l=a.default.get(o.oldState,o.path.concat(o.value));i=a.default.filter(i,(function(e){return e.local_column!=l.name}))}else if(o.type==s.SCHEMA_STATE_ACTIONS.SET_VALUE){var u=a.default.slice(o.path,0,-1),d=a.default.get(o.oldState,u).name,c=a.default.findIndex(i,(function(e){return e.local_column==d}));c>-1&&(i[c].local_column=a.default.get(r,u).name)}return{columns:i}}}},{id:"include",label:(0,o.default)("Include columns"),group:(0,o.default)("Columns"),type:function(){var t;return{type:"select",options:e.fieldOptions.columns,optionsReloadBasis:null!==(t=e.fieldOptions.columns)&&void 0!==t&&t.map?a.default.join(e.fieldOptions.columns.map((function(e){return e.label})),","):null,controlProps:{multiple:!0}}},editable:!1,canDelete:!0,canAdd:!0,mode:["properties","create","edit"],min_version:11e4,deps:["index"],readonly:function(){if(!t.isNew())return!0},disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return a.default.isUndefined(e.index)||""==e.index?{}:{include:[]}}}]}},{key:"validate",value:function(e,t){return a.default.isUndefined(e.columns)||a.default.isNull(e.columns)||e.columns.length<1?(t("columns",(0,o.default)("Please specify columns for exclusion constraint.")),!0):!!(this.isNew(e)&&e.autoindex&&(0,l.isEmptyString)(e.coveringindex))&&(t("coveringindex",(0,o.default)("Please specify covering index name.")),!0)}}]),n}(i.default);t.default=k},40175:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(69070),n(47941),n(82526),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeForeignKeySchema=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return new E({local_column:r?[]:function(){return(0,d.getNodeListByName)("column",e,t)},references:function(){return(0,d.getNodeAjaxOptions)("all_tables",n.Nodes.table,e,t,{cacheLevel:"server"},(function(e){return e.map((function(e){return{value:e.value,image:"icon-table",label:e.label,oid:e.oid}}))}))}},e,(function(r){return(0,d.getNodeAjaxOptions)("get_columns",n.Nodes.table,e,t,{urlParams:r,useCache:!1},(function(e){return e.map((function(e){return{value:e.name,image:"icon-column",label:e.name}}))}))}),o)},t.default=t.ForeignKeyColumnSchema=void 0,n(21249),n(68309),n(69826),n(69600),n(47042),n(89554),n(54747),n(92222),n(57327),n(34553);var o=f(n(91669)),i=f(n(89406)),a=f(n(96486)),l=n(76055),s=n(52237),u=f(n(35971)),d=n(77077),c=f(n(54851));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){v(n,e);var t=w(n);function n(e,r){var o;return y(this,n),(o=t.call(this,{local_column:void 0,references:void 0,referenced:void 0,_disable_references:!1})).fieldOptions=e,o.getColumns=r,o}return g(n,[{key:"changeColumnOptions",value:function(e){this.fieldOptions.local_column=e}},{key:"addDisabled",value:function(e){return!(e.local_column&&(e.references||this.origData.references)&&e.referenced)}},{key:"getNewData",value:function(e){var t,n=this,r=null===(t=a.default.find(this.refTables,(function(t){return t.value==e.references||t.value==n.origData.references})))||void 0===t?void 0:t.label;return{local_column:e.local_column,referenced:e.referenced,references:e.references,references_table_name:r}}},{key:"baseFields",get:function(){var e,t,n=this,r=this;return[{id:"local_column",label:(0,o.default)("Local column"),type:"select",editable:!1,options:this.fieldOptions.local_column,optionsReloadBasis:null!==(e=this.fieldOptions.local_column)&&void 0!==e&&e.map?a.default.join(this.fieldOptions.local_column.map((function(e){return e.label})),","):null},{id:"references",label:(0,o.default)("References"),type:"select",editable:!1,options:this.fieldOptions.references,optionsReloadBasis:null!==(t=this.fieldOptions.references)&&void 0!==t&&t.map?a.default.join(this.fieldOptions.references.map((function(e){return e.label})),","):null,optionsLoaded:function(e){return r.refTables=e},disabled:function(e){return!!e._disable_references}},{id:"referenced",label:(0,o.default)("Referencing"),editable:!1,deps:["references"],type:function(e){return{type:"select",options:e.references?function(){return n.getColumns({tid:e.references})}:[],optionsReloadBasis:e.references}}},{id:"_disable_references",label:"",type:"switch",visible:!1}]}}]),n}(i.default),P=function(e){v(n,e);var t=w(n);function n(){return y(this,n),t.call(this,{local_column:void 0,referenced:void 0,references:void 0,references_table_name:void 0})}return g(n,[{key:"baseFields",get:function(){return[{id:"local_column",label:(0,o.default)("Local"),type:"text",editable:!1,cell:""},{id:"referenced",label:(0,o.default)("Referenced"),type:"text",editable:!1,cell:""},{id:"references_table_name",label:(0,o.default)("Referenced Table"),type:"text",editable:!1,cell:""}]}}]),n}(i.default);t.ForeignKeyColumnSchema=P;var E=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return[]},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return y(this,n),(e=t.call(this,m({name:void 0,reftab:void 0,oid:void 0,is_sys_obj:void 0,comment:void 0,condeferrable:void 0,condeferred:void 0,confmatchtype:!1,convalidated:void 0,columns:void 0,confupdtype:"a",confdeltype:"a",autoindex:!0,coveringindex:void 0,hasindex:void 0},a))).nodeInfo=o,e.fkHeaderSchema=new C(r,i),e.fkHeaderSchema.fkObj=S(e),e.fkColumnSchema=new P,e.inErd=l,e}return g(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"inTable",get:function(){return!!(this.top&&this.top instanceof c.default)}},{key:"changeColumnOptions",value:function(e){this.fkHeaderSchema.changeColumnOptions(e)}},{key:"isReadonly",value:function(e){return this.top?!a.default.isUndefined(e.oid):!this.isNew(e)}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",cell:"text",mode:["properties","create","edit"],editable:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System foreign key?"),type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),cell:"text",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function(e){return!!(0,l.isEmptyString)(e.name)},depChange:function(e){if((0,l.isEmptyString)(e.name))return{comment:""}}},{id:"condeferrable",label:(0,o.default)("Deferrable?"),type:"switch",group:(0,o.default)("Definition"),readonly:t.isReadonly},{id:"condeferred",label:(0,o.default)("Deferred?"),type:"switch",group:(0,o.default)("Definition"),deps:["condeferrable"],disabled:function(e){return!e.condeferrable},readonly:t.isReadonly,depChange:function(e){if(!e.condeferrable)return{condeferred:!1}}},{id:"confmatchtype",label:(0,o.default)("Match type"),type:"toggle",group:(0,o.default)("Definition"),options:[{label:"FULL",value:!0},{label:"SIMPLE",value:!1}],readonly:t.isReadonly},{id:"convalidated",label:(0,o.default)("Validated?"),type:"switch",group:(0,o.default)("Definition"),readonly:function(e){if(!t.isNew(e)){return(t.inTable&&t.top?a.default.find(t.top.origData.foreign_key,(function(t){return t.cid==e.cid})):t.origData).convalidated}return!1}},{id:"autoindex",label:(0,o.default)("Auto FK index?"),type:"switch",group:(0,o.default)("Definition"),deps:["name","hasindex"],readonly:function(e){return!t.isNew(e)||!!e.hasindex},depChange:function(n,r,o,i){if(!t.isNew(n))return{};if(t.inTable&&!e.inErd&&t.isNew(n)&&t.top.isNew())return{autoindex:!1,coveringindex:""};var s;t.inTable?s="fki_"+a.default.get(i.oldState,a.default.slice(i.path,0,-1)).name:s="fki_"+i.oldState.name;return n.hasindex?{}:n.autoindex?!n.autoindex||(0,l.isEmptyString)(n.name)||!(0,l.isEmptyString)(n.coveringindex)&&s!=n.coveringindex?void 0:{coveringindex:"fki_"+n.name}:{coveringindex:""}}},{id:"coveringindex",label:(0,o.default)("Covering index"),type:"text",mode:["properties","create","edit"],group:(0,o.default)("Definition"),deps:["autoindex","hasindex"],disabled:function(e){return!e.autoindex&&!e.hasindex},readonly:this.isReadonly},{id:"references_table_name",label:(0,o.default)("Referenced Table"),type:"text",group:(0,o.default)("Columns"),editable:!1,visible:!1,deps:["columns"],cell:function(e){return{cell:"",controlProps:{formatter:{fromRaw:function(){var t;return(null===(t=e.columns)||void 0===t?void 0:t.length)>0?a.default.join(a.default.map(e.columns,"references_table_name"),","):""}}}}}},{id:"columns",label:(0,o.default)("Columns"),group:(0,o.default)("Columns"),type:"collection",mode:["create","edit","properties"],editable:!1,schema:this.fkColumnSchema,headerSchema:this.fkHeaderSchema,headerVisible:function(e){return t.isNew(e)},CustomControl:u.default,uniqueCol:["local_column","references","referenced"],canAdd:!1,canDelete:function(e){return t.isNew(e)},readonly:t.isReadonly,cell:function(){return{cell:"",controlProps:{formatter:{fromRaw:function(e){var t=[],n=[];return(null==e?void 0:e.length)>0?(e.forEach((function(e){t.push(e.local_column),n.push(e.referenced)})),"("+t.join(", ")+") -> ("+n.join(", ")+")"):""}}}}},deps:function(){var e=[];return t.inTable&&e.push(["columns"]),e},depChange:function(e,n,r,o){if(!t.inTable||e){var i=e.columns||[];if(t.inTable&&"columns"==n[0])if(o.type==s.SCHEMA_STATE_ACTIONS.DELETE_ROW){var l=a.default.get(o.oldState,o.path.concat(o.value));i=a.default.filter(i,(function(e){return e.local_column!=l.name}))}else if(o.type==s.SCHEMA_STATE_ACTIONS.SET_VALUE){var u=a.default.slice(o.path,0,-1),d=a.default.get(o.oldState,u).name,c=a.default.findIndex(i,(function(e){return e.local_column==d}));c>-1&&(i[c].local_column=a.default.get(r,u).name)}return o.type==s.SCHEMA_STATE_ACTIONS.ADD_ROW&&(t.fkHeaderSchema.origData.references=null,t.fkHeaderSchema.origData.references=t.fkHeaderSchema.sessData.references,t.fkHeaderSchema.origData._disable_references=!0),{columns:i}}}},{id:"confupdtype",label:(0,o.default)("On update"),type:"select",group:(0,o.default)("Action"),mode:["edit","create"],controlProps:{allowClear:!1},options:[{label:"NO ACTION",value:"a"},{label:"RESTRICT",value:"r"},{label:"CASCADE",value:"c"},{label:"SET NULL",value:"n"},{label:"SET DEFAULT",value:"d"}],readonly:t.isReadonly},{id:"confdeltype",label:(0,o.default)("On delete"),type:"select",group:(0,o.default)("Action"),mode:["edit","create"],select2:{allowClear:!1},options:[{label:"NO ACTION",value:"a"},{label:"RESTRICT",value:"r"},{label:"CASCADE",value:"c"},{label:"SET NULL",value:"n"},{label:"SET DEFAULT",value:"d"}],readonly:t.isReadonly}]}},{key:"validate",value:function(e,t){return a.default.isUndefined(e.columns)||a.default.isNull(e.columns)||e.columns.length<1?(t("columns",(0,o.default)("Please specify columns for Foreign key.")),!0):!!(this.isNew(e)&&e.autoindex&&(0,l.isEmptyString)(e.coveringindex))&&(t("coveringindex",(0,o.default)("Please specify covering index name.")),!0)}}]),n}(i.default);t.default=E},29458:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(92222),n(57327),n(47042),n(34553),n(69600),n(21249),n(82772),n(68304),n(30489);var o=d(n(91669)),i=d(n(89406)),a=d(n(96486)),l=n(76055),s=n(52237),u=d(n(54851));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(d,e);var t,n,r,i=m(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,d),(e=i.call(this,{name:void 0,oid:void 0,is_sys_obj:void 0,comment:void 0,spcname:void 0,index:void 0,fillfactor:void 0,condeferrable:void 0,condeferred:void 0,columns:[],include:[]})).fieldOptions=t,e.nodeInfo=n,e}return t=d,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"inTable",get:function(){return!!(this.top&&this.top instanceof u.default)}},{key:"changeColumnOptions",value:function(e){this.fieldOptions.columns=e}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",mode:["properties","create","edit"],editable:!0,cell:"text"},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"],editable:!1},{id:"is_sys_obj",label:(0,o.default)("System primary key?"),cell:"switch",type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),cell:"multiline",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function(e){return!!(0,l.isEmptyString)(e.name)},depChange:function(e){if((0,l.isEmptyString)(e.name))return{comment:""}}},{id:"columns",label:(0,o.default)("Columns"),deps:function(){var e=["index"];return t.inTable&&e.push(["columns"]),e},depChange:function(e,n,r,o){if(!t.inTable||e){var i=e.columns||[];if(t.inTable&&"columns"==n[0])if(o.type==s.SCHEMA_STATE_ACTIONS.DELETE_ROW){var l=a.default.get(o.oldState,o.path.concat(o.value));i=a.default.filter(i,(function(e){return e.column!=l.name}))}else if(o.type==s.SCHEMA_STATE_ACTIONS.SET_VALUE){var u=a.default.slice(o.path,0,-1),d=a.default.get(o.oldState,u).name,c=a.default.findIndex(i,(function(e){return e.column==d}));c>-1&&(i[c].column=a.default.get(r,u).name)}return{columns:i}}},cell:function(){return{cell:"",controlProps:{formatter:{fromRaw:function(e){return a.default.join((e||[]).map((function(e){return e.column})))}}}}},type:function(){var e;return{type:"select",optionsReloadBasis:null!==(e=t.fieldOptions.columns)&&void 0!==e&&e.map?a.default.join(t.fieldOptions.columns.map((function(e){return e.label})),","):null,options:t.fieldOptions.columns,controlProps:{allowClear:!1,multiple:!0,formatter:{fromRaw:function(e,t){var n=(e||[]).map((function(e){return e.column}));return a.default.filter(t,(function(e){return n.indexOf(e.value)>-1}))},toRaw:function(e){return(e||[]).map((function(e){return{column:e.value}}))}}}}},group:(0,o.default)("Definition"),editable:!1,readonly:function(e){if(!t.isNew(e))return!0},disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)}},{id:"include",label:(0,o.default)("Include columns"),type:function(){return{type:"select",options:e.fieldOptions.columns,controlProps:{multiple:!0}}},group:(0,o.default)("Definition"),editable:!1,canDelete:!0,canAdd:!0,mode:["properties","create","edit"],visible:function(){return this.getServerVersion()>=11e4},deps:["index"],readonly:function(e){return t.isReadOnly(e)},disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return a.default.isUndefined(e.index)||""==e.index?{}:{include:[]}}},{id:"spcname",label:(0,o.default)("Tablespace"),type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.spcname,deps:["index"],controlProps:{allowClear:!1},disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return a.default.isUndefined(e.index)||""==e.index?{}:{spcname:""}}},{id:"index",label:(0,o.default)("Index"),mode:["create"],type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.index,controlProps:{allowClear:!0},readonly:function(){if(!t.isNew())return!0},visible:function(){return!t.inTable}},{id:"fillfactor",label:(0,o.default)("Fill factor"),deps:["index"],type:"int",group:(0,o.default)("Definition"),min:10,max:100,disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return a.default.isUndefined(e.index)||""==e.index?{}:{fillfactor:null}}},{id:"condeferrable",label:(0,o.default)("Deferrable?"),type:"switch",group:(0,o.default)("Definition"),deps:["index"],readonly:function(e){return t.isReadOnly(e)},disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return a.default.isUndefined(e.index)||""==e.index?{}:{condeferrable:!1}}},{id:"condeferred",label:(0,o.default)("Deferred?"),type:"switch",group:(0,o.default)("Definition"),deps:["condeferrable"],readonly:function(e){return t.isReadOnly(e)},disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)||!e.condeferrable},depChange:function(e){return e.condeferrable&&(a.default.isUndefined(e.index)||""==e.index)?{}:{condeferred:!1}}}]}},{key:"validate",value:function(e,t){return!(!(0,l.isEmptyString)(e.index)||!(a.default.isUndefined(e.columns)||a.default.isNull(e.columns)||e.columns.length<1)||(t("columns",(0,o.default)("Please specify columns for %s.",(0,o.default)("Primary key"))),0))}}])&&f(t.prototype,n),r&&f(t,r),d}(i.default);t.default=h},42657:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(92222),n(57327),n(47042),n(34553),n(69600),n(21249),n(82772),n(68304),n(30489);var o=d(n(91669)),i=d(n(89406)),a=d(n(96486)),l=n(76055),s=n(52237),u=d(n(54851));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(d,e);var t,n,r,i=m(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,d),(e=i.call(this,{name:void 0,oid:void 0,is_sys_obj:void 0,comment:void 0,spcname:void 0,index:void 0,fillfactor:void 0,condeferrable:void 0,condeferred:void 0,columns:[],include:[]})).fieldOptions=t,e.nodeInfo=n,e}return t=d,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"inTable",get:function(){return!!(this.top&&this.top instanceof u.default)}},{key:"changeColumnOptions",value:function(e){this.fieldOptions.columns=e}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",mode:["properties","create","edit"],editable:!0,cell:"text"},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"],editable:!1},{id:"is_sys_obj",label:(0,o.default)("System primary key?"),cell:"switch",type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),cell:"multiline",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function(e){return!!(0,l.isEmptyString)(e.name)},depChange:function(e){if((0,l.isEmptyString)(e.name))return{comment:""}}},{id:"columns",label:(0,o.default)("Columns"),deps:function(){var e=["index"];return t.inTable&&e.push(["columns"]),e},depChange:function(e,n,r,o){if(!t.inTable||e){var i=e.columns||[];if(t.inTable&&"columns"==n[0])if(o.type==s.SCHEMA_STATE_ACTIONS.DELETE_ROW){var l=a.default.get(o.oldState,o.path.concat(o.value));i=a.default.filter(i,(function(e){return e.column!=l.name}))}else if(o.type==s.SCHEMA_STATE_ACTIONS.SET_VALUE){var u=a.default.slice(o.path,0,-1),d=a.default.get(o.oldState,u).name,c=a.default.findIndex(i,(function(e){return e.column==d}));c>-1&&(i[c].column=a.default.get(r,u).name)}return{columns:i}}},cell:function(){return{cell:"",controlProps:{formatter:{fromRaw:function(e){return a.default.join((e||[]).map((function(e){return e.column})))}}}}},type:function(){var e;return{type:"select",optionsReloadBasis:null!==(e=t.fieldOptions.columns)&&void 0!==e&&e.map?a.default.join(t.fieldOptions.columns.map((function(e){return e.label})),","):null,options:t.fieldOptions.columns,controlProps:{allowClear:!1,multiple:!0,formatter:{fromRaw:function(e,t){var n=(e||[]).map((function(e){return e.column}));return a.default.filter(t,(function(e){return n.indexOf(e.value)>-1}))},toRaw:function(e){return(e||[]).map((function(e){return{column:e.value}}))}}}}},group:(0,o.default)("Definition"),editable:!1,readonly:function(e){return t.isReadOnly(e)},disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)}},{id:"include",label:(0,o.default)("Include columns"),type:function(){return{type:"select",options:e.fieldOptions.columns,controlProps:{multiple:!0}}},group:(0,o.default)("Definition"),editable:!1,canDelete:!0,canAdd:!0,mode:["properties","create","edit"],visible:function(){return!a.default.isUndefined(this.nodeInfo)&&!a.default.isUndefined(this.nodeInfo.server)&&!a.default.isUndefined(this.nodeInfo.server.version)&&this.nodeInfo.server.version>=11e4},deps:["index"],readonly:function(e){return t.isReadOnly(e)},disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return a.default.isUndefined(e.index)||""==e.index?{}:{include:[]}}},{id:"spcname",label:(0,o.default)("Tablespace"),type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.spcname,deps:["index"],controlProps:{allowClear:!1},disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return a.default.isUndefined(e.index)||""==e.index?{}:{spcname:""}}},{id:"index",label:(0,o.default)("Index"),mode:["create"],type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.index,controlProps:{allowClear:!0},readonly:function(){if(!t.isNew())return!0},visible:function(){return!t.inTable}},{id:"fillfactor",label:(0,o.default)("Fill factor"),deps:["index"],type:"int",group:(0,o.default)("Definition"),disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return a.default.isUndefined(e.index)||""==e.index?{}:{fillfactor:null}}},{id:"condeferrable",label:(0,o.default)("Deferrable?"),type:"switch",group:(0,o.default)("Definition"),deps:["index"],readonly:function(e){return t.isReadOnly(e)},disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return a.default.isUndefined(e.index)||""==e.index?{}:{condeferrable:!1}}},{id:"condeferred",label:(0,o.default)("Deferred?"),type:"switch",group:(0,o.default)("Definition"),deps:["condeferrable"],readonly:function(e){return t.isReadOnly(e)},disabled:function(e){return!(a.default.isUndefined(e.index)||""==e.index)||!e.condeferrable},depChange:function(e){return e.condeferrable&&(a.default.isUndefined(e.index)||""==e.index)?{}:{condeferred:!1}}}]}},{key:"validate",value:function(e,t){return!(!(0,l.isEmptyString)(e.index)||!(a.default.isUndefined(e.columns)||a.default.isNull(e.columns)||e.columns.length<1)||(t("columns",(0,o.default)("Please specify columns for %s.",(0,o.default)("Unique constraint"))),0))}}])&&f(t.prototype,n),r&&f(t,r),d}(i.default);t.default=h},43893:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getColumnSchema=function(e,t,n){return new O({columnList:function(){return(0,a.getNodeListByName)("column",t,n,{})},collationList:function(){return(0,a.getNodeAjaxOptions)("get_collations",e,t,n,{jumpAfterNode:"schema"})},opClassList:function(){return(0,a.getNodeAjaxOptions)("get_op_class",e,t,n,{jumpAfterNode:"schema"})}},{node_info:t})},t.default=t.ColumnSchema=void 0,n(32564),n(40561),n(88674),n(41539),n(68304),n(30489);var o=d(n(91669)),i=d(n(89406)),a=n(77077),l=d(n(96486)),s=n(76055),u=d(n(55958));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){h(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(this,n),(e=t.call(this,f({name:null,oid:void 0,description:"",is_sys_obj:!1,colname:void 0,collspcname:void 0,op_class:void 0,sort_order:!1,nulls:!1,is_sort_nulls_applicable:!0},i))).fieldOptions=f({columnList:[],collationList:[],opClassList:[]},r),e.node_info=f({},o.node_info),e.op_class_types=[],e}return y(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"inSchemaWithModelCheck",value:function(e){return!this.node_info||!("schema"in this.node_info)||!this.isNew(e)}},{key:"setOpClassTypes",value:function(e){if(!e||l.default.isArray(e)&&0==e.length)return this.op_class_types;0==this.op_class_types.length&&(this.op_class_types=e)}},{key:"isEditable",value:function(e){var t=this._top;return!this.inSchemaWithModelCheck(e)&&(t._sessData&&"btree"===t._sessData.amname?(e.is_sort_nulls_applicable=!0,!0):(e.is_sort_nulls_applicable=!1,!1))}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"colname",label:(0,o.default)("Column"),type:"select",cell:"select",noEmpty:!0,disabled:function(){return S(t.node_info)},editable:function(e){return!t.inSchemaWithModelCheck(e)},options:t.fieldOptions.columnList,node:"column"},{id:"collspcname",label:(0,o.default)("Collation"),type:"select",cell:"select",disabled:function(){return S(t.node_info)},editable:function(e){return!t.inSchemaWithModelCheck(e)},options:t.fieldOptions.collationList,node:"index",url_jump_after_node:"schema"},{id:"op_class",label:(0,o.default)("Operator class"),tags:!0,type:"select",cell:function(){return{cell:"select",options:t.fieldOptions.opClassList,optionsLoaded:function(e){t.setOpClassTypes(e)},controlProps:{allowClear:!0,filter:function(n){var r,o,i,a=null!==(r=t._top)&&void 0!==r&&r._sessData?null===(o=t._top)||void 0===o?void 0:o._sessData.amname:null===(i=t._top)||void 0===i?void 0:i._origData.amname;return l.default.isUndefined(a)||l.default.each(e.op_class_types,(function(e,t){a===t&&(n=e)})),n}}}},editable:function(e){return!t.inSchemaWithModelCheck(e)},node:"index",url_jump_after_node:"schema",deps:["amname"]},{id:"sort_order",label:(0,o.default)("Sort order"),type:"select",cell:"select",options:[{label:"ASC",value:!1},{label:"DESC",value:!0}],width:110,disableResizing:!0,controlProps:{allowClear:!1},depChange:function(e,t,n,r){(0,s.isEmptyString)(n.amname)||"btree"===n.amname?1==e.sort_order&&0==r.oldState.sort_order&&setTimeout((function(){e.nulls=!0}),10):e.is_sort_nulls_applicable=!1},editable:function(e){return t.isEditable(e)},deps:["amname"]},{id:"nulls",label:(0,o.default)("NULLs"),editable:function(e){return t.isEditable(e)},deps:["amname","sort_order"],type:"select",cell:"select",options:[{label:"FIRST",value:!0},{label:"LAST",value:!1}],controlProps:{allowClear:!1},width:110,disableResizing:!0}]}}]),n}(i.default);function S(e){return!(!e||!("catalog"in e))}t.ColumnSchema=O;var x=function(e){h(n,e);var t=v(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return m(this,n),(r=t.call(this,f({name:void 0,oid:void 0,description:"",is_sys_obj:!1,nspname:void 0,tabname:void 0,spcname:void 0,amname:void 0,columns:[]},a))).fieldOptions=f({tablespaceList:[],amnameList:[],columnList:[]},o),r.node_info=f({},i.node_info),r.getColumnSchema=e,r}return y(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"getColumns",value:function(){var e=this;return{type:"select",options:this.fieldOptions.columnList,optionsLoaded:function(t){e.fieldOptions.columnList=t},controlProps:{allowClear:!1,multiple:!0,placeholder:(0,o.default)("Select the column(s)"),width:"style",filter:function(e){var t=[];return e&&l.default.isArray(e)&&l.default.each(e,(function(e){""!=e.label&&t.push({label:e.label,value:e.value,image:"icon-column"})})),t}}}}},{key:"isVisible",value:function(){return!l.default.isUndefined(this.node_info)&&!l.default.isUndefined(this.node_info.server)&&!l.default.isUndefined(this.node_info.server.version)&&this.node_info.server.version>=11e4}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",noEmpty:!0,disabled:function(){return S(e.node_info)}},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"int",readonly:!0,mode:["properties"]},{id:"spcname",label:(0,o.default)("Tablespace"),cell:"string",node:"tablespace",mode:["properties","create","edit"],disabled:function(){return S(e.node_info)},type:"select",options:e.fieldOptions.tablespaceList,controlProps:{allowClear:!0}},{id:"amname",label:(0,o.default)("Access Method"),cell:"string",mode:["properties","create","edit"],noEmpty:!0,disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},group:(0,o.default)("Definition"),type:function(){return{type:"select",options:e.fieldOptions.amnameList,optionsLoaded:function(t){e.fieldOptions.amnameList=t},controlProps:{allowClear:!0,filter:function(e){var t=[];return e&&l.default.isArray(e)&&l.default.each(e,(function(e){""!=e.label&&t.push({label:e.label,value:e.value,data:e})})),t}}}},deferredDepChange:function(e,t,n,r){return e.amname!=r.oldState.amname?new Promise((function(t){u.default.confirm((0,o.default)("Changing access method will clear columns collection"),(function(){!function(t){t((function(){return e.columns.splice(0,e.columns.length),{columns:e.columns}}))}(t)}),(function(){t((function(){return e.amname=r.oldState.amname,{amname:e.amname}}))}))})):Promise.resolve((function(){}))}},{id:"include",label:(0,o.default)("Include columns"),group:(0,o.default)("Definition"),editable:!1,canDelete:!0,canAdd:!0,mode:["properties"],disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},type:function(){return e.getColumns()},visible:function(){return e.isVisible()},node:"column"},{id:"fillfactor",label:(0,o.default)("Fill factor"),cell:"string",type:"int",disabled:function(){return S(e.node_info)},mode:["create","edit","properties"],min:10,max:100,group:(0,o.default)("Definition")},{id:"indisunique",label:(0,o.default)("Unique?"),cell:"string",type:"switch",disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},group:(0,o.default)("Definition")},{id:"indisclustered",label:(0,o.default)("Clustered?"),cell:"string",type:"switch",disabled:function(){return S(e.node_info)},group:(0,o.default)("Definition")},{id:"indisvalid",label:(0,o.default)("Valid?"),cell:"string",type:"switch",mode:["properties"],group:(0,o.default)("Definition")},{id:"indisprimary",label:(0,o.default)("Primary?"),cell:"string",type:"switch",mode:["properties"],group:(0,o.default)("Definition")},{id:"is_sys_idx",label:(0,o.default)("System index?"),cell:"string",type:"switch",mode:["properties"]},{id:"isconcurrent",label:(0,o.default)("Concurrent build?"),cell:"string",type:"switch",disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},mode:["create"],group:(0,o.default)("Definition")},{id:"indconstraint",label:(0,o.default)("Constraint"),cell:"string",type:"sql",controlProps:{className:["custom_height_css_class"]},disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},mode:["create","edit"],control:"sql-field",visible:!0,group:(0,o.default)("Definition")},{id:"columns",label:(0,o.default)("Columns"),type:"collection",deps:["amname"],group:(0,o.default)("Definition"),schema:e.getColumnSchema(),mode:["edit","create","properties"],canAdd:function(t){return e.isNew(t)},canEdit:!1,canDelete:function(t){return e.isNew(t)},uniqueCol:["colname"],columns:["colname","op_class","sort_order","nulls","collspcname"]},{id:"include",label:(0,o.default)("Include columns"),type:function(){return e.getColumns()},group:(0,o.default)("Definition"),editable:!1,canDelete:!0,canAdd:!0,mode:["edit","create"],disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},visible:function(){return e.isVisible()},node:"column"},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:function(){return S(e.node_info)}}]}},{key:"validate",value:function(e,t){var n=e.columns;return l.default.isArray(n)&&0==n.length?(t("columns",(0,o.default)("You must specify at least one column.")),!0):null}}]),n}(i.default);t.default=x},52874:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(4129),n(78783),n(66992),n(33948),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodePartitionTableSchema=function(e,t,n){var r=function(){return(0,c.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},o=n.Nodes.partition;return new P({relowner:function(){return(0,c.getNodeListByName)("role",e,t)},schema:function(){return(0,c.getNodeListByName)("schema",e,t,{cacheLevel:"database",cacheNode:"database"},(function(e){return!e||!e.label.match(/^pg_/)}))},spcname:r,coll_inherits:function(){return(0,c.getNodeAjaxOptions)("get_inherits",o,e,t)},typname:function(){return(0,c.getNodeAjaxOptions)("get_oftype",o,e,t)},like_relation:function(){return(0,c.getNodeAjaxOptions)("get_relations",o,e,t)}},e,{constraints:function(){return new s.ConstraintsSchema(e,(function(){return(0,f.getNodeForeignKeySchema)(e,t,n,!0)}),(function(){return(0,p.getNodeExclusionConstraintSchema)(e,t,n,!0)}),{spcname:r})}},(function(n){return(0,d.getNodePrivilegeRoleSchema)(o,e,t,n)}),(function(n){return(0,c.getNodeAjaxOptions)("get_columns",o,e,t,{urlParams:n,useCache:!1})}),(function(){return(0,c.getNodeAjaxOptions)("get_collations",n.Nodes.collation,e,t)}),(function(){return(0,c.getNodeAjaxOptions)("get_op_class",n.Nodes.table,e,t)}),(function(){return(0,c.getNodeAjaxOptions)("get_attach_tables",o,e,t,{useCache:!1,customGenerateUrl:function(e,t){return m.sprintf("table/%s/%s/%s/%s/%s/%s",encodeURIComponent(t),encodeURIComponent(e.server_group._id),encodeURIComponent(e.server._id),encodeURIComponent(e.database._id),encodeURIComponent(e.partition.schema_id),encodeURIComponent(e.partition._id))}})}),{relowner:n.serverInfo[e.server._id].user.name,schema:e.schema._label})},t.default=void 0,n(4723),n(74916),n(68309),n(21249),n(88674),n(41539),n(5212),n(69600),n(82772);var o=y(n(91669)),i=y(n(89406)),a=y(n(67091)),l=y(n(96486)),s=n(54851),u=n(71944),d=n(40345),c=n(77077),f=n(40175),p=n(81873),m=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(44092));function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(s,e);var t,n,r,i=S(s);function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return[]},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return[]},d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){return[]},c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(){return[]},f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{};return _(this,s),(e=i.call(this,g({name:void 0,oid:void 0,spcoid:void 0,spcname:void 0,relowner:void 0,relacl:void 0,relhasoids:void 0,relhassubclass:void 0,reltuples:void 0,description:void 0,conname:void 0,conkey:void 0,isrepl:void 0,triggercount:void 0,relpersistence:void 0,fillfactor:void 0,reloftype:void 0,typname:void 0,labels:void 0,providers:void 0,is_sys_table:void 0,coll_inherits:[],hastoasttable:!0,toast_autovacuum_enabled:"x",autovacuum_enabled:"x",primary_key:[],partitions:[],partition_type:"range",is_partitioned:!1,partition_value:void 0},f))).fieldOptions=t,e.schemas=r,e.getPrivilegeRoleSchema=o,e.nodeInfo=n,e.getColumns=a,e.getAttachTables=c,e.partitionKeysObj=new u.PartitionKeysSchema([],l,d),e.partitionsObj=new u.PartitionsSchema(e.nodeInfo,l,d,c),e.constraintsObj=e.schemas.constraints(),e}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"initialise",value:function(e){this.changeColumnOptions(e.columns)}},{key:"inSchemaWithModelCheck",value:function(e){return!(!this.nodeInfo||!("schema"in this.nodeInfo)||this.isNew(e))}},{key:"isPartitioned",value:function(e){return!!e.is_partitioned||this.inCatalog()}},{key:"changeColumnOptions",value:function(e){var t=(e||[]).map((function(e){return{label:e.name,value:e.name,image:"icon-column"}}));this.constraintsObj.changeColumnOptions(t),this.partitionKeysObj.changeColumnOptions(t),this.partitionsObj.changeColumnOptions(t)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",noEmpty:!0,mode:["properties","create","edit"],readonly:this.inCatalog},{id:"oid",label:(0,o.default)("OID"),type:"text",mode:["properties"]},{id:"relowner",label:(0,o.default)("Owner"),type:"select",options:this.fieldOptions.relowner,noEmpty:!0,mode:["properties","create","edit"],controlProps:{allowClear:!1},readonly:this.inCatalog},{id:"schema",label:(0,o.default)("Schema"),type:"select",options:this.fieldOptions.schema,noEmpty:!0,mode:["create","edit"],readonly:this.inCatalog},{id:"spcname",label:(0,o.default)("Tablespace"),type:"select",options:this.fieldOptions.spcname,mode:["properties","create","edit"],deps:["is_partitioned"],readonly:this.inCatalog},{id:"partition",type:"group",label:(0,o.default)("Partitions"),mode:["edit","create"],min_version:1e5,visible:function(t){return!(!e.isNew(t)&&!t.is_partitioned)}},{id:"is_partitioned",label:(0,o.default)("Partitioned table?"),cell:"switch",type:"switch",mode:["properties","create","edit"],min_version:1e5,readonly:function(t){return!e.isNew(t)}},{id:"is_sys_table",label:(0,o.default)("System table?"),cell:"switch",type:"switch",mode:["properties"],disabled:this.inCatalog},{id:"description",label:(0,o.default)("Comment"),type:"multiline",mode:["properties","create","edit"],disabled:this.inCatalog},{id:"advanced",label:(0,o.default)("Advanced"),type:"group",visible:!0},{id:"coll_inherits",label:(0,o.default)("Inherited from table(s)"),type:"text",group:(0,o.default)("Advanced"),mode:["properties"]},{id:"inherited_tables_cnt",label:(0,o.default)("Inherited tables count"),type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{type:"nested-tab",group:(0,o.default)("Constraints"),mode:["edit","create"],schema:e.constraintsObj},{id:"fillfactor",label:(0,o.default)("Fill factor"),type:"int",mode:["create","edit"],min:10,max:100,group:"advanced",disabled:e.isPartitioned},{id:"toast_tuple_target",label:(0,o.default)("Toast tuple target"),type:"int",mode:["create","edit"],min:128,min_version:11e4,group:"advanced",disabled:e.isPartitioned},{id:"parallel_workers",label:(0,o.default)("Parallel workers"),type:"int",mode:["create","edit"],group:"advanced",min_version:90600,disabled:e.isPartitioned},{id:"relhasoids",label:(0,o.default)("Has OIDs?"),cell:"switch",type:"switch",mode:["properties","create","edit"],group:"advanced",readonly:!0,disabled:function(){return e.getServerVersion()>=12e4||e.inCatalog()}},{id:"relpersistence",label:(0,o.default)("Unlogged?"),cell:"switch",type:"switch",mode:["properties","create","edit"],disabled:e.inSchemaWithModelCheck,group:"advanced"},{id:"conname",label:(0,o.default)("Primary key"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"reltuples",label:(0,o.default)("Rows (estimated)"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"rows_cnt",label:(0,o.default)("Rows (counted)"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog,formatter:{fromRaw:function(){return 0},toRaw:function(e){return e}}},{id:"relhassubclass",label:(0,o.default)("Is inherited?"),cell:"switch",type:"switch",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"partition_type",label:(0,o.default)("Partition Type"),editable:!1,type:"select",controlProps:{allowClear:!1},group:"partition",deps:["is_partitioned"],options:function(){var t=[{label:(0,o.default)("Range"),value:"range"},{label:(0,o.default)("List"),value:"list"}];return e.getServerVersion()>=11e4&&t.push({label:(0,o.default)("Hash"),value:"hash"}),Promise.resolve(t)},mode:["create"],min_version:1e5,disabled:function(e){return!e.is_partitioned},readonly:function(t){return!e.isNew(t)}},{id:"partition_keys",label:(0,o.default)("Partition Keys"),schema:e.partitionKeysObj,editable:!0,type:"collection",group:"partition",mode:["create"],deps:["is_partitioned","partition_type","typname"],canEdit:!1,canDelete:!0,canAdd:function(t){return!(!e.isNew(t)||!t.is_partitioned)},canAddRow:function(e){var t,n=!1,r=1e3;return e.partition_type&&"list"==e.partition_type&&(r=1),(null===(t=e.columns)||void 0===t?void 0:t.length)>0&&(n=l.default.some(l.default.map(e.columns,"name"))),!e.partition_keys||e.partition_keys.length<r&&n},min_version:1e5,depChange:function(e,t,n,r){if(e.typname!=r.oldState.typname)return{partition_keys:[]}}},{id:"partition_scheme",label:(0,o.default)("Partition Scheme"),group:"partition",mode:["edit"],type:function(e){return{type:"note",text:e.partition_scheme||""}},min_version:1e5},{id:"partition_key_note",label:(0,o.default)("Partition Keys"),type:"note",group:"partition",mode:["create"],text:["<ul><li>",(0,o.default)("Partition table supports two types of keys:"),"</li><li>","<strong>",(0,o.default)("Column: "),"</strong>",(0,o.default)("User can select any column from the list of available columns."),"</li><li>","<strong>",(0,o.default)("Expression: "),"</strong>",(0,o.default)("User can specify expression to create partition key."),"</li><li>","<strong>",(0,o.default)("Example: "),"</strong>",(0,o.default)("Let's say, we want to create a partition table based per year for the column 'saledate', having datatype 'date/timestamp', then we need to specify the expression as 'extract(YEAR from saledate)' as partition key."),"</li></ul>"].join(""),min_version:1e5},{id:"partitions",label:(0,o.default)("Partitions"),schema:this.partitionsObj,editable:!0,type:"collection",group:"partition",mode:["edit","create"],deps:["is_partitioned","partition_type","typname"],depChange:function(t,n){if(["is_partitioned","partition_type","typname"].indexOf(n[0])>=0&&e.isNew(t))return{partitions:[]}},canEdit:!0,canDelete:!0,customDeleteTitle:(0,o.default)("Detach Partition"),customDeleteMsg:(0,o.default)("Are you sure you wish to detach this partition?"),columns:["is_attach","partition_name","is_default","values_from","values_to","values_in","values_modulus","values_remainder"],canAdd:function(e){return!!e.is_partitioned},min_version:1e5},{id:"partition_note",label:(0,o.default)("Partitions"),type:"note",group:"partition",mode:["create"],text:["<ul><li>","<strong>",(0,o.default)("Create a table: "),"</strong>",(0,o.default)("User can create multiple partitions while creating new partitioned table. Operation switch is disabled in this scenario."),"</li><li>","<strong>",(0,o.default)("Edit existing table: "),"</strong>",(0,o.default)("User can create/attach/detach multiple partitions. In attach operation user can select table from the list of suitable tables to be attached."),"</li><li>","<strong>",(0,o.default)("Default: "),"</strong>",(0,o.default)("The default partition can store rows that do not fall into any existing partition’s range or list."),"</li><li>","<strong>",(0,o.default)("From/To/In input: "),"</strong>",(0,o.default)("From/To/In input: Values for these fields must be quoted with single quote. For more than one partition key values must be comma(,) separated."),"</li><li>","<strong>",(0,o.default)("Example: From/To: "),"</strong>",(0,o.default)("Enabled for range partition. Consider partitioned table with multiple keys of type Integer, then values should be specified like '100','200'."),"</li><li>","<strong>",(0,o.default)("In: "),"</strong>",(0,o.default)("Enabled for list partition. Values must be comma(,) separated and quoted with single quote."),"</li><li>","<strong>",(0,o.default)("Modulus/Remainder: "),"</strong>",(0,o.default)("Enabled for hash partition."),"</li></ul>"].join(""),min_version:1e5},{id:"relacl_str",label:(0,o.default)("Privileges"),disabled:this.inCatalog,type:"text",mode:["properties"],group:(0,o.default)("Security")},{id:"relacl",label:(0,o.default)("Privileges"),type:"collection",group:(0,o.default)("Security"),schema:this.getPrivilegeRoleSchema(["a","r","w","d","D","x","t"]),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee"]},{id:"seclabels",label:(0,o.default)("Security labels"),canEdit:!1,schema:new a.default,editable:!1,canAdd:!0,type:"collection",min_version:90100,mode:["edit","create"],group:(0,o.default)("Security"),canDelete:!0,control:"unique-col-collection"},{id:"vacuum_settings_str",label:(0,o.default)("Storage settings"),type:"multiline",group:"advanced",mode:["properties"]}]}},{key:"validate",value:function(e,t){return!(!e.is_partitioned||!this.isNew(e)||e.partition_keys&&!(e.partition_keys&&e.partition_keys.length<=0)||(t("partition_keys",(0,o.default)("Please specify at least one key for partitioned table.")),0))}}])&&w(t.prototype,n),r&&w(t,r),s}(i.default);t.default=P},55923:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(69600),n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,e);var t,n,r,i=f(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,a),(e=i.call(this,l({name:void 0,policyowner:"public",event:"ALL",using:void 0,using_orig:void 0,withcheck:void 0,withcheck_orig:void 0,type:"PERMISSIVE"},n))).fieldOptions=l({role:[],function_names:[]},t),e.nodeInfo=e.fieldOptions.nodeInfo,e}return t=a,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"disableUsingField",value:function(e){return"INSERT"==e.event}},{key:"disableWithCheckField",value:function(e){var t=e.event;return("SELECT"==t||"DELETE"==t)&&(e.withcheck="",!0)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",editable:!0,type:"text",readonly:!1,noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]},{id:"event",label:(0,o.default)("Event"),type:"select",group:(0,o.default)("Commands"),disabled:function(){return!e.isNew()},controlProps:{allowClear:!1},options:[{label:"ALL",value:"ALL"},{label:"SELECT",value:"SELECT"},{label:"INSERT",value:"INSERT"},{label:"UPDATE",value:"UPDATE"},{label:"DELETE",value:"DELETE"}]},{id:"using",label:(0,o.default)("Using"),deps:["using","event"],type:"text",disabled:e.disableUsingField,mode:["create","edit","properties"],control:"sql",visible:!0,group:(0,o.default)("Commands")},{id:"withcheck",label:(0,o.default)("With check"),deps:["withcheck","event"],type:"text",mode:["create","edit","properties"],control:"sql",visible:!0,group:(0,o.default)("Commands"),disabled:e.disableWithCheckField},{id:"rls_expression_key_note",label:(0,o.default)("RLS policy expression"),type:"note",group:(0,o.default)("Commands"),mode:["create","edit"],text:["<ul><li>","<strong>",(0,o.default)("Using: "),"</strong>",(0,o.default)("This expression will be added to queries that refer to the table if row level security is enabled. Rows for which the expression returns true will be visible. Any rows for which the expression returns false or null will not be visible to the user (in a SELECT), and will not be available for modification (in an UPDATE or DELETE). Such rows are silently suppressed; no error is reported."),"</li><li>","<strong>",(0,o.default)("With check: "),"</strong>",(0,o.default)("This expression will be used in INSERT and UPDATE queries against the table if row level security is enabled. Only rows for which the expression evaluates to true will be allowed. An error will be thrown if the expression evaluates to false or null for any of the records inserted or any of the records that result from the update."),"</li></ul>"].join("")},{id:"policyowner",label:(0,o.default)("Role"),cell:"text",type:"select",options:e.fieldOptions.role,controlProps:{allowClear:!1}},{id:"type",label:(0,o.default)("Type"),type:"select",deps:["type"],disabled:function(){return!e.isNew()},controlProps:{width:"100%",allowClear:!1},options:[{label:"PERMISSIVE",value:"PERMISSIVE"},{label:"RESTRICTIVE",value:"RESTRICTIVE"}],visible:function(){return e.nodeInfo.server.version>=1e5}}]}}])&&d(t.prototype,n),r&&d(t,r),a}(i(n(89406)).default);t.default=b},49663:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,e);var t,n,r,i=f(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,a),(e=i.call(this,{oid:void 0,name:void 0,schema:void 0})).fieldOptions=l({nodeInfo:void 0,nodeData:void 0},t),e}return t=a,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",disabled:function(t){return"_RETURN"==t.name||!(e.isNew(t)||e.fieldOptions.nodeInfo.server.version>=90400)},noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),type:"text",mode:["properties"]},{id:"schema",label:"",type:"text",visible:!1,disabled:function(t){t.schema=e.fieldOptions.nodeInfo.schema.label}},{id:"view",label:"",type:"text",visible:!1,disabled:function(t){t.view=e.fieldOptions.nodeData.label}},{id:"is_enable_rule",label:(0,o.default)("Rule enabled?"),mode:["edit","properties"],group:(0,o.default)("Definition"),type:"select",disabled:function(){return"catalog"in e.fieldOptions.nodeInfo||"view"in e.fieldOptions.nodeInfo},options:[{label:(0,o.default)("Enable"),value:"O"},{label:(0,o.default)("Enable Replica"),value:"R"},{label:(0,o.default)("Enable Always"),value:"A"},{label:(0,o.default)("Disable"),value:"D"}],controlProps:{allowClear:!1}},{id:"event",label:(0,o.default)("Event"),control:"select2",group:(0,o.default)("Definition"),type:"select",controlProps:{allowClear:!1},options:[{label:"SELECT",value:"SELECT"},{label:"INSERT",value:"INSERT"},{label:"UPDATE",value:"UPDATE"},{label:"DELETE",value:"DELETE"}]},{id:"do_instead",label:(0,o.default)("Do instead?"),group:(0,o.default)("Definition"),type:"switch"},{id:"condition",label:(0,o.default)("Condition"),type:"sql",isFullTab:!0,group:(0,o.default)("Condition")},{id:"statements",label:(0,o.default)("Commands"),type:"sql",isFullTab:!0,group:(0,o.default)("Commands")},{id:"system_rule",label:(0,o.default)("System rule?"),type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),cell:"text",type:"multiline"}]}}])&&d(t.prototype,n),r&&d(t,r),a}(i(n(89406)).default);t.default=b},86189:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.disableTriggers=function(e,t,n,r){return i(e,t,n,r,{is_enable_trigger:"D"})},t.enableTriggers=function(e,t,n,r){return i(e,t,n,r,{is_enable_trigger:"O"})};var r,o=(r=n(9669))&&r.__esModule?r:{default:r};function i(e,t,n,r,i){var a=function(e,t){var n=(e||{}).item||t.selected();return t.findNodeByDomElement(n)}(r,e);if(!a||null===a.getData()||void 0===a.getData())return!1;o.default.put(n(a.getHtmlIdentifier(),"set_trigger",a.getData(),!0),i).then((function(n){1===n.data.success&&(t.success(n.data.info),a.reload(e))})).catch((function(n){try{var r=n.response.data;0===r.success&&t.error(r.errormsg)}catch(e){console.warn(e.stack||e)}a.unload(e)}))}},71944:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.PartitionsSchema=t.PartitionKeysSchema=void 0,n(69600),n(21249),n(88674),n(41539),n(5212),n(68304),n(30489);var o=s(n(96486)),i=s(n(91669)),a=s(n(89406)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){f(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return u(this,n),(e=t.call(this,{key_type:"column"})).columns=r,e.columnsReloadBasis=!1,e.getCollations=o,e.getOperatorClass=i,e}return c(n,[{key:"changeColumnOptions",value:function(e){this.columns=e}},{key:"isEditable",value:function(e){return"expression"!=e.key_type}},{key:"baseFields",get:function(){var e=this;return[{id:"key_type",label:(0,i.default)("Key type"),type:"select",editable:!0,cell:"select",controlProps:{allowClear:!1},noEmpty:!0,options:[{label:(0,i.default)("Column"),value:"column"},{label:(0,i.default)("Expression"),value:"expression"}]},{id:"pt_column",label:(0,i.default)("Column"),type:"select",deps:["key_type",["columns"]],depChange:function(e,t){if("expression"==e.key_type||"columns"==t[0])return{pt_column:void 0}},cell:function(){return{cell:"select",optionsReloadBasis:o.default.join(e.columns.map((function(e){return e.label})),","),options:e.columns,controlProps:{allowClear:!1}}},editable:function(t){return e.isEditable(t)}},{id:"expression",label:(0,i.default)("Expression"),type:"text",cell:"text",deps:["key_type"],depChange:function(e){if("column"==e.key_type)return{expression:void 0}},editable:function(e){return"expression"==e.key_type}},{id:"collationame",label:(0,i.default)("Collation"),cell:"select",type:"select",group:(0,i.default)("partition"),deps:["key_type"],options:e.getCollations,mode:["create","properties","edit"],editable:function(t){return e.isEditable(t)},disabled:function(){return!e.isNew()}},{id:"op_class",label:(0,i.default)("Operator class"),cell:"select",type:"select",group:(0,i.default)("partition"),deps:["key_type"],editable:function(t){return e.isEditable(t)},disabled:function(){return!e.isNew()},options:e.getOperatorClass,mode:["create","properties","edit"]}]}},{key:"validate",value:function(e,t){var n;if("column"==e.key_type){if(n=(0,l.emptyValidator)("Partition key column",e.pt_column))return t("pt_column",n),!0}else if(n=(0,l.emptyValidator)("Partition key expression",e.expression))return t("expression",n),!0;return!1}}]),n}(a.default);t.PartitionKeysSchema=h;var g=function(e){f(n,e);var t=m(n);function n(e,r,o){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return[]};return u(this,n),(i=t.call(this,{oid:void 0,is_attach:!1,partition_name:void 0,is_default:void 0,values_from:void 0,values_to:void 0,values_in:void 0,values_modulus:void 0,values_remainder:void 0,is_sub_partitioned:!1,sub_partition_type:"range"})).subPartitionsObj=new h([],r,o),i.getAttachTables=a,i.nodeInfo=e,i}return c(n,[{key:"changeColumnOptions",value:function(e){this.subPartitionsObj.changeColumnOptions(e)}},{key:"isEditable",value:function(e,t){return!(!this.top||this.top.sessData.partition_type!=t||!this.isNew(e)||!0===e.is_default)}},{key:"isDisable",value:function(e,t){return!this.top||this.top.sessData.partition_type!=t||!this.isNew(e)||!0===e.is_default}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"oid",label:(0,i.default)("OID"),type:"text",mode:["properties"]},{id:"is_attach",label:(0,i.default)("Operation"),cell:"select",type:"select",width:120,disableResizing:!0,options:[{label:(0,i.default)("Attach"),value:!0},{label:(0,i.default)("Create"),value:!1}],controlProps:{allowClear:!1},editable:function(e){return!(!t.isNew(e)||t.top.isNew())},readonly:function(e){return!(t.isNew(e)&&!t.top.isNew())}},{id:"partition_name",label:(0,i.default)("Name"),deps:["is_attach"],type:function(t){return t.is_attach?{type:"select",options:e.getAttachTables,controlProps:{allowClear:!1}}:{type:"text"}},cell:function(t){return t.is_attach?{cell:"select",options:e.getAttachTables,controlProps:{allowClear:!1}}:{cell:"text"}},editable:function(e){return!!t.isNew(e)},readonly:function(e){return!t.isNew(e)},noEmpty:!0},{id:"is_default",label:(0,i.default)("Default"),type:"switch",cell:"switch",width:55,disableResizing:!0,min_version:11e4,editable:function(e){return!!(t.top&&("range"==t.top.sessData.partition_type||"list"==t.top.sessData.partition_type)&&t.isNew(e)&&t.getServerVersion()>=11e4)},readonly:function(e){return!(t.top&&("range"==t.top.sessData.partition_type||"list"==t.top.sessData.partition_type)&&t.isNew(e)&&t.getServerVersion()>=11e4)}},{id:"values_from",label:(0,i.default)("From"),type:"text",cell:"text",deps:["is_default"],editable:function(e){return t.isEditable(e,"range")},disabled:function(e){return t.isDisable(e,"range")}},{id:"values_to",label:(0,i.default)("To"),type:"text",cell:"text",deps:["is_default"],editable:function(e){return t.isEditable(e,"range")},disabled:function(e){return t.isDisable(e,"range")}},{id:"values_in",label:(0,i.default)("In"),type:"text",cell:"text",deps:["is_default"],editable:function(e){return t.isEditable(e,"list")},readonly:function(e){return t.isDisable(e,"list")}},{id:"values_modulus",label:(0,i.default)("Modulus"),type:"int",cell:"int",editable:function(e){return t.isEditable(e,"hash")},disabled:function(e){return t.isDisable(e,"hash")}},{id:"values_remainder",label:(0,i.default)("Remainder"),type:"int",cell:"int",editable:function(e){return!(!t.top||"hash"!=t.top.sessData.partition_type||!t.isNew(e))},disabled:function(e){return!t.top||"hash"!=t.top.sessData.partition_type||!t.isNew(e)||!0===e.is_default}},{id:"is_sub_partitioned",label:(0,i.default)("Partitioned table?"),cell:"switch",group:"Partition",type:"switch",mode:["properties","create","edit"],deps:["is_attach"],readonly:function(e){return!t.isNew(e)||!!e.is_attach},depChange:function(e){if(e.is_attach)return{is_sub_partitioned:!1}}},{id:"sub_partition_type",label:(0,i.default)("Partition Type"),editable:!1,type:"select",controlProps:{allowClear:!1},group:"Partition",deps:["is_sub_partitioned"],options:function(){var e=[{label:(0,i.default)("Range"),value:"range"},{label:(0,i.default)("List"),value:"list"}];return t.getServerVersion()>=11e4&&e.push({label:(0,i.default)("Hash"),value:"hash"}),Promise.resolve(e)},visible:function(e){return t.isNew(e)},readonly:function(e){return!t.isNew(e)},disabled:function(e){return!e.is_sub_partitioned}},{id:"sub_partition_keys",label:(0,i.default)("Partition Keys"),schema:this.subPartitionsObj,editable:!0,type:"collection",group:"Partition",mode:["properties","create","edit"],deps:["is_sub_partitioned","sub_partition_type",["typname"]],canEdit:!1,canDelete:!0,canAdd:function(e){return!(!t.isNew(e)||!e.is_sub_partitioned)},canAddRow:function(e){var n=!1,r=t.top.sessData.columns,i=1e3;return e.sub_partition_type&&"list"==e.sub_partition_type&&(i=1),(null==r?void 0:r.length)>0&&(n=o.default.some(o.default.map(r,"name"))),!e.sub_partition_keys||e.sub_partition_keys.length<i&&n},depChange:function(e,t,n,r){if(n.typname!=r.oldState.typname)return{sub_partition_keys:[]}},visible:function(e){return t.isNew(e)}},{id:"sub_partition_scheme",label:(0,i.default)("Partition Scheme"),group:"Partition",mode:["edit"],type:function(e){return{type:"note",text:e.sub_partition_scheme}},visible:function(e){return!(!t.isNew(e)||(0,l.isEmptyString)(e.sub_partition_scheme))}}]}},{key:"validate",value:function(e,t){if(e.is_sub_partitioned&&this.isNew(e)&&(!e.sub_partition_keys||e.sub_partition_keys&&e.sub_partition_keys.length<=0))return t("sub_partition_keys",(0,i.default)("Please specify at least one key for partitioned table.")),!0;var n=this.top.sessData.partition_type;if("range"===n){if(!e.is_default&&(0,l.isEmptyString)(e.values_from))return t("values_from",(0,i.default)("For range partition From field cannot be empty.")),!0;if(!e.is_default&&(0,l.isEmptyString)(e.values_to))return t("values_to",(0,i.default)("For range partition To field cannot be empty.")),!0}else if("list"===n){if(!e.is_default&&(0,l.isEmptyString)(e.values_in))return t("values_in",(0,i.default)("For list partition In field cannot be empty.")),!0}else if("hash"===n){if((0,l.isEmptyString)(e.values_modulus))return t("values_modulus",(0,i.default)("For hash partition Modulus field cannot be empty.")),!0;if((0,l.isEmptyString)(e.values_remainder))return t("values_remainder",(0,i.default)("For hash partition Remainder field cannot be empty.")),!0}return!1}}]),n}(a.default);t.PartitionsSchema=g},54851:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(69070),n(47941),n(82526),n(38880),n(49337),n(33321),n(91038),n(78783),n(41817),n(32165),n(66992),n(33948),n(79753),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeTableSchema=function(e,t,n){var r,o=function(){return(0,m.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},i=n.Nodes.table;return new q({relowner:function(){return(0,m.getNodeListByName)("role",e,t)},schema:function(){return(0,m.getNodeListByName)("schema",e,t,{cacheLevel:"database",cacheNode:"database"},(function(e){return!e||!e.label.match(/^pg_/)}))},spcname:o,coll_inherits:function(){return(0,m.getNodeAjaxOptions)("get_inherits",i,e,t)},typname:function(){return(0,m.getNodeAjaxOptions)("get_oftype",i,e,t)},like_relation:function(){return(0,m.getNodeAjaxOptions)("get_relations",i,e,t)}},e,{columns:function(){return(0,b.getNodeColumnSchema)(e,t,n)},vacuum_settings:function(){return(0,y.getNodeVacuumSettingsSchema)(i,e,t)},constraints:function(){return new I(e,(function(){return(0,h.getNodeForeignKeySchema)(e,t,n,!0,{autoindex:!1})}),(function(){return(0,g.getNodeExclusionConstraintSchema)(e,t,n,!0)}),{spcname:o})}},(function(n){return(0,v.getNodePrivilegeRoleSchema)(i,e,t,n)}),(function(n){return(0,m.getNodeAjaxOptions)("get_columns",i,e,t,{urlParams:n,useCache:!1})}),(function(){return(0,m.getNodeAjaxOptions)("get_collations",n.Nodes.collation,e,t)}),(function(){return(0,m.getNodeAjaxOptions)("get_op_class",n.Nodes.table,e,t)}),(function(){return(0,m.getNodeAjaxOptions)("get_attach_tables",i,e,t,{useCache:!1,urlWithId:!0})}),{relowner:n.serverInfo[e.server._id].user.name,schema:null===(r=e.schema)||void 0===r?void 0:r._label})},t.default=t.LikeSchema=t.ConstraintsSchema=void 0,n(4723),n(74916),n(68309),n(5212),n(21249),n(82772),n(88674),n(41539),n(89554),n(54747),n(26833),n(26699),n(47042),n(57327),n(69826),n(92222),n(69600);var o=w(n(91669)),i=w(n(89406)),a=w(n(67091)),l=w(n(96486)),s=n(76055),u=w(n(29458)),d=n(52237),c=n(71944),f=w(n(29754)),p=w(n(42657)),m=n(77077),b=n(15253),y=n(87954),h=n(40175),g=n(81873),v=n(40345),_=w(n(55958));function w(e){return e&&e.__esModule?e:{default:e}}function O(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),e}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){D(n,e);var t=R(n);function n(e,r,o,i){var a,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return E(this,n),(a=t.call(this)).nodeInfo=e,a.primaryKeyObj=new u.default({spcname:i.spcname},e),a.fkObj=r(),a.uniqueConsObj=new p.default({spcname:i.spcname},e),a.exConsObj=o(),a.inErd=l,a}return k(n,[{key:"changeColumnOptions",value:function(e){this.primaryKeyObj.changeColumnOptions(e),this.fkObj.changeColumnOptions(e),this.inErd||(this.uniqueConsObj.changeColumnOptions(e),this.exConsObj.changeColumnOptions(e))}},{key:"anyColumnAdded",value:function(e){return l.default.some(l.default.map(e.columns,"name"))}},{key:"canAdd",value:function(e){return!(e.is_partitioned&&this.top.getServerVersion()<11e4)}},{key:"baseFields",get:function(){var e=this;return[{id:"primary_key",label:"",schema:this.primaryKeyObj,editable:!1,type:"collection",group:(0,o.default)("Primary Key"),mode:["edit","create"],canEdit:!0,canDelete:!0,deps:["is_partitioned","typname"],columns:["name","columns"],disabled:this.inCatalog,canAdd:function(t){return e.canAdd(t)},canAddRow:function(t){return(t.primary_key||[]).length<1&&e.anyColumnAdded(t)},depChange:function(t,n,r,o){var i;if(t.is_partitioned&&e.top.getServerVersion()<11e4||(null===(i=t.columns)||void 0===i?void 0:i.length)<=0)return{primary_key:[]};if(o.type==d.SCHEMA_STATE_ACTIONS.SET_VALUE&&"columns"==o.path[o.path.length-1]){var a=t.primary_key[0].columns.map((function(e){return e.column}));return t.columns=t.columns.map((function(e){return C(C({},e),{},{is_primary_key:a.indexOf(e.name)>-1})})),{columns:t.columns}}}},{id:"foreign_key",label:"",schema:this.fkObj,editable:!1,type:"collection",group:(0,o.default)("Foreign Key"),mode:["edit","create"],canEdit:!0,canDelete:!0,deps:["is_partitioned","columns"],canAdd:function(t){return e.canAdd(t)},columns:["name","columns","references_table_name"],disabled:this.inCatalog,canAddRow:e.anyColumnAdded,depChange:function(t){var n;if(t.is_partitioned&&e.top.getServerVersion()<11e4||(null===(n=t.columns)||void 0===n?void 0:n.length)<=0)return{foreign_key:[]}}},{id:"check_group",type:"group",label:(0,o.default)("Check"),visible:!this.inErd},{id:"check_constraint",label:"",schema:new f.default,editable:!1,type:"collection",group:"check_group",mode:["edit","create"],canEdit:!0,canDelete:!0,deps:["is_partitioned"],canAdd:!0,columns:["name","consrc"],disabled:this.inCatalog},{id:"unique_group",type:"group",label:(0,o.default)("Unique"),visible:!this.inErd},{id:"unique_constraint",label:"",schema:this.uniqueConsObj,editable:!1,type:"collection",group:"unique_group",mode:["edit","create"],canEdit:!0,canDelete:!0,deps:["is_partitioned","typname"],columns:["name","columns"],disabled:this.inCatalog,canAdd:function(t){return e.canAdd(t)},canAddRow:e.anyColumnAdded,depChange:function(t){var n;if(t.is_partitioned&&e.top.getServerVersion()<11e4||(null===(n=t.columns)||void 0===n?void 0:n.length)<=0)return{unique_constraint:[]}}},{id:"exclude_group",type:"group",label:(0,o.default)("Exclude"),visible:!this.inErd},{id:"exclude_constraint",label:"",schema:this.exConsObj,editable:!1,type:"collection",group:"exclude_group",mode:["edit","create"],canEdit:!0,canDelete:!0,deps:["is_partitioned"],columns:["name","columns","constraint"],disabled:this.inCatalog,canAdd:function(t){return e.canAdd(t)},canAddRow:e.anyColumnAdded,depChange:function(t){var n;if(t.is_partitioned&&e.top.getServerVersion()<11e4||(null===(n=t.columns)||void 0===n?void 0:n.length)<=0)return{exclude_constraint:[]}}}]}}]),n}(i.default);t.ConstraintsSchema=I;var M=function(e){D(n,e);var t=R(n);function n(e){var r;return E(this,n),(r=t.call(this)).likeRelationOpts=e,r}return k(n,[{key:"isLikeDisable",value:function(e){return!(!this.top.inSchemaWithModelCheck(e)&&(0,s.isEmptyString)(e.typname))}},{key:"isRelationDisable",value:function(e){return!!(0,s.isEmptyString)(e.like_relation)}},{key:"resetVals",value:function(e){if(this.isRelationDisable(e)&&this.top.isNew())return{like_default_value:!1,like_constraints:!1,like_indexes:!1,like_storage:!1,like_comments:!1}}},{key:"baseFields",get:function(){var e=this;return[{id:"like_relation",label:(0,o.default)("Relation"),type:"select",mode:["create"],deps:["typname","like_relation"],options:e.likeRelationOpts,disabled:e.isLikeDisable,depChange:function(t,n){if("typname"==n&&!(0,s.isEmptyString)(t.typname))return t.like_relation=null,C({like_relation:null},e.resetVals(t))}},{id:"like_default_value",label:(0,o.default)("With default values?"),type:"switch",mode:["create"],deps:["like_relation"],disabled:this.isRelationDisable,depChange:function(){return e.resetVals.apply(e,arguments)}},{id:"like_constraints",label:(0,o.default)("With constraints?"),type:"switch",mode:["create"],deps:["like_relation"],disabled:this.isRelationDisable,depChange:function(){return e.resetVals.apply(e,arguments)}},{id:"like_indexes",label:(0,o.default)("With indexes?"),type:"switch",mode:["create"],deps:["like_relation"],disabled:this.isRelationDisable,depChange:function(){return e.resetVals.apply(e,arguments)}},{id:"like_storage",label:(0,o.default)("With storage?"),type:"switch",mode:["create"],deps:["like_relation"],disabled:this.isRelationDisable,depChange:function(){return e.resetVals.apply(e,arguments)}},{id:"like_comments",label:(0,o.default)("With comments?"),type:"switch",mode:["create"],deps:["like_relation"],disabled:this.isRelationDisable,depChange:function(){return e.resetVals.apply(e,arguments)}}]}}]),n}(i.default);t.LikeSchema=M;var q=function(e){D(n,e);var t=R(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return[]},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return[]},u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){return[]},d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(){return[]},f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},p=arguments.length>9&&void 0!==arguments[9]&&arguments[9];return E(this,n),(e=t.call(this,C({name:void 0,oid:void 0,spcoid:void 0,spcname:void 0,relowner:void 0,relacl:void 0,relhasoids:void 0,relhassubclass:void 0,reltuples:void 0,description:void 0,conname:void 0,conkey:void 0,isrepl:void 0,triggercount:void 0,relpersistence:void 0,fillfactor:void 0,toast_tuple_target:void 0,parallel_workers:void 0,reloftype:void 0,typname:void 0,labels:void 0,providers:void 0,is_sys_table:void 0,coll_inherits:[],hastoasttable:!0,toast_autovacuum_enabled:"x",autovacuum_enabled:"x",primary_key:[],foreign_key:[],partition_keys:[],partitions:[],partition_type:"range",is_partitioned:!1,columns:[]},f))).fieldOptions=r,e.schemas=i,e.getPrivilegeRoleSchema=a,e.nodeInfo=o,e.getColumns=l,e.partitionsObj=new c.PartitionsSchema(e.nodeInfo,s,u,d),e.constraintsObj=e.schemas.constraints&&e.schemas.constraints()||{},e.columnsSchema=e.schemas.columns&&e.schemas.columns()||{},e.vacuumSettingsSchema=e.schemas.vacuum_settings&&e.schemas.vacuum_settings()||{},e.partitionKeysObj=new c.PartitionKeysSchema([],s,u),e.inErd=p,e}return k(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"initialise",value:function(e){this.changeColumnOptions(e.columns)}},{key:"inSchemaWithModelCheck",value:function(e){return!(!this.nodeInfo||!("schema"in this.nodeInfo))&&!this.isNew(e)}},{key:"getTableOid",value:function(e){var t,n=O(this.inheritedTableList);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.label===e)return r.tid}}catch(e){n.e(e)}finally{n.f()}}},{key:"canAddRowColumns",value:function(e){return!this.inCatalog()&&!!(0,s.isEmptyString)(e.typname)}},{key:"canEditDeleteRowColumns",value:function(e){return!!(0,s.isEmptyString)(e.inheritedfrom)}},{key:"isPartitioned",value:function(e){return!!e.is_partitioned||this.inCatalog()}},{key:"changeColumnOptions",value:function(e){var t=(e||[]).map((function(e){return{label:e.name,value:e.name,image:"icon-column"}}));this.constraintsObj.changeColumnOptions(t),this.partitionKeysObj.changeColumnOptions(t),this.partitionsObj.changeColumnOptions(t)}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",noEmpty:!0,mode:["properties","create","edit"],readonly:this.inCatalog},{id:"oid",label:(0,o.default)("OID"),type:"text",mode:["properties"]},{id:"relowner",label:(0,o.default)("Owner"),type:"select",options:this.fieldOptions.relowner,noEmpty:!this.inErd,mode:["properties","create","edit"],controlProps:{allowClear:!1},readonly:this.inCatalog,visible:!this.inErd},{id:"schema",label:(0,o.default)("Schema"),type:"select",options:this.fieldOptions.schema,noEmpty:!0,mode:["create","edit"],readonly:this.inCatalog},{id:"spcname",label:(0,o.default)("Tablespace"),visible:!this.inErd,mode:["properties","create","edit"],deps:["is_partitioned"],readonly:this.inCatalog,type:function(n){return{type:"select",options:e.fieldOptions.spcname,controlProps:{allowClear:!!t.isNew(n)}}}},{id:"partition",type:"group",label:(0,o.default)("Partitions"),mode:["edit","create"],min_version:1e5,visible:function(e){return!this.inErd&&!(!t.isNew(e)&&!e.is_partitioned)}},{id:"is_partitioned",label:(0,o.default)("Partitioned table?"),cell:"switch",type:"switch",mode:["properties","create","edit"],min_version:1e5,visible:!this.inErd,readonly:function(e){return!t.isNew(e)}},{id:"is_sys_table",label:(0,o.default)("System table?"),cell:"switch",type:"switch",mode:["properties"],disabled:this.inCatalog},{id:"description",label:(0,o.default)("Comment"),type:"multiline",mode:["properties","create","edit"],disabled:this.inCatalog},{id:"coll_inherits",label:(0,o.default)("Inherited from table(s)"),type:"select",group:(0,o.default)("Columns"),deps:["typname","is_partitioned"],mode:["create","edit"],controlProps:{multiple:!0,allowClear:!1,placeholder:(0,o.default)("Select to inherit from...")},options:this.fieldOptions.coll_inherits,visible:!this.inErd,optionsLoaded:function(e){return t.inheritedTableList=e},disabled:function(e){return!(!e.adding_inherit_cols&&!e.is_partitioned)||!(!t.inCatalog()&&(0,s.isEmptyString)(e.typname))},depChange:function(t,n,r,o){if(o.type==d.SCHEMA_STATE_ACTIONS.SET_VALUE&&"coll_inherits"==o.path[0])return{adding_inherit_cols:!0};if("is_partitioned"===n[0]&&t.is_partitioned){var i,a=O(t.coll_inherits||[]);try{var s=function(){var n=i.value,r=e.getTableOid(n);l.default.remove(t.columns,(function(e){return e.inheritedid==r}))};for(a.s();!(i=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}return{coll_inherits:[]}}},deferredDepChange:function(n,r,o,i){return new Promise((function(r){var o,a,s,u=n.coll_inherits||[],d=i.oldState.coll_inherits||[];u.length>1&&u.length>d.length?(o=l.default.difference(u,d),a=t.getColumns({tid:e.getTableOid(o[0])})):1==u.length&&(a=t.getColumns({tid:e.getTableOid(u[0])})),a&&a.then((function(e){r((function(n){var r=e.map((function(e){return t.columnsSchema.getNewData(e)})),o=[];l.default.isEmpty(n.columns)||(o=n.columns);var i=[];n.columns.forEach((function(e){i.push(e.name)}));for(var a=0,s=Object.values(r);a<s.length;a++){var u=s[a];i.includes(u.name)||o.push(u)}return l.default.isEmpty(o)||(r=o),t.changeColumnOptions(r),{adding_inherit_cols:!1,columns:r}}))})),u.length>0&&u.length<d.length?(o=l.default.difference(d,u),s=e.getTableOid(o[0])):1===d.length&&u.length<1&&(o=d[0],s=e.getTableOid(o)),s&&r((function(e){var n=e.columns;return l.default.remove(e.columns,(function(e){return e.inheritedid==s})),t.changeColumnOptions(n),{adding_inherit_cols:!1,columns:n}}))}))}},{id:"advanced",label:(0,o.default)("Advanced"),type:"group",visible:!0},{id:"rlspolicy",label:(0,o.default)("RLS Policy?"),cell:"switch",type:"switch",mode:["properties","edit","create"],group:"advanced",min_version:90600,depChange:function(t){t.rlspolicy&&e.origData.rlspolicy!=t.rlspolicy&&_.default.alert((0,o.default)("Check Policy?"),(0,o.default)("Please check if any policy exist. If no policy exists for the table, a default-deny policy is used, meaning that no rows are visible or can be modified by other users"))}},{id:"forcerlspolicy",label:(0,o.default)("Force RLS Policy?"),cell:"switch",type:"switch",mode:["properties","edit","create"],deps:["rlspolicy"],group:"advanced",min_version:90600,disabled:function(e){return!e.rlspolicy},depChange:function(e){if(!e.rlspolicy)return{forcerlspolicy:!1}}},{id:"replica_identity",label:(0,o.default)("Replica Identity"),group:"advanced",type:"text",mode:["edit","properties"]},{id:"coll_inherits",label:(0,o.default)("Inherited from table(s)"),type:"text",group:"advanced",mode:["properties"]},{id:"inherited_tables_cnt",label:(0,o.default)("Inherited tables count"),type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"columns",label:(0,o.default)("Columns"),type:"collection",group:(0,o.default)("Columns"),schema:this.columnsSchema,mode:["create","edit"],disabled:this.inCatalog,deps:["typname","is_partitioned"],depChange:function(n,r,o,i){if("columns"===r[0]){var a=n.columns;if(i.type===d.SCHEMA_STATE_ACTIONS.ADD_ROW&&e.inErd){var s,u=null===(s=l.default.maxBy(a,(function(e){return e.attnum})))||void 0===s?void 0:s.attnum;(l.default.isUndefined(u)||l.default.isNull(u))&&(u=-1),a[a.length-1].attnum=u+1}if(t.changeColumnOptions(a),i.path.indexOf("is_primary_key")>-1){var c,f=l.default.slice(i.path,0,-1),p=l.default.get(n,f);if((null===(c=n.primary_key)||void 0===c?void 0:c.length)>0){var m=n.primary_key[0];return p.is_primary_key?(m.columns=l.default.filter(m.columns,(function(e){return e.column!==p.name})),m.columns.push({column:p.name})):m.columns=l.default.filter(m.columns,(function(e){return e.column!==p.name})),m.columns.length<=0?{primary_key:[]}:{primary_key:[m]}}return{primary_key:[t.constraintsObj.primaryKeyObj.getNewData({columns:[{column:p.name}]})]}}}},canAdd:this.canAddRowColumns,canEdit:!0,canDelete:!0,canEditRow:this.canEditDeleteRowColumns,canDeleteRow:this.canEditDeleteRowColumns,uniqueCol:["name"],columns:["name","cltype","attlen","attprecision","attnotnull","is_primary_key","defval"],allowMultipleEmptyRow:!1},{type:"nested-tab",group:(0,o.default)("Constraints"),mode:["edit","create"],schema:t.constraintsObj},{id:"typname",label:(0,o.default)("Of type"),type:"select",mode:["properties","create","edit"],group:"advanced",deps:["coll_inherits"],visible:!this.inErd,disabled:function(e){return!(!t.inSchemaWithModelCheck(e)&&(0,s.isEmptyString)(e.coll_inherits))},options:this.fieldOptions.typname,optionsLoaded:function(e){t.ofTypeTables=e},deferredDepChange:function(e,n,r,i){var a=function(n){var r=[];if(!(0,s.isEmptyString)(e.typname)){var o=l.default.find(t.ofTypeTables||[],(function(t){return t.label==e.typname}));r=o.oftype_columns}n((function(){return t.changeColumnOptions(r),{columns:r,primary_key:[],foreign_key:[],exclude_constraint:[],unique_constraint:[],partition_keys:[],partitions:[]}}))};return!(0,s.isEmptyString)(e.typname)&&(0,s.isEmptyString)(i.oldState.typname)?new Promise((function(e){_.default.confirm((0,o.default)("Remove column definitions?"),(0,o.default)("Changing 'Of type' will remove column definitions."),(function(){a(e)}),(function(){e((function(){return{typname:null}}))}))})):e.typname!=i.oldState.typname?new Promise((function(e){a(e)})):Promise.resolve((function(){}))}},{id:"fillfactor",label:(0,o.default)("Fill factor"),type:"int",mode:["create","edit"],min:10,max:100,group:"advanced",disabled:t.isPartitioned},{id:"toast_tuple_target",label:(0,o.default)("Toast tuple target"),type:"int",mode:["create","edit"],min:128,min_version:11e4,group:"advanced",disabled:t.isPartitioned},{id:"parallel_workers",label:(0,o.default)("Parallel workers"),type:"int",mode:["create","edit"],group:"advanced",min_version:90600,disabled:t.isPartitioned},{id:"relhasoids",label:(0,o.default)("Has OIDs?"),cell:"switch",type:"switch",mode:["properties","create","edit"],group:"advanced",disabled:function(){return t.getServerVersion()>=12e4||t.inCatalog()}},{id:"relpersistence",label:(0,o.default)("Unlogged?"),cell:"switch",type:"switch",mode:["properties","create","edit"],readonly:t.inSchemaWithModelCheck,group:"advanced"},{id:"conname",label:(0,o.default)("Primary key"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"reltuples",label:(0,o.default)("Rows (estimated)"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"rows_cnt",label:(0,o.default)("Rows (counted)"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog,formatter:{fromRaw:function(){return 0},toRaw:function(e){return e}}},{id:"relhassubclass",label:(0,o.default)("Is inherited?"),cell:"switch",type:"switch",mode:["properties"],group:"advanced",disabled:this.inCatalog},{type:"nested-fieldset",label:(0,o.default)("Like"),group:"advanced",mode:["create"],schema:new M(this.fieldOptions.like_relation),visible:!this.inErd},{id:"partition_type",label:(0,o.default)("Partition Type"),editable:!1,type:"select",controlProps:{allowClear:!1},group:"partition",deps:["is_partitioned"],options:function(){var e=[{label:(0,o.default)("Range"),value:"range"},{label:(0,o.default)("List"),value:"list"}];return t.getServerVersion()>=11e4&&e.push({label:(0,o.default)("Hash"),value:"hash"}),Promise.resolve(e)},mode:["create"],min_version:1e5,disabled:function(e){return!e.is_partitioned},readonly:function(e){return!t.isNew(e)}},{id:"partition_keys",label:(0,o.default)("Partition Keys"),schema:t.partitionKeysObj,editable:!0,type:"collection",columns:["key_type","pt_column","expression"].concat(this.inErd?[]:["collationame","op_class"]),group:"partition",mode:["create"],deps:["is_partitioned","partition_type","typname"],canEdit:!1,canDelete:!0,canAdd:function(e){return!(!t.isNew(e)||!e.is_partitioned)},canAddRow:function(e){var t,n=!1,r=1e3;return e.partition_type&&"list"==e.partition_type&&(r=1),(null===(t=e.columns)||void 0===t?void 0:t.length)>0&&(n=l.default.some(l.default.map(e.columns,"name"))),!e.partition_keys||e.partition_keys.length<r&&n},min_version:1e5,depChange:function(e,t,n,r){if(e.typname!=r.oldState.typname)return{partition_keys:[]}}},{id:"partition_scheme",label:(0,o.default)("Partition Scheme"),group:"partition",mode:["edit"],type:function(e){return{type:"note",text:e.partition_scheme||""}},min_version:1e5},{id:"partition_key_note",label:(0,o.default)("Partition Keys"),type:"note",group:"partition",mode:["create"],text:["<ul><li>",(0,o.default)("Partition table supports two types of keys:"),"</li><li>","<strong>",(0,o.default)("Column: "),"</strong>",(0,o.default)("User can select any column from the list of available columns."),"</li><li>","<strong>",(0,o.default)("Expression: "),"</strong>",(0,o.default)("User can specify expression to create partition key."),"</li><li>","<strong>",(0,o.default)("Example: "),"</strong>",(0,o.default)("Let's say, we want to create a partition table based per year for the column 'saledate', having datatype 'date/timestamp', then we need to specify the expression as 'extract(YEAR from saledate)' as partition key."),"</li></ul>"].join(""),min_version:1e5},{id:"partitions",label:(0,o.default)("Partitions"),schema:this.partitionsObj,editable:!0,type:"collection",group:"partition",mode:["edit","create"],deps:["is_partitioned","partition_type","typname"],depChange:function(e,n){if(["is_partitioned","partition_type","typname"].indexOf(n[0])>=0&&t.isNew(e))return{partitions:[]}},canEdit:!0,canDelete:!0,customDeleteTitle:(0,o.default)("Detach Partition"),customDeleteMsg:(0,o.default)("Are you sure you wish to detach this partition?"),columns:["is_attach","partition_name","is_default","values_from","values_to","values_in","values_modulus","values_remainder"],canAdd:function(e){return!!e.is_partitioned},min_version:1e5},{id:"partition_note",label:(0,o.default)("Partitions"),type:"note",group:"partition",mode:["create"],text:["<ul><li>","<strong>",(0,o.default)("Create a table: "),"</strong>",(0,o.default)("User can create multiple partitions while creating new partitioned table. Operation switch is disabled in this scenario."),"</li><li>","<strong>",(0,o.default)("Edit existing table: "),"</strong>",(0,o.default)("User can create/attach/detach multiple partitions. In attach operation user can select table from the list of suitable tables to be attached."),"</li><li>","<strong>",(0,o.default)("Default: "),"</strong>",(0,o.default)("The default partition can store rows that do not fall into any existing partition’s range or list."),"</li><li>","<strong>",(0,o.default)("From/To/In input: "),"</strong>",(0,o.default)("From/To/In input: Values for these fields must be quoted with single quote. For more than one partition key values must be comma(,) separated."),"</li><li>","<strong>",(0,o.default)("Example: From/To: "),"</strong>",(0,o.default)("Enabled for range partition. Consider partitioned table with multiple keys of type Integer, then values should be specified like '100','200'."),"</li><li>","<strong>",(0,o.default)("In: "),"</strong>",(0,o.default)("Enabled for list partition. Values must be comma(,) separated and quoted with single quote."),"</li><li>","<strong>",(0,o.default)("Modulus/Remainder: "),"</strong>",(0,o.default)("Enabled for hash partition."),"</li></ul>"].join(""),min_version:1e5},{type:"group",id:"parameters",label:(0,o.default)("Parameters"),visible:!this.inErd},{type:"nested-tab",group:"parameters",mode:["edit","create"],deps:["is_partitioned"],schema:this.vacuumSettingsSchema,visible:!this.inErd},{id:"security_group",type:"group",label:(0,o.default)("Security"),visible:!this.inErd},{id:"relacl_str",label:(0,o.default)("Privileges"),disabled:this.inCatalog,type:"text",mode:["properties"],group:"security_group"},{id:"relacl",label:(0,o.default)("Privileges"),type:"collection",group:"security_group",schema:this.getPrivilegeRoleSchema(["a","r","w","d","D","x","t"]),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee"]},{id:"seclabels",label:(0,o.default)("Security labels"),canEdit:!1,schema:new a.default,editable:!1,canAdd:!0,type:"collection",min_version:90100,mode:["edit","create"],group:"security_group",canDelete:!0,control:"unique-col-collection"},{id:"vacuum_settings_str",label:(0,o.default)("Storage settings"),type:"multiline",group:"advanced",mode:["properties"]}]}},{key:"validate",value:function(e,t){return!(!e.is_partitioned||!this.isNew(e)||e.partition_keys&&!(e.partition_keys&&e.partition_keys.length<=0))&&(t("partition_keys",(0,o.default)("Please specify at least one key for partitioned table.")),!0)}}],[{key:"getErdSupportedData",value:function(e){var t=C({},e);return(t=l.default.pick(t,["name","schema","description","rlspolicy","forcerlspolicy","fillfactor","toast_tuple_target","parallel_workers","relhasoids","relpersistence","columns","primary_key","foreign_key"])).columns=t.columns.map((function(e){return delete e.inheritedfromtable,e})),t.foreign_key=(t.foreign_key||[]).map((function(e){return e.autoindex=!1,e.coveringindex&&(e.autoindex=!0),e})),t}}]),n}(i.default);t.default=q},80136:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EventSchema=void 0,n(68309),n(82772),n(47941),n(68304),n(30489);var i=s(n(91669)),a=s(n(89406)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){b(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,n),(e=t.call(this,d({evnt_update:!1,evnt_insert:!1,evnt_delete:!1,evnt_truncate:!1,is_row_trigger:!1,is_constraint_trigger:!1},o))).fieldOptions=d({nodeInfo:null},r),e.nodeInfo=e.fieldOptions.nodeInfo,e}return m(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"inSchemaWithModelCheck",value:function(e){return!this.nodeInfo||!("schema"in this.nodeInfo)||!this.isNew(e)}},{key:"baseFields",get:function(){var e=this;return[{id:"evnt_insert",label:(0,i.default)("INSERT"),type:"switch",mode:["create","edit","properties"],group:(0,i.default)("Events"),readonly:function(t){var n=t.evnt_insert;return!(!r.isUndefined(n)&&e.nodeInfo&&"ppas"==e.nodeInfo.server.server_type&&e.isNew(t))&&e.inSchemaWithModelCheck(t)}},{id:"evnt_update",label:(0,i.default)("UPDATE"),type:"switch",mode:["create","edit","properties"],group:(0,i.default)("Events"),readonly:function(t){var n=t.evnt_update;return!(!r.isUndefined(n)&&e.nodeInfo&&"ppas"==e.nodeInfo.server.server_type&&e.isNew(t))&&e.inSchemaWithModelCheck(t)}},{id:"evnt_delete",label:(0,i.default)("DELETE"),type:"switch",mode:["create","edit","properties"],group:(0,i.default)("Events"),readonly:function(t){var n=t.evnt_delete;return!(!r.isUndefined(n)&&e.nodeInfo&&"ppas"==e.nodeInfo.server.server_type&&e.isNew(t))&&e.inSchemaWithModelCheck(t)}},{id:"evnt_truncate",label:(0,i.default)("TRUNCATE"),type:"switch",group:(0,i.default)("Events"),deps:["is_row_trigger","is_constraint_trigger"],readonly:function(t){var n=t.is_constraint_trigger,o=t.is_row_trigger,i=e.nodeInfo?e.nodeInfo.server.server_type:null;return 1==o?(t.evnt_truncate=!1,!0):!("ppas"===i&&!r.isUndefined(n)&&!r.isUndefined(o)&&!1===n&&e.isNew(t))&&e.inSchemaWithModelCheck(t)}}]}},{key:"validate",value:function(e,t){if((0,l.isEmptyString)(e.service)){if(!(!e.tfunction||e.evnt_truncate||e.evnt_delete||e.evnt_update||e.evnt_insert))return t("evnt_insert",(0,i.default)("Specify at least one event.")),!0;t("evnt_insert",null)}}}]),n}(a.default);t.EventSchema=_;var w=function(e){b(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,n),(e=t.call(this,d({name:void 0,is_row_trigger:!0,fires:"BEFORE"},o))).fieldOptions=d({triggerFunction:[]},r),e.nodeInfo=e.fieldOptions.nodeInfo,e}return m(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"inSchemaWithModelCheck",value:function(e){return!("schema"in this.nodeInfo)||!this.isNew(e)}},{key:"disableTransition",value:function(e){if(!this.isNew())return!0;var t=!1,n=null,o=e.name,i=0;return-1==r.indexOf(Object.keys(this.nodeInfo),"table")||this.nodeInfo.server.version<1e5||("tgoldtable"==o?n="evnt_delete":"tgnewtable"==o&&(n="evnt_insert"),e.evnt_insert&&i++,e.evnt_update&&i++,e.evnt_delete&&i++,e.is_constraint_trigger||"AFTER"!=e.fires||!e.evnt_update&&!e[n]||1!=i||(t=e.evnt_update&&r.size(e.columns)>=1&&""!=e.columns[0]),t&&e.name&&(e.name=null),t)}},{key:"isDisable",value:function(e){return!e.is_constraint_trigger}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,i.default)("Name"),cell:"text",type:"text",disabled:e.inCatalog(),noEmpty:!0},{id:"oid",label:(0,i.default)("OID"),cell:"text",type:"int",mode:["properties"]},{id:"is_enable_trigger",label:(0,i.default)("Trigger enabled?"),mode:["edit","properties"],group:(0,i.default)("Definition"),type:"select",disabled:function(){return"catalog"in e.nodeInfo||"view"in e.nodeInfo},options:[{label:(0,i.default)("Enable"),value:"O"},{label:(0,i.default)("Enable Replica"),value:"R"},{label:(0,i.default)("Enable Always"),value:"A"},{label:(0,i.default)("Disable"),value:"D"}],controlProps:{allowClear:!1}},{id:"is_row_trigger",label:(0,i.default)("Row trigger?"),type:"switch",group:(0,i.default)("Definition"),mode:["create","edit","properties"],deps:["is_constraint_trigger"],readonly:function(t){var n;if(!e.isNew())return!0;if(r.has(e.nodeInfo,"table")&&r.has(e.nodeInfo.table,"is_partitioned")&&e.nodeInfo.table.is_partitioned&&(null===(n=e.nodeInfo)||void 0===n?void 0:n.server.version)<11e4)return t.is_row_trigger=!1,!0;var o=t.is_constraint_trigger;if(e.inSchemaWithModelCheck(t)){var i=t.is_row_trigger;return!(!r.isUndefined(i)&&"ppas"==e.nodeInfo.server.server_type)}return!r.isUndefined(o)&&!0===o&&(t.is_row_trigger=!0,!0)}},{id:"is_constraint_trigger",label:(0,i.default)("Constraint trigger?"),type:"switch",mode:["create","edit","properties"],group:(0,i.default)("Definition"),deps:["tfunction"],readonly:function(t){var n=t.tfunction;return r.has(e.nodeInfo,"table")&&r.has(e.nodeInfo.table,"is_partitioned")&&e.nodeInfo.table.is_partitioned||r.has(e.nodeInfo,"view")||"ppas"===e.nodeInfo.server.server_type&&!r.isUndefined(n)&&"Inline EDB-SPL"===n?(t.is_constraint_trigger=!1,!0):e.inSchemaWithModelCheck(t)},disabled:function(){return"view"in e.nodeInfo}},{id:"tgdeferrable",label:(0,i.default)("Deferrable?"),type:"switch",group:(0,i.default)("Definition"),mode:["create","edit","properties"],deps:["is_constraint_trigger"],readonly:function(t){var n=t.is_constraint_trigger;return!!e.inSchemaWithModelCheck(t)||!(!r.isUndefined(n)&&!0===n)&&(t.tgdeferrable&&(t.tgdeferrable=!1),!0)},disabled:function(t){return e.isDisable(t)}},{id:"tginitdeferred",label:(0,i.default)("Deferred?"),type:"switch",group:(0,i.default)("Definition"),mode:["create","edit","properties"],deps:["tgdeferrable","is_constraint_trigger"],readonly:function(t){var n=t.tgdeferrable;return!!e.inSchemaWithModelCheck(t)||!(!r.isUndefined(n)&&n)&&(e.tginitdeferred&&(t.tginitdeferred=!1),!t.is_constraint_trigger)},disabled:function(t){return e.isDisable(t)}},{id:"tfunction",label:(0,i.default)("Trigger function"),type:"select",readonly:e.inSchemaWithModelCheck,mode:["create","edit","properties"],group:(0,i.default)("Definition"),control:"node-ajax-options",url:"get_triggerfunctions",url_jump_after_node:"schema",options:e.fieldOptions.triggerFunction,cache_node:"trigger_function"},{id:"tgargs",label:(0,i.default)("Arguments"),cell:"text",group:(0,i.default)("Definition"),type:"text",mode:["create","edit","properties"],deps:["tfunction"],readonly:function(t){var n=t.tfunction,o=e.nodeInfo.server.server_type;return!!e.inSchemaWithModelCheck(t)||"ppas"===o&&!r.isUndefined(n)&&"Inline EDB-SPL"===n&&(t.tgargs=void 0,!0)}},{id:"fires",label:(0,i.default)("Fires"),deps:["is_constraint_trigger"],mode:["create","edit","properties"],group:(0,i.default)("Events"),options:function(){return-1!=r.indexOf(Object.keys(e.nodeInfo),"table")?[{label:"BEFORE",value:"BEFORE"},{label:"AFTER",value:"AFTER"}]:[{label:"BEFORE",value:"BEFORE"},{label:"AFTER",value:"AFTER"},{label:"INSTEAD OF",value:"INSTEAD OF"}]},type:"select",controlProps:{allowClear:!1},readonly:function(t){if(!e.isNew())return!0;var n=t.is_constraint_trigger;if(e.inSchemaWithModelCheck(t)){var o=t.fires;return!(!r.isUndefined(o)&&"ppas"==e.nodeInfo.server.server_type)}return!r.isUndefined(n)&&!0===n&&(t.fires="AFTER",!0)}},{type:"nested-fieldset",mode:["create","edit","properties"],label:(0,i.default)("Events"),group:(0,i.default)("Events"),schema:new _({nodeInfo:e.nodeInfo})},{id:"whenclause",label:(0,i.default)("When"),type:"sql",readonly:e.inSchemaWithModelCheck,mode:["create","edit","properties"],visible:!0,group:(0,i.default)("Events")},{id:"columns",label:(0,i.default)("Columns"),type:"select",controlProps:{multiple:!0},deps:["evnt_update"],group:(0,i.default)("Events"),options:e.fieldOptions.columns,readonly:function(t){if(e.nodeInfo&&"catalog"in e.nodeInfo)return!0;if(!e.isNew())return!0;var n=t.evnt_update;return!(!r.isUndefined(n)&&n)}},{id:"tgoldtable",label:(0,i.default)("Old table"),type:"text",group:(0,i.default)("Transition"),cell:"text",mode:["create","edit","properties"],deps:["fires","is_constraint_trigger","evnt_insert","evnt_update","evnt_delete","columns"],disabled:e.disableTransition},{id:"tgnewtable",label:(0,i.default)("New table"),type:"text",group:(0,i.default)("Transition"),cell:"string",mode:["create","edit","properties"],deps:["fires","is_constraint_trigger","evnt_insert","evnt_update","evnt_delete","columns"],disabled:e.disableTransition},{id:"prosrc",label:(0,i.default)("Code"),group:(0,i.default)("Code"),type:"sql",mode:["create","edit"],deps:["tfunction"],isFullTab:!0,visible:!0,disabled:function(t){var n=t.tfunction;return"ppas"!==e.nodeInfo.server.server_type||r.isUndefined(n)||"Inline EDB-SPL"!==n}},{id:"is_sys_trigger",label:(0,i.default)("System trigger?"),cell:"text",type:"switch",disabled:e.inSchemaWithModelCheck,mode:["properties"]},{id:"description",label:(0,i.default)("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:e.inCatalog()}]}},{key:"validate",value:function(e,t){if((0,l.isEmptyString)(e.service)){if((0,l.isEmptyString)(e.tfunction))return t("tfunction",(0,i.default)("Trigger function cannot be empty.")),!0;t("tfunction",null)}}}]),n}(a.default);t.default=w},31434:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getCompositeSchema=function(e,t,n){return new E({types:function(){return(0,l.getNodeAjaxOptions)("get_types",e,t,n,{cacheLevel:"domain"})},collations:function(){return(0,l.getNodeAjaxOptions)("get_collations",e,t,n)}})},t.getRangeSchema=function(e,t,n){return new C({typnameList:function(){return(0,l.getNodeAjaxOptions)("get_stypes",e,t,n)},getSubOpClass:function(r){return new Promise((function(o,i){var a,l=(0,u.default)(),d=e.generate_url.apply(e,[null,"get_subopclass",n,!1,t]);s.default.isUndefined(r)||""==r?o(a):l.get(d,{params:{typname:r}}).then((function(e){a=e.data.data,o(a)})).catch((function(e){i(e)}))}))},collationsList:function(){return(0,l.getNodeAjaxOptions)("get_collations",e,t,n)},getCanonicalFunctions:function(r){return new Promise((function(o,i){var a=(0,u.default)(),l=e.generate_url.apply(e,[null,"get_canonical",n,!1,t]),d=[];s.default.isUndefined(r)||""==r||null==r?o(d):a.get(l,{params:{name:r}}).then((function(e){d=e.data.data,o(d)})).catch((function(e){i(e)}))}))},getSubDiffFunctions:function(r,o){return new Promise((function(i,a){var l,d=(0,u.default)(),c=e.generate_url.apply(e,[null,"get_stypediff",n,!1,t]);s.default.isUndefined(r)||""==r||s.default.isUndefined(o)||""==o?i(l):d.get(c,{params:{typname:r,opcname:o}}).then((function(e){l=e.data.data,i(l)})).catch((function(e){a(e)}))}))}},{node_info:t})},t.getExternalSchema=function(e,t,n){return new P({externalFunctionsList:function(){return(0,l.getNodeAjaxOptions)("get_external_functions",e,t,n)},types:function(){return(0,l.getNodeAjaxOptions)("get_types",e,t,n,{cacheLevel:"domain"})}},{node_info:t})},t.getDataTypeSchema=function(e,t,n){return new j({types:function(){return(0,l.getNodeAjaxOptions)("get_types",e,t,n,{cacheLevel:"domain"})}})},t.RangeSchema=t.ExternalSchema=t.EnumerationSchema=t.CompositeSchema=t.default=void 0,n(88674),n(41539),n(89554),n(54747),n(68309),n(26699),n(32023),n(32564),n(21249),n(4723),n(74916),n(40561);var o=c(n(91669)),i=c(n(89406)),a=c(n(67091)),l=n(77077),s=c(n(81311)),u=c(n(2832)),d=n(76055);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return e.typtype===t}var x=function(e){g(n,e);var t=_(n);function n(){return b(this,n),t.call(this,{oid:void 0,label:void 0})}return h(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"label",label:(0,o.default)("Label"),type:"text",cell:"text",minWidth:640,editable:function(t){return!!s.default.isUndefined(e.isNew)||e.isNew(t)}}]}}]),n}(i.default);t.EnumerationSchema=x;var C=function(e){g(n,e);var t=_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b(this,n),(e=t.call(this,p({typname:null,oid:void 0,is_sys_type:!1},i))).fieldOptions=p({typnameList:[],collationsList:[]},r),e.nodeInfo=p({},o.node_info),e}return h(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"typname",label:(0,o.default)("Subtype"),type:function(e){return{type:"select",options:t.fieldOptions.typnameList,optionsLoaded:function(e){t.fieldOptions.typnameList=e},controlProps:{allowClear:!0,filter:function(n){var r=[];return e&&t.isNew(e)?(n&&n.length>0&&(e.subtypes=n),n.forEach((function(e){e&&""==e.label||r.push({label:e.label,value:e.value})}))):r=n,r}}}},controlProps:{allowClear:!0,placeholder:"",width:"100%"},mode:["properties","create","edit"],group:(0,o.default)("Range Type"),disabled:function(){return t.inCatalog()},readonly:function(e){return!t.isNew(e)}},{id:"opcname",label:(0,o.default)("Subtype operator class"),cell:"string",mode:["properties","create","edit"],group:(0,o.default)("Range Type"),disabled:function(){return t.inCatalog()},readonly:function(e){return!t.isNew(e)},deps:["typname"],type:function(e){return{type:"select",options:function(){return t.fieldOptions.getSubOpClass(e.typname)},optionsReloadBasis:e.typname,controlProps:{allowClear:!0,filter:function(n){return t.getFilterOptions(e,n)}}}}},{id:"collname",label:(0,o.default)("Collation"),cell:"string",type:function(e){return{type:"select",options:t.fieldOptions.collationsList,optionsLoaded:function(e){t.fieldOptions.collationsList=e},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){return t.getFilterOptions(e,n)}}}},mode:["properties","create","edit"],group:(0,o.default)("Range Type"),deps:["typname"],controlProps:{allowClear:!0,placeholder:"",width:"100%"},disabled:function(n){var r=t.inCatalog();if(r)return r;var o=n.typname;return s.default.isUndefined(o)||s.default.each(n.subtypes,(function(e){o===e.label&&(r=e.is_collate)})),r||(n.collname="",e.options=[]),!r},readonly:function(e){return!t.isNew(e)}},{id:"rngcanonical",label:(0,o.default)("Canonical function"),cell:"string",type:function(e){return{type:"select",options:function(){return t.fieldOptions.getCanonicalFunctions(e.name)},optionsReloadBasis:e.typname,controlProps:{allowClear:!0,filter:function(n){return t.getFilterOptions(e,n)}}}},mode:["properties","create","edit"],group:(0,o.default)("Range Type"),disabled:function(){return t.inCatalog()},readonly:function(e){return!t.isNew(e)},deps:["name","typname"]},{id:"rngsubdiff",label:(0,o.default)("Subtype diff function"),cell:"string",mode:["properties","create","edit"],group:(0,o.default)("Range Type"),disabled:function(){return t.inCatalog()},readonly:function(e){return!t.isNew(e)},deps:["typname","opcname"],type:function(e){return{type:"select",options:function(){return t.fieldOptions.getSubDiffFunctions(e.typname,e.opcname)},optionsReloadBasis:e.typname+e.opcname,controlProps:{allowClear:!0,filter:function(n){return t.getFilterOptions(e,n)}}}}}]}},{key:"validate",value:function(e,t){if("r"===e.typtype&&(0,d.isEmptyString)(e.typname))return t("typname",(0,o.default)("Subtype cannot be empty")),!0}}]),n}(i.default);t.RangeSchema=C;var P=function(e){g(n,e);var t=_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b(this,n),(e=t.call(this,p({name:null,typinput:void 0,oid:void 0,is_sys_type:!1,typtype:void 0},i))).fieldOptions=p({types:[],externalFunctionsList:[]},r),e.fieldOptions.typeCategory=[{label:"Array types",value:"A"},{label:"Boolean types",value:"B"},{label:"Composite types",value:"C"},{label:"Date/time types",value:"D"},{label:"Enum types",value:"E"},{label:"Geometric types",value:"G"},{label:"Network address types",value:"I"},{label:"Numeric types",value:"N"},{label:"Pseudo-types",value:"P"},{label:"String types",value:"S"},{label:"Timespan types",value:"T"},{label:"User-defined types",value:"U"},{label:"Bit-string types",value:"V"},{label:"unknown type",value:"X"}],e.fieldOptions.typeAlignOptions=[{label:"char",value:"c"},{label:"int2",value:"s"},{label:"int4",value:"i"},{label:"double",value:"d"}],e.fieldOptions.typStorageOptions=[{label:"PLAIN",value:"p"},{label:"EXTERNAL",value:"e"},{label:"MAIN",value:"m"},{label:"EXTENDED",value:"x"}],e.nodeInfo=p({},o.node_info),e}return h(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"external_func_combo",value:function(e){var t=[];return s.default.each(e,(function(e){e&&""==e.label||"all"==e.cbtype&&t.push(e)})),t}},{key:"filterFunctionOptions",value:function(e,t){return e&&this.isNew(e)?this.external_func_combo(t):t}},{key:"getFunctionType",value:function(e){var t=this;return{type:"select",options:t.fieldOptions.externalFunctionsList,optionsLoaded:function(e){t.fieldOptions.externalFunctionsList=e},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){return t.filterFunctionOptions(e,n)}}}}},{key:"baseFields",get:function(){var e=this;return[{id:"spacer_ctrl",group:(0,o.default)("Required"),mode:["edit","create"],type:"spacer"},{id:"typinput",label:(0,o.default)("Input function"),mode:["properties","create","edit"],group:(0,o.default)("Required"),disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},type:function(t){return e.getFunctionType(t)}},{id:"typoutput",label:(0,o.default)("Output function"),mode:["properties","create","edit"],group:(0,o.default)("Required"),type:function(t){return e.getFunctionType(t)},readonly:function(t){return!e.isNew(t)},disabled:function(){return e.inCatalog()},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"spacer_ctrl_optional_1",group:(0,o.default)("Optional-1"),mode:["edit","create"],type:"spacer"},{id:"typreceive",label:(0,o.default)("Receive function"),type:function(t){return{type:"select",options:e.fieldOptions.externalFunctionsList,optionsLoaded:function(t){e.fieldOptions.externalFunctionsList=t},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){return t&&e.isNew(t)?e.external_func_combo(n):n}}}},group:(0,o.default)("Optional-1"),mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typsend",label:(0,o.default)("Send function"),group:(0,o.default)("Optional-1"),type:function(t){return{type:"select",options:e.fieldOptions.externalFunctionsList,optionsLoaded:function(t){e.fieldOptions.externalFunctionsList=t},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){return e.filterFunctionOptions(t,n)}}}},mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typmodin",label:(0,o.default)("Typmod in function"),type:function(t){return{type:"select",options:e.fieldOptions.externalFunctionsList,optionsLoaded:function(t){e.fieldOptions.externalFunctionsList=t},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){var r=[];return t&&e.isNew(t)?s.default.each(n,(function(e){e&&""==e.label||"typmodin"!==e.cbtype&&"all"!==e.cbtype||r.push(e)})):r=n,r}}}},mode:["properties","create","edit"],group:(0,o.default)("Optional-1"),disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typmodout",label:(0,o.default)("Typmod out function"),group:(0,o.default)("Optional-1"),type:function(t){return{type:"select",options:e.fieldOptions.externalFunctionsList,optionsLoaded:function(t){e.fieldOptions.externalFunctionsList=t},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){var r=[];return t&&e.isNew(t)?s.default.each(n,(function(e){e&&""==e.label||"typmodout"!==e.cbtype&&"all"!==e.cbtype||r.push(e)})):r=n,r}}}},mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"typlen",label:(0,o.default)("Internal length"),cell:"integer",group:(0,o.default)("Optional-1"),type:"int",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"variable",label:(0,o.default)("Variable?"),cell:"switch",group:(0,o.default)("Optional-1"),type:"switch",mode:["create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"typdefault",label:(0,o.default)("Default?"),cell:"string",group:(0,o.default)("Optional-1"),type:"text",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"typanalyze",label:(0,o.default)("Analyze function"),group:(0,o.default)("Optional-1"),type:function(t){return e.getFunctionType(t)},mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typcategory",label:(0,o.default)("Category type"),cell:"string",group:(0,o.default)("Optional-1"),type:function(){return{type:"select",options:e.fieldOptions.typeCategory,optionsLoaded:function(t){e.fieldOptions.typeCategory=t},controlProps:{allowClear:!0,placeholder:"",width:"100%"}}},mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typispreferred",label:(0,o.default)("Preferred?"),type:"switch",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},group:(0,o.default)("Optional-1")},{id:"spacer_ctrl_optional_2",group:(0,o.default)("Optional-2"),mode:["edit","create"],type:"spacer"},{id:"element",label:(0,o.default)("Element type"),group:(0,o.default)("Optional-2"),type:function(t){return{type:"select",options:e.fieldOptions.types,controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){var r=[];return t&&e.isNew(t)?s.default.each(n,(function(e){e&&""==e.label||r.push(e)})):r=n,r}}}},mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"typdelim",label:(0,o.default)("Delimiter"),cell:"string",type:"text",mode:["properties","create","edit"],group:(0,o.default)("Optional-2"),disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"typalign",label:(0,o.default)("Alignment type"),cell:"string",group:(0,o.default)("Optional-2"),type:"select",options:e.fieldOptions.typeAlignOptions,mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typstorage",label:(0,o.default)("Storage type"),type:"select",mode:["properties","create","edit"],group:(0,o.default)("Optional-2"),cell:"string",disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"},options:e.fieldOptions.typStorageOptions},{id:"typbyval",label:(0,o.default)("Passed by value?"),cell:"switch",type:"switch",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},group:(0,o.default)("Optional-2")},{id:"is_collatable",label:(0,o.default)("Collatable?"),cell:"switch",min_version:90100,group:(0,o.default)("Optional-2"),type:"switch",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}}]}},{key:"validate",value:function(e,t){if("b"===e.typtype){if((0,d.isEmptyString)(e.typinput))return t("typinput",(0,o.default)("Input function cannot be empty")),!0;if((0,d.isEmptyString)(e.typoutput))return t("typoutput",(0,o.default)("Output function cannot be empty")),!0}return!1}}]),n}(i.default);t.ExternalSchema=P;var E=function(e){g(n,e);var t=_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b(this,n),(e=t.call(this,p({oid:void 0,is_sys_type:!1,attnum:void 0,member_name:void 0,type:void 0,tlength:null,is_tlength:!1,precision:void 0,is_precision:!1,collation:void 0,min_val:void 0,max_val:void 0},o))).fieldOptions=p({types:[],collations:[]},r),e.type_options={},e}return h(n,[{key:"setTypeOptions",value:function(e){var t=this;e.forEach((function(e){t.type_options[e.value]=p({},e)}))}},{key:"idAttribute",get:function(){return"oid"}},{key:"onTypeChange",value:function(e,t){if(s.default.isArray(t)&&"type"==t[2])return p(p({},e),{},{value:null})}},{key:"baseFields",get:function(){var e=this;return[{id:"member_name",label:(0,o.default)("Member Name"),type:"text",cell:"text"},{id:"type",label:(0,o.default)("Type"),type:"text",cell:function(){return{cell:"select",options:e.fieldOptions.types,optionsLoaded:function(t){e.setTypeOptions(t)},controlProps:{allowClear:!1}}}},{id:"tlength",label:(0,o.default)("Length/Precision"),deps:["type"],type:"text",disabled:!1,cell:"int",depChange:function(e,t){if(s.default.isArray(t)&&"type"==t[2])return e.tlength=null,p(p({},e),{},{value:null})},editable:function(t){var n=t.type;return e.type_options&&s.default.each(e.type_options,(function(e){n==e.value&&(e.length?(t.is_tlength=!0,t.min_val=e.min_val,t.max_val=e.max_val):t.is_tlength=!1)})),t.is_tlength}},{id:"precision",label:(0,o.default)("Scale"),deps:["type"],type:"text",disabled:!1,cell:"int",depChange:function(t,n){return e.onTypeChange(t,n)},editable:function(t){var n=t.type;return e.type_options&&s.default.each(e.type_options,(function(e){n==e.value&&(e.precision?(t.is_precision=!0,t.min_val=e.min_val,t.max_val=e.max_val):t.is_precision=!1)})),t.is_precision}},{id:"collation",label:(0,o.default)("Collation"),type:"text",depChange:function(t,n){return e.onTypeChange(t,n)},cell:function(){return{cell:"select",options:e.fieldOptions.collations,controlProps:{allowClear:!1}}},deps:["type"],editable:function(t){var n=t.type,r=!1;return e.type_options&&s.default.each(e.type_options,(function(e){n==e.value&&e.is_collatable&&(r=!0)})),r}}]}},{key:"validate",value:function(e,t){var n=this,r=null;if(n.top&&n.top.sessData&&"c"===n.top.sessData.typtype){if((0,d.isEmptyString)(e.member_name))return t("member_name",r=(0,o.default)("Please specify the value for member name.")),!0;if((0,d.isEmptyString)(e.type))return t("type",r=(0,o.default)("Please specify the type.")),!0;(s.default.isUndefined(r)||null==r)&&(t("member_name",null),t("type",null))}return!1}}]),n}(i.default);t.CompositeSchema=E;var j=function(e){g(n,e);var t=_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b(this,n),(e=t.call(this,p({oid:void 0,is_sys_type:!1,attnum:void 0,member_name:void 0,type:void 0,tlength:null,is_tlength:!1,precision:void 0,is_precision:!1,min_val:void 0,max_val:void 0,attlen:void 0,min_val_attlen:void 0,max_val_attlen:void 0,attprecision:null,min_val_attprecision:void 0,max_val_attprecision:void 0},o))).types=r.types,e.type_options=[],e}return h(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"type",label:(0,o.default)("Data Type"),group:(0,o.default)("Definition"),mode:["edit","create"],disabled:!1,readonly:function(t){return!e.isNew(t)},node:"type",cache_node:"domain",editable:!0,deps:["typtype"],type:function(t){return{type:"select",options:e.types,optionsLoaded:function(t){e.types=t},controlProps:{allowClear:!1,filter:function(e){var n=[];return e.forEach((function(e){e.value.includes("[]")||n.push(e)})),t.type_options=n,n}}}}},{id:"maxsize",group:(0,o.default)("Definition"),label:(0,o.default)("Size"),type:"int",deps:["typtype"],cell:"int",mode:["create","edit"],readonly:function(t){return!e.isNew(t)},visible:function(e){return S(e,"V")}},{id:"tlength",group:(0,o.default)("Data Type"),label:(0,o.default)("Length/Precision"),mode:["edit","create"],deps:["type"],type:"text",cell:"int",readonly:function(t){return!e.isNew(t)},visible:function(e){return S(e,"N")},disabled:function(e){var t=e.type,n=!0;return e.type_options&&s.default.each(e.type_options,(function(r){t==r.value&&r.length&&(e.min_val_attlen=r.min_val,e.max_val_attlen=r.max_val,n=!1)})),n&&setTimeout((function(){e.attlen&&(e.attlen=null)}),10),n},editable:function(e){var t=e.type;return e.type_options&&s.default.each(e.type_options,(function(n){t==n.value&&(n.length?(e.is_tlength=!0,e.min_val=n.min_val,e.max_val=n.max_val):e.is_tlength=!1)})),e.is_tlength}},{id:"precision",group:(0,o.default)("Data Type"),label:(0,o.default)("Scale"),mode:["edit","create"],deps:["type"],type:"text",readonly:function(t){return!e.isNew(t)},cell:"int",visible:function(e){return S(e,"N")},disabled:function(e){var t=e.type,n=!0;return s.default.each(e.type_options,(function(r){t==r.value&&r.precision&&(e.min_val_attprecision=0,e.max_val_attprecision=r.max_val,n=!1)})),n&&setTimeout((function(){e.attprecision&&(e.attprecision=null)}),10),n},editable:function(e){var t=e.type;return e.type_options&&s.default.each(e.type_options,(function(n){t==n.value&&(n.precision?(e.is_precision=!0,e.min_val=n.min_val,e.max_val=n.max_val):e.is_precision=!1)})),e.is_precision}}]}}]),n}(i.default),k=function(e){g(n,e);var t=_(n);function n(e,r,o,i,a){var l,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};return b(this,n),(l=t.call(this,p({name:null,oid:void 0,is_sys_type:!1,typtype:void 0,typeowner:void 0,schema:void 0},u))).fieldOptions=p({roles:[],schemas:[],server_info:[],node_info:[]},s),l.getPrivilegeRoleSchema=e,l.compositeSchema=r(),l.getRangeSchema=o,l.getExternalSchema=i,l.getDataTypeSchema=a,l.nodeInfo=l.fieldOptions.node_info,l}return h(n,[{key:"isInvalidColumnAdded",value:function(e){var t=s.default.map(e.enum,"label"),n=!1;return 1==t.length&&null==t[0]?n=!0:t.forEach((function(e){null==e&&(n=!0)})),n}},{key:"schemaCheck",value:function(e){return!this.fieldOptions.node_info||!("schema"in this.fieldOptions.node_info)||(!e||!this.isNew(e)&&(e&&"p"===e.typtype))}},{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",mode:["properties","create","edit"],noEmpty:!0,disabled:function(t){return e.schemaCheck(t)}},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"typeowner",label:(0,o.default)("Owner"),cell:"string",mode:["properties","create","edit"],noEmpty:!0,type:"select",options:this.fieldOptions.roles,controlProps:{allowClear:!1},disabled:function(){return e.inCatalog()}},{id:"schema",label:(0,o.default)("Schema"),cell:"string",mode:["create","edit"],noEmpty:!0,disabled:function(t){return e.schemaCheck(t)},type:function(t){return{type:"select",options:e.fieldOptions.schemas,optionsLoaded:function(t){e.fieldOptions.schemas=t},controlProps:{allowClear:!0,filter:function(n){var r=[];return t&&e.isNew(t)?n.forEach((function(e){e&&e.label.match(/^pg_/)||r.push({label:e.label,value:e.value,image:"icon-schema"})})):r=n,r}}}}},{id:"typtype",label:(0,o.default)("Type"),mode:["create","edit"],group:(0,o.default)("Definition"),type:"select",disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!1},options:function(){var t=[{label:(0,o.default)("Composite"),value:"c"},{label:(0,o.default)("Enumeration"),value:"e"},{label:(0,o.default)("External"),value:"b"},{label:(0,o.default)("Range"),value:"r"},{label:(0,o.default)("Shell"),value:"p"}];return"ppas"===e.fieldOptions.server_info.server_type&&e.fieldOptions.server_info.version>=90500&&t.push({label:(0,o.default)("Nested Table"),value:"N"},{label:(0,o.default)("Varying Array"),value:"V"}),t}},{id:"composite",label:(0,o.default)("Composite Type"),editable:!0,type:"collection",group:(0,o.default)("Definition"),mode:["edit","create"],uniqueCol:["member_name"],canAdd:!0,canEdit:!1,canDelete:!0,disabled:function(){return e.inCatalog()},schema:e.compositeSchema,deps:["typtype"],depChange:function(e){s.default.isArray(e.composite)&&e.composite.length>0&&"c"!==e.typtype&&e.composite.splice(0,e.composite.length)},visible:function(e){return S(e,"c")}},{id:"enum",label:(0,o.default)("Enumeration type"),schema:new x,type:"collection",group:(0,o.default)("Definition"),mode:["edit","create"],canAddRow:function(t){return!e.isInvalidColumnAdded(t)},canEdit:!1,canDeleteRow:function(t){return e.isNew(t)},canEditRow:!1,disabled:function(){return e.inCatalog()},deps:["typtype"],uniqueCol:["label"],visible:function(e){return S(e,"e")}},{type:"nested-fieldset",group:(0,o.default)("Definition"),label:"",deps:["typtype"],mode:["edit","create"],visible:function(e){return"N"===e.typtype||"V"===e.typtype},schema:e.getDataTypeSchema()},{type:"nested-fieldset",group:(0,o.default)("Definition"),label:"",mode:["edit","create"],visible:function(e){return S(e,"r")},deps:["typtype"],schema:e.getRangeSchema()},{type:"nested-tab",group:(0,o.default)("Definition"),label:(0,o.default)("External Type"),deps:["typtype"],mode:["create","edit"],tabPanelExtraClasses:"inline-tab-panel-padded",visible:function(e){return S(e,"b")},schema:e.getExternalSchema()},{id:"alias",label:(0,o.default)("Alias"),cell:"string",type:"text",mode:["properties"],disabled:function(){return e.inCatalog()}},{id:"member_list",label:(0,o.default)("Members"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"c")}},{id:"enum_list",label:(0,o.default)("Labels"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"e")}},{id:"typname",label:(0,o.default)("SubType"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"r")}},{id:"opcname",label:(0,o.default)("Subtype operator class"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"r")}},{id:"collname",label:(0,o.default)("Collation"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"r")}},{id:"rngcanonical",label:(0,o.default)("Canonical function"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"r")}},{id:"rngsubdiff",label:(0,o.default)("Subtype diff function"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"r")}},{id:"typinput",label:(0,o.default)("Input function"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"b")}},{id:"typoutput",label:(0,o.default)("Output function"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"b")}},{id:"type",label:(0,o.default)("Data Type"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"N"===e.typtype||"V"===e.typtype}},{id:"tlength",label:(0,o.default)("Length/Precision"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"N")}},{id:"precision",label:(0,o.default)("Scale"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"N")}},{id:"maxsize",label:(0,o.default)("Size"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return S(e,"V")}},{id:"type_acl",label:(0,o.default)("Privileges"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Security"),disabled:function(){return e.inCatalog()}},{id:"is_sys_type",label:(0,o.default)("System type?"),cell:"switch",type:"switch",mode:["properties"],disabled:function(){return e.inCatalog()}},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()}},{id:"typacl",label:(0,o.default)("Privileges"),type:"collection",group:(0,o.default)("Security"),schema:this.getPrivilegeRoleSchema(["U"]),mode:["edit","create"],canDelete:!0,uniqueCol:["grantee"],deps:["typtype"],canAdd:function(e){if("p"===e.typtype){var t=e.typacl;t&&t.length>0&&t.splice(0,t.length)}return"p"!==e.typtype}},{id:"seclabels",label:(0,o.default)("Security labels"),schema:new a.default,editable:!1,type:"collection",group:(0,o.default)("Security"),mode:["edit","create"],min_version:90100,canEdit:!1,canDelete:!0,uniqueCol:["provider"],deps:["typtype"],canAdd:function(e){if("p"===e.typtype){var t=e.seclabels;t&&t.length>0&&t.splice(0,t.length)}return"p"!==e.typtype}}]}}]),n}(i.default);t.default=k},15151:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var i=u(n(91669)),a=u(n(89406)),l=u(n(67091)),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,o,a=y(u);function u(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return p(this,u),(n=a.call(this,c({spcname:void 0,toast_autovacuum_enabled:"x",autovacuum_enabled:"x",warn_text:void 0},o))).getPrivilegeRoleSchema=e,n.getVacuumSettingsSchema=t,n.fieldOptions=c({role:[],schema:[],spcname:[],nodeInfo:null},r),n.nodeInfo=n.fieldOptions.nodeInfo,n}return t=u,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,i.default)("Name"),cell:"text",type:"text",disabled:e.inCatalog(),noEmpty:!0},{id:"oid",label:(0,i.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"owner",label:(0,i.default)("Owner"),type:"select",cell:"text",options:e.fieldOptions.role,controlProps:{allowClear:!1},disabled:e.inCatalog()},{id:"schema",label:(0,i.default)("Schema"),cell:"text",type:"select",options:e.fieldOptions.schema,mode:["create","edit"],cache_node:"database",disabled:e.inCatalog(),controlProps:{allowClear:!1,first_empty:!1}},{id:"system_view",label:(0,i.default)("System materialized view?"),cell:"text",type:"switch",mode:["properties"]},{id:"acl",label:(0,i.default)("Privileges"),mode:["properties"],type:"text",group:(0,i.default)("Security")},{id:"comment",label:(0,i.default)("Comment"),cell:"text",type:"multiline"},{id:"definition",label:(0,i.default)("Definition"),cell:"text",type:"sql",mode:["create","edit"],group:(0,i.default)("Definition"),isFullTab:!0,controlProps:{readOnly:!(!this.nodeInfo||!("catalog"in this.nodeInfo))}},{id:"with_data",label:(0,i.default)("With data?"),group:(0,i.default)("Storage"),mode:["edit","create"],type:"switch"},{id:"spcname",label:(0,i.default)("Tablespace"),cell:"text",type:"select",group:(0,i.default)("Storage"),options:e.fieldOptions.spcname,controlProps:{allowClear:!1,first_empty:!1}},{id:"fillfactor",label:(0,i.default)("Fill factor"),group:(0,i.default)("Storage"),mode:["edit","create"],noEmpty:!1,type:"int",controlProps:{min:10,max:100}},{id:"vacuum_settings_str",label:(0,i.default)("Storage settings"),type:"multiline",group:(0,i.default)("Storage"),mode:["properties"]},{type:"nested-tab",group:(0,i.default)("Parameter"),mode:["create","edit"],schema:this.getVacuumSettingsSchema()},{id:"datacl",label:(0,i.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["a","r","w","d","D","x","t"]),uniqueCol:["grantee"],editable:!1,group:(0,i.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"seclabels",label:(0,i.default)("Security labels"),schema:new l.default,editable:!1,type:"collection",canEdit:!1,group:(0,i.default)("Security"),canDelete:!0,mode:["edit","create"],canAdd:!0,control:"unique-col-collection",uniqueCol:["provider"]}]}},{key:"validate",value:function(e,t){var n=null,o=this;if((0,s.isEmptyString)(e.service))return(0,s.isEmptyString)(e.definition)?(n=(0,i.default)("Please enter view definition."),t("definition",n),!0):(t("definition",null),e.definition&&(o.warningText=null,void 0!==o.origData.oid&&e.definition!==o.origData.definition&&(o.warningText=(0,i.default)("Updating the definition will drop and re-create the materialized view. It may result in loss of information about its dependent objects.")+"<br><br><b>"+(0,i.default)("Do you want to continue?")+"</b>")),!1);r.each(["definition"],(function(e){t(e,null)}))}}])&&m(t.prototype,n),o&&m(t,o),u}(a.default);t.default=v},45193:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(23123),n(74916),n(15306),n(68304),n(30489);var i=u(n(91669)),a=u(n(89406)),l=u(n(67091)),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,o,a=y(u);function u(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return p(this,u),(n=a.call(this,c({owner:void 0,schema:void 0},o))).getPrivilegeRoleSchema=e,n.nodeInfo=t,n.warningText=null,n.fieldOptions=c({role:[],schema:[]},r),n}return t=u,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"notInSchema",value:function(){return!(!this.nodeInfo||!("catalog"in this.nodeInfo))}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,i.default)("Name"),cell:"text",type:"text",disabled:e.notInSchema,noEmpty:!0},{id:"oid",label:(0,i.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"owner",label:(0,i.default)("Owner"),cell:"text",node:"role",disabled:e.notInSchema,type:"select",controlProps:{allowClear:!1},options:e.fieldOptions.role},{id:"schema",label:(0,i.default)("Schema"),cell:"text",type:"select",disabled:e.notInSchema,mode:["create","edit"],controlProps:{allowClear:!1,first_empty:!1},options:e.fieldOptions.schema},{id:"system_view",label:(0,i.default)("System view?"),cell:"text",type:"switch",mode:["properties"]},{id:"acl",label:(0,i.default)("Privileges"),mode:["properties"],type:"text",group:(0,i.default)("Security")},{id:"comment",label:(0,i.default)("Comment"),cell:"text",type:"multiline",disabled:e.notInSchema},{id:"security_barrier",label:(0,i.default)("Security barrier?"),type:"switch",min_version:"90200",group:(0,i.default)("Definition"),disabled:e.notInSchema},{id:"check_option",label:(0,i.default)("Check options"),type:"select",group:(0,i.default)("Definition"),min_version:"90400",mode:["properties","create","edit"],controlProps:{allowClear:!1},disabled:e.notInSchema,options:[{label:(0,i.default)("No"),value:"no"},{label:(0,i.default)("Local"),value:"local"},{label:(0,i.default)("Cascaded"),value:"cascaded"}]},{id:"definition",label:(0,i.default)("Code"),cell:"text",type:"sql",mode:["create","edit"],group:(0,i.default)("Code"),isFullTab:!0,controlProps:{readOnly:!(!e.nodeInfo||!("catalog"in e.nodeInfo))}},{id:"datacl",label:(0,i.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["a","r","w","d","D","x","t"]),uniqueCol:["grantee"],editable:!1,group:(0,i.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"seclabels",label:(0,i.default)("Security labels"),schema:new l.default,editable:!1,type:"collection",canEdit:!1,group:(0,i.default)("Security"),canDelete:!0,mode:["edit","create"],canAdd:!0,uniqueCol:["provider"]}]}},{key:"validate",value:function(e,t){var n=null,o=this;if((0,s.isEmptyString)(e.service)){if((0,s.isEmptyString)(e.definition))return n=(0,i.default)("Please enter view code."),t("definition",n),!0;if(t("definition",null),e.definition){if("pg"!=o.nodeInfo.server.server_type||void 0===o.origData.oid||e.definition===o.origData.definition)return o.warningText=null,!1;var a=o.origData.definition&&o.origData.definition.replace(/\s/gi,"").split("FROM"),l=[];return void 0!==e.definition&&(l=e.definition.replace(/\s/gi,"").split("FROM")),a.length!=l.length||a.length>1&&a[0]!=l[0]?o.warningText=(0,i.default)("Changing the columns in a view requires dropping and re-creating the view. This may fail if other objects are dependent upon this view, or may cause procedural functions to fail if they are not modified to take account of the changes.")+"<br><br><b>"+(0,i.default)("Do you wish to continue?")+"</b>":o.warningText=null,!1}}else r.each(["definition"],(function(e){t(e,null)}))}}])&&m(t.prototype,n),o&&m(t,o),u}(a.default);t.default=v},82234:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DefaultPrivSchema=void 0,n(68304),n(30489);var o=s(n(96486)),i=s(n(91669)),a=s(n(89406)),l=s(n(67091));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){b(n,e);var t=h(n);function n(e){var r;return f(this,n),(r=t.call(this)).getPrivilegeRoleSchema=e,r}return m(n,[{key:"baseFields",get:function(){return[{id:"deftblacl",type:"collection",group:(0,i.default)("Tables"),schema:this.getPrivilegeRoleSchema(["a","r","w","d","D","x","t"]),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee","grantor"]},{id:"defseqacl",type:"collection",group:(0,i.default)("Sequences"),schema:this.getPrivilegeRoleSchema(["r","w","U"]),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee","grantor"]},{id:"deffuncacl",type:"collection",group:(0,i.default)("Functions"),schema:this.getPrivilegeRoleSchema(["X"]),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee","grantor"]},{id:"deftypeacl",type:"collection",group:(0,i.default)("Types"),schema:this.getPrivilegeRoleSchema(["U"]),min_version:90200,mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee","grantor"]}]}}]),n}(a.default);t.DefaultPrivSchema=_;var w=function(e){b(n,e);var t=h(n);function n(e,r){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return f(this,n),(o=t.call(this,d({name:void 0,owner:void 0,is_sys_obj:void 0,comment:void 0,encoding:"UTF8",template:void 0,tablespace:void 0,collation:void 0,char_type:void 0,datconnlimit:-1,datallowconn:void 0,variables:[],privileges:[],securities:[],datacl:[],deftblacl:[],deffuncacl:[],defseqacl:[],is_template:!1,deftypeacl:[],schema_res:[]},a))).getVariableSchema=e,o.getPrivilegeRoleSchema=r,o.fieldOptions=d({role:[],encoding:[],template:[],spcname:[],datcollate:[],datctype:[]},i),o}return m(n,[{key:"idAttribute",get:function(){return"did"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,i.default)("Database"),cell:"text",editable:!1,type:"text",noEmpty:!0},{id:"did",label:(0,i.default)("OID"),cell:"text",mode:["properties"],editable:!1,type:"text"},{id:"datowner",label:(0,i.default)("Owner"),editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"is_sys_obj",label:(0,i.default)("System database?"),cell:"switch",type:"switch",mode:["properties"]},{id:"comments",label:(0,i.default)("Comment"),editable:!1,type:"multiline"},{id:"encoding",label:(0,i.default)("Encoding"),editable:!1,type:"select",group:(0,i.default)("Definition"),readonly:function(t){return!e.isNew(t)},options:this.fieldOptions.encoding},{id:"template",label:(0,i.default)("Template"),editable:!1,type:"select",group:(0,i.default)("Definition"),readonly:function(t){return!e.isNew(t)},options:this.fieldOptions.template,controlProps:{allowClear:!1},mode:["create"]},{id:"spcname",label:(0,i.default)("Tablespace"),editable:!1,type:"select",group:(0,i.default)("Definition"),options:this.fieldOptions.spcname,controlProps:{allowClear:!1}},{id:"datcollate",label:(0,i.default)("Collation"),editable:!1,type:"select",group:(0,i.default)("Definition"),readonly:function(t){return!e.isNew(t)},options:this.fieldOptions.datcollate},{id:"datctype",label:(0,i.default)("Character type"),editable:!1,type:"select",group:(0,i.default)("Definition"),readonly:function(t){return!e.isNew(t)},options:this.fieldOptions.datctype},{id:"datconnlimit",label:(0,i.default)("Connection limit"),editable:!1,type:"int",group:(0,i.default)("Definition"),min:-1},{id:"is_template",label:(0,i.default)("Template?"),editable:!1,type:"switch",group:(0,i.default)("Definition"),readonly:!0,mode:["properties","edit"]},{id:"datallowconn",label:(0,i.default)("Allow connections?"),editable:!1,type:"switch",group:(0,i.default)("Definition"),mode:["properties"]},{id:"acl",label:(0,i.default)("Privileges"),type:"text",group:(0,i.default)("Security"),mode:["properties"]},{id:"tblacl",label:(0,i.default)("Default TABLE privileges"),type:"text",group:(0,i.default)("Security"),mode:["properties"]},{id:"seqacl",label:(0,i.default)("Default SEQUENCE privileges"),type:"text",group:(0,i.default)("Security"),mode:["properties"]},{id:"funcacl",label:(0,i.default)("Default FUNCTION privileges"),type:"text",group:(0,i.default)("Security"),mode:["properties"]},{id:"typeacl",label:(0,i.default)("Default TYPE privileges"),type:"text",group:(0,i.default)("Security"),mode:["properties"],min_version:90200},{id:"datacl",label:(0,i.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["C","T","c"]),uniqueCol:["grantee","grantor"],editable:!1,group:(0,i.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"variables",label:"",type:"collection",schema:this.getVariableSchema(),editable:!1,group:(0,i.default)("Parameters"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,hasRole:!0,node:"role"},{id:"seclabels",label:(0,i.default)("Security labels"),type:"collection",schema:new l.default,editable:!1,group:(0,i.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90200},{type:"nested-tab",group:(0,i.default)("Default Privileges"),mode:["edit"],schema:new _(this.getPrivilegeRoleSchema)},{id:"schema_res",label:(0,i.default)("Schema restriction"),type:"select",group:(0,i.default)("Advanced"),mode:["properties","edit","create"],helpMessage:(0,i.default)("Note: Changes to the schema restriction will require the Schemas node in the browser to be refreshed before they will be shown."),helpMessageMode:["edit","create"],controlProps:{multiple:!0,allowClear:!1,creatable:!0},depChange:function(t){o.default.isUndefined(t.oid)||(e.informText=void 0),o.default.isEqual(e.origData.schema_res,t.schema_res)?e.informText=void 0:e.informText=(0,i.default)("Please refresh the Schemas node to make changes to the schema restriction take effect.")}}]}}]),n}(a.default);t.default=w},77826:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(82772),n(68304),n(30489);var o=s(n(91669)),i=s(n(89406)),a=n(76055),l=s(n(96486));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,e);var t,n,r,i=b(s);function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f(this,s),(e=i.call(this,d({name:void 0,subowner:void 0,pubtable:void 0,connect_timeout:10,pub:[],enabled:!0,create_slot:!0,copy_data:!0,connect:!0,copy_data_after_refresh:!1,sync:"off",refresh_pub:!1,password:"",sslmode:"prefer",sslcompression:!1,sslcert:"",sslkey:"",sslrootcert:"",sslcrl:"",host:"",port:5432,db:"postgres"},r))).fieldOptions=d({role:[],publicationTable:[]},t),e.node_info=n,e}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"SSL_MODES",get:function(){return["prefer","require","verify-ca","verify-full"]}},{key:"isDisable",value:function(){return!this.isNew()}},{key:"isSameDB",value:function(e){var t=e.host,n=e.port;return"localhost"!=e.host&&"127.0.0.1"!=e.host||"localhost"!=this.node_info.node_info.host&&"127.0.0.1"!=this.node_info.node_info.host||(t=this.node_info.node_info.host),t==this.node_info.node_info.host&&n==this.node_info.node_info.port&&(e.create_slot=!1,!0)}},{key:"isAllConnectionDataEnter",value:function(e){var t=e.host,n=e.db,r=e.port,o=e.username;return!(!l.default.isUndefined(t)&&t&&!l.default.isUndefined(n)&&n&&!l.default.isUndefined(r)&&r&&!l.default.isUndefined(o)&&o)}},{key:"isConnect",value:function(e){return!l.default.isUndefined(e.connect)&&!e.connect&&(e.copy_data=!1,e.create_slot=!1,e.enabled=!1,!0)}},{key:"isRefresh",value:function(e){return!(e.refresh_pub&&!l.default.isUndefined(e.refresh_pub)||(e.copy_data_after_refresh=!1,0))}},{key:"isSSL",value:function(e){return-1==this.SSL_MODES.indexOf(e.sslmode)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",mode:["properties","create","edit"],noEmpty:!0,visible:function(){return!l.default.isUndefined(this.node_info.node_info)&&!l.default.isUndefined(this.node_info.node_info.version)&&this.node_info.node_info.version>=1e5}},{id:"oid",label:(0,o.default)("OID"),cell:"string",mode:["properties"],type:"text"},{id:"subowner",label:(0,o.default)("Owner"),options:this.fieldOptions.role,type:"select",mode:["edit","properties","create"],controlProps:{allowClear:!1},disabled:function(){return!!e.isNew()}},{id:"host",label:(0,o.default)("Host name/address"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"]},{id:"port",label:(0,o.default)("Port"),type:"int",group:(0,o.default)("Connection"),mode:["properties","edit","create"],min:1,max:65535,depChange:function(t){e.origData.port!=t.port&&!e.isNew(t)&&t.connected?e.informText=(0,o.default)("To apply changes to the connection configuration, please disconnect from the server and then reconnect."):e.informText=void 0}},{id:"db",label:(0,o.default)("Database"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],readonly:e.isConnected,disabled:e.isShared,noEmpty:!0},{id:"username",label:(0,o.default)("Username"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],depChange:function(t){e.origData.username!=t.username&&!e.isNew(t)&&t.connected?e.informText=(0,o.default)("To apply changes to the connection configuration, please disconnect from the server and then reconnect."):e.informText=void 0}},{id:"password",label:(0,o.default)("Password"),type:"password",maxlength:null,group:(0,o.default)("Connection"),mode:["create","edit"],skipChange:!0,deps:["connect_now"]},{id:"connect_timeout",label:(0,o.default)("Connection timeout"),type:"text",mode:["properties","edit","create"],group:(0,o.default)("Connection")},{id:"passfile",label:(0,o.default)("Passfile"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"]},{id:"pub",label:(0,o.default)("Publication"),type:"text",group:(0,o.default)("Connection"),mode:["properties"]},{id:"pub",label:(0,o.default)("Publication"),group:(0,o.default)("Connection"),mode:["create","edit"],deps:["all_table","host","port","username","db","password"],disabled:e.isAllConnectionDataEnter,helpMessage:(0,o.default)("Click the refresh button to get the publications"),helpMessageMode:["edit","create"],type:function(t){return{type:"select-refresh",controlProps:{allowClear:!0,multiple:!0,creatable:!0,getOptionsOnRefresh:function(){return e.fieldOptions.getPublication(t.host,t.password,t.port,t.username,t.db,t.connect_timeout,t.passfile,t.sslmode,t.sslcompression,t.sslcert,t.sslkey,t.sslrootcert,t.sslcrl)}}}}},{id:"sslmode",label:(0,o.default)("SSL mode"),type:"select",group:(0,o.default)("SSL"),controlProps:{allowClear:!1},mode:["properties","edit","create"],options:[{label:(0,o.default)("Allow"),value:"allow"},{label:(0,o.default)("Prefer"),value:"prefer"},{label:(0,o.default)("Require"),value:"require"},{label:(0,o.default)("Disable"),value:"disable"},{label:(0,o.default)("Verify-CA"),value:"verify-ca"},{label:(0,o.default)("Verify-Full"),value:"verify-full"}]},{id:"sslcert",label:(0,o.default)("Client certificate"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslkey",label:(0,o.default)("Client certificate key"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslrootcert",label:(0,o.default)("Root certificate"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslcrl",label:(0,o.default)("Certificate revocation list"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslcompression",label:(0,o.default)("SSL compression?"),type:"switch",mode:["edit","create"],group:(0,o.default)("SSL"),disabled:e.isSSL,deps:["sslmode"]},{id:"sslcert",label:(0,o.default)("Client certificate"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslcert;return!l.default.isUndefined(t)&&!l.default.isNull(t)}},{id:"sslkey",label:(0,o.default)("Client certificate key"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslkey;return!l.default.isUndefined(t)&&!l.default.isNull(t)}},{id:"sslrootcert",label:(0,o.default)("Root certificate"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslrootcert;return!l.default.isUndefined(t)&&!l.default.isNull(t)}},{id:"sslcrl",label:(0,o.default)("Certificate revocation list"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslcrl;return!l.default.isUndefined(t)&&!l.default.isNull(t)}},{id:"sslcompression",label:(0,o.default)("SSL compression?"),type:"switch",mode:["properties"],group:(0,o.default)("SSL"),deps:["sslmode"],visible:function(t){return-1!=l.default.indexOf(e.SSL_MODES,t.sslmode)}},{id:"copy_data_after_refresh",label:(0,o.default)("Copy data?"),type:"switch",mode:["edit"],group:(0,o.default)("With"),readonly:e.isRefresh,deps:["refresh_pub"],helpMessage:(0,o.default)("Specifies whether the existing data in the publications that are being subscribed to should be copied once the replication starts."),helpMessageMode:["edit","create"]},{id:"copy_data",label:(0,o.default)("Copy data?"),type:"switch",mode:["create"],group:(0,o.default)("With"),readonly:e.isConnect,deps:["connect"],helpMessage:(0,o.default)("Specifies whether the existing data in the publications that are being subscribed to should be copied once the replication starts."),helpMessageMode:["edit","create"]},{id:"create_slot",label:(0,o.default)("Create slot?"),type:"switch",mode:["create"],group:(0,o.default)("With"),disabled:e.isSameDB,readonly:e.isConnect,deps:["connect","host","port"],helpMessage:(0,o.default)("Specifies whether the command should create the replication slot on the publisher.This field will be disabled and set to false if subscription connects to same database.Otherwise, the CREATE SUBSCRIPTION call will hang."),helpMessageMode:["edit","create"]},{id:"enabled",label:(0,o.default)("Enabled?"),type:"switch",mode:["create","edit","properties"],group:(0,o.default)("With"),readonly:e.isConnect,deps:["connect"],helpMessage:(0,o.default)("Specifies whether the subscription should be actively replicating, or whether it should be just setup but not started yet."),helpMessageMode:["edit","create"]},{id:"refresh_pub",label:(0,o.default)("Refresh publication?"),type:"switch",mode:["edit"],group:(0,o.default)("With"),helpMessage:(0,o.default)("Fetch missing table information from publisher."),helpMessageMode:["edit","create"],deps:["enabled"],disabled:function(e){return!e.enabled&&(e.refresh_pub=!1,!0)}},{id:"connect",label:(0,o.default)("Connect?"),type:"switch",mode:["create"],group:(0,o.default)("With"),disabled:e.isDisable,deps:["enabled","create_slot","copy_data"],helpMessage:(0,o.default)("Specifies whether the CREATE SUBSCRIPTION should connect to the publisher at all. Setting this to false will change default values of enabled, create_slot and copy_data to false."),helpMessageMode:["edit","create"]},{id:"slot_name",label:(0,o.default)("Slot name"),type:"text",mode:["create","edit","properties"],group:(0,o.default)("With"),helpMessage:(0,o.default)("Name of the replication slot to use. The default behavior is to use the name of the subscription for the slot name."),helpMessageMode:["edit","create"]},{id:"sync",label:(0,o.default)("Synchronous commit"),control:"select2",deps:["event"],group:(0,o.default)("With"),type:"select",helpMessage:(0,o.default)("The value of this parameter overrides the synchronous_commit setting. The default value is off."),helpMessageMode:["edit","create"],controlProps:{width:"100%",allowClear:!1},options:[{label:"local",value:"local"},{label:"remote_write",value:"remote_write"},{label:"remote_apply",value:"remote_apply"},{label:"on",value:"on"},{label:"off",value:"off"}]}]}},{key:"validate",value:function(e,t){var n=null;if(n=(0,o.default)("Either Host name, Address must be specified."),(0,a.isEmptyString)(e.host))return t("host",n),!0;if(t("host",null),(0,a.isEmptyString)(e.username))return t("username",n=(0,o.default)("Username must be specified.")),!0;if(t("username",null),(0,a.isEmptyString)(e.port))return t("port",n=(0,o.default)("Port must be specified.")),!0;if(t("port",null),(0,a.isEmptyString)(e.pub))return t("pub",n=(0,o.default)("Publication must be specified.")),!0;if(t("pub",null),e.use_ssh_tunnel){if((0,a.isEmptyString)(e.tunnel_host))return t("tunnel_host",n=(0,o.default)("SSH Tunnel host must be specified.")),!0;if(t("tunnel_host",null),(0,a.isEmptyString)(e.tunnel_port))return t("tunnel_port",n=(0,o.default)("SSH Tunnel port must be specified.")),!0;if(t("tunnel_port",null),(0,a.isEmptyString)(e.tunnel_username))return t("tunnel_username",n=(0,o.default)("SSH Tunnel username must be specified.")),!0;if(t("tunnel_username",null),e.tunnel_authentication){if((0,a.isEmptyString)(e.tunnel_identity_file))return t("tunnel_identity_file",n=(0,o.default)("SSH Tunnel identity file must be specified.")),!0;t("tunnel_identity_file",null)}}return!1}}])&&p(t.prototype,n),r&&p(t,r),s}(i.default);t.default=g},49988:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),i=l(n(89406)),a=n(76055);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r,i=f(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({oid:void 0,name:void 0,is_sys_obj:void 0,cpu_rate_limit:0,dirty_rate_limit:0},e))}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"oid",label:(0,o.default)("OID"),type:"text",editable:!1,mode:["properties"]},{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",noEmpty:!0},{id:"is_sys_obj",label:(0,o.default)("System resource group?"),type:"switch",mode:["properties"]},{id:"cpu_rate_limit",label:(0,o.default)("CPU rate limit (percentage)"),type:"numeric",min:0,max:16777216},{id:"dirty_rate_limit",label:(0,o.default)("Dirty rate limit (KB)"),type:"numeric",min:0,max:16777216}]}},{key:"validate",value:function(e,t){var n=null;return(n=(0,a.emptyValidator)("CPU rate limit",e.cpu_rate_limit))?(t("cpu_rate_limit",n),!0):(t("cpu_rate_limit",n),(n=(0,a.emptyValidator)("Dirty rate limit",e.dirty_rate_limit))?(t("dirty_rate_limit",n),!0):(t("dirty_rate_limit",n),null))}}])&&d(t.prototype,n),r&&d(t,r),l}(i.default);t.default=b},61231:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(89554),n(54747),n(68304),n(30489);var i=s(n(91669)),a=s(n(89406)),l=s(n(67091));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,e);var t,n,o,a=b(s);function s(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f(this,s),(n=a.call(this,{oid:null,rolname:null,rolcanlogin:!1,rolpassword:null,rolconnlimit:-1,rolsuper:!1,rolcreaterole:!1,rolcreatedb:!1,rolinherit:!0,rolcatupdate:!1,rolreplication:!1,rolmembership:[],rolmembers:[],rolvaliduntil:null,seclabels:[],variables:[]})).getVariableSchema=e,n.getMembershipSchema=t,n.fieldOptions=d({role:[]},r),n.isReadOnly=null,n.nodeInfo=n.fieldOptions.nodeInfo,n.user=n.nodeInfo.server.user,n}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"readOnly",value:function(e){var t=this.nodeInfo.server.user;return this.oid=e.oid,this.isReadOnly=!(t.is_superuser||t.can_create_role),!(t.is_superuser||t.can_create_role)&&t.id!=e.oid}},{key:"memberDataFormatter",value:function(e){var t="";if(r.isObject(e)){var n="";e.forEach((function(e){e.admin&&(n=" [WITH ADMIN]"),t.length>0&&(t+=", "),t+=e.role+n}))}return t}},{key:"baseFields",get:function(){var e=this;return[{id:"rolname",label:(0,i.default)("Name"),type:"text",noEmpty:!0,disabled:e.readOnly},{id:"oid",label:(0,i.default)("OID"),cell:"string",mode:["properties"],editable:!1,type:"text",visible:!0},{id:"is_sys_obj",label:(0,i.default)("System role?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,i.default)("Comments"),type:"multiline",mode:["properties","edit","create"],disabled:e.readOnly},{id:"rolpassword",label:(0,i.default)("Password"),type:"password",group:(0,i.default)("Definition"),mode:["edit","create"],control:"input",deps:["rolcanlogin"],retype:!0,cell:"text",disabled:e.readOnly},{id:"rolvaliduntil",type:"datetimepicker",group:(0,i.default)("Definition"),label:(0,i.default)("Account expires"),mode:["properties","edit","create"],deps:["rolcanlogin"],helpMessage:(0,i.default)("Please note that if you leave this field blank, then password will never expire."),helpMessageMode:["edit","create"],controlProps:{ampm:!1,placeholder:(0,i.default)("No Expiry"),autoOk:!0},disabled:e.readOnly},{id:"rolconnlimit",type:"int",group:(0,i.default)("Definition"),label:(0,i.default)("Connection limit"),cell:"integer",min:-1,mode:["properties","edit","create"],disabled:e.readOnly},{id:"rolcanlogin",label:(0,i.default)("Can login?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",group:(0,i.default)("Privileges"),disabled:e.readOnly},{id:"rolsuper",label:(0,i.default)("Superuser?"),type:"switch",group:(0,i.default)("Privileges"),depChange:function(e){e.rolcatupdate=e.rolcreaterole=e.rolcreatedb=e.rolsuper},disabled:e.readOnly},{id:"rolcreaterole",label:(0,i.default)("Create roles?"),group:(0,i.default)("Privileges"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",disabled:e.readOnly},{id:"rolcreatedb",label:(0,i.default)("Create databases?"),group:(0,i.default)("Privileges"),type:"switch",disabled:e.readOnly},{id:"rolcatupdate",label:(0,i.default)("Update catalog?"),max_version:90400,group:(0,i.default)("Privileges"),type:"switch",disabled:function(e){return!e.rolsuper},readonly:function(){return!(e.user.is_superuser||e.user.can_create_role)}},{id:"rolinherit",group:(0,i.default)("Privileges"),label:(0,i.default)("Inherit rights from the parent roles?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",disabled:e.readOnly},{id:"rolreplication",group:(0,i.default)("Privileges"),label:(0,i.default)("Can initiate streaming replication and backups?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",min_version:90100,disabled:e.readOnly},{id:"rolmembership",label:(0,i.default)("Member of"),group:(0,i.default)("Membership"),disabled:e.readOnly,mode:["edit","create"],cell:"text",type:"collection",schema:new e.getMembershipSchema,helpMessage:e.isReadOnly?(0,i.default)("Select the checkbox for roles to include WITH ADMIN OPTION."):(0,i.default)("Roles shown with a check mark have the WITH ADMIN OPTION set.")},{id:"rolmembership",label:(0,i.default)("Member of"),group:(0,i.default)("Membership"),disabled:e.readOnly,mode:["properties"],cell:"text",type:"text",controlProps:{formatter:{fromRaw:e.memberDataFormatter}}},{id:"rolmembers",label:(0,i.default)("Members"),group:(0,i.default)("Membership"),mode:["edit","create"],cell:"text",type:"collection",schema:new e.getMembershipSchema,disabled:e.readOnly,helpMessage:e.isReadOnly?(0,i.default)("Select the checkbox for roles to include WITH ADMIN OPTION."):(0,i.default)("Roles shown with a check mark have the WITH ADMIN OPTION set.")},{id:"rolmembers",label:(0,i.default)("Members"),group:(0,i.default)("Membership"),disabled:e.readOnly,mode:["properties"],cell:"text",type:"text",controlProps:{formatter:{fromRaw:e.memberDataFormatter}}},{id:"variables",label:"",type:"collection",group:(0,i.default)("Parameters"),schema:this.getVariableSchema(),mode:["edit","create"],canAdd:!0,canDelete:!0,disabled:e.readOnly},{id:"seclabels",label:(0,i.default)("Security labels"),type:"collection",schema:new l.default,editable:!1,group:(0,i.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90200,disabled:e.readOnly}]}}])&&p(t.prototype,n),o&&p(t,o),s}(a.default);t.default=g},3011:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getMembershipSchema=function(e,t,n){return new m((function(){return(0,l.getNodeListByName)("role",t,n,{},(function(){return!0}))}))},t.default=void 0,n(68304),n(30489);var i=s(n(91669)),a=s(n(89406)),l=n(77077);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,e);var t,n,o,a=c(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,{role:void 0,admin:void 0})).roleMembersOptions=e,t}return t=l,(n=[{key:"baseFields",get:function(){var e=this;return[{id:"role",label:(0,i.default)("User/Role"),type:"text",editable:!0,cell:function(){return{cell:"select",options:e.roleMembersOptions,controlProps:{allowClear:!1}}},noEmpty:!0,minWidth:300},{id:"admin",label:(0,i.default)("WITH ADMIN"),cell:"checkbox",type:"checkbox",minWidth:300,deps:["role"],depChange:function(e){r.isUndefined(e.admin)&&(e.admin=!1)}}]}}])&&u(t.prototype,n),o&&u(t,o),l}(a.default);t.default=m},28296:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,e);var t,n,r,i=d(c);function c(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"option",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return l(this,c),(t=i.call(this,(a(e={},n,void 0),a(e,r,void 0),e))).optionID=n,t.valueID=r,t}return t=c,(n=[{key:"baseFields",get:function(){return[{id:this.optionID,label:(0,o.default)("Option"),type:"text",editable:!0,cell:"text",noEmpty:!0,width:220},{id:this.valueID,label:(0,o.default)("Value"),type:"text",editable:!0,cell:"text",noEmpty:!0,width:220}]}}])&&s(t.prototype,n),r&&s(t,r),c}(i(n(89406)).default);t.default=p},40345:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodePrivilegeRoleSchema=function(e,t,n,r){return new m((function(){return(0,a.getNodeListByName)("role",t,n,{},(function(){return!0}),(function(e){return e.unshift({label:"PUBLIC",value:"PUBLIC"}),e}))}),(function(){return(0,a.getNodeListByName)("role",t,n)}),t,r)},t.default=void 0,n(68309),n(69070);var o=l(n(91669)),i=l(n(89406)),a=n(77077);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,n,r,i=d(a);function a(e,t,n,r){var o,l,s,u,d,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s=i.call(this,{grantee:void 0,grantor:null==n||null===(o=n.server)||void 0===o||null===(l=o.user)||void 0===l?void 0:l.name,privileges:void 0}),u=f(s),c=function(e){s.supportedPrivs=e},(d="updateSupportedPrivs")in u?Object.defineProperty(u,d,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[d]=c,s.granteeOptions=e,s.grantorOptions=t,s.nodeInfo=n,s.supportedPrivs=r||[],s}return t=a,(n=[{key:"baseFields",get:function(){var e=this,t=this;return[{id:"grantee",label:(0,o.default)("Grantee"),type:"text",editable:!0,cell:function(){return{cell:"select",options:e.granteeOptions,controlProps:{allowClear:!1}}},noEmpty:!0},{id:"privileges",label:(0,o.default)("Privileges"),type:"text",group:null,cell:function(){return{cell:"privilege",controlProps:{supportedPrivs:e.supportedPrivs}}},disabled:function(e){return!(t.nodeInfo&&t.nodeInfo.server.user.name==e.grantor)}},{id:"grantor",label:(0,o.default)("Grantor"),type:"text",readonly:!0,editable:!1,cell:function(){return{cell:"select",options:t.grantorOptions}}}]}},{key:"validate",value:function(e,t){return(e.privileges||[]).length<=0&&(t("privileges",(0,o.default)("At least one privilege should be selected.")),!0)}}])&&s(t.prototype,n),r&&s(t,r),a}(i.default);t.default=m},67091:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=s(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,{provider:void 0,label:void 0})}return t=u,(n=[{key:"baseFields",get:function(){return[{id:"provider",label:(0,o.default)("Provider"),type:"text",editable:!0,cell:"text"},{id:"label",label:(0,o.default)("Security label"),type:"text",editable:!0,cell:"text",noEmpty:!0}]}}])&&a(t.prototype,n),r&&a(t,r),u}(i(n(89406)).default);t.default=c},43547:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(82772),n(68304),n(30489);var o=f(n(91669)),i=f(n(96486)),a=n(30033),l=f(n(89406)),s=f(n(55112)),u=f(n(34622)),d=f(n(6537)),c=n(76055);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(f,e);var t,n,r,l=v(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y(this,f),(e=l.call(this,m({gid:void 0,id:void 0,name:"",bgcolor:"",fgcolor:"",sslmode:"prefer",host:"",hostaddr:"",port:5432,db:"postgres",username:d.default.name,role:null,connect_now:!0,password:void 0,save_password:!1,db_res:[],passfile:void 0,sslcompression:!1,sslcert:void 0,sslkey:void 0,sslrootcert:void 0,sslcrl:void 0,service:void 0,use_ssh_tunnel:0,tunnel_host:void 0,tunnel_port:22,tunnel_username:void 0,tunnel_identity_file:void 0,tunnel_password:void 0,tunnel_authentication:!1,save_tunnel_password:!1,connect_timeout:10},r))).serverGroupOptions=t,e.userId=n,i.default.bindAll(w(e),"isShared","isSSL"),e}return t=f,(n=[{key:"SSL_MODES",get:function(){return["prefer","require","verify-ca","verify-full"]}},{key:"isShared",value:function(e){return!(this.isNew(e)||this.userId==d.default.id||!e.shared)}},{key:"isConnected",value:function(e){return Boolean(e.connected)}},{key:"isSSL",value:function(e){return-1==this.SSL_MODES.indexOf(e.sslmode)}},{key:"isValidLib",value:function(){return s.default.Browser.utils.pg_libpq_version<1e5}},{key:"validateHost",value:function(e){return/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(e)}},{key:"baseFields",get:function(){var e=this;return[{id:"id",label:(0,o.default)("ID"),type:"int",group:null,mode:["properties"]},{id:"name",label:(0,o.default)("Name"),type:"text",group:null,mode:["properties","edit","create"],noEmpty:!0,disabled:e.isShared},{id:"gid",label:(0,o.default)("Server group"),type:"select",options:e.serverGroupOptions,mode:["create","edit"],controlProps:{allowClear:!1},disabled:e.isShared},{id:"server_owner",label:(0,o.default)("Shared Server Owner"),type:"text",mode:["properties"],visible:function(t){var n=e.userId;return!(!t.shared||n==d.default.id||"True"!=s.default.server_mode)}},{id:"server_type",label:(0,o.default)("Server type"),type:"select",mode:["properties"],visible:e.isConnected,options:u.default},{id:"connected",label:(0,o.default)("Connected?"),type:"switch",mode:["properties"],group:(0,o.default)("Connection")},{id:"version",label:(0,o.default)("Version"),type:"text",group:null,mode:["properties"],visible:e.isConnected},{id:"bgcolor",label:(0,o.default)("Background"),type:"color",group:null,mode:["edit","create"],disabled:e.isConnected,deps:["fgcolor"],depChange:function(e){if(!e.bgcolor&&e.fgcolor)return{bgcolor:"#ffffff"}}},{id:"fgcolor",label:(0,o.default)("Foreground"),type:"color",group:null,mode:["edit","create"],disabled:e.isConnected},{id:"connect_now",label:(0,o.default)("Connect now?"),type:"switch",group:null,mode:["create"]},{id:"shared",label:(0,o.default)("Shared?"),type:"switch",mode:["properties","create","edit"],readonly:function(t){var n=e.userId;return!e.isNew(t)&&n!=d.default.id},visible:function(){return!(!d.default.is_admin||"True"!=s.default.server_mode)}},{id:"comment",label:(0,o.default)("Comments"),type:"multiline",group:null,mode:["properties","edit","create"]},{id:"host",label:(0,o.default)("Host name/address"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],disabled:e.isShared,depChange:function(t){e.origData.host!=t.host&&!e.isNew(t)&&t.connected?e.informText=(0,o.default)("To apply changes to the connection configuration, please disconnect from the server and then reconnect."):e.informText=void 0}},{id:"port",label:(0,o.default)("Port"),type:"int",group:(0,o.default)("Connection"),mode:["properties","edit","create"],min:1,max:65535,disabled:e.isShared,depChange:function(t){e.origData.port!=t.port&&!e.isNew(t)&&t.connected?e.informText=(0,o.default)("To apply changes to the connection configuration, please disconnect from the server and then reconnect."):e.informText=void 0}},{id:"db",label:(0,o.default)("Maintenance database"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],readonly:e.isConnected,disabled:e.isShared,noEmpty:!0},{id:"username",label:(0,o.default)("Username"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],depChange:function(t){e.origData.username!=t.username&&!e.isNew(t)&&t.connected?e.informText=(0,o.default)("To apply changes to the connection configuration, please disconnect from the server and then reconnect."):e.informText=void 0}},{id:"kerberos_conn",label:(0,o.default)("Kerberos authentication?"),type:"switch",group:(0,o.default)("Connection")},{id:"gss_authenticated",label:(0,o.default)("GSS authenticated?"),type:"switch",group:(0,o.default)("Connection"),mode:["properties"],visible:e.isConnected},{id:"gss_encrypted",label:(0,o.default)("GSS encrypted?"),type:"switch",group:(0,o.default)("Connection"),mode:["properties"],visible:e.isConnected},{id:"password",label:(0,o.default)("Password"),type:"password",maxlength:null,group:(0,o.default)("Connection"),mode:["create"],deps:["connect_now","kerberos_conn"],visible:function(t){return t.connect_now&&e.isNew(t)},disabled:function(e){return e.kerberos_conn}},{id:"save_password",label:(0,o.default)("Save password?"),type:"switch",group:(0,o.default)("Connection"),mode:["create"],deps:["connect_now","kerberos_conn"],visible:function(t){return t.connect_now&&e.isNew(t)},disabled:function(e){return!(d.default.allow_save_password&&!e.kerberos_conn)}},{id:"role",label:(0,o.default)("Role"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],readonly:e.isConnected},{id:"service",label:(0,o.default)("Service"),type:"text",mode:["properties","edit","create"],readonly:e.isConnected,group:(0,o.default)("Connection")},{id:"sslmode",label:(0,o.default)("SSL mode"),type:"select",group:(0,o.default)("SSL"),controlProps:{allowClear:!1},mode:["properties","edit","create"],disabled:e.isConnected,options:[{label:(0,o.default)("Allow"),value:"allow"},{label:(0,o.default)("Prefer"),value:"prefer"},{label:(0,o.default)("Require"),value:"require"},{label:(0,o.default)("Disable"),value:"disable"},{label:(0,o.default)("Verify-CA"),value:"verify-ca"},{label:(0,o.default)("Verify-Full"),value:"verify-full"}]},{id:"sslcert",label:(0,o.default)("Client certificate"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,readonly:e.isConnected,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslkey",label:(0,o.default)("Client certificate key"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,readonly:e.isConnected,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslrootcert",label:(0,o.default)("Root certificate"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,readonly:e.isConnected,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslcrl",label:(0,o.default)("Certificate revocation list"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,readonly:e.isConnected,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslcompression",label:(0,o.default)("SSL compression?"),type:"switch",mode:["edit","create"],group:(0,o.default)("SSL"),disabled:e.isSSL,readonly:e.isConnected,deps:["sslmode"]},{id:"sslcert",label:(0,o.default)("Client certificate"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslcert;return!i.default.isUndefined(t)&&!i.default.isNull(t)}},{id:"sslkey",label:(0,o.default)("Client certificate key"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslkey;return!i.default.isUndefined(t)&&!i.default.isNull(t)}},{id:"sslrootcert",label:(0,o.default)("Root certificate"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslrootcert;return!i.default.isUndefined(t)&&!i.default.isNull(t)}},{id:"sslcrl",label:(0,o.default)("Certificate revocation list"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslcrl;return!i.default.isUndefined(t)&&!i.default.isNull(t)}},{id:"sslcompression",label:(0,o.default)("SSL compression?"),type:"switch",mode:["properties"],group:(0,o.default)("SSL"),deps:["sslmode"],visible:function(t){return-1!=i.default.indexOf(e.SSL_MODES,t.sslmode)}},{id:"use_ssh_tunnel",label:(0,o.default)("Use SSH tunneling"),type:"switch",mode:["properties","edit","create"],group:(0,o.default)("SSH Tunnel"),disabled:function(){return!s.default.Browser.utils.support_ssh_tunnel},readonly:e.isConnected},{id:"tunnel_host",label:(0,o.default)("Tunnel host"),type:"text",group:(0,o.default)("SSH Tunnel"),mode:["properties","edit","create"],deps:["use_ssh_tunnel"],disabled:function(e){return!e.use_ssh_tunnel},readonly:e.isConnected},{id:"tunnel_port",label:(0,o.default)("Tunnel port"),type:"int",group:(0,o.default)("SSH Tunnel"),mode:["properties","edit","create"],deps:["use_ssh_tunnel"],max:65535,disabled:function(e){return!e.use_ssh_tunnel},readonly:e.isConnected},{id:"tunnel_username",label:(0,o.default)("Username"),type:"text",group:(0,o.default)("SSH Tunnel"),mode:["properties","edit","create"],deps:["use_ssh_tunnel"],disabled:function(e){return!e.use_ssh_tunnel},readonly:e.isConnected},{id:"tunnel_authentication",label:(0,o.default)("Authentication"),type:"toggle",mode:["properties","edit","create"],group:(0,o.default)("SSH Tunnel"),options:[{label:(0,o.default)("Password"),value:!1},{label:(0,o.default)("Identity file"),value:!0}],disabled:function(e){return!e.use_ssh_tunnel},readonly:e.isConnected},{id:"tunnel_identity_file",label:(0,o.default)("Identity file"),type:"file",group:(0,o.default)("SSH Tunnel"),mode:["properties","edit","create"],controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["tunnel_authentication","use_ssh_tunnel"],depChange:function(e){if(!e.tunnel_authentication&&e.tunnel_identity_file)return{tunnel_identity_file:null}},disabled:function(e){return!e.tunnel_authentication||!e.use_ssh_tunnel}},{id:"tunnel_password",label:(0,o.default)("Password"),type:"password",group:(0,o.default)("SSH Tunnel"),mode:["create"],deps:["use_ssh_tunnel"],disabled:function(e){return!e.use_ssh_tunnel},readonly:e.isConnected},{id:"save_tunnel_password",label:(0,o.default)("Save password?"),type:"switch",group:(0,o.default)("SSH Tunnel"),mode:["create"],deps:["connect_now","use_ssh_tunnel"],visible:function(t){return t.connect_now&&e.isNew(t)},disabled:function(e){return!d.default.allow_save_tunnel_password||!e.use_ssh_tunnel}},{id:"hostaddr",label:(0,o.default)("Host address"),type:"text",group:(0,o.default)("Advanced"),mode:["properties","edit","create"],readonly:e.isConnected},{id:"db_res",label:(0,o.default)("DB restriction"),type:"select",group:(0,o.default)("Advanced"),options:[],mode:["properties","edit","create"],readonly:e.isConnected,controlProps:{multiple:!0,allowClear:!1,creatable:!0,noDropdown:!0}},{id:"passfile",label:(0,o.default)("Password file"),type:"file",group:(0,o.default)("Advanced"),mode:["edit","create"],disabled:e.isValidLib,readonly:e.isConnected,controlProps:{dialogType:"select_file",supportedTypes:["*"]}},{id:"passfile",label:(0,o.default)("Password file"),type:"text",group:(0,o.default)("Advanced"),mode:["properties"],visible:function(e){var t=e.passfile;return!i.default.isUndefined(t)&&!i.default.isNull(t)}},{id:"connect_timeout",label:(0,o.default)("Connection timeout (seconds)"),type:"int",group:(0,o.default)("Advanced"),mode:["properties","edit","create"],readonly:e.isConnected,min:0}]}},{key:"validate",value:function(e,t){var n=null;if((0,c.isEmptyString)(e.service)){if(n=(0,o.default)("Either Host name, Address or Service must be specified."),(0,c.isEmptyString)(e.host)&&(0,c.isEmptyString)(e.hostaddr))return t("host",n),!0;if(t("host",null),t("hostaddr",null),e.hostaddr)try{new a.Address4(e.hostaddr)}catch(r){try{new a.Address6(e.hostaddr)}catch(e){return n=(0,o.default)("Host address must be valid IPv4 or IPv6 address."),t("hostaddr",n),!0}}else t("hostaddr",null);if(e.host){if(!this.validateHost(e.host))return n=(0,o.default)("Host name must be valid hostname or IPv4 or IPv6 address."),t("host",n),!0;t("host",null)}if((0,c.isEmptyString)(e.username))return n=(0,o.default)("Username must be specified."),t("username",n),!0;if(t("username",null),(0,c.isEmptyString)(e.port))return n=(0,o.default)("Port must be specified."),t("port",n),!0;t("port",null)}else i.default.each(["host","hostaddr","db","username","port"],(function(e){t(e,null)}));if(e.use_ssh_tunnel){if((0,c.isEmptyString)(e.tunnel_host))return n=(0,o.default)("SSH Tunnel host must be specified."),t("tunnel_host",n),!0;if(t("tunnel_host",null),(0,c.isEmptyString)(e.tunnel_port))return n=(0,o.default)("SSH Tunnel port must be specified."),t("tunnel_port",n),!0;if(t("tunnel_port",null),(0,c.isEmptyString)(e.tunnel_username))return n=(0,o.default)("SSH Tunnel username must be specified."),t("tunnel_username",n),!0;if(t("tunnel_username",null),e.tunnel_authentication){if((0,c.isEmptyString)(e.tunnel_identity_file))return n=(0,o.default)("SSH Tunnel identity file must be specified."),t("tunnel_identity_file",n),!0;t("tunnel_identity_file",null)}}return!1}}])&&h(t.prototype,n),r&&h(t,r),f}(l.default);t.default=S},87954:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeVacuumSettingsSchema=function(e,t,n){return new h((function(){return(0,a.getNodeAjaxOptions)("get_table_vacuum",e,t,n,{noCache:!0})}),(function(){return(0,a.getNodeAjaxOptions)("get_toast_table_vacuum",e,t,n,{noCache:!0})}),t)},t.default=t.VacuumTableSchema=void 0,n(68304),n(30489);var o=l(n(91669)),i=l(n(89406)),a=n(77077);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){c(n,e);var t=p(n);function n(e){var r;return s(this,n),(r=t.call(this)).valueDep=e,r}return d(n,[{key:"baseFields",get:function(){var e=this;return[{id:"label",name:"label",label:(0,o.default)("Label"),cell:""},{id:"value",name:"value",label:(0,o.default)("Value"),type:"text",deps:[[this.valueDep]],editable:function(){return e.top.sessData[this.valueDep]},cell:function(e){switch(e.column_type){case"integer":return{cell:"int"};case"number":return{cell:"numeric",controlProps:{decimals:5}};case"string":return{cell:"text"};default:return{cell:""}}}},{id:"setting",name:"setting",label:(0,o.default)("Default"),cell:""}]}}]),n}(i.default);t.VacuumTableSchema=y;var h=function(e){c(n,e);var t=p(n);function n(e,r,o){var i;return s(this,n),(i=t.call(this,{vacuum_table:[],vacuum_toast:[]})).tableVars=e,i.toastTableVars=r,i.nodeInfo=o,i.vacuumTableObj=new y("autovacuum_custom"),i.vacuumToastTableObj=new y("toast_autovacuum"),i}return d(n,[{key:"baseFields",get:function(){var e=this;return[{id:"autovacuum_custom",label:(0,o.default)("Custom auto-vacuum?"),group:(0,o.default)("Table"),mode:["edit","create"],skipChange:!0,type:"switch",disabled:function(t){return!!t.is_partitioned||(!(!t.top||!t.is_partitioned)||!e.inCatalog)},depChange:function(e){if(e.is_partitioned)return{autovacuum_custom:!1}}},{id:"autovacuum_enabled",label:(0,o.default)("Autovacuum Enabled?"),group:(0,o.default)("Table"),mode:["edit","create"],type:"toggle",options:[{label:(0,o.default)("Not set"),value:"x"},{label:(0,o.default)("Yes"),value:"t"},{label:(0,o.default)("No"),value:"f"}],deps:["autovacuum_custom"],disabled:function(t){return!e.inCatalog||!t.autovacuum_custom},depChange:function(t){if(!e.inCatalog||!t.autovacuum_custom)return{autovacuum_enabled:"x"}}},{id:"vacuum_table",label:"",editable:!1,type:"collection",canEdit:!1,canAdd:!1,canDelete:!1,group:(0,o.default)("Table"),fixedRows:this.tableVars,schema:this.vacuumTableObj,mode:["edit","create"]},{id:"toast_autovacuum",label:(0,o.default)("Custom auto-vacuum?"),group:(0,o.default)("TOAST table"),mode:["edit","create"],type:"switch",disabled:function(t){return!e.inCatalog||!e.top.isNew()&&!t.hastoasttable}},{id:"toast_autovacuum_enabled",label:(0,o.default)("Autovacuum Enabled?"),group:(0,o.default)("TOAST table"),mode:["edit","create"],type:"toggle",options:[{label:(0,o.default)("Not set"),value:"x"},{label:(0,o.default)("Yes"),value:"t"},{label:(0,o.default)("No"),value:"f"}],deps:["toast_autovacuum"],disabled:function(t){return!e.inCatalog||!t.toast_autovacuum},depChange:function(t){if(!e.inCatalog||!t.toast_autovacuum)return e.isNew()||t.hastoasttable?{toast_autovacuum_enabled:"x"}:void 0}},{id:"vacuum_toast",label:"",type:"collection",fixedRows:this.toastTableVars,editable:function(t){return e.isNew(t)},canEdit:!1,canAdd:!1,canDelete:!1,group:(0,o.default)("TOAST table"),schema:this.vacuumToastTableObj,mode:["properties","edit","create"],deps:["toast_autovacuum"]}]}}]),n}(i.default);t.default=h},14511:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(32165),n(78783),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeVariableSchema=function(e,t,n,r,o){var a=["name","value"];r&&a.push("database");o&&a.push("role");return new h((function(){return(0,l.getNodeAjaxOptions)("vopts",e,t,n,null,(function(e){var t=[];return i.default.each(e,(function(e){t.push({value:e.name,image:void 0,label:e.name,vartype:e.vartype,enumvals:e.enumvals,max_val:e.max_val,min_val:e.min_val})})),t}))}),(function(){return(0,l.getNodeListByName)("database",t,n)}),(function(){return(0,l.getNodeListByName)("role",t,n)}),a)},t.default=void 0,n(68309),n(41539),n(66992),n(33948),n(89554),n(54747),n(21249);var o=u(n(91669)),i=u(n(96486)),a=u(n(89406)),l=n(77077),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,n,r,i=m(a);function a(e,t,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(o=i.call(this,{name:void 0,value:void 0,role:null,database:null})).vnameOptions=e,o.databaseOptions=t,o.roleOptions=n,o.varTypes={},o.keys=r,o}return t=a,(n=[{key:"setVarTypes",value:function(e){var t=this;e.forEach((function(e){t.varTypes[e.value]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}))}},{key:"getValueFieldProps",value:function(e){switch(null==e?void 0:e.vartype){case"bool":return"switch";case"enum":return{cell:"select",options:(e.enumvals||[]).map((function(e){return{label:e,value:e}}))};case"integer":return"int";case"real":return"numeric";case"string":return"text";default:return""}}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"id",label:(0,o.default)("ID"),type:"int",group:null,mode:["properties"]},{id:"name",label:(0,o.default)("Name"),type:"text",readonly:function(e){return!t.isNew(e)},cell:function(){return{cell:"select",options:e.vnameOptions,optionsLoaded:function(e){t.setVarTypes(e)},controlProps:{allowClear:!1}}}},{id:"value",label:(0,o.default)("Value"),type:"text",deps:["name"],depChange:function(t,n){if("name"==n[n.length-1])return"bool"===e.varTypes[t.name].vartype?{value:!1}:{value:null}},cell:function(t){var n=e.varTypes[t.name];return e.getValueFieldProps(n)}},{id:"database",label:(0,o.default)("Database"),type:"text",cell:function(){return{cell:"select",options:e.databaseOptions}}},{id:"role",label:(0,o.default)("Role"),type:"text",cell:function(){return{cell:"select",options:e.roleOptions,controlProps:{allowClear:!1}}}}]}},{key:"validate",value:function(e,t){return(0,s.isEmptyString)(e.name)?(t("name",(0,o.default)("Please select a parameter name.")),!0):(t("name",null),(0,s.isEmptyString)(e.value)?(t("value",(0,o.default)("Please enter a value for the parameter.")),!0):void t("value",null))}}])&&f(t.prototype,n),r&&f(t,r),a}(a.default);t.default=h},81051:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),i=l(n(89406)),a=l(n(67091));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,i=m(l);function l(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return c(this,l),(n=i.call(this,u({name:void 0,owner:void 0,is_sys_obj:void 0,comment:void 0,spclocation:void 0,spcoptions:[],spcacl:[],seclabels:[]},o))).getPrivilegeRoleSchema=t,n.getVariableSchema=e,n.fieldOptions=u({role:[]},r),n}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"spcuser",label:(0,o.default)("Owner"),cell:"text",editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"is_sys_obj",label:(0,o.default)("System tablespace?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"spclocation",label:(0,o.default)("Location"),group:(0,o.default)("Definition"),type:"text",mode:["properties","edit","create"],readonly:function(t){return!e.isNew(t)},noEmpty:!0},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"spcoptions",label:"",type:"collection",schema:this.getVariableSchema(),editable:!1,group:(0,o.default)("Parameters"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0},{id:"spcacl",label:(0,o.default)("Privileges"),type:"collection",group:(0,o.default)("Security"),schema:this.getPrivilegeRoleSchema(["C"]),mode:["edit","create"],uniqueCol:["grantee"],canAdd:!0,canDelete:!0},{id:"seclabels",label:(0,o.default)("Security labels"),type:"collection",editable:!1,group:(0,o.default)("Security"),schema:new a.default,mode:["edit","create"],min_version:90200,uniqueCol:["provider"],canAdd:!0,canEdit:!1,canDelete:!0}]}}])&&f(t.prototype,n),r&&f(t,r),l}(i.default);t.default=h},46675:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=s(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,{id:void 0,name:null,user_id:void 0})}return t=u,(n=[{key:"baseFields",get:function(){return[{id:"id",label:(0,o.default)("ID"),type:"int",group:null,mode:["properties"],visible:!0},{id:"name",label:(0,o.default)("Name"),type:"text",group:null,mode:["properties","edit","create"],noEmpty:!0,disabled:!1}]}}])&&a(t.prototype,n),r&&a(t,r),u}(i(n(89406)).default);t.default=c},31126:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0,n(32564),n(89554);var r=s(n(19755)),o=s(n(81311)),i=s(n(55112)),a=s(n(1950)),l=n(44092);function s(e){return e&&e.__esModule?e:{default:e}}var u=i.default.Browser=i.default.Browser||{};t.pgBrowser=u;o.default.extend(u,{inactivity_timeout_at:null,logging_activity:!1,inactivity_timeout_daemon_running:!1,is_pgadmin_timedout:function(){return!a.default.pgAdmin},is_inactivity_timeout:function(){return a.default.pgAdmin.Browser.inactivity_timeout_at<this.get_epoch_now()},get_epoch_now:function(){return(0,l.getEpoch)()},log_activity:function(){var e=this;this.logging_activity||(this.logging_activity=!0,this.inactivity_timeout_at=this.get_epoch_now()+i.default.user_inactivity_timeout,setTimeout((function(){e.logging_activity=!1}),1e3))},register_to_activity_listener:function(e,t){var n=["mousemove","mousedown","keydown"],r=this;n.forEach((function(o){e.addEventListener(o,(function o(){r.is_pgadmin_timedout()?(n.forEach((function(t){e.removeEventListener(t,o,!0)})),t()):a.default.pgAdmin.Browser.log_activity()}),!0)}))},override_activity_event_decorator:function(e){return function(){return i.default.override_user_inactivity_timeout&&a.default.pgAdmin.Browser.log_activity(),e.apply(this,arguments)}},logout_inactivity_user:function(){o.default.isUndefined(u.utils)||o.default.isUndefined(u.utils.logout_url)||(window.location.href=u.utils.logout_url)},start_inactivity_timeout_daemon:function(){var e=this;if(i.default.user_inactivity_timeout>0&&!e.inactivity_timeout_daemon_running)var t=setInterval((function(){e.inactivity_timeout_daemon_running=!0,e.is_inactivity_timeout()&&(clearInterval(t),e.inactivity_timeout_daemon_running=!1,(0,r.default)(window).off("beforeunload"),e.logout_inactivity_user())}),1e3)}})},40634:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.url_dialog=c,n(32564),n(68309);var o=u(n(91669)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(55455)),a=u(n(28008)),l=u(n(55112));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}var d=1;function c(e,t,n,r,s){var u=l.default.Browser,c="UrlDialog"+d++;i.dialog(c,(function(){return{main:function(e){this.set({title:e})},build:function(){i.pgDialogBuild.apply(this)},settings:{url:t,title:e},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e,url:(0,a.default)("help.static",{filename:n})}},{text:(0,o.default)("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){return setTimeout((function(){return i[c]().destroy()}),1e3)}},prepare:function(){var e=document.createElement("iframe");e.frameBorder="no",e.width="100%",e.height="100%",e.src=this.setting("url"),this.elements.content.appendChild(e)},callback:function(e){"dialog_help"==e.button.element.name&&(e.cancel=!0,u.showHelp(e.button.element.name,e.button.element.getAttribute("url"),null,null))}}})),i[c](e).show().resizeTo(r||u.stdW.lg,s||u.stdH.md)}l.default.ui.dialogs.url_dialog=c},89769:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),n(24812),n(32564),n(69826);var o=m(n(81311)),i=m(n(55112)),a=m(n(19755)),l=m(n(42441)),s=p(n(44092)),u=m(n(89087)),d=p(n(72945)),c=m(n(1950));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function m(e){return e&&e.__esModule?e:{default:e}}var b=i.default.Browser=i.default.Browser||{};b.keyboardNavigation=b.keyboardNavigation||{},o.default.extend(b.keyboardNavigation,{init:function(){l.default.reset(),b.preferences_cache.length>0&&(this.keyboardShortcut={file_shortcut:s.parseShortcutValue(b.get_preference("browser","main_menu_file").value),object_shortcut:s.parseShortcutValue(b.get_preference("browser","main_menu_object").value),tools_shortcut:s.parseShortcutValue(b.get_preference("browser","main_menu_tools").value),help_shortcut:s.parseShortcutValue(b.get_preference("browser","main_menu_help").value),left_tree_shortcut:s.parseShortcutValue(b.get_preference("browser","browser_tree").value),tabbed_panel_backward:s.parseShortcutValue(b.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:s.parseShortcutValue(b.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:s.parseShortcutValue(b.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:s.parseShortcutValue(b.get_preference("browser","sub_menu_view_data").value),sub_menu_search_objects:s.parseShortcutValue(b.get_preference("browser","sub_menu_search_objects").value),sub_menu_properties:s.parseShortcutValue(b.get_preference("browser","sub_menu_properties").value),sub_menu_create:s.parseShortcutValue(b.get_preference("browser","sub_menu_create").value),sub_menu_delete:s.parseShortcutValue(b.get_preference("browser","sub_menu_delete").value),sub_menu_refresh:s.parseShortcutValue(b.get_preference("browser","sub_menu_refresh").value),context_menu:s.parseShortcutValue(b.get_preference("browser","context_menu").value),direct_debugging:s.parseShortcutValue(b.get_preference("browser","direct_debugging").value),drop_multiple_objects:s.parseShortcutValue(b.get_preference("browser","grid_menu_drop_multiple").value),drop_cascade_multiple_objects:s.parseShortcutValue(b.get_preference("browser","grid_menu_drop_cascade_multiple").value),add_grid_row:s.parseShortcutValue(b.get_preference("browser","add_grid_row").value),open_quick_search:s.parseShortcutValue(b.get_preference("browser","open_quick_search").value)},this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuSearchObjects:{shortcuts:this.keyboardShortcut.sub_menu_search_objects},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindSubMenuRefresh:{shortcuts:this.keyboardShortcut.sub_menu_refresh,bindElem:"#tree"},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging},bindDropMultipleObjects:{shortcuts:this.keyboardShortcut.drop_multiple_objects},bindDropCascadeMultipleObjects:{shortcuts:this.keyboardShortcut.drop_cascade_multiple_objects},bindAddGridRow:{shortcuts:this.keyboardShortcut.add_grid_row},bindOpenQuickSearch:{shortcuts:this.keyboardShortcut.open_quick_search}},this.bindShortcuts())},bindShortcuts:function(){var e=this;o.default.each(e.shortcutMethods,(function(t,n){e._bindWithMousetrap(t.shortcuts,e[n],t.bindElem)}));(0,a.default)(".pg-navbar").on("keydown",(function(t){switch(t.keyCode){case 37:e.bindMainMenuLeft(t);break;case 38:e.bindMainMenuUpDown(t,"up");break;case 39:e.bindMainMenuRight(t);break;case 40:e.bindMainMenuUpDown(t,"down")}}))},_bindWithMousetrap:function(e,t,n){var r=this;if(l.default.unbind(e),n){var o=document.querySelector(n);(0,l.default)(o).bind(e,function(){t.apply(this,arguments)}.bind(o))}else l.default.bind(e,(function(){t.apply(r,arguments)}))},unbindShortcuts:function(){o.default.each(this.mousetrapInstances,(function(e){e.instance.reset()})),this.mousetrapInstances=[]},bindMainMenu:function(e,t){var n=this.keyboardShortcut;t===n.file_shortcut&&(0,a.default)("#mnu_file a.dropdown-toggle").dropdown("toggle"),t===n.object_shortcut&&(0,a.default)("#mnu_obj a.dropdown-toggle").first().dropdown("toggle"),t===n.tools_shortcut&&(0,a.default)("#mnu_tools a.dropdown-toggle").dropdown("toggle"),t===n.help_shortcut&&(0,a.default)("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function(e,t){var n=0,r=i.default.Browser.docker.findPanels().length-1,a=0,l=!1,s=this.keyboardShortcut;o.default.each(i.default.Browser.docker.findPanels(),(function(e,t){e.isVisible()&&!l&&"browser"!==e._type&&(a=t,l=!0)})),t===s.tabbed_panel_backward?n=a>0?a-1:1:t===s.tabbed_panel_forward&&(n=a<r?a+1:r),i.default.Browser.docker.findPanels()[n].focus(),setTimeout((function(){document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()}),1e3)},bindMainMenuLeft:function(e){if((0,a.default)(e.target).hasClass("nav-link")){var t=(0,a.default)(e.target).closest(".nav-item");for(d._stopEventPropagation(e),t=t.prev(".nav-item");t.hasClass("d-none");)t=t.prev(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,a.default)(e.target).closest(".dropdown-menu").length>0){var n=(0,a.default)(e.target).closest("li");d._stopEventPropagation(e);var r=n.closest(".dropdown-menu");r.closest(".dropdown-submenu").length>0&&(r.removeClass("show"),r.closest(".dropdown-submenu").removeClass("dropdown-submenu-visible"),(n=r.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}},bindMainMenuRight:function(e){if((0,a.default)(e.target).hasClass("nav-link")){var t=(0,a.default)(e.target).closest(".nav-item");for(d._stopEventPropagation(e),t=t.next(".nav-item");t.hasClass("d-none");)t=t.next(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,a.default)(e.target).closest(".dropdown-menu").length>0){var n=(0,a.default)(e.target).closest("li");d._stopEventPropagation(e),n.hasClass("dropdown-submenu")&&(n.addClass("dropdown-submenu-visible"),n.find(".dropdown-menu").addClass("show"),n.find(".dropdown-menu .dropdown-item").first().trigger("focus"))}},bindMainMenuUpDown:function(e,t){if((0,a.default)(e.target).closest(".dropdown-menu").length>0){d._stopEventPropagation(e);var n=(0,a.default)(e.target).closest("li"),r=(0,a.default)(e.target).closest(".dropdown-menu");for(r.find(".show").removeClass("show"),r.find(".dropdown-submenu").removeClass("dropdown-submenu-visible"),"up"===t?n=n.prev():"down"===t&&(n=n.next());n.hasClass("dropdown-divider")||n.find(".dropdown-item").first().hasClass("disabled");)"up"===t?n=n.prev():"down"===t&&(n=n.next());n.find(".dropdown-item").trigger("focus")}},bindLeftTree:function(){var e=this.getTreeDetails();(0,a.default)("#tree").trigger("focus"),e.t.select(e.i)},bindSubMenuQueryTool:function(){var e=this.getTreeDetails();e.d&&i.default.DataGrid.show_query_tool("",e.i)},bindSubMenuViewData:function(){var e=this.getTreeDetails();e.d&&i.default.DataGrid.show_data_grid({mnuid:1},e.i)},bindSubMenuSearchObjects:function(){var e=this.getTreeDetails();e.d&&i.default.SearchObjects.show_search_objects("",e.i)},bindSubMenuProperties:function(){var e=this.getTreeDetails();e.d&&!0!==i.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&i.default.Browser.Node.callbacks.show_obj_properties.call(i.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"edit"})},bindSubMenuCreate:function(){var e=this.getTreeDetails(),t=i.default.Browser.Nodes[e.t.itemData(e.i)._type];if(e.d){if(!0===t.collection_node){if(!t.node)return;t=i.default.Browser.Nodes[t.node]}i.default.Browser.Node.callbacks.show_obj_properties.call(t,{action:"create",item:e.i})}},bindSubMenuDelete:function(){var e=this.getTreeDetails();e.d&&!0!==i.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&i.default.Browser.Node.callbacks.delete_obj.call(i.default.Browser.Nodes[e.t.itemData(e.i)._type])},bindSubMenuRefresh:function(e){e.preventDefault();var t=b.keyboardNavigation.getTreeDetails();i.default.Browser.Node.callbacks.refresh.call(i.default.Browser.Nodes[t.t.itemData(t.i)._type])},bindContextMenu:function(e){var t=this.getTreeDetails(),n=e.srcElement||e.target,r=(0,a.default)(n).find(".aciTreeEntry").position().left+70,o=(0,a.default)(n).find(".aciTreeEntry").position().top+70;t.t.blur(t.i),(0,a.default)("#tree").trigger("blur"),t.i.children().contextMenu({x:r,y:o})},bindDirectDebugging:function(){var e=this.getTreeDetails(),t=e.t.itemData(e.i)._type;!e.d||"function"!==t&&"procedure"!==t||i.default.Tools.Debugger.can_debug(e.d,e.i,{debug_type:"direct"})&&i.default.Tools.Debugger.get_function_information(i.default.Browser.Nodes[t])},bindDropMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,a.default)("button.delete_multiple").length>0&&(0,a.default)("button.delete_multiple").click()},bindDropCascadeMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,a.default)("button.delete_multiple_cascade").length>0&&(0,a.default)("button.delete_multiple_cascade").click()},bindAddGridRow:function(){var e=(0,a.default)(document.activeElement).closest(".object.subnode");(0,a.default)(e).length&&(0,a.default)(e).find(".add").click()},isPropertyPanelVisible:function(){var e=!1;return o.default.each(i.default.Browser.docker.findPanels(),(function(t){"properties"===t._type&&(e=t.isVisible())})),e},getTreeDetails:function(){var e=i.default.Browser.tree,t=e.selected()?e.selected():e.first(),n=t?e.itemData(t):void 0;return{t:e,i:t,d:n}},getDialogTabNavigator:function(e){var t=c.default.pgAdmin.Browser.get_preference("browser","dialog_tab_backward").value,n=c.default.pgAdmin.Browser.get_preference("browser","dialog_tab_forward").value;return new u.default.dialogTabNavigator(e,t,n)},bindOpenQuickSearch:function(){(0,a.default)("#search_icon").trigger("click")}}),e.exports=i.default.Browser.keyboardNavigation},88799:(e,t,n)=>{var r=n(64492);n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0,n(32564),n(68309);var o=d(n(55112)),i=d(n(28008)),a=d(n(19755)),l=d(n(91669));n(35816);var s=d(n(1950)),u=d(n(55958));function d(e){return e&&e.__esModule?e:{default:e}}var c=o.default.Browser=o.default.Browser||{};t.pgBrowser=c;var f=window.wcDocker;r.extend(c,{lock_layout_levels:{PREVENT_DOCKING:"docking",FULL:"full",NONE:"none"},buildDefaultLayout:function(e){var t=e.addPanel("browser",f.DOCK.LEFT),n=e.addPanel("dashboard",f.DOCK.RIGHT,t);e.addPanel("properties",f.DOCK.STACKED,n,{tabOrientation:f.TAB.TOP}),e.addPanel("sql",f.DOCK.STACKED,n),e.addPanel("statistics",f.DOCK.STACKED,n),e.addPanel("dependencies",f.DOCK.STACKED,n),e.addPanel("dependents",f.DOCK.STACKED,n)},save_current_layout:function(e,t){if(t){var n={setting:e,value:t.save()};a.default.ajax({type:"POST",url:(0,i.default)("settings.store_bulk"),data:n})}},restore_layout:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""!=t)try{if(e.restore(t),r){var o=e.findPanels("properties");0==o.length&&n&&(e.clear(),u.default.info((0,l.default)("pgAdmin has reset the layout because the previously saved layout is invalid."),null),n(e))}}catch(t){e.clear(),n&&n(e)}else n&&n(e);var i=s.default.pgAdmin.Browser,a=setInterval((function(){i.get_preferences_for_module("browser")&&(clearInterval(a),i.reflectLocklayoutChange(e),i.onPreferencesChange("browser",(function(){i.reflectLocklayoutChange(e)})))}),5e3)},reflectLocklayoutChange:function(e){var t=s.default.pgAdmin.Browser,n=t.get_preferences_for_module("browser");t.lock_layout(e,n.lock_layout)},lock_layout:function(e,t){var n=[];switch("mnu_locklayout"in this.menus.file&&(n=this.menus.file.mnu_locklayout.menu_items),t){case this.lock_layout_levels.PREVENT_DOCKING:e.lockLayout(f.LOCK_LAYOUT_LEVEL.PREVENT_DOCKING);break;case this.lock_layout_levels.FULL:e.lockLayout(f.LOCK_LAYOUT_LEVEL.FULL);break;case this.lock_layout_levels.NONE:e.lockLayout(f.LOCK_LAYOUT_LEVEL.NONE)}n&&r.each(n,(function(e){e.name!="mnu_lock_"+t?e.change_checked(!1):e.change_checked(!0)}))},save_lock_layout:function(e){var t=s.default.pgAdmin.Browser;a.default.ajax({url:(0,i.default)("browser.lock_layout"),method:"PUT",contentType:"application/json",data:JSON.stringify({value:e})}).done((function(){t.cache_preferences("browser")})).fail((function(e,t){u.default.pgNotifier(t,e,(0,l.default)("Failed to save the lock layout setting."))}))},mnu_lock_docking:function(){this.lock_layout(this.docker,this.lock_layout_levels.PREVENT_DOCKING),this.save_lock_layout(this.lock_layout_levels.PREVENT_DOCKING)},mnu_lock_full:function(){this.lock_layout(this.docker,this.lock_layout_levels.FULL),this.save_lock_layout(this.lock_layout_levels.FULL)},mnu_lock_none:function(){this.lock_layout(this.docker,this.lock_layout_levels.NONE),this.save_lock_layout(this.lock_layout_levels.NONE)}})},77077:(e,t,n)=>{n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.generateCollectionURL=function(e,t){var n={properties:"obj",children:"nodes",drop:"obj"},r=this,o=a.default.Browser.tree.getTreeNodeHierarchy(e),l=t in n?n[t]:t;return(0,i.generate_url)(a.default.Browser.URL,o,l,r.node,(function(e,t){return t!=r.type}))},t.generateNodeUrl=c,t.getNodeAjaxOptions=f,t.getNodeListById=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!0},a=function(t){var n=[];return r.default.each(t,(function(t){if(i(t)){var o=r.default.isFunction(e.node_label)?e.node_label.apply(e,[t]):t.label,a=r.default.isFunction(e.node_image)?e.node_image.apply(e,[t]):e.node_image||"icon-"+e.type;n.push({value:t._id,image:a,label:o})}})),n};return f("nodes",e,t,n,o,a)},t.getNodeListByName=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!0},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e){return e},s=a.default.Browser.Nodes[e],d=o.includeItemKeys,c=function(e){var t=[];return r.default.each(e,(function(e){if(i(e)){var n=r.default.isFunction(s.node_label)?s.node_label.apply(s,[e]):e.label,o=r.default.isFunction(s.node_image)?s.node_image.apply(s,[e]):s.node_image||"icon-"+s.type;t.push(u({value:e.label,image:o,label:n},r.default.pick(e,d)))}})),l(t)};return f("nodes",s,t,n,o,c)},n(88674),n(41539),n(69070);var r=l(n(96486)),o=l(n(2832)),i=n(61329),a=l(n(55112));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n,o,l){var s={create:"obj",drop:"obj",edit:"obj",properties:"obj",statistics:"stats"},u=-1/0,d=this,c=o&&n._type==d.type?encodeURIComponent(n._id):"";if(t=t in s?s[t]:t,d.parent_type)if(r.default.isString(d.parent_type)){var f=e[d.parent_type];f&&(u=f.priority)}else r.default.each(d.parent_type,(function(t){var n=e[t];n&&u<n.priority&&(u=n.priority)}));var p=u;l&&e[l]&&(p=e[l].priority);return(0,i.generate_url)(a.default.Browser.URL,e,t,d.type,(function(e){return e.priority<=p||e.priority==u}),c)}function f(e,t,n,i){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e){return e},d=u({urlWithId:!1,jumpAfterNode:null,useCache:!0,customGenerateUrl:null},l);return new Promise((function(l,u){var f=(0,o.default)(),p="";if(e&&(p=d.customGenerateUrl?d.customGenerateUrl.call(t,n,e,i,d.urlWithId,d.jumpAfterNode):c.call(t,n,e,i,d.urlWithId,d.jumpAfterNode)),e){var m=a.default.Browser.Nodes[d.cacheNode]||t,b=d.cacheLevel||m.cache_level(n,d.urlWithId),y=m.cache(t.type+"#"+e,n,b);r.default.isUndefined(y)||r.default.isNull(y)?f.get(p,{params:d.urlParams}).then((function(r){y=r.data,r.data.data&&(y=r.data.data),d.useCache&&m.cache(t.type+"#"+e,n,b,y),l(s(y))})).catch((function(e){u(e)})):l(s(y.data||[]))}}))}},49929:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeView=function(e,t,n,f,m,b,y,h,g){var v=i.default.Browser.Nodes[e],_=t&&"server"in t&&i.default.Browser.serverInfo&&i.default.Browser.serverInfo[t.server._id],w=t&&"catalog"in t,O=u.generateNodeUrl.call(v,t,n,f,!1,v.url_jump_after_node),S=(0,a.default)(),x=function(e){return O+(e?"":f._id)},C=!1,P=!0,E=i.default.Browser.get_preferences_for_module("browser").confirm_on_properties_close,j=function(e){e.response?console.error("error resp",e.response):e.request?console.error("error req",e.request):e.message&&console.error("error msg",e.message)};y.closeable()&&y.on(window.wcDocker.EVENT.CLOSING,function(e){var t=i.default.Browser.get_preferences_for_module("browser").confirm_on_properties_close;return P&&t?!C||(d.default.confirm((0,c.default)("Warning"),(0,c.default)("Changes will be lost. Are you sure you want to close the dialog?"),(function(){return e(),!0}),(function(){return!0})),!1):(e(),!0)}.bind(y,(function(){y.off(window.wcDocker.EVENT.CLOSING),p(b),y.close()})));var k={mode:n,serverInfo:_?{type:_.server_type,version:_.version}:void 0,inCatalog:w},D=v.getSchema.call(v,t,f);"catalog"in t&&"tab"!==m&&(D.filterGroups=[(0,c.default)("Security")]);o.default.render(r.default.createElement(s.default,{formType:m,getInitData:function(){return new Promise((function(e,t){S.get(x(!1)).then((function(t){e(t.data)})).catch((function(e){j(e),t(e)}))}))},schema:D,viewHelperProps:k,onSave:function(e,t){return new Promise((function(n,r){return S({url:x(e),method:e?"POST":"PUT",data:t}).then((function(e){P=!1,n(e.data),g&&g(e.data)})).catch((function(e){r(e)}))}))},onClose:function(){return y.close()},onHelp:function(){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var n=t.server,r=i.default.Browser.utils.pg_help_path,o="";o="ppas"==n.server_type&&v.epasHelp?(0,l.getEPASHelpUrl)(n.version):""==v.sqlCreateHelp&&""!=v.sqlAlterHelp?(0,l.getHelpUrl)(r,v.sqlAlterHelp,n.version):""!=v.sqlCreateHelp&&""==v.sqlAlterHelp||e?(0,l.getHelpUrl)(r,v.sqlCreateHelp,n.version):(0,l.getHelpUrl)(r,v.sqlAlterHelp,n.version),window.open(o,"postgres_help")}else window.open(v.dialogHelp,"pgadmin_help")},onEdit:h,onDataChange:function(e){C=e},confirmOnCloseReset:E,hasSQL:v.hasSQL&&("create"===n||"edit"===n),getSQLValue:function(e,n){var r=u.generateNodeUrl.call(v,t,"msql",f,!e,v.url_jump_after_node);return new Promise((function(e,t){S({url:r,method:"GET",params:n}).then((function(t){e(t.data.data)})).catch((function(e){j(e),t(e)}))}))},disableSqlHelp:""==v.sqlAlterHelp&&""==v.sqlCreateHelp&&!v.epasHelp,disableDialogHelp:null==v.dialogHelp||""==v.dialogHelp}),b)},t.removeNodeView=p,n(88674),n(41539),n(24812);var r=f(n(67294)),o=f(n(73935)),i=f(n(55112)),a=f(n(2832)),l=n(68363),s=f(n(52237)),u=n(77077),d=f(n(55958)),c=f(n(91669));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){o.default.unmountComponentAtNode(e)}n(35816)},44434:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getPanelView=function(e,t,n,u){var d=e.selected(),c=d&&e.itemData(d),f=d&&c&&n.Nodes[c._type],p=n.tree.getTreeNodeHierarchy(d);"statistics"==u&&o.default.render(r.default.createElement(i.default,null,r.default.createElement(s.default,{treeNodeInfo:p,pgBrowser:n,nodeData:c,node:f,item:d})),t);"dependencies"==u&&o.default.render(r.default.createElement(i.default,null,r.default.createElement(a.default,{treeNodeInfo:p,pgBrowser:n,nodeData:c,node:f,item:d})),t);"dependents"==u&&o.default.render(r.default.createElement(i.default,null,r.default.createElement(l.default,{treeNodeInfo:p,pgBrowser:n,nodeData:c,node:f,item:d})),t)},t.removePanelView=function(e){o.default.unmountComponentAtNode(e)};var r=u(n(67294)),o=u(n(73935)),i=u(n(4394)),a=u(n(73516)),l=u(n(80786)),s=u(n(18210));function u(e){return e&&e.__esModule?e:{default:e}}},3650:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0,n(83710),n(68309),n(47941),n(32564);var i=f(n(55112)),a=f(n(28008)),l=f(n(19755)),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(81240)),u=f(n(1950)),d=f(n(55958));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function f(e){return e&&e.__esModule?e:{default:e}}var p=i.default.Browser=i.default.Browser||{};t.pgBrowser=p,r.extend(p,{preferences_cache:[],prefcache_version:0,generate_preference_version:function(){return(new Date).getTime()},preference_version:function(e){if(!e)return this.prefcache_version;this.prefcache_version=e},get_preference:function(e,t){return r.findWhere(this.preferences_cache,{module:e,name:t})},get_preferences_for_module:function(e){var t={};if(r.each(r.where(this.preferences_cache,{module:e}),(function(e){t[e.name]=e.value})),Object.keys(t).length>0)return t},get_preference_for_id:function(e){return r.findWhere(this.preferences_cache,{id:e})},cache_preferences:function(e){var t=this,n={};n[i.default.csrf_token_header]=i.default.csrf_token,setTimeout((function(){l.default.ajax({url:(0,a.default)("preferences.get_all"),headers:n}).done((function(n){t.preferences_cache=n,t.preference_version(t.generate_preference_version()),p.keyboardNavigation.init(),p.browserTreeState.init(),e&&("string"==typeof e?l.default.event.trigger("prefchange:"+e):r.each(e,(function(e,t){l.default.event.trigger("prefchange:"+t)})))})).fail((function(e,t,n){d.default.pgRespErrorNotify(e,n)}))}),500)},reflectPreferences:function(e){var t=this;if("sqleditor"===e||null==e){var n,r,o,i,a,u,d=t.get_preferences_for_module("sqleditor");(0,l.default)(null==t||null===(n=t.editor)||void 0===n?void 0:n.getWrapperElement()).css("font-size",s.calcFontSize(d.sql_font_size)),null==t||null===(r=t.editor)||void 0===r||r.setOption("tabSize",d.tab_size),null==t||null===(o=t.editor)||void 0===o||o.setOption("lineWrapping",d.wrap_code),null==t||null===(i=t.editor)||void 0===i||i.setOption("autoCloseBrackets",d.insert_pair_brackets),null==t||null===(a=t.editor)||void 0===a||a.setOption("matchBrackets",d.brace_matching),null==t||null===(u=t.editor)||void 0===u||u.refresh()}},onPreferencesChange:function(e,t){(0,l.default)(u.default).on("prefchange:"+e,(function(e){t(e)}))}})},76916:(e,t,n)=>{n(32564);var r=a(n(67294)),o=a(n(73935)),i=n(19792);function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t){console.warn("URL = "+e),console.warn(t)};setTimeout((function(){document.getElementById("quick-search-component")&&o.default.render(r.default.createElement(i.Search,{onResult:l}),document.getElementById("quick-search-component"))}),500)},51488:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(4129),n(41539),n(78783),n(66992),n(33948),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.Iframe=void 0,n(68304),n(30489);var o,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=(o=n(45697))&&o.__esModule?o:{default:o};function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,e);var t,n,r,o=c(l);function l(){return s(this,l),o.apply(this,arguments)}return t=l,r=[{key:"propTypes",get:function(){return{id:a.default.string.isRequired,srcURL:a.default.string.isRequired,onLoad:a.default.func.isRequired}}}],(n=[{key:"render",value:function(){var e=this.props,t=e.id,n=e.srcURL,r=e.onLoad;return i.default.createElement("iframe",{id:t,src:n,onLoad:r,width:"20",height:"20",style:{border:"0",display:"block",position:"absolute",opacity:"0"}})}}])&&u(t.prototype,n),r&&u(t,r),l}(i.Component);t.Iframe=m},3150:(e,t,n)=>{n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.menuSearch=function(e,t){var n;e=e.trim();var r=t.setState,i=[];window.pgAdmin.Browser.utils.app_name&&(n=(0,o.default)("About "+window.pgAdmin.Browser.utils.app_name));var l=function(t,o){Array.from(t.children).forEach((function(t){var l,d;"UL"==t.tagName?(l=s(t),d="".concat(o,"/").concat(l),u(t,d)):"LI"==t.tagName&&(t.classList.contains("dropdown-submenu")?(l=s(t),d="".concat(o,"/").concat(l),u(t,d)):function(t,o){var l=s(t);if(l&&-1!=l.toLowerCase().indexOf(e.toLowerCase())){var u={};u[l]=o,u.element=t.children[0],i.push(u)}l===n&&r((function(e){return a(a({},e),{},{fetched:!0,data:i})}))}(t,o))}))},u=function(e,t){Array.from(e.children).forEach((function(e){"UL"==e.tagName&&l(e,t)}))},d=document.querySelector(".navbar-nav");Array.from(d.children).forEach((function(e){u(e,s(e))}))},n(73210),n(15306),n(74916),n(82772),n(91038),n(78783),n(89554),n(54747),n(92222);var r,o=(r=n(91669))&&r.__esModule?r:{default:r};function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t,n=e.getElementsByTagName("a");return n.length>0&&(t=(t=n[0].text.trim()).replace(/\.+$/g,"")),t}},67976:(e,t,n)=>{n(47042),n(41539),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),n(69070),n(47941),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.onlineHelpSearch=function(e,t){e=e.split(" ").join("+");var n=t.setState,l=(0,a.default)("help.static",{filename:"search.html"}),s="".concat(l,"?q=").concat(e),d=!1;document.getElementById("hidden-quick-search-iframe")&&document.getElementById("hidden-quick-search-iframe").contentDocument.location.reload(!0);o.default.render(r.default.createElement(i.Iframe,{id:"hidden-quick-search-iframe",srcURL:s,onLoad:function(){if(d)return!1;d=!0;var e=document.getElementById("hidden-quick-search-iframe"),t=(e.contentWindow||e.contentDocument).document;window.pooling=setInterval((function(){var e=t.getElementById("search-results"),r=e.getElementsByTagName("h2"),i=e&&e.getElementsByTagName("LI"),l=window.pooling;if(i&&i.length>0){var f=function(e){var t,n={},r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var o=t.value.getElementsByTagName("A");if(0==o.length)break;var i=o[0].text,l=(0,a.default)("help.static",{filename:o[0].getAttribute("href")});n[i]=l}}catch(e){r.e(e)}finally{r.f()}return n}(i);"Searching"!=r[0].childNodes[0].textContent?(window.clearInterval(l),n((function(e){return u(u({},e),{},{fetched:!0,clearedPooling:!0,url:s,data:f})})),d=!1,o.default.unmountComponentAtNode(document.getElementById("quick-search-iframe-container"))):n((function(e){return u(u({},e),{},{fetched:!0,clearedPooling:!1,url:s,data:f})}))}else"Search Results"==r[0].childNodes[0].textContent&&(n((function(e){return u(u({},e),{},{fetched:!0,clearedPooling:!0,url:s,data:{}})})),o.default.unmountComponentAtNode(document.getElementById("quick-search-iframe-container")),d=!1,window.clearInterval(l))}),500)}}),document.getElementById("quick-search-iframe-container"))},n(69600),n(23123),n(74916),n(92222),n(32564);var r=l(n(67294)),o=l(n(73935)),i=n(51488),a=l(n(28008));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},19792:(e,t,n)=>{n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),n(69070),n(57327),n(38880),n(49337),n(33321),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.Search=function(){var e=(0,r.useRef)(null),t=b((0,r.useState)(""),2),n=t[0],u=t[1],d=b((0,r.useState)(!1),2),f=d[0],m=d[1],y=b((0,r.useState)(!1),2),h=y[0],g=y[1],v=b((0,r.useState)(!1),2),_=v[0],w=v[1],O=b((0,r.useState)({fetched:!1,data:[]}),2),S=O[0],x=O[1],C=b((0,r.useState)({fetched:!1,clearedPooling:!0,url:"",data:[]}),2),P=C[0],E=C[1],j=b((0,r.useState)(!1),2),k=j[0],D=j[1],T=function(){x((function(e){return p(p({},e),{},{fetched:!1,data:[]})})),E((function(e){return p(p({},e),{},{fetched:!1,clearedPooling:!0,url:"",data:{}})}))};(0,r.useEffect)((function(){1==S.fetched&&g(!1),1==P.fetched&&w(!1)}),[S,P]);(0,o.useDelayDebounce)((function(e){g(!0),w(!0),(0,i.onlineHelpSearch)(e,{state:P,setState:E}),(0,a.menuSearch)(e,{state:S,setState:x})}),n,1e3);var R=function(){var e=window.pooling;e&&window.clearInterval(e),document.getElementsByClassName("live-search-field")[0].value="",setTimeout((function(){document.getElementById("live-search-field").focus()}),100),T(),D(!k),g(!1),w(!1),m(!1)},N=function(e){if(e){for(var t=e.split("/"),n=[],o=0;o<t.length;o++)o==t.length-1?n.push(t[o]):n.push(r.default.createElement("span",{key:"menu-span-sub"+o}," ",t[o]," ",r.default.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"})," "));return n}};return function(e){(0,r.useEffect)((function(){function t(t){if(e.current&&!e.current.contains(t.target)){var n=document.getElementById("live-search-field");if(null==n)return;var r=n.value;r&&r.length>0&&R()}}return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[e])}(e),r.default.createElement("ul",{id:"quick-search-container",ref:e,className:"test",role:"menu"},r.default.createElement("li",null,r.default.createElement("ul",{id:"myDropdown"},r.default.createElement("li",{className:"dropdown-item-input"},r.default.createElement("input",{tabIndex:"0",autoFocus:!0,type:"text",autoComplete:"off",className:"form-control live-search-field","aria-label":"live-search-field",id:"live-search-field",placeholder:(0,s.default)("Quick Search"),onChange:function(e){!function(e){var t=window.pooling;t&&window.clearInterval(t);T(),u(""),e.length>=3?(u(e),g(!0),w(!0),m(!1)):(g(!1),w(!1));e.length<3&&e.length>0&&m(!0);0==e.length&&m(!1)}(e.target.value)}})),r.default.createElement("div",{style:{marginBottom:0}},r.default.createElement("div",null,f?r.default.createElement("div",{className:"pad-12 no-results"},r.default.createElement("span",{className:"fa fa-info-circle"})," Please enter minimum 3 characters to search"):"",r.default.createElement("div",null,1==S.fetched&&0==h?r.default.createElement("div",null,r.default.createElement("div",{className:"menu-groups"},r.default.createElement("span",{className:"fa fa-window-maximize"}),"  ",(0,s.default)("MENU ITEMS")," (",S.data.length,")"),function(e){if(e.length>0){var t=function(){for(var t=[],n=function(n){Object.keys(e[n]).forEach((function(o){"element"!=o&&"No object selected"!=o&&t.push(r.default.createElement("li",{key:"li-menu-"+n},r.default.createElement("a",{tabIndex:"0",id:"li-menu-"+n,href:"#",className:1==e[n].element.classList.contains("disabled")?"dropdown-item menu-groups-a disabled":"dropdown-item menu-groups-a",key:"menu-"+n,onClick:function(){e[n].element.click(),R()}},o,r.default.createElement("span",{key:"menu-span-"+n},N(e[n][o]))),1==e[n].element.classList.contains("disabled")&&null!=e[n].element.getAttribute("data-disabled")?r.default.createElement("i",{className:"fa fa-info-circle quick-search-tooltip","data-toggle":"tooltip",title:e[n].element.getAttribute("data-disabled"),"aria-label":"Test data tooltip","aria-hidden":"true"}):""))}))},o=0;o<e.length;o++)n(o);return(0,l.default)('[data-toggle="tooltip"]').tooltip(),{v:t}}();if("object"===c(t))return t.v}}(S.data)):h?r.default.createElement("div",{className:"pad-12"},r.default.createElement("div",{className:"search-icon"},(0,s.default)("Searching..."))):"",0==S.data.length&&1==S.fetched&&0==h?r.default.createElement("div",{className:"pad-12 no-results"},r.default.createElement("span",{className:"fa fa-info-circle"})," ",(0,s.default)("No search results")):"",1==P.fetched&&0==_?r.default.createElement("div",null,r.default.createElement("div",{className:"help-groups"},r.default.createElement("span",{className:"fa fa-question-circle"}),"  ",(0,s.default)("HELP ARTICLES")," ",Object.keys(P.data).length>10?r.default.createElement("span",null,"(10 of ",Object.keys(P.data).length," )"):"("+Object.keys(P.data).length+")"," ",P.clearedPooling?"":r.default.createElement("img",{src:"/static/img/loading.gif",alt:(0,s.default)("Loading..."),className:"help_loading_icon"}),Object.keys(P.data).length>10?r.default.createElement("a",{href:P.url,className:"pull-right no-padding",target:"_blank",rel:"noreferrer"},(0,s.default)("Show all"),"  ",r.default.createElement("span",{className:"fas fa-external-link-alt"})):""),Object.keys(P.data).map((function(e,t){if(t<=9)return r.default.createElement("li",{key:"li-help-"+t},r.default.createElement("a",{tabIndex:"0",href:P.data[e],key:"help-"+t,className:"dropdown-item",target:"_blank",rel:"noreferrer"},e))})),0==Object.keys(P.data).length?r.default.createElement("div",{className:"pad-12 no-results"},r.default.createElement("span",{className:"fa fa-info-circle"})," ",(0,s.default)("No search results")):""):_&&0==h?r.default.createElement("div",null,r.default.createElement("div",{className:"help-groups"},r.default.createElement("span",{className:"fa fa-question-circle"})," HELP ARTICLES",Object.keys(P.data).length>10?"(10 of "+Object.keys(P.data).length+")":"("+Object.keys(P.data).length+")",Object.keys(P.data).length>10?r.default.createElement("a",{href:P.url,className:"pull-right no-padding",target:"_blank",rel:"noreferrer"},"Show all  ",r.default.createElement("span",{className:"fas fa-external-link-alt"})):""),r.default.createElement("div",{className:"pad-12"},r.default.createElement("div",{className:"search-icon"},(0,s.default)("Searching...")))):""))))),r.default.createElement("div",{id:"quick-search-iframe-container"}))},n(32564),n(89554),n(54747),n(47941),n(23123),n(74916),n(21249),n(79753);var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(67294)),o=n(50464),i=n(67976),a=n(3150),l=u(n(19755)),s=u(n(91669));function u(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},37944:(e,t,n)=>{var r=n(64492);n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var o=u(n(55112)),i=u(n(28008)),a=u(n(19755)),l=u(n(91669)),s=u(n(55958));function u(e){return e&&e.__esModule?e:{default:e}}var d=o.default.Browser=o.default.Browser||{};t.pgBrowser=d,r.extend(d,{send_signal_to_runtime:function(e){a.default.ajax({url:(0,i.default)("browser.signal_runtime"),method:"POST",contentType:"application/json",data:JSON.stringify({command:e})}).fail((function(e,t){s.default.pgNotifier(t,e,(0,l.default)("Failed to send signal to runtime."))}))},mnu_configure_runtime:function(){this.send_signal_to_runtime("Runtime Open Configuration")},mnu_viewlog_runtime:function(){this.send_signal_to_runtime("Runtime Open View Log")},mnu_toggle_fullscreen_runtime:function(){this.send_signal_to_runtime("Runtime Toggle Full Screen")},mnu_actual_size_runtime:function(){this.send_signal_to_runtime("Runtime Actual Size")},mnu_zoomin_runtime:function(){this.send_signal_to_runtime("Runtime Zoom In")},mnu_zoomout_runtime:function(){this.send_signal_to_runtime("Runtime Zoom Out")}})},85530:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.initializeToolbar=function(e,t){s=e,o.default.each(u,(function(e){c(e)})),o.default.each(d,(function(e){c(e)})),e.on(t.EVENT.BUTTON,(function(e){if("name"in e&&e.name===(0,r.default)("Query Tool"))i.default.DataGrid.show_query_tool("",i.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("View Data"))i.default.DataGrid.show_data_grid({mnuid:3},i.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("Filtered Rows"))i.default.DataGrid.show_filtered_row({mnuid:4},i.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("Search objects"))i.default.SearchObjects.show_search_objects("",i.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("PSQL Tool")){var t=i.default.Browser.tree,n={}.item||t.selected(),o=n?t.itemData(n):void 0;i.default.Browser.psql.psql_tool(o,n,!0)}}))},t.enable=function(e,t){e in l?s.buttonEnable(e,t):console.warn("Developer warning: No tool button found with label: "+e)},n(34553),n(68309);var r=a(n(91669)),o=a(n(81311)),i=a(n(55112));function a(e){return e&&e.__esModule?e:{default:e}}var l={},s=null,u=[{label:(0,r.default)("Search objects"),ariaLabel:(0,r.default)("Search objects"),btnClass:"fa fa-search",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,r.default)("Filtered Rows"),ariaLabel:(0,r.default)("Filtered Rows"),btnClass:"pg-font-icon icon-row_filter",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,r.default)("View Data"),ariaLabel:(0,r.default)("View Data"),btnClass:"pg-font-icon sql-icon-lg icon-view_data",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,r.default)("Query Tool"),ariaLabel:(0,r.default)("Query Tool"),btnClass:"pg-font-icon icon-query_tool",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1}];i.default.enable_psql&&u.unshift({label:(0,r.default)("PSQL Tool"),ariaLabel:(0,r.default)("PSQL Tool"),btnClass:"fas fa-terminal",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon pg-toolbar-psql",enabled:!1});var d=[];function c(e){(!(e.label in l)||o.default.findIndex(s._buttonList,{name:e.label})<0)&&(s.addButton(e.label,e.btnClass,e.text,e.label,e.toggled,e.toggleClass,e.parentClass,e.enabled,e.ariaLabel),l[e.label]=e)}},10426:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.fetch_ticket=l,t.validate_kerberos_ticket=function(){if(o.default.current_auth_source!=i.default.KERBEROS)return;return setInterval((function(){s().then((function(){}),l)}),1e4)},t.fetch_ticket_lifetime=s,n(88674),n(41539),n(32564);var r=a(n(28008)),o=a(n(6537)),i=a(n(92026));function a(e){return e&&e.__esModule?e:{default:e}}function l(){return fetch((0,r.default)("kerberos.update_ticket")).then((function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))}))}function s(){return fetch((0,r.default)("kerberos.validate_ticket")).then((function(e){return e.status>=200&&e.status<300?e.json():Promise.reject(new Error(e.statusText))})).then((function(e){var t=e.data.ticket_lifetime;return t>0?Promise.resolve(t):Promise.reject()}))}},11034:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(69070);var r=a(n(67294)),o=a(n(73935)),i=a(n(15412));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n,r,o){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];l(this,e),this.container=t,this.preferences=n,this.sid=r,this.did=o,this.pageVisible=i}var t,n,a;return t=e,(n=[{key:"render",value:function(){this.container&&this.preferences.show_graphs&&o.default.render(r.default.createElement(i.default,{sid:this.sid,did:this.did,preferences:this.preferences,pageVisible:this.pageVisible}),this.container)}},{key:"unmount",value:function(){this.container&&o.default.unmountComponentAtNode(this.container)}},{key:"setSidDid",value:function(e,t){this.sid=e,this.did=t,this.render()}},{key:"reflectPreferences",value:function(e){this.preferences=e,e.show_graphs?this.render():this.unmount()}},{key:"setPageVisible",value:function(e){this.pageVisible=e,this.render()}}])&&s(t.prototype,n),a&&s(t,a),e}();t.default=u},15412:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(79753),n(82526),n(41817),n(32165),n(78783),n(91038),n(68309),n(69070),n(57327),n(38880),n(49337),n(33321),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.transformData=O,t.legendCallback=S,t.getStatsUrl=x,t.statsReducer=C,t.default=E,t.GraphsWrapper=j,t.POINT_SIZE=t.X_AXIS_LENGTH=void 0,n(21249),n(47941),n(41539),n(66992),n(33948),n(69600),n(89554),n(54747),n(92222),n(47042),n(91058);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=n(10416),a=n(9109),l=p(n(28008)),s=p(n(9669)),u=p(n(91669)),d=n(44092),c=n(50464),f=p(n(45697));function p(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.X_AXIS_LENGTH=75;function O(e,t){var n=["#00BCD4","#9CCC65","#E64A19"],r=Object.keys(e).map((function(t,r){return{label:t,data:e[t]||[],borderColor:n[r],backgroundColor:n[r],pointHitRadius:2}}))||[];return{labels:v(Array(75).keys()),datasets:r,refreshRate:t}}function S(e){var t=[];t.push('<div class="'+e.id+'-legend d-flex">');var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e.data.datasets);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.push('<div class="legend-value"><span style="background-color:'+o.backgroundColor+'">&nbsp;&nbsp;&nbsp;&nbsp;</span>'),o.label&&t.push('<span class="legend-label">'+o.label+"</span>"),t.push("</div>")}}catch(e){r.e(e)}finally{r.f()}return t.push("</div>"),t.join("")}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=(0,l.default)("dashboard.dashboard_stats");return r+="/"+e,r+=t>0?"/"+t:"",r+="?chart_names="+n.join(",")}function C(e,t){if(t.reset)return t.reset;if(!t.incoming)return e;t.counterData||(t.counterData=t.incoming);var n={};return Object.keys(t.incoming).forEach((function(r){e[r]?n[r]=[t.counter?t.incoming[r]-t.counterData[r]:t.incoming[r]].concat(v(e[r].slice(0,74))):n[r]=[t.counter?t.incoming[r]-t.counterData[r]:t.incoming[r]]})),n}t.POINT_SIZE=2;var P={session_stats:{Total:[],Active:[],Idle:[]},tps_stats:{Transactions:[],Commits:[],Rollbacks:[]},ti_stats:{Inserts:[],Updates:[],Delete:[]},to_stats:{Fetched:[],Returned:[]},bio_stats:{Reads:[],Hits:[]}};function E(e){var t=e.preferences,n=e.sid,r=e.did,i=e.pageVisible,a=e.enablePoll,l=void 0===a||a,f=(0,o.useRef)(null),p=(0,c.usePrevious)(t),m=g((0,o.useReducer)(C,P.session_stats),2),b=m[0],h=m[1],v=g((0,o.useReducer)(C,P.tps_stats),2),_=v[0],w=v[1],S=g((0,o.useReducer)(C,P.ti_stats),2),E=S[0],k=S[1],D=g((0,o.useReducer)(C,P.to_stats),2),T=D[0],R=D[1],N=g((0,o.useReducer)(C,P.bio_stats),2),A=N[0],I=N[1],M=g((0,o.useState)({}),2),q=M[0],B=M[1],L=g((0,o.useState)(null),2),F=L[0],U=L[1],V=g((0,o.useState)(1e3),2),H=V[0],z=V[1],W=g((0,o.useState)(!1),2),$=W[0],G=W[1];return(0,o.useEffect)((function(){var e=!1;p?(p.session_stats_refresh!=t.session_stats_refresh&&(h({reset:P.session_stats}),e=!0),p.tps_stats_refresh!=t.tps_stats_refresh&&(w({reset:P.tps_stats}),e=!0),p.ti_stats_refresh!=t.ti_stats_refresh&&(k({reset:P.ti_stats}),e=!0),p.to_stats_refresh!=t.to_stats_refresh&&(R({reset:P.to_stats}),e=!0),p.bio_stats_refresh!=t.bio_stats_refresh&&(I({reset:P.bio_stats}),e=!0)):e=!0,e&&z(1e3*(0,d.getGCD)(Object.keys(P).map((function(e){return t[e+"_refresh"]}))))}),[t]),(0,o.useEffect)((function(){i&&!$&&G(!0)}),[i]),(0,c.useInterval)((function(){var e=(0,d.getEpoch)();if(null===f.current){var o={};Object.keys(P).forEach((function(t){o[t]=e})),f.current=o}var i=[];Object.keys(P).forEach((function(n){e>=f.current[n]&&(i.push(n),f.current[n]=e+t[n+"_refresh"])}));var a=x(n,r,i);s.default.get(a).then((function(e){var t=e.data;U(null),h({incoming:t.session_stats}),w({incoming:t.tps_stats,counter:!0,counterData:q.tps_stats}),k({incoming:t.ti_stats,counter:!0,counterData:q.ti_stats}),R({incoming:t.to_stats,counter:!0,counterData:q.to_stats}),I({incoming:t.bio_stats,counter:!0,counterData:q.bio_stats}),B((function(e){return y(y({},e),t)}))})).catch((function(e){if(!F)if(h({reset:P.session_stats}),w({reset:P.tps_stats}),k({reset:P.ti_stats}),R({reset:P.to_stats}),I({reset:P.bio_stats}),B({}),e.response)428===e.response.status?U((0,u.default)("Please connect to the selected server to view the graph.")):U((0,u.default)("An error occurred whilst rendering the graph."));else{if(e.request)return void U((0,u.default)("Not connected to the server or the connection to the server has been closed."));console.error(e)}}))}),l?H:-1),o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{"data-testid":"graph-poll-delay",className:"d-none"},H),$&&o.default.createElement(j,{sessionStats:O(b,t.session_stats_refresh),tpsStats:O(_,t.tps_stats_refresh),tiStats:O(E,t.ti_stats_refresh),toStats:O(T,t.to_stats_refresh),bioStats:O(A,t.bio_stats_refresh),errorMsg:F,showTooltip:t.graph_mouse_track,showDataPoints:t.graph_data_points,isDatabase:r>0}))}function j(e){var t=(0,o.useRef)(),n=(0,o.useRef)(),r=(0,o.useRef)(),l=(0,o.useRef)(),s=(0,o.useRef)(),d=(0,o.useMemo)((function(){return{normalized:!0,legendCallback:S,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,legend:{display:!1},elements:{point:{radius:e.showDataPoints?2:0}},tooltips:{enabled:e.showTooltip,callbacks:{title:function(e,t){var n="";try{n=parseInt(e[0].xLabel)*t.refreshRate+(0,u.default)(" seconds ago")}catch(e){n=""}return n}}},scales:{yAxes:[{ticks:{min:0,userCallback:function(e){if(Math.floor(e)===e)return e},fontColor:getComputedStyle(document.documentElement).getPropertyValue("--color-fg")},gridLines:{drawBorder:!1,zeroLineColor:getComputedStyle(document.documentElement).getPropertyValue("--border-color"),color:getComputedStyle(document.documentElement).getPropertyValue("--border-color")}}],xAxes:[{display:!1,gridLines:{display:!1},ticks:{display:!1,reverse:!0}}]}}}),[e.showTooltip,e.showDataPoints]),c=(0,o.useMemo)((function(){return{duration:0}}),[]),f=(0,o.useCallback)((function(e){return function(t){e.current.innerHTML=t.generateLegend()}}));return o.default.createElement(o.default.Fragment,null,o.default.createElement(a.DashboardRow,null,o.default.createElement(a.DashboardRowCol,{breakpoint:"md",parts:6},o.default.createElement(a.ChartContainer,{id:"sessions-graph",title:e.isDatabase?(0,u.default)("Database sessions"):(0,u.default)("Server sessions"),legendRef:t,errorMsg:e.errorMsg},o.default.createElement(i.LineChart,{options:d,data:e.sessionStats,updateOptions:c,onInit:f(t)}))),o.default.createElement(a.DashboardRowCol,{breakpoint:"md",parts:6},o.default.createElement(a.ChartContainer,{id:"tps-graph",title:(0,u.default)("Transactions per second"),legendRef:n,errorMsg:e.errorMsg},o.default.createElement(i.LineChart,{options:d,data:e.tpsStats,updateOptions:c,onInit:f(n)})))),o.default.createElement(a.DashboardRow,null,o.default.createElement(a.DashboardRowCol,{breakpoint:"md",parts:4},o.default.createElement(a.ChartContainer,{id:"ti-graph",title:(0,u.default)("Tuples in"),legendRef:r,errorMsg:e.errorMsg},o.default.createElement(i.LineChart,{options:d,data:e.tiStats,updateOptions:c,onInit:f(r)}))),o.default.createElement(a.DashboardRowCol,{breakpoint:"md",parts:4},o.default.createElement(a.ChartContainer,{id:"to-graph",title:(0,u.default)("Tuples out"),legendRef:l,errorMsg:e.errorMsg},o.default.createElement(i.LineChart,{options:d,data:e.toStats,updateOptions:c,onInit:f(l)}))),o.default.createElement(a.DashboardRowCol,{breakpoint:"md",parts:4},o.default.createElement(a.ChartContainer,{id:"bio-graph",title:(0,u.default)("Block I/O"),legendRef:s,errorMsg:e.errorMsg},o.default.createElement(i.LineChart,{options:d,data:e.bioStats,updateOptions:c,onInit:f(s)})))))}E.propTypes={preferences:f.default.object.isRequired,sid:f.default.oneOfType([f.default.string.isRequired,f.default.number.isRequired]),did:f.default.oneOfType([f.default.string.isRequired,f.default.number.isRequired]),pageVisible:f.default.bool,enablePoll:f.default.bool};var k=f.default.shape({labels:f.default.array.isRequired,datasets:f.default.array,refreshRate:f.default.number.isRequired});j.propTypes={sessionStats:k.isRequired,tpsStats:k.isRequired,tiStats:k.isRequired,toStats:k.isRequired,bioStats:k.isRequired,errorMsg:f.default.string,showTooltip:f.default.bool.isRequired,showDataPoints:f.default.bool.isRequired,isDatabase:f.default.bool.isRequired}},71151:(e,t,n)=>{var r,o;n(24812),n(69826),n(68309),n(40561),n(64765),n(74916),n(32564),n(92222);var i,a=(i=n(55958))&&i.__esModule?i:{default:i};r=[n(28008),n(91669),n,n(19755),n(81311),n(55112),n(72316),n(83879),n(55455),n(12030),n(90585),n(1950),n(11034),n(33883),n(43734),n(35816)],void 0===(o=function(e,t,r,o,i,l,s,u,d,c,f,p,m){l.Browser=l.Browser||{};var b=l.Browser;if(!l.Dashboard){var y,h,g=!0,v="",_="",w=!1,O=!1,S=!1,x=!1,C=u.Extension.DeleteCell.extend({render:function(){this.$el.empty();var e=this;return"cancel"===e.column.get("cell_action")?this.$el.html("<i class='fa fa-stop' data-toggle='tooltip' title='"+t("Cancel the active query")+"' aria-label='"+t("Cancel the active query")+"'></i>"):this.$el.html("<i class='fa fa-times-circle text-danger' data-toggle='tooltip' title='"+t("Terminate the session")+"' aria-label='"+t("Terminate the session")+"'></i>"),this.$el.attr("tabindex",0),this.$el.on("keydown",(function(t){32==t.keyCode&&e.$el.click()})),this.delegateEvents(),this},deleteRow:function(e){var n,r,i,l,s,d=this,c=d.column.get("cell_action");if(e.preventDefault(),u.callByNeed(d.column.get("canDeleteRow"),d.column,d.model)){"cancel"===c?(n=t("Cancel Active Query?"),r=t("Are you sure you wish to cancel the active query?"),i=t("Active query cancelled successfully."),l=t("An error occurred whilst cancelling the active query."),s=v+d.model.get("pid")):(n=t("Terminate Session?"),r=t("Are you sure you wish to terminate the session?"),i=t("Session terminated successfully."),l=t("An error occurred whilst terminating the active query."),s=_+d.model.get("pid")),a.default.confirm(n,r,(function(){o.ajax({url:s,type:"DELETE"}).done((function(e){e==t("Success")?(a.default.success(i),o("#btn_refresh").trigger("click")):a.default.error(l)})).fail((function(e,t,n){a.default.pgRespErrorNotify(e,n)}))}),(function(){return!0}))}}}),P=u.Extension.ObjectCell.extend({enterEditMode:function(){this.model.trigger("enteringEditMode",[this]),u.Cell.prototype.enterEditMode.apply(this,arguments),this.delegateEvents();var e=u.callByNeed(this.column.editable(),this.column,this.model);e&&(this.$el.html("<i class='fa fa-caret-down subnode-edit-in-process'></i>"),this.model.trigger("pg-sub-node:opened",this.model,this))},render:function(){return this.$el.empty(),this.$el.html("<i class='fa fa-caret-right' data-toggle='tooltip' title='"+t("View the active session details")+"' aria-label='"+t("View the active session details")+"'></i>"),this.delegateEvents(),this.grabFocus&&this.$el.trigger("focus"),this}}),E=s.Model.extend({defaults:{version:null},schema:[{id:"backend_type",label:t("Backend type"),type:"text",editable:!0,readonly:!0,group:t("Details"),visible:function(){return this.version>=1e5}},{id:"query_start",label:t("Query started at"),type:"text",editable:!1,readonly:!0,group:t("Details")},{id:"state_change",label:t("Last state changed at"),type:"text",editable:!0,readonly:!0,group:t("Details")},{id:"query",label:t("SQL"),type:"text",editable:!0,readonly:!0,control:c.SqlFieldControl,group:t("Details")}]});return l.Dashboard={init:function(){if(!this.initialized){this.initialized=!0,this.chartsDomObj=null,this.sid=this.did=-1,this.version=-1;var n=this.object_selected.bind(this),r=this.object_disconnected.bind(this);b.Events.on("pgadmin-browser:tree:selected",n),b.Events.on("pgadmin:server:disconnect",r);var i=e("dashboard.index"),a=b.panels.dashboard.panel;if(a){var l=a.layout().scene().find(".pg-panel-content");if(l){o(l).html('<div class="pg-panel-message" role="alert">'+t("Loading dashboard...")+"</div>"),function e(){o.ajax({url:i,type:"GET",dataType:"html"}).done((function(e){o(l).html(e)})).fail((function(t,n){self.onFail(t,n,l,e)}))}(),o(a).data("sid",-1),o(a).data("did",-1)}}}},onFail:function(e,n,r,i){a.default.pgNotifier(n,e,t("An error occurred whilst loading the dashboard."),(function(e){"CRYPTKEY_SET"===e?i():o(r).html('<div class="pg-panel-message" role="alert">'+t("An error occurred whilst loading the dashboard.")+"</div>")}))},object_disconnected:function(){var e=b.tree.selected(),t=e&&b.tree.itemData(e);0!=e.length&&this.object_selected(e,t)},object_selected:function(n,r){var a=this;if(r&&r._type){var l=b.tree.getTreeNodeHierarchy(n),s=f.url(r,n,l);if(null===s){s=e("dashboard.index"),a.version=l.server&&l.server.version||0,v=s+"cancel_query/",_=s+"terminate_session/";var u=l.server;h=u&&u.db||null,x=!(!u||!u.user)&&u.user.can_signal_backend,u&&u.user&&u.user.is_superuser?w=!0:(w=!1,y=u&&u.user?u.user.name:null),"database"in l?(a.sid=l.server._id,a.did=l.database._id,O=!1,S=!0,s+=a.sid+"/"+a.did,v+=a.sid+"/"+a.did+"/",_+=a.sid+"/"+a.did+"/"):"server"in l?(a.sid=l.server._id,a.did=-1,O=!0,S=!1,s+=a.sid,v+=a.sid+"/",_+=a.sid+"/"):O=S=!1}else O=S=!1;var d=b.panels.dashboard.panel;if(d){var c=d.layout().scene().find(".pg-panel-content");if(c){if(r.connected||i.isUndefined(r.connected)){if(s!==o(d).data("dashboard_url")||s===o(d).data("dashboard_url")&&0==o(d).data("server_status")){this.chartsDomObj&&this.chartsDomObj.unmount(),o(c).empty();o(c).html('<div class="pg-panel-message" role="alert">'+t("Loading dashboard...")+"</div>"),function e(){o.ajax({url:s,type:"GET",dataType:"html"}).done((function(e){o(c).html(e),a.init_dashboard()})).fail((function(t,n){a.onFail(t,n,c,e)}))}(),o(d).data("server_status",!0)}}else this.chartsDomObj&&this.chartsDomObj.unmount(),o(c).html('<div class="pg-panel-message" role="alert">'+t("Please connect to the selected server to view the dashboard.")+"</div>"),o(d).data("server_status",!1);o(d).data("dashboard_url",s)}}}},add_new_server:function(){if(b&&b.tree){for(var e=i.isUndefined(b.tree.selected())?b.tree.first(null,!1):b.tree.selected(),t=n(44588),r=b.tree.itemData(e);r&&"server_group"!=r._type;)e=b.tree.next(e),r=b.tree.itemData(e);if(!r)return;t&&t.callbacks.show_obj_properties.apply(t,[{action:"create"},e])}},render_grid:function(e,n,r){var a=s.Model.extend({}),l=this,d=n+l.sid;-1!=l.did&&(d+="/"+l.did);var c=new(s.Collection.extend({model:a,url:d,mode:"client"})),f=u.Row.extend({render:function(){u.Row.prototype.render.call(this);var e=this.model.get("row_type");return i.isUndefined(e)||i.isNull(e)?(this.$el.removeClass("alert"),this.$el.removeClass("warning")):"warning"===e?this.$el.addClass("warning"):"alert"===e&&this.$el.addClass("alert"),this}}),p=new u.Grid({emptyText:t("No data found"),columns:r,collection:c,className:"backgrid presentation table table-bordered table-noouter-border table-hover",row:f});o(e).empty(),o(e).append(p.render().el);var m=new u.Extension.ClientSideFilter({collection:c});m.setCustomSearchBox(o("#txtGridSearch")),o(e).data("data",c),o(e).data("grid",p),o(e).data("filter",m)},__loadMoreRows:function(e){var t=e.currentTarget;t.scrollHeight-10<t.scrollTop+t.offsetHeight&&this.data.length>0&&this.local_grid.collection.add(this.data.splice(0,50))},render_grid_data:function(e){var n=this,r=o(e).data("data"),a=o(e).data("grid"),s=o(e).data("filter");if(i.isUndefined(r))return null;r.fetch({reset:!0,success:function(t){n.data=t.models,n.local_grid=a,a.collection.reset(n.data.splice(0,50)),o(e).hasClass("grid-error")&&(o(e).removeClass("grid-error"),o(e).html(a.render().el),o(s.el).show()),n.data.length>50?o(".wcScrollableY").on("scroll",n.__loadMoreRows.bind(n)):o(".wcScrollableY").off("scroll",n.__loadMoreRows),s.search()},error:function(n,a){var u="",d="info";0===a.readyState?u=t("Not connected to the server or the connection to the server has been closed."):(u=JSON.parse(a.responseText).errormsg,428===a.status?(i.isUndefined(u)||i.isNull(u))&&(u=t("Please connect to the selected server to view the table.")):(u=t("An error occurred whilst rendering the table."),d="error")),o(e).hasClass("grid-error")||(o(s.el).hide(),o(e).addClass("grid-error")),o(e).html('<div class="pg-panel-'+d+' pg-panel-message" role="alert">'+u+"</div>"),setTimeout((function(){l.Dashboard.render_grid_data(e,r)}),5e3)}})},init_dashboard:function(){var e=this;this.chartsDomObj=new m.default(document.getElementById("dashboard-graphs"),e.preferences,e.sid,e.did,!(o(".dashboard-container")[0].clientHeight<=0));var t=setInterval((function(){try{p.default.pgAdmin.Browser.preference_version()>0&&(clearInterval(t),e.reflectPreferences())}catch(e){throw clearInterval(t),e}}),0);b.onPreferencesChange("dashboards",(function(){e.reflectPreferences()}))},reflectPreferences:function(){var e=this;e.preferences=p.default.pgAdmin.Browser.get_preferences_for_module("dashboards"),this.chartsDomObj.reflectPreferences(e.preferences),(O||S)&&(e.preferences.show_activity&&o("#dashboard-activity").hasClass("dashboard-hidden")?o("#dashboard-activity").removeClass("dashboard-hidden"):e.preferences.show_activity||o("#dashboard-activity").addClass("dashboard-hidden"),e.preferences.show_activity&&o("#dashboard-activity").hasClass("dashboard-hidden")?o("#dashboard-activity").removeClass("dashboard-hidden"):e.preferences.show_activity||o("#dashboard-activity").addClass("dashboard-hidden"),O?e.reflectPreferencesServer():S&&e.reflectPreferencesDatabase())},renderTab:function(e,t){var n=t[o(e.relatedTarget).attr("aria-controls")];o(n).data("filtertext",o("#txtGridSearch").val());var r=t[o(e.target).attr("aria-controls")];o("#txtGridSearch").val(o(r).data("filtertext")),l.Dashboard.render_grid_data(r)},reflectPreferencesServer:function(){var n=this,r=o(".dashboard-container"),a=r.find("#server_activity").get(0),s=r.find("#server_locks").get(0),u=r.find("#server_prepared").get(0),d=r.find("#server_config").get(0),f={tab_server_activity:a,tab_server_locks:s,tab_server_prepared:u,tab_server_config:d};if(n.preferences.show_activity){var p=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"datname",label:t("Database"),editable:!1,cell:"string"},{name:"usename",label:t("User"),editable:!1,cell:"string"},{name:"application_name",label:t("Application"),editable:!1,cell:"string"},{name:"client_addr",label:t("Client"),editable:!1,cell:"string"},{name:"backend_start",label:t("Backend start"),editable:!1,cell:"string"},{name:"state",label:t("State"),editable:!1,cell:"string"}];p=n.version<90600?p.concat([{name:"waiting",label:t("Waiting?"),editable:!1,cell:"string"}]):p.concat([{name:"wait_event",label:t("Wait event"),editable:!1,cell:"string"},{name:"blocking_pids",label:t("Blocking PIDs"),editable:!1,cell:"string"}]);var m=new E,b=c.generateViewSchema(null,m,"create",null,null,!0);i.each(b[0].fields,(function(e){e.version=n.version})),p.unshift({name:"pg-backform-expand",label:"",cell:P,cell_priority:-1,postgres_version:n.version,schema:b}),p.unshift({name:"pg-backform-delete",label:"",cell:C,cell_action:"cancel",editable:!1,cell_priority:-1,canDeleteRow:l.Dashboard.can_take_action,postgres_version:n.version}),p.unshift({name:"pg-backform-delete",label:"",cell:C,cell_action:"terminate",editable:!1,cell_priority:-1,canDeleteRow:l.Dashboard.can_take_action,postgres_version:n.version});var y=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"datname",label:t("Database"),editable:!1,cell:"string"},{name:"locktype",label:t("Lock type"),editable:!1,cell:"string"},{name:"relation",label:t("Target relation"),editable:!1,cell:"string"},{name:"page",label:t("Page"),editable:!1,cell:"string"},{name:"tuple",label:t("Tuple"),editable:!1,cell:"string"},{name:"virtualxid",label:t("vXID (target)"),editable:!1,cell:"string"},{name:"transactionid",label:t("XID (target)"),editable:!1,cell:"string"},{name:"classid",label:t("Class"),editable:!1,cell:"string"},{name:"objid",label:t("Object ID"),editable:!1,cell:"string"},{name:"virtualtransaction",label:t("vXID (owner)"),editable:!1,cell:"string"},{name:"mode",label:t("Mode"),editable:!1,cell:"string"},{name:"granted",label:t("Granted?"),editable:!1,cell:"string"}],h=[{name:"git",label:t("Name"),editable:!1,cell:"string"},{name:"database",label:t("Database"),editable:!1,cell:"string"},{name:"Owner",label:t("Owner"),editable:!1,cell:"string"},{name:"transaction",label:t("XID"),editable:!1,cell:"string"},{name:"prepared",label:t("Prepared at"),editable:!1,cell:"string"}],g=[{name:"name",label:t("Name"),editable:!1,cell:"string"},{name:"category",label:t("Category"),editable:!1,cell:"string"},{name:"setting",label:t("Setting"),editable:!1,cell:"string"},{name:"unit",label:t("Unit"),editable:!1,cell:"string"},{name:"short_desc",label:t("Description"),editable:!1,cell:"string"}];o(a).addClass("pg-el-container"),o(a).attr("el","sm"),l.Dashboard.render_grid(a,e("dashboard.activity"),p),l.Dashboard.render_grid(s,e("dashboard.locks"),y),l.Dashboard.render_grid(u,e("dashboard.prepared"),h),l.Dashboard.render_grid(d,e("dashboard.config"),g),l.Dashboard.render_grid_data(a),o('a[data-toggle="tab"]').on("shown.bs.tab",(function(e){n.renderTab(e,f)})),o("#btn_refresh").off("click").on("click",(function(){var e=f[o("#dashboard-activity .nav-tabs .active").attr("aria-controls")];l.Dashboard.render_grid_data(e)}))}},reflectPreferencesDatabase:function(){var n=this,r=document.getElementById("database_activity"),a=document.getElementById("database_locks"),s=document.getElementById("database_prepared"),u={tab_database_activity:r,tab_database_locks:a,tab_database_prepared:s};if(n.preferences.show_activity){var d=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"usename",label:t("User"),editable:!1,cell:"string"},{name:"application_name",label:t("Application"),editable:!1,cell:"string"},{name:"client_addr",label:t("Client"),editable:!1,cell:"string"},{name:"backend_start",label:t("Backend start"),editable:!1,cell:"string"},{name:"state",label:t("State"),editable:!1,cell:"string"}];d=n.version<90600?d.concat([{name:"waiting",label:t("Waiting?"),editable:!1,cell:"string"}]):d.concat([{name:"wait_event",label:t("Wait event"),editable:!1,cell:"string"},{name:"blocking_pids",label:t("Blocking PIDs"),editable:!1,cell:"string"}]);var f=new E,p=c.generateViewSchema(null,f,"create",null,null,!0);i.each(p[0].fields,(function(e){e.version=n.version})),d.unshift({name:"pg-backform-expand",label:"",cell:P,cell_priority:-1,postgres_version:n.version,schema:p}),d.unshift({name:"pg-backform-delete",label:"",cell:C,cell_action:"cancel",editable:!1,cell_priority:-1,canDeleteRow:l.Dashboard.can_take_action,postgres_version:n.version}),d.unshift({name:"pg-backform-delete",label:"",cell:C,cell_action:"terminate",editable:!1,cell_priority:-1,canDeleteRow:l.Dashboard.can_take_action,postgres_version:n.version});var m=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"locktype",label:t("Lock type"),editable:!1,cell:"string"},{name:"relation",label:t("Target relation"),editable:!1,cell:"string"},{name:"page",label:t("Page"),editable:!1,cell:"string"},{name:"tuple",label:t("Tuple"),editable:!1,cell:"string"},{name:"virtualxid",label:t("vXID (target)"),editable:!1,cell:"string"},{name:"transactionid",label:t("XID (target)"),editable:!1,cell:"string"},{name:"classid",label:t("Class"),editable:!1,cell:"string"},{name:"objid",label:t("Object ID"),editable:!1,cell:"string"},{name:"virtualtransaction",label:t("vXID (owner)"),editable:!1,cell:"string"},{name:"mode",label:t("Mode"),editable:!1,cell:"string"},{name:"granted",label:t("Granted?"),editable:!1,cell:"string"}],b=[{name:"git",label:t("Name"),editable:!1,cell:"string"},{name:"Owner",label:t("Owner"),editable:!1,cell:"string"},{name:"transaction",label:t("XID"),editable:!1,cell:"string"},{name:"prepared",label:t("Prepared at"),editable:!1,cell:"string"}];o(r).addClass("pg-el-container"),o(r).attr("el","sm"),l.Dashboard.render_grid(r,e("dashboard.activity"),d),l.Dashboard.render_grid(a,e("dashboard.locks"),m),l.Dashboard.render_grid(s,e("dashboard.prepared"),b),l.Dashboard.render_grid_data(r),o('a[data-toggle="tab"]').on("shown.bs.tab",(function(e){n.renderTab(e,u)})),o("#btn_refresh").off("click").on("click",(function(){var e=u[o("#dashboard-activity .nav-tabs .active").attr("aria-controls")];l.Dashboard.render_grid_data(e)}))}},toggleVisibility:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(g=e,t)this.chartsDomObj&&this.chartsDomObj.unmount();else{var n=b.tree,r=n?n.selected():0,o=r&&n.itemData(r);this.chartsDomObj&&this.chartsDomObj.setPageVisible(g),this.object_selected(r,o)}},can_take_action:function(e){var n,r=e.collection.where({state:"active"}),o=this.get("postgres_version")||null,i="cancel"===(this.get("cell_action")||null);return o&&o>=1e5&&!e.get("datname")?(n=t(i?"You cannot cancel background worker processes.":"You cannot terminate background worker processes."),a.default.info(n),!1):h==e.get("datname")&&"active"==e.get("state")&&1==r.length?(n=t(i?"You are not allowed to cancel the main active session.":"You are not allowed to terminate the main active session."),a.default.error(n),!1):i&&"idle"==e.get("state")?(a.default.info(t("The session is already in idle state.")),!1):!!x||(!!w||(!(!y||y!=e.get("usename"))||(n=t(i?"Superuser privileges are required to cancel another users query.":"Superuser privileges are required to terminate another users query."),a.default.error(n),!1)))}},l.Dashboard}}.apply(t,r))||(e.exports=o)},9109:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.ChartContainer=a,t.ChartError=l,t.DashboardRow=s,t.DashboardRowCol=u,n(92222);var r=i(n(67294)),o=i(n(45697));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return r.default.createElement("div",{className:"card dashboard-graph",role:"object-document",tabIndex:"0","aria-labelledby":e.id},r.default.createElement("div",{className:"card-header"},r.default.createElement("div",{className:"d-flex"},r.default.createElement("div",{id:e.id},e.title),r.default.createElement("div",{className:"ml-auto my-auto legend",ref:e.legendRef}))),r.default.createElement("div",{className:"card-body dashboard-graph-body"},r.default.createElement("div",{className:"chart-wrapper "+(e.errorMsg?"d-none":"")},e.children),r.default.createElement(l,{message:e.errorMsg})))}function l(e){return null===e.message?r.default.createElement(r.default.Fragment,null):r.default.createElement("div",{className:"pg-panel-error pg-panel-message",role:"alert"},e.message)}function s(e){var t=e.children;return r.default.createElement("div",{className:"row dashboard-row"},t)}function u(e){var t=e.breakpoint,n=e.parts,o=e.children;return r.default.createElement("div",{className:"col-".concat(t,"-").concat(n)},o)}a.propTypes={id:o.default.string.isRequired,title:o.default.string.isRequired,legendRef:o.default.oneOfType([o.default.func,o.default.shape({current:o.default.any})]).isRequired,children:o.default.node.isRequired,errorMsg:o.default.string},l.propTypes={message:o.default.string},s.propTypes={children:o.default.node.isRequired},u.propTypes={breakpoint:o.default.oneOf(["xs","sm","md","lg","xl"]).isRequired,parts:o.default.number.isRequired,children:o.default.node.isRequired}},68363:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getHelpUrl=function(e,t,n){var r=Math.floor(n/1e4),o=Math.floor(n/100)-100*r,i="",a=r+"."+o;r>=10&&(a=r);"/"!=(i=e.replace("$VERSION$",a)).substr(-1)&&(i+="/");return i+t},t.getEPASHelpUrl=function(e){var t=Math.floor(e/1e4),n=Math.floor(e/100)-100*t,r="https://www.enterprisedb.com/docs/epas/$VERSION$/",o="";o="https://www.enterprisedb.com/docs/epas/$VERSION$/epas_compat_sql/".replace("$VERSION$",t),10==t?o=r.replace("$VERSION$",t):t<10&&(o=r.replace("$VERSION$",t+"."+n));return o},n(15306),n(74916)},24149:(e,t,n)=>{var r,o;n(32564),n(83710),n(54678),n(24603),n(74916),n(39714),n(69600),n(92222),n(41539),n(69826),n(24812),n(91058),r=[n(55112),n(91669),n(28008),n(81311),n(19755),n(33883),n(58307)],void 0===(o=function(e,t,n,r,o,i,a){if(i.BackgroundProcessObsorver=i.BackgroundProcessObsorver||{},i.BackgroundProcessObsorver.initialized)return i.BackgroundProcessObsorver;var l="True"==e.server_mode,s=window.wcDocker,u=function(e,t){var n=this;setTimeout((function(){n.initialize.apply(n,[e,t])}),1)};return r.extend(u.prototype,{success_status_tpl:r.template('\n      <div class="d-flex px-2 py-1 bg-success-light border border-success rounded">\n        <div class="pr-2">\n          <i class="fa fa-check text-success pg-bg-status-icon" aria-hidden="true" role="img"></i>\n        </div>\n        <div class="mx-auto pg-bg-status-text alert-text-body"><%-status_text%></div>\n      </div>'),failed_status_tpl:r.template('\n      <div class="d-flex px-2 py-1 bg-danger-lighter border border-danger rounded">\n        <div class="pr-2">\n          <i class="fa fa-times fa-lg text-danger pg-bg-status-icon" aria-hidden="true" role="img"></i>\n        </div>\n        <div class="mx-auto pg-bg-status-text alert-text-body"><%-status_text%></div>\n      </div>'),other_status_tpl:r.template('\n      <div class="d-flex px-2 py-1 bg-primary-light border border-primary rounded">\n        <div class="pr-2">\n          <i class="fa fa-info fa-lg text-primary pg-bg-status-icon" aria-hidden="true" role="img"></i>\n        </div>\n        <div class="mx-auto pg-bg-status-text alert-text-body"><%-status_text%></div>\n      </div>'),initialize:function(e,t){r.extend(this,{details:!1,notify:r.isUndefined(t)||t,curr_status:null,state:0,completed:!1,current_storage_dir:null,id:e.id,type_desc:null,desc:null,detailed_desc:null,stime:null,exit_code:null,acknowledge:e.acknowledge,execution_time:null,out:-1,err:-1,lot_more:!1,notifier:null,container:null,panel:null,logs:o("<ol></ol>",{class:"pg-bg-process-logs"})}),this.notify&&(i.Events&&i.Events.on("pgadmin-bgprocess:started:"+this.id,(function(e){e.notifier||e.show.apply(e)})),i.Events&&i.Events.on("pgadmin-bgprocess:finished:"+this.id,(function(e){e.notifier||e.show.apply(e)})));var n=this;setTimeout((function(){n.update.apply(n,[e])}),1)},bgprocess_url:function(e){switch(e){case"status":return this.details&&-1!=this.out&&-1!=this.err?n("bgprocess.detailed_status",{pid:this.id,out:this.out,err:this.err}):n("bgprocess.status",{pid:this.id});case"acknowledge":return n("bgprocess.acknowledge",{pid:this.id});case"stop_process":return n("bgprocess.stop_process",{pid:this.id});default:return n("bgprocess.list")}},update:function(n){var o=this,a=[],l=[];"stime"in n&&(o.stime=new Date(n.stime)),"execution_time"in n&&(o.execution_time=parseFloat(n.execution_time)),"type_desc"in n&&(o.type_desc=n.type_desc),"desc"in n&&(o.desc=n.desc),"details"in n&&(o.detailed_desc=n.details),"exit_code"in n&&(o.exit_code=n.exit_code),"process_state"in n&&(o.state=n.process_state),"current_storage_dir"in n&&(o.current_storage_dir=n.current_storage_dir),"out"in n&&(o.out=n.out&&n.out.pos,n.out&&n.out.lines&&(a=n.out.lines)),"err"in n&&(o.err=n.err&&n.err.pos,n.err&&n.err.lines&&(l=n.err.lines)),o.completed=o.completed||"err"in n&&"out"in n&&n.err.done&&n.out.done||!o.details&&!r.isNull(o.exit_code);for(var s=0,u=0,d=[],c=document.createElement("textarea"),f=function(e){return c.textContent=e,c.innerHTML};s<a.length&&u<l.length;)if(e.natural_sort(a[s][0],l[u][0])<=0)d.push('<li class="pg-bg-res-out">'+f(a[s++][1])+"</li>");else{var p=f(l[u++][1]);new RegExp(": ("+t("error")+"|"+t("fatal")+"):","i").test(p)?d.push('<li class="pg-bg-res-err">'+p+"</li>"):d.push('<li class="pg-bg-res-out">'+p+"</li>")}for(;s<a.length;)d.push('<li class="pg-bg-res-out">'+f(a[s++][1])+"</li>");for(;u<l.length;){var m=f(l[u++][1]);new RegExp(": ("+t("error")+"|"+t("fatal")+"):","i").test(m)?d.push('<li class="pg-bg-res-err">'+m+"</li>"):d.push('<li class="pg-bg-res-out">'+m+"</li>")}d.length&&(o.logs.append(d.join("")),setTimeout((function(){o.logs[0].scrollTop=o.logs[0].scrollHeight}))),o.logs_loading&&(o.logs_loading.remove(),o.logs_loading=null),o.stime&&(o.curr_status=o.other_status_tpl({status_text:t("Started")}),o.execution_time>=2&&(o.curr_status=o.other_status_tpl({status_text:t("Running...")})),r.isNull(o.exit_code)?r.isNull(o.exit_code)&&3===o.state&&(o.curr_status=o.other_status_tpl({status_text:t("Terminating the process...")})):3===o.state?o.curr_status=o.failed_status_tpl({status_text:t("Terminated by user.")}):0==o.exit_code?o.curr_status=o.success_status_tpl({status_text:t("Successfully completed.")}):o.curr_status=o.failed_status_tpl({status_text:t("Failed (exit code: %s).",String(o.exit_code))}),0==o.state&&o.stime&&(o.state=1,i.Events&&i.Events.trigger("pgadmin-bgprocess:started:"+o.id,o,o)),1!=o.state||r.isNull(o.exit_code)||(o.state=2,i.Events&&i.Events.trigger("pgadmin-bgprocess:finished:"+o.id,o,o)),setTimeout((function(){o.show.apply(o)}),10)),o.completed||setTimeout((function(){o.status.apply(o)}),1e3)},status:function(){var e=this;o.ajax({typs:"GET",timeout:3e4,url:e.bgprocess_url("status"),cache:!1,async:!0,contentType:"application/json"}).done((function(t){setTimeout((function(){e.update(t)}),10)})).fail((function(t){410!=t.status&&setTimeout((function(){e.update(t)}),1e4)}))},show:function(){var e=this;if(e.notify&&!e.details){if(!e.notifier){var n=o('\n            <div class="card">\n              <div class="card-header bg-primary d-flex">\n                <div>'.concat(e.type_desc,'</div>\n                <div class="ml-auto">\n                  <button class="btn btn-sm-sq btn-primary pg-bg-close" aria-label=\'close\'><i class="fa fa-lg fa-times" role="img"></i></button>\n                </div>\n              </div>\n              <div class="card-body px-2">\n                <div class="py-1">').concat(e.desc,'</div>\n                <div class="py-1">').concat(e.stime.toString(),'</div>\n                <div class="d-flex py-1">\n                  <div class="my-auto mr-2">\n                    <span class="fa fa-clock fa-lg" role="img"></span>\n                  </div>\n                  <div class="pg-bg-etime my-auto mr-2"></div>\n                  <div class="ml-auto">\n                    <button class="btn btn-secondary pg-bg-more-details" title="More Details"><span class="fa fa-info-circle" role="img"></span>&nbsp;')+t("More details...")+'</button>\n                    <button class="btn btn-danger bg-process-stop" disabled><span class="fa fa-times-circle" role="img" title="Stop the operation"></span>&nbsp;'+t("Stop Process")+'</button>\n                  </div>\n                </div>\n                <div class="pg-bg-status py-1">\n                </div>\n              </div>\n            </div>\n            '),r=n.find(".pg-bg-more-details"),i=n.find(".pg-bg-close");e.container=n,e.notifier=a.notify(n.get(0),"bg-bgprocess",0,null),r.on("click",function(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation(),this.notifier.dismiss(),this.notifier=null,this.completed=!1,this.show_detailed_view.apply(this)}.bind(e)),i.on("click",function(){this.notifier.dismiss(),this.notifier=null,this.acknowledge_server.apply(this)}.bind(this)),e.container.on("click",(function(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation()})),n.find(".bg-process-stop").off("click").on("click",e.stop_process.bind(this))}e.container.find(".pg-bg-etime").empty().append(o("<span></span>").text(String(e.execution_time))).append(o("<span></span>").text(" "+t("seconds"))),o(e.container.find(".pg-bg-status")).html(e.curr_status);var l=o(e.container.find(".bg-process-stop"));1===parseInt(e.state)?l.attr("disabled",!1):l.attr("disabled",!0)}else e.show_detailed_view.apply(e)},show_detailed_view:function(){var e=this,n=this.panel,r=!1;e.panel||(r=!0,(n=this.panel=i.BackgroundProcessObsorver.create_panel()).title(t("Process Watcher - %s",e.type_desc)),n.focus());var a=n.$container,u=a.find(".bg-process-watcher"),d=a.find(".bg-process-details"),c=a.find(".bg-process-footer"),f=a.find(".bg-process-stop"),p=a.find(".bg-process-storage-manager");if(e.current_storage_dir&&l){if(0==p.length){a.find(".bg-process-details .bg-btn-section").prepend('<button id="bg-process-storage-manager" class="btn btn-secondary bg-process-storage-manager" title="Click to open file location" aria-label="Storage Manager" tabindex="0" disabled><span class="pg-font-icon icon-storage_manager" role="img"></span></button>&nbsp;'),p=a.find(".bg-process-storage-manager")}1===parseInt(e.state)?p.attr("disabled",!0):p.attr("disabled",!1),p.off("click").on("click",e.storage_manager.bind(this))}if(1===parseInt(e.state)?f.attr("disabled",!1):f.attr("disabled",!0),f.off("click").on("click",e.stop_process.bind(this)),r&&(u.html(e.logs),setTimeout((function(){e.logs[0].scrollTop=e.logs[0].scrollHeight})),e.logs_loading=o('<li class="pg-bg-res-out loading-logs">'+t("Loading process logs...")+"</li>"),e.logs.append(e.logs_loading),d.find(".bg-detailed-desc").html(e.detailed_desc)),d.find(".bg-process-stats .bgprocess-start-time").html(e.stime),c.find(".bg-process-status").html(e.curr_status),c.find(".bg-process-exec-time p").empty().append(o("<span></span>").text(String(e.execution_time))).append(o("<span></span>").text(" "+t("seconds"))),r){e.details=!0,e.err=0,e.out=0,setTimeout((function(){e.status.apply(e)}),1e3);var m=function(e,t,n){var r=t.outerHeight()+n.outerHeight();e.css("padding-bottom",r)}.bind(n,u,d,c);n.on(s.EVENT.RESIZED,m),n.on(s.EVENT.ATTACHED,m),n.on(s.EVENT.DETACHED,m),m(),n.on(s.EVENT.CLOSED,function(e){e.panel=null,e.details=!1,null!=e.exit_code&&e.acknowledge_server.apply(e)}.bind(n,this))}},acknowledge_server:function(){o.ajax({type:"PUT",timeout:3e4,url:this.bgprocess_url("acknowledge"),cache:!1,async:!0,contentType:"application/json"}).done((function(){})).fail((function(){console.warn(arguments)}))},stop_process:function(){this.state=3,o.ajax({type:"PUT",timeout:3e4,url:this.bgprocess_url("stop_process"),cache:!1,async:!0,contentType:"application/json"}).done((function(){})).fail((function(){console.warn(arguments)}))},storage_manager:function(){this.current_storage_dir&&i.Events.trigger("pgadmin:tools:storage_manager",this.current_storage_dir)}}),r.extend(i.BackgroundProcessObsorver,{bgprocesses:{},init:function(){var e=this;e.initialized||(e.initialized=!0,setTimeout((function(){e.update_process_list.apply(e)}),1e3),i.Events.on("pgadmin-bgprocess:created",(function(){setTimeout((function(){i.BackgroundProcessObsorver.update_process_list(!0)}),1e3)})))},update_process_list:function(e){var t=this;o.ajax({typs:"GET",timeout:3e4,url:n("bgprocess.list"),cache:!1,async:!0,contentType:"application/json"}).done((function(n){if(n&&r.isArray(n)){for(var o in n){var i=n[o];"id"in i&&(i.id in t.bgprocesses||(t.bgprocesses[i.id]=new u(i)))}e&&0==n.length&&setTimeout((function(){t.update_process_list(!1)}),3e3)}})).fail((function(){console.warn(arguments)}))},create_panel:function(){return this.register_panel(),i.docker.addPanel("bg_process_watcher",s.DOCK.FLOAT,null,{w:screen.width<700?.95*screen.width:.5*screen.width,h:screen.height<500?.95*screen.height:.5*screen.height,x:screen.width<700?"2%":"25%",y:screen.height<500?"2%":"25%"})},register_panel:function(){var e=i.docker.findPanels("bg_process_watcher");e&&e.length>=1||new i.Panel({name:"bg_process_watcher",showTitle:!0,isCloseable:!0,isPrivate:!0,isLayoutMember:!1,content:'<div class="bg-process-details"><div class="bg-detailed-desc"></div><div class="bg-process-stats d-flex py-1"><div class="my-auto mr-2"><span class="fa fa-clock fa-lg" role="img"></span></div><div class="pg-bg-etime my-auto mr-2"><span>'+t("Start time")+': <span class="bgprocess-start-time"></span></span></div><div class="ml-auto bg-btn-section"><button type="button" class="btn btn-danger bg-process-stop" disabled><span class="fa fa-times-circle" role="img"></span>&nbsp;'+t("Stop Process")+'</button></div></div></div><div class="bg-process-watcher"></div><div class="bg-process-footer p-2 d-flex"><div class="bg-process-status flex-grow-1"></div><div class="bg-process-exec-time ml-4 my-auto"><div class="exec-div"><span>'+t("Execution time")+":</span><p></p></div></div></div>",onCreate:function(e,t){t.addClass("pg-no-overflow p-2")}}).load(i.docker)}}),i.BackgroundProcessObsorver}.apply(t,r))||(e.exports=o)},73516:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(47941),n(82772),n(82526),n(79753),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),n(4129),n(69070),n(38880),Object.defineProperty(t,"__esModule",{value:!0}),t.default=v,n(89554),n(54747);var o=m(n(96486)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=m(n(6734)),l=m(n(91669)),s=m(n(45697)),u=m(n(55958)),d=m(n(2832)),c=n(30398),f=n(2523);function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function m(e){return e&&e.__esModule?e:{default:e}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var g=(0,c.makeStyles)((function(e){return{emptyPanel:{minHeight:"100%",minWidth:"100%",background:e.palette.grey[400],overflow:"auto",padding:"7.5px"},panelIcon:{width:"80%",margin:"0 auto",marginTop:"25px !important",position:"relative",textAlign:"center"},panelMessage:{marginLeft:"0.5rem",fontSize:"0.875rem"},autoResizer:{height:"100% !important",width:"100% !important",background:e.palette.grey[400],padding:"7.5px",overflow:"auto !important",minHeight:"100%",minWidth:"100%"}}}));function v(e){var t=e.nodeData,n=e.item,r=e.node,s=h(e,["nodeData","item","node"]),c=g(),p=b(i.default.useState([]),2),m=p[0],y=p[1],v=b(i.default.useState(""),2),_=v[0],w=v[1];return(0,i.useEffect)((function(){var e=(0,l.default)("Please select an object in the tree view.");if(r){var i=(0,f.getURL)(t,!0,s.treeNodeInfo,r,n,"dependency");if(e=(0,l.default)("No dependency information is available for the selected object."),r.hasDepends)(0,d.default)()({url:i,type:"GET"}).then((function(t){if(t.data.length>0){var n=function(e,t){return e.forEach((function(e){null!=e.icon&&""!=e.icon||(e.icon=t?o.default.isFunction(t.node_image)?t.node_image.apply(t,[null,null]):t.node_image||"icon-"+e.type:"icon-"+e.type),e.icon&&(e.icon={type:e.icon})})),e}(t.data,r);y(n)}else w(e)})).catch((function(e){u.default.alert((0,l.default)("Failed to retrieve data from the server."),(0,l.default)(e.message)),w((0,l.default)("Failed to retrieve data from the server."))}))}return""!=e&&w(e),function(){y([])}}),[t]),i.default.createElement(i.default.Fragment,null,m.length>0?i.default.createElement(a.default,{className:c.autoResizer,columns:[{Header:"Type",accessor:"type",sortble:!0,resizable:!1,disableGlobalFilter:!0},{Header:"Name",accessor:"name",sortble:!0,resizable:!1,disableGlobalFilter:!0},{Header:"Restriction",accessor:"field",sortble:!0,resizable:!0,disableGlobalFilter:!1,minWidth:280}],data:m,msg:_,type:(0,l.default)("panel")}):i.default.createElement("div",{className:c.emptyPanel},i.default.createElement("div",{className:c.panelIcon},i.default.createElement("i",{className:"fa fa-exclamation-circle"}),i.default.createElement("span",{className:c.panelMessage},(0,l.default)(_)))))}v.propTypes={res:s.default.array,nodeData:s.default.object,treeNodeInfo:s.default.object,node:s.default.func,item:s.default.object}},80786:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(47941),n(82772),n(82526),n(79753),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),n(4129),n(69070),n(38880),Object.defineProperty(t,"__esModule",{value:!0}),t.default=v,n(89554),n(54747);var o=m(n(96486)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=m(n(6734)),l=m(n(91669)),s=m(n(45697)),u=m(n(55958)),d=m(n(2832)),c=n(30398),f=n(2523);function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function m(e){return e&&e.__esModule?e:{default:e}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var g=(0,c.makeStyles)((function(e){return{emptyPanel:{minHeight:"100%",minWidth:"100%",background:e.palette.grey[400],overflow:"auto",padding:"7.5px"},panelIcon:{width:"80%",margin:"0 auto",marginTop:"25px !important",position:"relative",textAlign:"center"},panelMessage:{marginLeft:"0.5rem",fontSize:"0.875rem"},autoResizer:{height:"100% !important",width:"100% !important",background:e.palette.grey[400],padding:"7.5px",overflow:"auto !important",minHeight:"100%",minWidth:"100%"}}}));function v(e){var t=e.nodeData,n=e.item,r=e.node,s=h(e,["nodeData","item","node"]),c=g(),p=b(i.default.useState([]),2),m=p[0],y=p[1],v=b(i.default.useState(""),2),_=v[0],w=v[1];return(0,i.useEffect)((function(){var e=(0,l.default)("Please select an object in the tree view.");if(r){var i=(0,f.getURL)(t,!0,s.treeNodeInfo,r,n,"dependent");if(e=(0,l.default)("No dependant information is available for the selected object."),r.hasDepends&&!t.is_collection)(0,d.default)()({url:i,type:"GET"}).then((function(t){if(t.data.length>0){var n=function(e,t){return e.forEach((function(e){null!=e.icon&&""!=e.icon||(e.icon=t?o.default.isFunction(t.node_image)?t.node_image.apply(t,[null,null]):t.node_image||"icon-"+e.type:"icon-"+e.type),e.icon&&(e.icon={type:e.icon})})),e}(t.data,r);y(n)}else w(e)})).catch((function(e){u.default.alert((0,l.default)("Failed to retrieve data from the server."),(0,l.default)(e.message)),w((0,l.default)("Failed to retrieve data from the server."))}))}return""!=e&&w(e),function(){y([])}}),[t]),i.default.createElement(i.default.Fragment,null,m.length>0?i.default.createElement(a.default,{className:c.autoResizer,columns:[{Header:"Type",accessor:"type",sortble:!0,resizable:!1,disableGlobalFilter:!0},{Header:"Name",accessor:"name",sortble:!0,resizable:!1,disableGlobalFilter:!0},{Header:"Restriction",accessor:"field",sortble:!0,resizable:!0,disableGlobalFilter:!1,minWidth:280}],data:m,msg:_,type:(0,l.default)("panel")}):i.default.createElement("div",{className:c.emptyPanel},i.default.createElement("div",{className:c.panelIcon},i.default.createElement("i",{className:"fa fa-exclamation-circle"}),i.default.createElement("span",{className:c.panelMessage},(0,l.default)(_)))))}v.propTypes={res:s.default.array,nodeData:s.default.object,treeNodeInfo:s.default.object,node:s.default.func,item:s.default.object}},65894:(e,t,n)=>{var r=n(64492);n(94986),n(26699),n(32023),n(23123),n(74916),n(69826);var o=c(n(91669)),i=c(n(28008)),a=c(n(19755)),l=c(n(55455)),s=c(n(55112)),u=n(48987),d=c(n(55958));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=l.default.dialog("createModeDlg",(function(){return{setup:function(){return{buttons:[{text:(0,o.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times file_manager_create_cancel pg-alertify-button"},{text:(0,o.default)("Create"),key:13,className:"btn btn-primary fa fa-file file_manager_create file_manager_ok pg-alertify-button disabled"}],options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0,padding:!1,overflow:!1,model:0,resizable:!0,pinnable:!1,modal:!1,autoReset:!1}}},replace_file:function(){var e=(0,a.default)(".replace_file .btn_yes"),t=(0,a.default)(".replace_file .btn_no");(0,a.default)(".storage_dialog #uploader .input-path").attr("disabled",!0),(0,a.default)(".file_manager_ok").addClass("disabled"),(0,a.default)(".replace_file, .fm_dimmer").show(),e.on("click",(function(){(0,a.default)(".replace_file, .fm_dimmer").hide(),e.off(),t.off();var n=(0,a.default)(".storage_dialog #uploader .input-path").val();s.default.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",n),(0,a.default)(".file_manager_create_cancel").trigger("click"),(0,a.default)(".storage_dialog #uploader .input-path").attr("disabled",!1),(0,a.default)(".file_manager_ok").removeClass("disabled")})),t.on("click",(function(){(0,a.default)(".replace_file, .fm_dimmer").hide(),e.off(),t.off(),(0,a.default)(".storage_dialog #uploader .input-path").attr("disabled",!1),(0,a.default)(".file_manager_ok").removeClass("disabled")}))},is_file_exist:function(){var e=(0,a.default)(".storage_dialog #uploader .input-path").val(),t=e.substr(0,e.lastIndexOf("/")+1),n=e.substr(e.lastIndexOf("/")+1),r=!1,o={path:t,name:n,mode:"is_file_exist"};return a.default.ajax({type:"POST",data:JSON.stringify(o),url:(0,i.default)("file_manager.filemanager",{trans_id:this.trans_id}),dataType:"json",contentType:"application/x-download; charset=utf-8",async:!1}).done((function(e){var t=e.data.result;r=1===t.Code})),r},check_permission:function(e){var t=!1,n={path:e,mode:"permission"};return a.default.ajax({type:"POST",data:JSON.stringify(n),url:(0,i.default)("file_manager.filemanager",{trans_id:this.trans_id}),dataType:"json",contentType:"application/json; charset=utf-8",async:!1}).done((function(e){var n=e.data.result;1===n.Code?t=!0:((0,a.default)(".file_manager_ok").addClass("disabled"),d.default.error(n.Error))})).fail((function(){(0,a.default)(".file_manager_ok").addClass("disabled"),d.default.error((0,o.default)("Error occurred while checking access permission."))})),t},callback:function(e){if(e.cancel=!1,e.button.text==(0,o.default)("Create"))if("refresh_list"!=document.activeElement.id){var t,n=(0,a.default)(".storage_dialog #uploader .input-path").val(),i={path:(0,a.default)(".currentpath").val()},l=(0,a.default)(".allowed_file_types select").val();if(n.includes(".")&&n.split(".").pop()==l||"*"==l||(n=n+"."+l,(0,a.default)(".storage_dialog #uploader .input-path").val(n)),!this.check_permission(n))return void(e.cancel=!0);!r.isUndefined(n)&&""!==n&&this.is_file_exist()?(this.replace_file(),this.$container.find(".replace_file").find(".btn_yes").trigger("focus"),e.cancel=!0):(s.default.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",n),t=(0,a.default)(this.elements.body).find(".storage_content"),(0,a.default)(t).find("*").off(),t.remove(),(0,u.removeTransId)(this.trans_id)),(0,u.set_last_traversed_dir)(i,this.trans_id)}else e.cancel=!0;else e.button.text==(0,o.default)("Cancel")&&(t=(0,a.default)(this.elements.body).find(".storage_content"),(0,a.default)(t).find("*").off(),t.remove(),(0,u.removeTransId)(this.trans_id),s.default.Browser.Events.trigger("pgadmin-storage:cancel_btn:create_file"))}}}),!1,"fileSelectionDlg")},48987:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getTransId=function(e){return o.default.ajax({data:e,type:"POST",async:!1,url:(0,r.default)("file_manager.get_trans_id"),dataType:"json",contentType:"application/json; charset=utf-8"})},t.removeTransId=function(e){return o.default.ajax({type:"GET",async:!1,url:(0,r.default)("file_manager.delete_trans_id",{trans_id:e}),dataType:"json",contentType:"application/json; charset=utf-8"})},t.set_last_traversed_dir=function(e,t){return o.default.ajax({url:(0,r.default)("file_manager.save_last_dir",{trans_id:t}),type:"POST",data:JSON.stringify(e),contentType:"application/json"})};var r=i(n(28008)),o=i(n(19755));function i(e){return e&&e.__esModule?e:{default:e}}},62032:(e,t,n)=>{var r=n(64492);n(69826),n(32564);var o=d(n(91669)),i=d(n(28008)),a=d(n(19755)),l=d(n(55455)),s=d(n(55112)),u=n(48987);function d(e){return e&&e.__esModule?e:{default:e}}e.exports=l.default.dialog("fileSelectionDlg",(function(){return{main:function(e){r.isUndefined(e.dialog_title)&&(e.dialog_title=(0,o.default)("Select file")),this.dialog_type=e.dialog_type,this.set("title",e.dialog_title),this.params=JSON.stringify(e),this.show()},settings:{label:void 0},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},prepare:function(){var e=this;e.$container.find(".storage_content").remove(),e.$container.append("<div class='storage_content'></div>");var t=e.$container.find(".storage_content");t.empty(),(0,a.default)(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties"),a.default.get((0,i.default)("file_manager.index"),(function(e){t.append(e)}));var n,o=(0,u.getTransId)(e.params);4==o.readyState&&(n=JSON.parse(o.responseText)),e.trans_id=r.isUndefined(n)?0:n.data.fileTransId,setTimeout((function(){(0,a.default)(e.$container.find(".file_manager")).on("enter-key",(function(){(0,a.default)((0,a.default)(e.elements.footer).find(".file_manager_ok")).trigger("click")}))}),200),e.__internal.buttons[1]&&(e.__internal.buttons[1].element.disabled=!0)},setup:function(){return{buttons:[{text:(0,o.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:(0,o.default)("Select"),key:13,className:"btn btn-primary fa fa-file file_manager_ok pg-alertify-button disabled"}],options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0,padding:!1,overflow:!1,model:0,resizable:!0,pinnable:!1,modal:!1,autoReset:!1}}},callback:function(e){var t;if(e.cancel=!1,e.button.text==(0,o.default)("Select"))if("refresh_list"!=document.activeElement.id){var n=(0,a.default)(".storage_dialog #uploader .input-path").val(),r={path:(0,a.default)(".currentpath").val()};s.default.Browser.Events.trigger("pgadmin-storage:finish_btn:"+this.dialog_type,n),t=(0,a.default)(this.elements.body).find(".storage_content"),(0,a.default)(t).find("*").off(),t.remove(),(0,u.removeTransId)(this.trans_id),(0,u.set_last_traversed_dir)(r,this.trans_id)}else e.cancel=!0;else e.button.text==(0,o.default)("Cancel")&&(t=(0,a.default)(this.elements.body).find(".storage_content"),(0,a.default)(t).find("*").off(),t.remove(),(0,u.removeTransId)(this.trans_id),s.default.Browser.Events.trigger("pgadmin-storage:cancel_btn:"+this.dialog_type))},build:function(){this.$container=(0,a.default)('<div class="storage_dialog file_selection_dlg"></div>'),this.elements.content.appendChild(this.$container.get(0)),l.default.pgDialogBuild.apply(this)},hooks:{onshow:function(){}}}}))},63867:(e,t,n)=>{var r=i(n(91669)),o=i(n(55455));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=o.default.dialog("fileStorageDlg",(function(){return{settingUpdated:function(e,t,n){"message"==e&&this.setMessage(n)},setup:function(){return{buttons:[{text:(0,r.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"}],options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0,padding:!1,overflow:!1,model:0,resizable:!0,pinnable:!1,modal:!1,autoReset:!1}}}}}),!0,"fileSelectionDlg")},11769:(e,t,n)=>{var r,o;n(24812),n(32564);var i,a=(i=n(55958))&&i.__esModule?i:{default:i};r=[n(91669),n(81311),n(19755),n(55112),n(33883),n(55455)],void 0===(o=function(e,t,n,r,o,i){if(o.ShowNodeSQL=o.ShowNodeSQL||{},o.ShowNodeSQL.initialized)return o.ShowNodeSQL;var l=window.wcDocker;return t.extend(o.ShowNodeSQL,{init:function(){var e;this.initialized||(this.initialized=!0,t.bindAll(this,"showSQL","sqlPanelVisibilityChanged"),this.sqlPanels=e=o.docker.findPanels("sql"),o.Events.on("pgadmin-browser:panel-sql:"+l.EVENT.VISIBILITY_CHANGED,this.sqlPanelVisibilityChanged),o.Events.on("pgadmin:browser:node:updated",(function(){this.sqlPanels&&this.sqlPanels.length&&(n(this.sqlPanels[0]).data("node-prop",""),this.sqlPanelVisibilityChanged(this.sqlPanels[0]))}),this),0==e.length?o.Events.on("pgadmin-browser:panel-sql:"+l.EVENT.INIT,function(){(e[0].isVisible()||1!=e.length)&&(o.Events.on("pgadmin-browser:tree:selected",this.showSQL),o.Events.on("pgadmin-browser:tree:reactSelected",this.reactShowSQL),o.Events.on("pgadmin-browser:tree:refreshing",this.refreshSQL,this))}.bind(this)):(e[0].isVisible()||1!=e.length)&&(o.Events.on("pgadmin-browser:tree:selected",this.showSQL),o.Events.on("pgadmin-browser:tree:reactSelected",this.reactShowSQL),o.Events.on("pgadmin-browser:tree:refreshing",this.refreshSQL,this)))},refreshSQL:function(e,r,o){var i=this,a={node_type:r._type,url:o.generate_url(e,"sql",r,!0)};t.isEqual(n(i.sqlPanels[0]).data("node-prop"),a)&&(n(i.sqlPanels[0]).data("node-prop",""),i.showSQL(e,r,o))},showSQL:function(l,s,u){this.timeout&&clearTimeout(this.timeout);var d=this;this.timeout=setTimeout((function(){var c="-- "+e("Please select an object in the tree view.");if(u){c="-- "+e("No SQL could be generated for the selected object.");var f=s._type,p=u.generate_url(l,"sql",s,!0),m=o.tree.getTreeNodeHierarchy(l),b={node_type:f,url:p};if(t.isEqual(n(d.sqlPanels[0]).data("node-prop"),b))return;if(n(d.sqlPanels[0]).data("node-prop",b),u.hasSQL){var y;c="";!function t(){n.ajax({url:p,type:"GET",beforeSend:function(t){t.setRequestHeader(r.csrf_token_header,r.csrf_token),y=setTimeout((function(){r.Browser.editor.setValue(e("Retrieving data from the server..."))}),1e3)}}).done((function(e){r.Browser.editor.getValue()!=e&&r.Browser.editor.setValue(e),clearTimeout(y)})).fail((function(n,r,s){var u=m[f].label;o.Events.trigger("pgadmin:node:retrieval:error","sql",n,r,s,l),i.pgHandleItemError(n,r,s,{item:l,info:m})||a.default.pgNotifier(r,n,e("Error retrieving the information - %s",s||u),(function(e){"CRYPTKEY_SET"===e?t():console.warn(arguments)}))}))}()}}""!=c&&r.Browser.editor.setValue(c)}),400)},sqlPanelVisibilityChanged:function(e){if(e.isVisible()){var t=o.tree,n=t.selected(),r=n&&t.itemData(n),i=n&&r&&o.Nodes[r._type];o.ShowNodeSQL.showSQL.apply(o.ShowNodeSQL,[n,r,i]),o.Events.on("pgadmin-browser:tree:selected",o.ShowNodeSQL.showSQL),o.Events.on("pgadmin-browser:tree:refreshing",o.ShowNodeSQL.refreshSQL,this)}else o.Events.off("pgadmin-browser:tree:selected",o.ShowNodeSQL.showSQL),o.Events.off("pgadmin-browser:tree:refreshing",o.ShowNodeSQL.refreshSQL,this)}}),o.ShowNodeSQL}.apply(t,r))||(e.exports=o)},50654:(e,t,n)=>{var r,o;function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e=n.nmd(e),n(91038),n(78783),n(82526),n(41817),n(32165),n(79753),n(23123),n(74916),n(92222),n(47042),n(69600),n(69826),n(41539),n(66992),n(33948),n(23157),n(5735),n(83753),n(68309),n(91058),n(32564),n(89554),n(83710),n(39714),n(57327),r=[n(28008),n(19755),n(81311),n(55112),n(72316),n(24511),n(4317),n(41081),n(91669),n(43734)],void 0===(o=function(e,t,r,o,a,l,s,u,d){o=o||window.pgAdmin||{},s=s.default;var c=null;if(o.Explain)return o.Explain;var f=o.Explain={prefix:e("misc.index")+"static/explain/img/"},p=100,m=100,b=10,y="15px",h=25,g=25,v=.01,_=.05,w=r.template(['<tr<% if (className) {%> class="<%=className%>"<%}%>>',' <td class="renderable name"><%- data.name %></td>',' <td class="renderable text-right"><%- data.count %></td>',' <td class="renderable timings d-none text-right">',"<%=Math.ceil10(data.sum_of_times, -3)%> ms","</td>",' <td class="renderable timings d-none text-right">',"<%=Math.ceil10(((data.sum_of_times||0)/(total_time||1)) * 100, -2)%>%","</td>","</tr>"].join("")),O=r.template(['<tr class="pga-ex-row','<% if (data["Plans"] && data["Plans"].length > 0) {%>'," pga-ex-collapsible","<%}%>",'<% if (data["exclusive_flag"] !== "undefined") {%>'," pga-ex-exclusive-",'<%- data["exclusive_flag"] %>',"<%}%>",'<% if (data["inclusive_flag"] !== "undefined") {%>'," pga-ex-inclusive-",'<%- data["inclusive_flag"] %>',"<%}%>",'<% if (data["rowsx_flag"] !== "undefined") {%>'," pga-ex-rowsx-",'<%- data["rowsx_flag"] %>',"<%}%>",'"','<% if (data["parent_node"]) {%>',' data-parent="pga_ex_<%= data["parent_node"] %>"',"<%}%>",' data-ex-id="pga_ex_<%= data["level"].join("_") %>">',' <td class="renderable pg-ex-highlighter clickable">','  <i class="fa fa-circle invisible"></i>',"</td>",' <td class="renderable clickable serial text-right">','<%= (data["_serial"]) %>.</td>',' <td class="renderable clickable" style="padding-left: ','<%= (data["level"].length) * 30%>px"','title="<%= tooltip_text %>"',">",'  <i class="pg-ex-subplans fa fa-long-arrow-alt-right"></i>',"<%= display_text %>","<%if (node_extra_info && node_extra_info.length > 0 ) {%>","<ui>","<%  for (var node_info_idx=0; "," node_info_idx<node_extra_info.length;node_info_idx++) {%>"," <li>","<%= node_extra_info[node_info_idx] %>","</li>","<% }%>","</ui>","<%}%>"," </td>",' <td class="renderable timings d-none text-right ','<% if (data["exclusive_flag"] !== "undefined") {%>',"pga-ex-exclusive-",'<%- data["exclusive_flag"] %>',"<%}%>",'">','<% if (typeof(data["exclusive"]) !== "undefined") {%>','<%= data["exclusive"] %> ms',"<%}%>"," </td>",' <td class="renderable timings d-none text-right ','<% if (data["inclusive_flag"] !== "undefined") {%>',"pga-ex-inclusive-",'<%- data["inclusive_flag"] %>',"<%}%>",'">','<% if (typeof(data["inclusive"]) !== "undefined") {%>','<%= data["inclusive"] %> ms',"<%}%>"," </td>",' <td class="renderable rowsx d-none text-right ','<% if (data["rowsx_flag"] !== "undefined") {%>',"pga-ex-rowsx-",'<%- data["rowsx_flag"] %>',"<%}%>",'">','<% if (data["rowsx_direction"] === "positive") {%>',"&uarr;","<%} else {%>","&darr;","<%}%> ",'<% if (typeof(data["rowsx"]) !== "undefined") {%>','<%- data["rowsx"] %>',"<%}%>  "," </td>",' <td class="renderable rowsx rows d-none text-right">','<% if (typeof(data["Actual Rows"]) !== "undefined") {%>','<%= data["Actual Rows"] %>',"<%}%>"," </td>",' <td class="renderable rowsx plan_rows d-none text-right">','<%= data["Plan Rows"] %>'," </td>",' <td class="renderable rows rowsx d-none text-right">','<% if (typeof(data["Actual Loops"]) !== "undefined") {%>','<%= data["Actual Loops"] %>',"<%}%>"," </td>",' <td class="renderable d-none">','  <i class="fa fa-ellipsis-h"></i>'," </td>","</tr>"].join("")),S=a.Model.extend({defaults:{Plans:[],level:[],image:void 0,image_text:void 0,xpos:void 0,ypos:void 0,width:p,height:m},_createSame:function(){return new S},parse:function(e,t){var n=1,o=e.level=e.level||[n],i=[],a=e["Node Type"],l=e.xpos=e.xpos-p,s=e.ypos,d=0;t.ctx.totalNodes++,t.ctx._explainTable.total_time=e.total_time||e["Actual Total Time"],e._serial=t.ctx.totalNodes,e.width=p,e.height=m,"SubPlan"===e["Parent Relationship"]&&(e.width+=62.5,e.height+=50,e.ypos+=g,l-=h,s+=g),a.startsWith("(slice")&&(a=a.substring(0,7));var c=u.default,f=r.isFunction(c[a])&&c[a].apply(void 0,[e])||c[a]||{image:"ex_unknown.svg",image_text:a};if(e.image=f.image,e.image_text=f.image_text,"Actual Total Time"in e&&"Actual Loops"in e&&(e.inclusive=Math.ceil10(e["Actual Total Time"],-3),e.exclusive=e.inclusive,e.inclusive_factor=e.inclusive/(e.total_time||e["Actual Total Time"]),e.inclusive_factor<=.1?e.inclusive_flag="1":e.inclusive_factor<.5?e.inclusive_flag="2":e.inclusive_factor<=.9?e.inclusive_flag="3":e.inclusive_flag="4"),"Actual Rows"in e&&"Plan Rows"in e&&(0===e["Actual Rows"]||e["Actual Rows"]>e["Plan Rows"]?(e.rowsx=0===e["Plan Rows"]?0:e["Actual Rows"]/e["Plan Rows"],e.rowsx_direction="negative"):(e.rowsx=0===e["Actual Rows"]?0:e["Plan Rows"]/e["Actual Rows"],e.rowsx_direction="positive"),e.rowsx<=10?e.rowsx_flag="1":e.rowsx<=100?e.rowsx_flag="2":e.rowsx<=1e3?e.rowsx_flag="3":e.rowsx_flag="4",e.rowsx="loops"in e?Math.ceil10(e.rowsx/e.loops||1,-2):Math.ceil10(e.rowsx,-2)),"Plans"in e){var b,y=this;e.width+=200,r.each(e.Plans,(function(a){var u=r.clone(o),c=y._createSame();u.push(n),c.set(c.parse(r.extend(a,{level:u,xpos:l-200,ypos:s,total_time:e.total_time||e["Actual Total Time"],parent_node:o.join("_"),loops:e["Actual Loops"]}),t)),d<c.get("width")&&(d=c.get("width")),"exclusive"in e&&(b=c.get("inclusive"))&&b<e.exclusive&&(e.exclusive-=b);var f=c.get("height");1!==n?e.height=e.height+f+60:f>e.height&&(e.height=f),s+=f+60,i.push(c),n++}))}else"loops"in e&&"exclusive"in e&&(e.inclusive=Math.ceil10(e["Actual Total Time"]/e.loops||1,-3),e.exclusive=e.inclusive);return"exclusive"in e&&(e.exclusive=Math.ceil10(e.exclusive,-3),e.exclusive_factor=e.exclusive/(e.total_time||e["Actual Total Time"]),e.exclusive_factor<=.1?e.exclusive_flag="1":e.exclusive_factor<.5?e.exclusive_flag="2":e.exclusive_factor<=.9?e.exclusive_flag="3":e.exclusive_flag="4"),e.width+=d,e.Plans=i,e},getLabel:function(){return null==this.get("Schema")?this.get("image_text"):this.get("Schema")+"."+this.get("image_text")},draw:function(e,t,n,o,i,a,l,s){var u=e.g(),c=t+this.get("xpos"),v=n+this.get("ypos"),_="SubPlan"===this.get("Parent Relationship"),w=this.toJSON(),S=getComputedStyle(document.documentElement).getPropertyValue("--color-fg");!function(e,t){var n,o,i=['<span class="pg-explain-text-name">'],a=[],l=[],s=t._explainTable;if(/Scan/.test(e["Node Type"])?(i.push(e["Node Type"]),a.push(e["Node Type"])):(i.push(e.image_text),a.push(e.image_text)),n=a.join(""),i.push("</span>"),void 0!==e["Index Name"]&&(i.push(" using "),a.push(" using "),i.push('<span class="pg-explain-text-name">'),i.push(r.escape(e["Index Name"])),a.push(e["Index Name"]),i.push("</span>")),void 0!==e["Relation Name"]&&(i.push(" on "),a.push(" on "),void 0!==e.Schema&&(i.push('<span class="pg-explain-text-name">'),i.push(r.escape(e.Schema)),a.push(e.Schema),i.push("</span>"),i.push("."),a.push(".")),i.push('<span class="pg-explain-text-name">'),i.push(r.escape(e["Relation Name"])),a.push(e["Relation Name"]),i.push("</span>"),void 0!==e.Alias&&(i.push(" as "),a.push(" as "),i.push('<span class="pg-explain-text-name">'),i.push(r.escape(e.Alias)),a.push(r.escape(e.Alias)),i.push("</span>"))),void 0!==e["Plan Rows"]&&void 0!==e["Plan Width"]){var u=[" (cost=",void 0!==e["Startup Cost"]?e["Startup Cost"]:"","..",void 0!==e["Total Cost"]?e["Total Cost"]:""," rows=",e["Plan Rows"]," width=",e["Plan Width"],")"].join("");i.push(u),a.push(u)}if(void 0!==e["Actual Startup Time"]||void 0!==e["Actual Total Time"]||void 0!==e["Actual Rows"]){var c=[" (",void 0!==e["Actual Startup Time"]?"actual="+e["Actual Startup Time"]+"..":"",void 0!==e["Actual Total Time"]?e["Actual Total Time"]+" ":"",void 0!==e["Actual Rows"]?"rows="+e["Actual Rows"]:"",void 0!==e["Actual Loops"]?" loops="+e["Actual Loops"]:"",")"].join("");i.push(c),a.push(c)}if("Join Filter"in e&&l.push("<strong>"+d("Join Filter")+"</strong>: "+r.escape(e["Join Filter"])),"Filter"in e&&l.push("<strong>"+d("Filter")+"</strong>: "+r.escape(e.Filter)),"Index Cond"in e&&l.push("<strong>"+d("Index Cond")+"</strong>: "+r.escape(e["Index Cond"])),"Hash Cond"in e&&l.push("<strong>"+d("Hash Cond")+"</strong>: "+r.escape(e["Hash Cond"])),"Rows Removed by Filter"in e&&l.push("<strong>"+d("Rows Removed by Filter")+"</strong>: "+r.escape(e["Rows Removed by Filter"])),"Peak Memory Usage"in e){var f=["<strong>"+d("Buckets")+"</strong>:",r.escape(e["Hash Buckets"]),"<strong>"+d("Batches")+"</strong>:",r.escape(e["Hash Batches"]),"<strong>"+d("Memory Usage")+"</strong>:",r.escape(e["Peak Memory Usage"]),"kB"].join(" ");l.push(f)}if("Recheck Cond"in e&&l.push("<strong>"+d("Recheck Cond")+"</strong>: "+e["Recheck Cond"]),"Exact Heap Blocks"in e&&l.push("<strong>"+d("Heap Blocks")+"</strong>: exact="+e["Exact Heap Blocks"]),s.rows.push(O({data:e,display_text:i.join(""),tooltip_text:a.join(""),node_extra_info:l})),void 0!==e.exclusive_flag&&(s.show_timings=!0),void 0!==e.rowsx_flag&&(s.show_rowsx=!0),void 0!==e["Actual Loops"]&&(s.show_rows=!0),void 0!==e["Plan Rows"]&&(s.show_plan_rows=!0),void 0!==e.total_time&&(s.total_time=e.total_time),void 0!==e["Relation Name"]){var p=(void 0!==e.Schema?e.Schema+".":"")+e["Relation Name"],m=s.statistics.tables[p]||{name:p,count:0,sum_of_times:0,nodes:{}};o=m.nodes[n]||{name:n,count:0,sum_of_times:0},m.count++,m.sum_of_times+=e.exclusive,o.count++,o.sum_of_times+=e.exclusive,m.nodes[n]=o,s.statistics.tables[p]=m}(o=s.statistics.nodes[n]||{name:n,count:0,sum_of_times:0}).count++,o.sum_of_times+=e.exclusive,s.statistics.nodes[n]=o}(w,s),_&&(u.rect(c-this.get("width")+p+h,v-this.get("height")+m+g-5,this.get("width")-h,this.get("height")+(v-g),5).attr({stroke:"#444444",strokeWidth:1.2,fill:"gray",fillOpacity:.2,"pointer-events":"none"}),u.text(c+p-this.get("width")/2-h,v+m-this.get("height")/2-g,this.get("Subplan Name")).attr({fontSize:y,"text-anchor":"start",fill:"red"})),this._drawImage(e,u,f.prefix+this.get("image"),c,v,a,l,s);var x=this.getLabel();if(u.multitext(c+50+5,v+m-5,x,150,{"font-size":y,"text-anchor":"middle",fill:S}),!r.isUndefined(i)){var C=c+p,P=v+50,E=o-b,j=i+50,k=this.get("Startup Cost"),D=this.get("Total Cost"),T=2;null!=k&&null!=D&&((T=Math.round(Math.log((k+D)/2+k)))<1?T=1:T>10&&(T=10));var R={stroke:S,strokeWidth:T+2},N={stroke:S,strokeWidth:T+2},A={viewBox:[0,0,20,20].join(" "),fill:S};this.drawPolyLine(u,C,P,E,j,_?N:R,A)}var I=this.get("Plans");r.each(I,(function(r){r.draw(e,t,n,c,v,a,l,s)}))},_drawImage:function(e,t,n,r,o,i,a){this.drawImage(t,n,r,o,i,a)},toJSON:function(e){var t=a.Model.prototype.toJSON.apply(this,arguments);if(e)delete t.Plans;else{var n=[];r.each(t.Plans,(function(e){n.push(e.toJSON())})),t.Plans=n}return t},drawPolyLine:function(e,t,n,r,o,i,a){var l=t+(r-t)/3,s=t+(r-t)/3*2,u=e.polygon([0,10,5,10,2.5,0,0,b]).transform("r90").marker(0,0,b,10,0,5).attr(a);e.line(t,n,l,n).attr(i),e.line(l-1,n,s,o).attr(i),e.line(s,o,r,o).attr(i).attr({markerEnd:u})},drawImage:function(e,n,o,i,a,l){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=e.image(n,o+25,i+25,50,50);u.attr({style:"cursor: pointer",class:"image-node"});var d=this.toJSON(),f=this.getLabel();if(s){var p="<title>";r.each(d,(function(e,t){"image"!==t&&"Plans"!==t&&"level"!==t&&"image"!==t&&"image_text"!==t&&"xpos"!==t&&"ypos"!==t&&"width"!==t&&"height"!==t&&(p+="".concat(t,": ").concat(e,"\n"))})),p+="</title>",u.append(c.parse(p))}u.click((function(){var e=l.find(".details-body");l.find(".details-title").text(f),e.empty(),u.node.textContent="";var n=t("\n          <table class='pgadmin-tooltip-table table table-bordered table-noouter-border table-bottom-border table-hover'>\n            <tbody></tbody>\n          </table>").appendTo(e).find("tbody");r.each(d,(function(e,t){"image"!==t&&"Plans"!==t&&"level"!==t&&"image"!==t&&"image_text"!==t&&"xpos"!==t&&"ypos"!==t&&"width"!==t&&"height"!==t&&(t=r.escape(t),e=r.escape(e),n.append('\n              <tr>\n                <td class="label explain-tooltip">'.concat(t,'</td>\n                <td class="label explain-tooltip-val">').concat(e,"</td>\n              </tr>\n            ")))})),l.removeClass("d-none"),e.scrollTop(0)}))}}),x=S.extend({_createSame:function(){return new x({parse:!0})},_drawImage:function(e,t,n,r,i,a,l,s){var u=o.Browser.get_browser();if("IE"===u.name||"Safari"===u.name&&parseInt(u.version)<10)this.drawImage(t,n,r,i,a,l);else{var d=this,p=f.prefix+this.get("image");c.load(p,(function(n){var o=c();o.append(n);d.drawImage(t,o.toDataURL(),r,i,a,l,!0),e.parent().attr({"xmlns:xlink":"http://www.w3.org/1999/xlink"}),setTimeout((function(){s._onImageDownloaded()}),100)}))}}}),C=a.Model.extend({defaults:{Plan:void 0,xpos:0,ypos:0},initialize:function(){this.set("Plan",new S),this.set("Statistics",new l)},parse:function(e,t){if(e&&"Plan"in e){var n=this.get("Plan");n.set(n.parse(r.extend(e.Plan,{xpos:0,ypos:0,loops:1}),t)),e.xpos=0,e.ypos=0,e.width=n.get("width")+50,e.height=n.get("height")+100,delete e.Plan}var o=this.get("Statistics");if(e&&"JIT"in e&&(o.set("JIT",e.JIT),delete e.JIT),e&&"Triggers"in e&&(o.set("Triggers",e.Triggers),delete e.Triggers),e){var i={};["Planning Time","Execution Time"].forEach((function(t){t in e&&(i[t]=e[t])})),o.set("Summary",i)}return e&&"Settings"in e&&(o.set("Settings",e.Settings),delete e.Settings),e},toJSON:function(){var e=a.Model.prototype.toJSON.apply(this,arguments);return e.Plan&&(e.Plan=e.Plan.toJSON()),e},draw:function(e,t,n,r,o,i){var a=e.g(),l=getComputedStyle(document.documentElement).getPropertyValue("--color-bg");a.rect(0,0,this.get("width")-10,this.get("height")-10,5).attr({fill:l}),this.get("Plan").draw(a,t,n,void 0,void 0,r,o,i),this.get("Statistics").set_statistics(o)}}),P=function e(){var n=e.cnt=(e.cnt||0)+1,r=function(e,t,r,o){return['   <li class="nav-item" role="presentation">','    <a class="nav-link ',o?"active":"",'"','       data-toggle="tab" tabindex="0"','       data-tab-index="'.concat(e,'"'),'       aria-selected="',o?"true":"false",'"','       role="tab" data-explain-role="'.concat(t,'"'),'       href="#pga_explain_'.concat(t,"_").concat(n,'"'),'       aria-controls="pga_explain_'.concat(t,"_").concat(n,'"'),'       id="pgah_explain_'.concat(t,"_").concat(n,'"> '),r,"</a>","</li>"].join("")},o=function(e,t,r){return['   <div role="tabpanel" tabindex="0" class="tab-pane pg-el-sm-12',"        pg-el-md-12 pg-el-lg-12 pg-el-12 fade collapse",t?" active show":""," ".concat(r,'"'),'        data-explain-tabpanel="'.concat(e,'"'),'        id="pga_explain_'.concat(e,"_").concat(n,'"'),'        aria-labelledby="pgah_explain_'.concat(e,"_").concat(n,'">'),"   </div>"].join("")};return t(['<div class="obj_properties container-fluid">',' <div tabindex="1" class="backform-tab pg-el-12" role="tabpanel">','  <ul class="nav nav-tabs" role="tablist">',"   </li>",'   <li class="nav-item" role="presentation">',r(1,"graphical",d("Graphical"),!0),r(2,"table",d("Analysis"),!1),r(3,"statistics",d("Statistics"),!1),"  </ul>",'  <div class="tab-content pg-el-sm-12 pg-el-12">',o("graphical",!0,"w-100 h-100 p-0"),o("table",!1,"p-0"),o("statistics",!1,""),"   </div>","  </div>"," </div>","</div>"].join(""))};return r.extend(f,{DrawJSONPlan:function(e,t,r,o){var a=this;n.e(92).then(function(l){var s=n(21223);(c=s).plugin((function(e,t,n){n.prototype.multitext=function(t,n,r,o,a){var l=e(),s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",u=l.text(0,0,s);u.attr(a);var d=u.getBBox().width/s.length,c=Math.round(o/d)-1;l.remove();var f,p=0,m=[],b="",y=function e(t,n,r){var i=r.length,a=[];return 0==i||(n&&n+i*d>o?(a.push(t),a=a.concat(e("",0,r))):n?a.push(t+" "+r):(t&&a.push(t),r.length>c+1?a.push(r.slice(0,c)+"-"):a.push(r),a=a.concat(e("",0,r.slice(c))))),a},h=i(r.split(" "));try{for(h.s();!(f=h.n()).done;){var g=y(b,p,f.value);b&&(m=m.slice(0,m.length-1)),p=(b=(m=m.concat(g))[m.length-1]).length*d}}catch(e){h.e(e)}finally{h.f()}var v=this.text(t,n,m).attr(a);return v.selectAll("tspan:nth-child(n+2)").attr({dy:"1.2em",x:t}),v}})),a.goForDraw(e,t,r,o)}.bind(null,n)).catch((function(e){throw e}))},goForDraw:function(e,n,i,a){var u=r.extend(a||{},{totalNodes:0,totalDownloadedNodes:0,isDownloaded:0});e.empty().attr("el","sm").addClass("pg-no-overflow pg-el-container");var p=P(),m=t(['<table class="backgrid table presentation table-bordered ','       table-noouter-border table-hover">'," <thead>","  <tr>",'    <th class="renderable pga-ex-collapsible" rowspan="2"></th>','    <th class="renderable" rowspan="2"><button disabled>',d("#"),"</button></th>",'    <th class="renderable" rowspan="2"><button disabled>',d("Node"),"</button></th>",'    <th class="renderable timings d-none" colspan="2"><button disabled>',d("Timings"),"</button></th>",'    <th class="renderable rowsx rows plan_rows d-none" colspan="3">',"<button disabled>",d("Rows"),"</button></th>",'    <th class="renderable rows rowsx d-none" rowspan="2">',"<button disabled>",d("Loops"),"</button></th>",'    <th class="renderable d-none" rowspan="2"><button disabled>',"  </tr>","  <tr>",'    <th class="renderable timings d-none"><button disabled>',d("Exclusive"),"</button></th>",'    <th class="renderable timings d-none"><button disabled>',d("Inclusive"),"</button></th>",'    <th class="renderable rowsx d-none"><button disabled>',d("Rows X"),"</button></th>",'    <th class="renderable rows rowsx d-none"><button disabled>',d("Actual"),"</button></th>",'    <th class="renderable plan_rows rowsx d-none"><button disabled>',d("Plan"),"</button></th>","  </tr>"," </thead>","</table>"].join("")),b=t(['<div class="row row-eq-height">',' <div class="col-sm-6 col-xs-6">','  <div class="col-xs-12 badge">',d("Statistics per Node Type"),"  </div>",'  <table class="backgrid table presentation table-bordered ','         table-hover" for="per_node_type">',"   <thead>","    <tr>",'      <th class="renderable"><button disabled>',d("Node type"),"</button></th>",'      <th class="renderable"><button disabled>',d("Count"),"</button></th>",'      <th class="renderable timings d-none"><button disabled>',d("Time spent"),"</button></th>",'      <th class="renderable timings d-none"><button disabled>',"% ",d("of query"),"</button></th>","    </tr>","   </thead>","  </table>"," </div>",' <div class="col-sm-6 col-xs-6">','  <div class="col-xs-12 badge">',d("Statistics per Relation"),"  </div>",'  <table class="backgrid table presentation table-bordered ','         table-hover" for="per_table">',"   <thead>","    <tr>",'      <th class="renderable"><button disabled>',d("Relation name"),"</button></th>",'      <th class="renderable"><button disabled>',d("Scan count"),"</button></th>",'      <th class="renderable timings d-none"><button disabled>',d("Total time"),"</button></th>",'      <th class="renderable timings d-none"><button disabled>',"% ",d("of query"),"</button></th>","    </tr>","    <tr>",'      <th class="renderable"><button disabled>',d("Node type"),"</button></th>",'      <th class="renderable"><button disabled>',d("Count"),"</button></th>",'      <th class="renderable timings d-none"><button disabled>',d("Sum of times"),"</button></th>",'      <th class="renderable timings d-none"><button disabled>',"% ",d("of relation"),"</button></th>","    </tr>","   </thead>","  </table>"," </div>","</div>"].join("")),y=p.find("[data-explain-tabpanel=graphical]"),O=p.find("[data-explain-tabpanel=table]");u.currentTab=e.find(".nav-link[aria-selected=true]").attr("data-explain-role"),p.appendTo(e),m.appendTo(O),b.appendTo(p.find("[data-explain-tabpanel=statistics]"));var S=t.extend(!0,[],n),E=1,j=t("<div></div>",{class:"pg-explain-zoom-area btn-group btn-group-sm",role:"group"}).appendTo(y),k=t("<button></button>",{class:"btn btn-primary-icon pg-explain-zoom-btn",title:d("Zoom in"),"aria-label":d("Zoom in"),tabindex:0}).appendTo(j).append(t("<i></i>",{class:"fa fa-search-plus"})),D=t("<button></button>",{class:"btn btn-primary-icon pg-explain-zoom-btn",title:d("Zoom to original"),"aria-label":d("Zoom to original"),tabindex:0}).appendTo(j).append(t("<i></i>",{class:"fa fa-arrows-alt"})),T=t("<button></button>",{class:"btn btn-primary-icon pg-explain-zoom-btn",title:d("Zoom out"),"aria-label":d("Zoom out"),tabindex:0}).appendTo(j).append(t("<i></i>",{class:"fa fa-search-minus"})),R=t("<div></div>",{class:"pg-explain-download-area btn-group btn-group-sm",role:"group"}).appendTo(y),N=t("<button></button>",{id:"btn-explain-download",class:"btn btn-primary-icon pg-explain-download-btn",title:d("Download"),"aria-label":d("Download"),tabindex:0,disabled:function(){var e=o.Browser.get_browser();return"IE"===e.name?(this.title="Not supported for Internet Explorer",!0):"Safari"===e.name&&parseInt(e.version)<10&&(this.title="Not supported for Safari version less than 10.1",!0)}}).appendTo(R).append(t("<i></i>",{class:"fa fa-download"})),A=t("<div></div>",{class:"pg-explain-stats-area btn-group btn-group-sm d-none",role:"group"}).appendTo(y);t("<button></button>",{id:"btn-explain-stats",class:"btn btn-primary-icon pg-explain-stats-btn",title:d("Statistics"),"aria-label":d("Statistics"),tabindex:0}).appendTo(A).append(t("<i></i>",{class:"fa fa-chart-line"}));var I=t("<div></div>",{class:"pgadmin-explain-container w-100 h-100 overflow-auto"}).appendTo(y);I.data("zoom-factor",E);var M=t('<div class="pgadmin-explain-details card d-none" data-bs-backdrop="false" tabindex="-1" aria-hidden="true">\n        <div class="card-header details-header d-flex">\n          <div class="details-title my-auto"></div>\n          <div class="ml-auto"><button class="btn btn-sm fa fa-times ml-auto details-close"/></div>\n        </div>\n        <div class="card-body details-body"></div>\n       </div>').appendTo(y);M.find(".details-close").on("click",(function(){M.addClass("d-none")}));var q,B,L,F=0,U=g;u._explainTable={rows:[],statistics:{tables:{},nodes:{}}},u._onImageDownloaded=function(){if(u.totalDownloadedNodes++,!u.isDownloaded&&u.totalNodes===u.totalDownloadedNodes){u.isDownloaded=!0;var e=c("#".concat(y.attr("id")," .pgadmin-explain-container svg")),t="explain_plan_"+(new Date).getTime()+".svg";s.downloadSVG(e.toString(),t)}},r.each(n,(function(n){var r;i?r=new(C.extend({initialize:function(){this.set("Plan",new x({parse:!0})),this.set("Statistics",new l)}}))({parse:!0}):r=new C;r.set(r.parse(n,{ctx:u})),F=r.get("width"),U=r.get("height");var o=c(F,U),a=t(o.node).detach();I.append(a),r.draw(o,F-h,g,I,M,u);var p=I.width();if(p<F){E=(E=(E=p/F)<v?v:E)>1?1:E;var m=new c.matrix;m.scale(E,E),a.find("g").first().attr({transform:m}),a.attr({width:F*E,height:U*E}),I.data("zoom-factor",E)}k.on("click",(function(){E=E+_>2?2:E+_;var e=new c.matrix;e.scale(E,E),a.find("g").first().attr({transform:e}),a.attr({width:F*E,height:U*E}),I.data("zoom-factor",E)})),T.on("click",(function(){E=E-_<v?v:E-_;var e=new c.matrix;e.scale(E,E),a.find("g").first().attr({transform:e}),a.attr({width:F*E,height:U*E}),I.data("zoom-factor",E)})),D.on("click",(function(){E=1;var e=new c.matrix;e.scale(E,E),a.find("g").first().attr({transform:e}),a.attr({width:F*E,height:U*E}),I.data("zoom-factor",E)})),N.on("click",(function(){f.DrawJSONPlan(e,S,!0),I.on("explain:svg:downloaded",(function(){if(u.totalDownloadedNodes++,!u.isDownloaded&&u.totalNodes===u.totalDownloadedNodes){u.isDownloaded=!0,o=c(".pgadmin-explain-container svg");var e="explain_plan_"+(new Date).getTime()+".svg";s.downloadSVG(o.toString(),e)}}))})),e.find(".image-node").tooltip({title:d("Click for details..."),template:'<div class="tooltip" role="tooltip"><div class="arrow d-none"></div><div class="tooltip-inner"></div></div>'})})),q=u._explainTable,B=m,L=t("<tbody></tbody>"),r.each(q.rows,(function(e){t(e).appendTo(L)})),L.appendTo(B),!0===q.show_timings&&B.find(".timings").removeClass("d-none"),!0===q.show_rowsx?B.find(".rowsx").removeClass("d-none"):!0===q.show_rows?(B.find(".rows").removeClass("d-none"),B.find("thead .rows[colspan=3]").attr("colspan",1)):!0===q.show_plan_rows&&(B.find(".plan_rows").removeClass("d-none"),B.find("thead .rows[colspan=3]").attr("colspan",1)),function(e,t){var n=t.find('table[for="per_table"]'),o=t.find('table[for="per_node_type"]');r.each(r.sortBy(r.values(e.statistics.nodes),"name"),(function(t){return o.append(w({data:t,total_time:e.total_time,className:""}))})),r.each(r.sortBy(r.values(e.statistics.tables),"name"),(function(t){t.sum_of_times=0,r.each(t.nodes,(function(e){return t.sum_of_times+=e.sum_of_times})),n.append(w({data:t,total_time:e.total_time,className:"table"})),r.each(r.sortBy(r.values(t.nodes),"name"),(function(e){n.append(w({data:e,total_time:t.sum_of_times,className:"node"}))}))})),e.show_timings&&t.find(".timings").removeClass("d-none")}(u._explainTable,b),e.on("shown.bs.tab",(function(){u.currentTab=e.find(".nav-link[aria-selected=true]").attr("data-explain-role")}))}}),t(document).on("mouseenter",".pga-ex-row.pga-ex-collapsible",(function(e){var n=t(e.currentTarget);n.parent().find("[data-parent="+n.attr("data-ex-id")+"] > td.pg-ex-highlighter > i").removeClass("invisible")})).on("mouseleave",".pga-ex-row.pga-ex-collapsible",(function(e){var n=t(e.currentTarget);n.parent().find(".pga-ex-row[data-parent="+n.attr("data-ex-id")+"] > td.pg-ex-highlighter > i").addClass("invisible")})).on("click",".pga-ex-row.pga-ex-collapsible",(function(e){var n=t(e.currentTarget);"true"===n.attr("data-collapsed")?(n.parent().find(".pga-ex-row[data-parent^="+n.attr("data-ex-id")+"]").removeClass("d-none").filter("[data-collapsed=true]").each((function(e,n){var r=t(n);r.parent().find(".pga-ex-row[data-parent^="+r.attr("data-ex-id")+"]").addClass("d-none")})),n.attr("data-collapsed","false")):(n.parent().find(".pga-ex-row[data-parent^="+n.attr("data-ex-id")+"]").addClass("d-none"),n.attr("data-collapsed","true"))})),f}.apply(t,r))||(e.exports=o)},24511:(e,t,n)=>{var r=n(64492);n(92222),n(47941),n(69826);var o=l(n(19755)),i=l(n(72316)),a=l(n(91669));function l(e){return e&&e.__esModule?e:{default:e}}var s=i.default.Model.extend({defaults:{JIT:[],Triggers:[],Summary:{}},explainToolTip:function(e,t,n){e=r.escape(e),t=r.escape(t),n.append('\n      <tr>\n        <td class="label explain-tooltip">  '.concat(e,'</td>\n        <td class="label explain-tooltip-val">').concat(t,"</td>\n      </tr>\n    "))},set_statistics:function(e){var t=this,n=this.get("JIT"),i=this.get("Triggers"),l=this.get("Summary");(Object.keys(n).length>0||Object.keys(i).length>0||Object.keys(l).length>0)&&(0,o.default)(".pg-explain-stats-area").removeClass("d-none");var s=(0,o.default)("\n      <table class='pgadmin-tooltip-table table table-bordered table-noouter-border table-bottom-border table-hover'>\n        <tbody></tbody>\n      </table>"),u=s.find("tbody");Object.keys(n).length>0&&(u.append('<tr><td colspan="2" class="label explain-tooltip">'+(0,a.default)("JIT:")+"</td></tr>"),r.each(n,(function(e,n){t.explainToolTip(n,e,u)}))),Object.keys(i).length>0&&(u.append('<tr><td colspan="2" class="label explain-tooltip">'+(0,a.default)("Triggers:")+"</td></tr>"),r.each(i,(function(e,t){e instanceof Object?r.each(e,(function(e,t){"Trigger Name"===t?(t=r.escape(t),e=r.escape(e),u.append('\n                <tr>\n                  <td class="label explain-tooltip">  '.concat(t,'</td>\n                  <td class="label explain-tooltip-val">').concat(e,"</td>\n                </tr>\n              "))):(t=r.escape(t),e=r.escape(e),u.append('\n                <tr>\n                  <td class="label explain-tooltip">    '.concat(t,'</td>\n                  <td class="label explain-tooltip-val">').concat(e,"</td>\n                </tr>\n              ")))})):(t=r.escape(t),e=r.escape(e),u.append('\n            <tr>\n              <td class="label explain-tooltip">  '.concat(t,'</td>\n              <td class="label explain-tooltip-val">').concat(e,"</td>\n            </tr>\n          ")))}))),Object.keys(l).length>0&&(u.append('<tr><td colspan="2" class="label explain-tooltip">'+(0,a.default)("Summary:")+"</td></tr>"),r.each(l,(function(e,n){t.explainToolTip(n,e,u)}))),(0,o.default)(".pg-explain-stats-area").off("click").on("click",(function(){if(0!=Object.keys(n).length||0!=Object.keys(i).length||0!=Object.keys(l).length){var t=e.find(".details-body");e.find(".details-title").text("Statistics"),t.empty(),t.append(s),e.removeClass("d-none"),t.scrollTop(0)}}))}});e.exports=s},41081:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(23157);var r={Aggregate:{image:"ex_aggregate.svg",image_text:"Aggregate"},Append:{image:"ex_append.svg",image_text:"Append"},"Bitmap Index Scan":function(e){return{image:"ex_bmp_index.svg",image_text:e["Index Name"]}},"Bitmap Heap Scan":function(e){return{image:"ex_bmp_heap.svg",image_text:e["Relation Name"]}},BitmapAnd:{image:"ex_bmp_and.svg",image_text:"Bitmap AND"},BitmapOr:{image:"ex_bmp_or.svg",image_text:"Bitmap OR"},"CTE Scan":{image:"ex_cte_scan.svg",image_text:"CTE Scan"},"Function Scan":{image:"ex_result.svg",image_text:"Function Scan"},"Foreign Scan":{image:"ex_foreign_scan.svg",image_text:"Foreign Scan"},Gather:{image:"ex_gather_motion.svg",image_text:"Gather"},"Gather Merge":{image:"ex_gather_merge.svg",image_text:"Gather Merge"},Group:{image:"ex_group.svg",image_text:"Group"},GroupAggregate:{image:"ex_aggregate.svg",image_text:"Group Aggregate"},Hash:{image:"ex_hash.svg",image_text:"Hash"},"Hash Join":function(e){if(!e["Join Type"])return{image:"ex_join.svg",image_text:"Join"};switch(e["Join Type"]){case"Anti":return{image:"ex_hash_anti_join.svg",image_text:"Hash Anti Join"};case"Semi":return{image:"ex_hash_semi_join.svg",image_text:"Hash Semi Join"};default:return{image:"ex_hash.svg",image_text:String("Hash "+e["Join Type"]+" Join")}}},HashAggregate:{image:"ex_aggregate.svg",image_text:"Hash Aggregate"},"Index Only Scan":function(e){return{image:"ex_index_only_scan.svg",image_text:e["Index Name"]}},"Index Scan":function(e){return{image:"ex_index_scan.svg",image_text:e["Index Name"]}},"Index Scan Backword":{image:"ex_index_scan.svg",image_text:"Index Backward Scan"},Limit:{image:"ex_limit.svg",image_text:"Limit"},LockRows:{image:"ex_lock_rows.svg",image_text:"Lock Rows"},Materialize:{image:"ex_materialize.svg",image_text:"Materialize"},"Merge Append":{image:"ex_merge_append.svg",image_text:"Merge Append"},"Merge Join":function(e){switch(e["Join Type"]){case"Anti":return{image:"ex_merge_anti_join.svg",image_text:"Merge Anti Join"};case"Semi":return{image:"ex_merge_semi_join.svg",image_text:"Merge Semi Join"};default:return{image:"ex_merge.svg",image_text:String("Merge "+e["Join Type"]+" Join")}}},ModifyTable:function(e){switch(e.Operation){case"Insert":return{image:"ex_insert.svg",image_text:"Insert"};case"Update":return{image:"ex_update.svg",image_text:"Update"};case"Delete":return{image:"ex_delete.svg",image_text:"Delete"}}},"Named Tuplestore Scan":{image:"ex_named_tuplestore_scan.svg",image_text:"Named Tuplestore Scan"},"Nested Loop":function(e){switch(e["Join Type"]){case"Anti":return{image:"ex_nested_loop_anti_join.svg",image_text:"Nested Loop Anti Join"};case"Semi":return{image:"ex_nested_loop_semi_join.svg",image_text:"Nested Loop Semi Join"};default:return{image:"ex_nested.svg",image_text:"Nested Loop "+e["Join Type"]+" Join"}}},ProjectSet:{image:"ex_projectset.svg",image_text:"ProjectSet"},"Recursive Union":{image:"ex_recursive_union.svg",image_text:"Recursive Union"},Result:{image:"ex_result.svg",image_text:"Result"},"Sample Scan":{image:"ex_scan.svg",image_text:"Sample Scan"},Scan:{image:"ex_scan.svg",image_text:"Scan"},Seek:{image:"ex_seek.svg",image_text:"Seek"},SetOp:function(e){var t=e.Strategy,n=e.Command;return"Hashed"==t?n.startsWith("Intersect")?"Intersect All"==n?{image:"ex_hash_setop_intersect_all.svg",image_text:"Hashed Intersect All"}:{image:"ex_hash_setop_intersect.svg",image_text:"Hashed Intersect"}:n.startsWith("Except")?"Except All"==n?{image:"ex_hash_setop_except_all.svg",image_text:"Hashed Except All"}:{image:"ex_hash_setop_except.svg",image_text:"Hash Except"}:{image:"ex_hash_setop_unknown.svg",image_text:"Hashed SetOp Unknown"}:{image:"ex_setop.svg",image_text:"SetOp"}},"Seq Scan":function(e){return{image:"ex_scan.svg",image_text:e["Relation Name"]}},"Subquery Scan":{image:"ex_subplan.svg",image_text:"SubQuery Scan"},Sort:{image:"ex_sort.svg",image_text:"Sort"},"Tid Scan":{image:"ex_tid_scan.svg",image_text:"Tid Scan"},"Table Function Scan":{image:"ex_table_func_scan.svg",image_text:"Table Function Scan"},Unique:{image:"ex_unique.svg",image_text:"Unique"},"Values Scan":{image:"ex_values_scan.svg",image_text:"Values Scan"},WindowAgg:{image:"ex_window_aggregate.svg",image_text:"Window Aggregate"},"WorkTable Scan":{image:"ex_worktable_scan.svg",image_text:"WorkTable Scan"},Undefined:{image:"ex_unknown.svg",image_text:"Undefined"}};t.default=r},4317:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(60285),n(41539),n(78783),n(66992),n(33948),n(15306),n(74916);var r={blobURL:function(e,t){var n=new Blob([e],{type:t});return(window.URL||window.webkitURL).createObjectURL(n)},downloadSVG:function(e,t){e=e.replace(/NS\d+:href/gi,"xlink:href");var n=this.blobURL(e,"image/svg+xml"),r=document.createElement("a");r.href=n,r.setAttribute("download",t),document.body.appendChild(r),r.click(),document.body.removeChild(r)}};t.default=r},2523:(e,t,n)=>{var r=n(64492);n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getURL=function(e,t,n,a,l,s){if(e.is_collection&&"stats"===s)return o.generateCollectionURL.call(a,l,s);if(-1==r.indexOf(["partition"],e._type))return o.generateNodeUrl.call(a,n,s,e,t,a.url_jump_after_node);return(0,i.sprintf)("table/%s/%s/%s/%s/%s/%s",encodeURIComponent(s),encodeURIComponent(n.server_group._id),encodeURIComponent(n.server._id),encodeURIComponent(n.database._id),encodeURIComponent(n.partition.schema_id),encodeURIComponent(n.partition._id))},n(82772);var o=n(77077),i=n(44092)},18210:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(79753),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(91038),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.default=C,n(89554),n(54747),n(68309),n(82772);var o=b(n(96486)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=b(n(6734)),l=b(n(91669)),s=b(n(45697)),u=b(n(55958)),d=b(n(2832)),c=n(30398),f=b(n(73870)),p=n(2523);function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function b(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=(0,c.makeStyles)((function(e){return{emptyPanel:{minHeight:"100%",minWidth:"100%",background:e.palette.grey[400],overflow:"auto",padding:"7.5px"},panelIcon:{width:"80%",margin:"0 auto",marginTop:"25px !important",position:"relative",textAlign:"center"},panelMessage:{marginLeft:"0.5rem",fontSize:"0.875rem"},autoResizer:{height:"100% !important",width:"100% !important",background:e.palette.grey[400],padding:"7.5px",overflow:"auto !important",minHeight:"100%",minWidth:"100%"}}}));function S(e,t){var n=[];return t?n=[{Header:"Statictics",accessor:"name",sortble:!0,resizable:!1,disableGlobalFilter:!0},{Header:"Value",accessor:"value",sortble:!0,resizable:!1,disableGlobalFilter:!0}]:(o.default.isUndefined(e)||e.forEach((function(e){var t={Header:e.name,accessor:e.name,sortble:!0,resizable:!1,disableGlobalFilter:!0};n.push(t)})),n)}function x(e,t){var n,r=[];if(e.data.data){var i=e.data.data;t.hasCollectiveStatistics||i.rows.length>1?(i.rows.forEach((function(e){r.push(_(_({},e),{},{icon:""}))})),n=S(i.columns,!1)):(r=function(e,t){var n,r,i=e.rows[0],a=e.columns,l=[];for(var s in a)n=a[s].name,r=i&&i[n]?-1!=o.default.indexOf(t,n)?(0,f.default)(i[n]):i[n]:null,l.push({name:n,value:r,icon:""});return l}(i,t.statsPrettifyFields),n=S(i.columns,!0))}return[r,n]}function C(e){var t=e.nodeData,n=e.item,r=e.node,s=g(e,["nodeData","item","node"]),c=O(),f=y(i.default.useState([]),2),m=f[0],b=f[1],h=y(i.default.useState(""),2),v=h[0],_=h[1],w=y(i.default.useState([{Header:"Statictics",accessor:"name",sortble:!0,resizable:!1,disableGlobalFilter:!0},{Header:"Value",accessor:"value",sortble:!0,resizable:!1,disableGlobalFilter:!0}]),2),S=w[0],C=w[1];return(0,i.useEffect)((function(){var e,i=(0,l.default)("Please select an object in the tree view.");if(r){e=(0,p.getURL)(t,!0,s.treeNodeInfo,r,n,"stats"),i=(0,l.default)("No statistics are available for the selected object.");var a=(0,d.default)();r.hasStatistics?a({url:e,type:"GET"}).then((function(e){var t=y(x(e,r),2),n=t[0],i=t[1];b(n),o.default.isUndefined(i)||C(i)})).catch((function(e){u.default.alert((0,l.default)("Failed to retrieve data from the server."),(0,l.default)(e.message)),_((0,l.default)("Failed to retrieve data from the server."))})):_(i)}return""!=i&&_(i),function(){b([])}}),[t]),i.default.createElement(i.default.Fragment,null,m.length>0?i.default.createElement(a.default,{className:c.autoResizer,columns:S,data:m,msg:v,type:"panel"}):i.default.createElement("div",{className:c.emptyPanel},i.default.createElement("div",{className:c.panelIcon},i.default.createElement("i",{className:"fa fa-exclamation-circle"}),i.default.createElement("span",{className:c.panelMessage},(0,l.default)(v)))))}C.propTypes={res:s.default.array,nodeData:s.default.object,item:s.default.object,treeNodeInfo:s.default.object,node:s.default.func}},20811:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(69826);var r,o=(r=n(4631))&&r.__esModule?r:{default:r};n(54086),n(64020),n(20017),n(88657),n(89700),n(71707),n(3585),n(69109),n(55292),n(81699),n(32095),n(14568),n(4328),n(82801),n(29424),n(90338),n(18473),o.default.commands.focusOut=function(){event.stopPropagation(),document.activeElement.blur(),event.currentTarget.hasOwnProperty("parents")&&event.currentTarget.parents().find(".sql-code-control")&&event.currentTarget.parents().find(".sql-code-control").focus()},o.default.defineInitHook((function(e){e.addKeyMap({Tab:function(e){e.somethingSelected()?e.execCommand("indentMore"):e.getOption("indentWithTabs")?e.replaceSelection("\t","end","+input"):e.execCommand("insertSoftTab")}})})),o.default.keyMap.default.Esc="focusOut";var i=o.default;t.default=i},73409:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(81812),n(52947),n(33059),n(26491),n(10883),n(98463),n(51827),n(98276),n(4165),n(25080),n(34964),n(35337),n(79387),n(5205);var r=window.Slick;t.default=r},8593:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(38880),n(49337),n(33321),n(19601),n(79753),n(41817),n(32165),n(78783),n(47042),n(68309),n(91038),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.DataGridHeader=q,t.default=B,n(21249),n(41539),n(66992),n(33948),n(57327),n(47941),n(23157),n(89554),n(54747),n(92222),n(2707),n(82772),n(69826),n(88674),n(26699),n(32023),n(86535),n(99244),n(69070);var o=P(n(67294)),i=n(65770),a=n(30398),l=n(87451),s=x(n(3550)),u=n(26850),d=x(n(66631)),c=x(n(62015)),f=n(79521),p=x(n(86010)),m=x(n(45697)),b=x(n(96486)),y=x(n(91669)),h=n(52237),g=P(n(75835)),v=n(81922),_=x(n(41832)),w=n(44092),O=n(64519),S=n(50464);function x(e){return e&&e.__esModule?e:{default:e}}function C(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return C=function(){return e},e}function P(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=C();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function E(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=(0,a.makeStyles)((function(e){return{grid:R(R({},e.mixins.panelBorder),{},{backgroundColor:e.palette.background.default}),gridHeader:R(R({display:"flex"},e.mixins.panelBorder.bottom),{},{backgroundColor:e.otherVars.headerBg}),gridHeaderText:{padding:e.spacing(.5,1),fontWeight:e.typography.fontWeightBold},gridControls:{marginLeft:"auto"},gridControlsButton:R({border:0,borderRadius:0},e.mixins.panelBorder.left),gridRowButton:{border:0,borderRadius:0,padding:0,minWidth:0,backgroundColor:"inherit","&.Mui-disabled":{border:0}},gridTableContainer:{overflow:"auto",width:"100%"},table:{borderSpacing:0,width:"100%",overflow:"auto",backgroundColor:e.otherVars.tableBg},tableCell:R(R(R({margin:0,padding:e.spacing(.5)},e.mixins.panelBorder.bottom),e.mixins.panelBorder.right),{},{position:"relative",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),tableCellHeader:{fontWeight:e.typography.fontWeightBold,padding:e.spacing(1,.5),textAlign:"left"},tableContentWidth:{width:"calc(100% - 3px)"},btnCell:{padding:e.spacing(.5,0),textAlign:"center"},resizer:{display:"inline-block",width:"5px",height:"100%",position:"absolute",right:0,top:0,transform:"translateX(50%)",zIndex:1,touchAction:"none"},expandedForm:{borderTopWidth:e.spacing(.5),borderStyle:"solid ",borderColor:e.palette.grey[400]},expandedIconCell:{backgroundColor:e.palette.grey[400],borderBottom:"none"}}}));function I(e){var t=e.headerGroups,n=A();return o.default.createElement("div",{className:n.tableContentWidth},t.map((function(e,t){return o.default.createElement("div",D({key:t},e.getHeaderGroupProps()),e.headers.map((function(e,t){return o.default.createElement("div",D({key:t},e.getHeaderProps()),o.default.createElement("div",D({},e.sortable?e.getSortByToggleProps():{},{className:(0,p.default)(n.tableCell,n.tableCellHeader)}),e.render("Header"),o.default.createElement("span",null,e.isSorted?e.isSortedDesc?" 🔽":" 🔼":"")),!e.disableResizing&&o.default.createElement("div",D({},e.getResizerProps(),{className:n.resizer})))})))})))}function M(e){var t=e.row,n=e.totalRows,r=e.isResizing,i=e.schema,a=e.schemaRef,l=e.accessPath,s=A(),u=j((0,o.useState)(!1),2),d=u[0],c=u[1],f=(0,o.useContext)(O.DepListenerContext),m=b.default.values(t.values,Object.keys(t.values).filter((function(e){return!e.startsWith("btn")}))),y=(0,o.useMemo)((function(){var e=[];return i.fields.forEach((function(t){((0,w.evalFunc)(null,t.deps)||[]).forEach((function(t){var n=l.concat(t);b.default.isArray(t)&&(n=t,e.push(n))}))})),e}),[]);return(0,o.useEffect)((function(){return a.current.fields.forEach((function(e){(e.depChange||e.deferredDepChange)&&(null==f||f.addDepListener(l.concat(e.id),l.concat(e.id),e.depChange,e.deferredDepChange)),((0,w.evalFunc)(null,e.deps)||[]).forEach((function(t){var n=l.concat(t);b.default.isArray(t)&&(n=t),e.depChange&&(null==f||f.addDepListener(n,l.concat(e.id),e.depChange))}))})),function(){null==f||f.removeDepListener(l)}}),[]),m=(m=m.concat(y.map((function(e){var t;return b.default.get(null===(t=a.current.top)||void 0===t?void 0:t.sessData,e)})))).concat([n,t.isExpanded,d,r]),(0,o.useMemo)((function(){return o.default.createElement("div",D({},t.getRowProps(),{className:"tr"}),t.cells.map((function(e,n){var r=[s.tableCell];return"string"==typeof e.column.id&&e.column.id.startsWith("btn-")&&r.push(s.btnCell),"btn-edit"==e.column.id&&t.isExpanded&&r.push(s.expandedIconCell),o.default.createElement("div",D({key:n},e.getCellProps(),{className:(0,p.default)(r)}),e.render("Cell",{reRenderRow:function(){c((function(e){return!e}))}}))})))}),m)}function q(e){var t=e.label,n=e.canAdd,r=e.onAddClick,a=A();return o.default.createElement(i.Box,{className:a.gridHeader},o.default.createElement(i.Box,{className:a.gridHeaderText},t),o.default.createElement(i.Box,{className:a.gridControls},n&&o.default.createElement(l.PgIconButton,{"data-test":"add-row",title:(0,y.default)("Add row"),onClick:r,icon:o.default.createElement(s.default,null),className:a.gridControlsButton})))}function B(e){var t=e.value,n=e.viewHelperProps,r=e.schema,a=e.accessPath,s=e.dataDispatch,p=e.containerClassName,_=e.fixedRows,O=E(e,["value","viewHelperProps","schema","accessPath","dataDispatch","containerClassName","fixedRows"]),x=A(),C=(0,o.useContext)(h.StateUtilsContext),P=(0,S.useIsMounted)(),j=(0,o.useRef)(r),k=(0,o.useMemo)((function(){var e=[];if(O.canEdit){var t={Header:o.default.createElement(o.default.Fragment,null," "),id:"btn-edit",accessor:function(){},disableResizing:!0,sortable:!1,dataType:"edit",width:26,minWidth:26,maxWidth:26,Cell:function(e){var t=e.row,n=!0;return O.canEditRow&&(n=(0,w.evalFunc)(j.current,O.canEditRow,t.original||{})),o.default.createElement(l.PgIconButton,{"data-test":"expand-row",title:(0,y.default)("Edit row"),icon:o.default.createElement(d.default,{fontSize:"small"}),className:x.gridRowButton,onClick:function(){t.toggleRowExpanded(!t.isExpanded)},disabled:!n})}};t.Cell.displayName="Cell",t.Cell.propTypes={row:m.default.object.isRequired},e.push(t)}if(O.canDelete){var r={Header:o.default.createElement(o.default.Fragment,null," "),id:"btn-delete",accessor:function(){},disableResizing:!0,sortable:!1,dataType:"delete",width:26,minWidth:26,maxWidth:26,Cell:function(e){var t=e.row,n=!0;return O.canDeleteRow&&(n=(0,w.evalFunc)(j.current,O.canDeleteRow,t.original||{})),o.default.createElement(l.PgIconButton,{"data-test":"delete-row",title:(0,y.default)("Delete row"),icon:o.default.createElement(c.default,{fontSize:"small"}),onClick:function(){(0,v.confirmDeleteRow)((function(){s({type:h.SCHEMA_STATE_ACTIONS.DELETE_ROW,path:a,value:t.index})}),(function(){}),O.customDeleteTitle,O.customDeleteMsg)},className:x.gridRowButton,disabled:!n})}};r.Cell.displayName="Cell",r.Cell.propTypes={row:m.default.object.isRequired},e.push(r)}return e=e.concat(j.current.fields.filter((function(e){return!b.default.isArray(O.columns)||O.columns.indexOf(e.id)>-1})).sort((function(e,t){return b.default.isArray(O.columns)?O.columns.indexOf(e.id)<O.columns.indexOf(t.id)?-1:1:0})).map((function(e){var t={};e.width?(t.width=e.width,t.minWidth=e.width):(t.width=75,t.minWidth=75),e.minWidth&&(t.minWidth=e.minWidth),e.maxWidth&&(t.maxWidth=e.maxWidth),t.disableResizing=Boolean(e.disableResizing);var r=R(R({Header:e.label||o.default.createElement(o.default.Fragment,null," "),accessor:e.id,field:e,disableResizing:!1,sortable:!0},t),{},{Cell:function(t){var r=t.value,i=t.row,l=E(t,["value","row"]);e=b.default.find(j.current.fields,(function(t){return t.id==e.id}))||e;var d=(0,g.getFieldMetaData)(e,j.current,i.original||{},n).editable;return b.default.isUndefined(e.cell)&&console.error("cell is required ",e),o.default.createElement(u.MappedCellControl,D({rowIndex:i.index,value:r,row:i.original},e,{readonly:!d,disabled:!1,visible:!0,onCellChange:function(t){s({type:h.SCHEMA_STATE_ACTIONS.SET_VALUE,path:a.concat([i.index,e.id]),value:t})},reRenderRow:l.reRenderRow}))}});return r.Cell.displayName="Cell",r.Cell.propTypes={row:m.default.object.isRequired,value:m.default.any,onCellChange:m.default.func},r})))}),[O.canEdit,O.canDelete]),T=(0,o.useCallback)((function(){if(O.canAddRow){var e=j.current.getNewData();s({type:h.SCHEMA_STATE_ACTIONS.ADD_ROW,path:a,value:e})}}),[O.canAddRow]),N=(0,o.useMemo)((function(){return{}}),[]),B=[f.useFlexLayout,f.useResizeColumns,f.useSortBy,f.useExpanded],L=f.useTable.apply(void 0,[{columns:k,data:t||[],defaultColumn:N,manualSortBy:!0,autoResetSortBy:!1,autoResetExpanded:!1}].concat(B)),F=L.getTableProps,U=L.getTableBodyProps,V=L.headerGroups,H=L.rows,z=L.prepareRow;(0,o.useEffect)((function(){var e=_;"function"==typeof e&&(e=e()),e&&Promise.resolve(e).then((function(e){P()&&C.initOrigData(a,e)}))}),[]);var W=b.default.flatMap(V,(function(e){return e.headers.map((function(e){return e.isResizing}))})).includes(!0);return O.visible?o.default.createElement(i.Box,{className:p},o.default.createElement(i.Box,{className:x.grid},(O.label||O.canAdd)&&o.default.createElement(q,{label:O.label,canAdd:O.canAdd,onAddClick:T}),o.default.createElement("div",D({},F(),{className:x.table}),o.default.createElement(I,{headerGroups:V}),o.default.createElement("div",D({},U(),{className:x.tableContentWidth}),H.map((function(e,t){return z(e),o.default.createElement(o.default.Fragment,{key:t},o.default.createElement(M,{row:e,totalRows:H.length,isResizing:W,schema:j.current,schemaRef:j,accessPath:a.concat([e.index])}),O.canEdit&&e.isExpanded&&o.default.createElement(g.default,{value:e.original,viewHelperProps:n,dataDispatch:s,schema:j.current,accessPath:a.concat([e.index]),isNested:!0,className:x.expandedForm,isDataGridForm:!0}))})))))):o.default.createElement(o.default.Fragment,null)}I.propTypes={headerGroups:m.default.array.isRequired},q.propTypes={label:m.default.string,canAdd:m.default.bool,onAddClick:m.default.func},B.propTypes={label:m.default.string,value:m.default.array,viewHelperProps:m.default.object,schema:_.default.schemaUI,accessPath:m.default.array.isRequired,dataDispatch:m.default.func,containerClassName:m.default.oneOfType([m.default.object,m.default.string]),fixedRows:m.default.oneOfType([m.default.array,m.default.instanceOf(Promise),m.default.func]),columns:m.default.array,canEdit:m.default.bool,canAdd:m.default.bool,canDelete:m.default.bool,visible:m.default.bool,canAddRow:m.default.oneOfType([m.default.bool,m.default.func]),canEditRow:m.default.oneOfType([m.default.bool,m.default.func]),canDeleteRow:m.default.oneOfType([m.default.bool,m.default.func]),customDeleteTitle:m.default.string,customDeleteMsg:m.default.string}},64519:(e,t,n)=>{n(41539),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DepListenerContext=void 0,n(57327),n(23157),n(69600),n(47042),n(69070);var r=o(n(96486));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=o(n(67294)).default.createContext();t.DepListenerContext=s;var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._depListeners=[]}var t,n,o;return t=e,(n=[{key:"addDepListener",value:function(e,t,n,r){this._depListeners=this._depListeners||[],this._depListeners.push({source:e,dest:t,callback:n,defCallback:r})}},{key:"removeDepListener",value:function(e){this._depListeners=r.default.filter(this._depListeners,(function(t){return!r.default.join(t.dest,"|").startsWith(r.default.join(e,"|"))}))}},{key:"_getListenerData",value:function(e,t,n){var o=e,i=r.default.slice(t.dest,0,-1);return i.length>0&&(o=r.default.get(e,i)),r.default.assign(o,t.callback&&t.callback(o,t.source,e,n)||{}),e}},{key:"_getDefListenerPromise",value:function(e,t,n){var o=e,i=r.default.slice(t.dest,0,-1);return i.length>0&&(o=r.default.get(e,i)),t.defCallback&&t.defCallback(o,t.source,e,n)}},{key:"getDepChange",value:function(e,t,n){var o;if(null!==(o=n.listener)&&void 0!==o&&o.callback)t=this._getListenerData(t,n.listener,n);else{var a=r.default.filter(this._depListeners,(function(t){return r.default.join(e,"|").startsWith(r.default.join(t.source,"|"))}));if(a){var l,s=i(a);try{for(s.s();!(l=s.n()).done;){var u=l.value;t=this._getListenerData(t,u,n)}}catch(e){s.e(e)}finally{s.f()}}}return t}},{key:"getDeferredDepChange",value:function(e,t,n){var o=[],a=r.default.filter(this._depListeners,(function(t){return r.default.join(e,"|").startsWith(r.default.join(t.source,"|"))}));if(a){var l,s=i(a);try{for(s.s();!(l=s.n()).done;){var u=l.value;if(u.defCallback){var d=this._getDefListenerPromise(t,u,n);d&&o.push({action:n,promise:d,listener:u})}}}catch(e){s.e(e)}finally{s.f()}}return o}}])&&l(t.prototype,n),o&&l(t,o),e}();t.default=u},57674:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(19601),n(79753),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(91038),n(47042),n(4129),n(69070),n(38880),Object.defineProperty(t,"__esModule",{value:!0}),t.default=v,n(89554),n(54747),n(92222),n(68309),n(21249);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=m(n(96486)),a=m(n(45697)),l=n(26850),s=n(52237),u=n(44092),d=m(n(41832)),c=n(64519),f=n(75835),p=m(n(84963));function m(e){return e&&e.__esModule?e:{default:e}}function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function y(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e){var t=e.value,n=e.schema,r=void 0===n?{}:n,a=e.viewHelperProps,d=e.accessPath,m=e.dataDispatch,b=e.controlClassName,h=e.isDataGridForm,v=void 0!==h&&h,_=e.label,w=e.visible,O=(0,o.useContext)(c.DepListenerContext),S=(0,o.useContext)(s.StateUtilsContext);(0,o.useEffect)((function(){!v&&O&&r.fields.forEach((function(e){(e.depChange||e.deferredDepChange)&&O.addDepListener(d.concat(e.id),d.concat(e.id),e.depChange,e.deferredDepChange),((0,u.evalFunc)(null,e.deps)||[]).forEach((function(t){var n=d.concat(t);i.default.isArray(t)&&(n=t),e.depChange&&O.addDepListener(n,d.concat(e.id),e.depChange)}))}))}),[]);var x=[];return r.fields.forEach((function(e){var n=(0,f.getFieldMetaData)(e,r,t,a),i=n.visible,c=n.disabled,p=n.readonly;if(n.modeSupported){var h=e.id==(null==S?void 0:S.formErr.name);x.push((0,o.useMemo)((function(){return o.default.createElement(l.MappedFormControl,g({state:t,key:e.id,viewHelperProps:a,name:e.id,value:t[e.id]},e,{readonly:p,disabled:c,visible:i,onChange:function(t){m({type:s.SCHEMA_STATE_ACTIONS.SET_VALUE,path:d.concat(e.id),value:t})},hasError:h,className:b}))}),[t[e.id],p,c,i,h,b].concat(y(((0,u.evalFunc)(null,e.deps)||[]).map((function(e){return t[e]}))))))}})),w?o.default.createElement(p.default,{title:_,className:b},x):o.default.createElement(o.default.Fragment,null)}v.propTypes={value:a.default.any,schema:d.default.schemaUI.isRequired,viewHelperProps:a.default.object,isDataGridForm:a.default.bool,accessPath:a.default.array.isRequired,dataDispatch:a.default.func,controlClassName:d.default.className,label:a.default.string,visible:a.default.oneOfType([a.default.bool,a.default.func])}},75835:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(91038),n(19601),n(69070),n(57327),n(38880),n(49337),n(33321),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.getFieldMetaData=R,t.default=N,n(82772),n(89554),n(54747),n(92222),n(68309),n(21249),n(47941),n(79753);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=w();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=n(65770),a=_(n(96486)),l=_(n(45697)),s=_(n(86010)),u=n(26850),d=_(n(32982)),c=_(n(8593)),f=n(52237),p=n(93299),m=_(n(91669)),b=n(44092),y=_(n(41832)),h=n(50464),g=n(64519),v=_(n(57674));function _(e){return e&&e.__esModule?e:{default:e}}function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function O(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=(0,i.makeStyles)((function(e){return{fullSpace:{padding:0,height:"100%"},controlRow:{marginBottom:e.spacing(1)},nestedTabPanel:{backgroundColor:e.otherVars.headerBg},nestedControl:{height:"unset"},sqlTabInput:{border:0}}}));function T(e){var t=e.active,n=e.getSQLValue,r=D(),i=E((0,o.useState)("Loading..."),2),a=i[0],l=i[1];return(0,o.useEffect)((function(){var e=!1;return t&&(l("Loading..."),n().then((function(t){e||l(t)}))),function(){e=!0}}),[t]),o.default.createElement(p.InputSQL,{value:a,options:{readOnly:!0},readonly:!0,className:r.sqlTabInput})}function R(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={readonly:!1,disabled:!1,visible:!0,editable:!0,canAdd:!0,canEdit:!1,canDelete:!0,modeSupported:!0,canAddRow:!0};if(e.mode&&(i.modeSupported=e.mode.indexOf(r.mode)>-1),!i.modeSupported)return i;if(o)return i;var l,s=e.visible,u=e.disabled,d=e.readonly,c=e.editable;l=!!a.default.isUndefined(r.serverInfo)||(!!a.default.isUndefined(e.server_type)||r.serverInfo.type in e.server_type)&&(!!a.default.isUndefined(e.min_version)||r.serverInfo.version>=e.min_version)&&(!!a.default.isUndefined(e.max_version)||r.serverInfo.version<=e.max_version),i.readonly=r.inCatalog||"properties"==r.mode,i.readonly||(i.readonly=(0,b.evalFunc)(t,d,n));var f=l;f=f&&(0,b.evalFunc)(t,!!a.default.isUndefined(s)||s,n),i.visible=Boolean(f),i.disabled=Boolean((0,b.evalFunc)(t,u,n)),i.editable=!(r.inCatalog||"properties"==r.mode),i.editable&&(i.editable=(0,b.evalFunc)(t,!!a.default.isUndefined(c)||c,n));var p=e.canAdd,m=e.canEdit,y=e.canDelete,h=e.canAddRow;return i.canAdd=a.default.isUndefined(p)?i.canAdd:(0,b.evalFunc)(t,p,n),i.canAdd=!i.disabled&&i.canAdd,i.canEdit=a.default.isUndefined(m)?i.canEdit:(0,b.evalFunc)(t,m,n),i.canEdit=!i.disabled&&i.canEdit,i.canDelete=a.default.isUndefined(y)?i.canDelete:(0,b.evalFunc)(t,y,n),i.canDelete=!i.disabled&&i.canDelete,i.canAddRow=a.default.isUndefined(h)?i.canAddRow:(0,b.evalFunc)(t,h,n),i}function N(e){var t=e.value,n=e.schema,r=void 0===n?{}:n,l=e.viewHelperProps,p=e.isNested,y=void 0!==p&&p,_=e.accessPath,w=e.dataDispatch,S=e.hasSQLTab,C=e.getSQLValue,j=e.onTabChange,k=e.firstEleRef,A=e.className,I=e.isDataGridForm,M=void 0!==I&&I,q=e.isTabView,B=void 0===q||q,L=e.visible,F={},U={},V=E((0,o.useState)(0),2),H=V[0],z=V[1],W=D(),$=(0,o.useRef)(),G=(0,o.useRef)(),K=(0,o.useRef)(!1),Q=(0,o.useContext)(g.DepListenerContext),J={},Y=(0,o.useRef)(r),X=(0,o.useContext)(f.StateUtilsContext);(0,h.useOnScreen)(G)?0==K.current&&(z(H),K.current=!0):K.current=!1,(0,o.useEffect)((function(){if(!M)return Y.current.fields.forEach((function(e){(e.depChange||e.deferredDepChange)&&Q.addDepListener(_.concat(e.id),_.concat(e.id),e.depChange,e.deferredDepChange),((0,b.evalFunc)(null,e.deps)||[]).forEach((function(t){var n=_.concat(t);a.default.isArray(t)&&(n=t),e.depChange&&Q.addDepListener(n,_.concat(e.id),e.depChange)}))})),function(){Q.removeDepListener(_)}}),[]),(0,o.useEffect)((function(){z(0)}),[X.formResetKey]);var Z=[];Y.current.fields.forEach((function(e){var n=R(e,r,t,l),i=n.visible,s=n.disabled,d=n.readonly,p=n.canAdd,m=n.canEdit,h=n.canDelete,g=n.canAddRow;if(n.modeSupported){var S=e.group,C=e.CustomControl;if("group"===e.type)return J[e.id]=e.label,void(i||Y.current.filterGroups.push(e.label));if(S=J[S]||S||"General",F[S]||(F[S]=[]),"nested-tab"===e.type)e.schema.top=y?Y.current.top:r,F[S].push(o.default.createElement(N,P({key:"nested".concat(F[S].length),value:t,viewHelperProps:l,schema:e.schema,accessPath:_,dataDispatch:w,isNested:!0,isDataGridForm:M},e,{visible:i})));else if("nested-fieldset"===e.type)e.schema.top=y?Y.current.top:r,F[S].push(o.default.createElement(v.default,P({key:"nested".concat(F[S].length),value:t,viewHelperProps:l,schema:e.schema,accessPath:_,dataDispatch:w,isNested:!0,isDataGridForm:M,controlClassName:W.controlRow},e,{visible:i})));else if("collection"===e.type){e.schema.top=y?Y.current.top:Y.current,a.default.isUndefined(e.fixedRows)||(p=!1,h=!1);var E=x(x({key:e.id,value:t[e.id],viewHelperProps:l,schema:e.schema,accessPath:_.concat(e.id),dataDispatch:w,containerClassName:W.controlRow},e),{},{canAdd:p,canEdit:m,canDelete:h,visible:i,canAddRow:g});C?F[S].push(o.default.createElement(C,E)):F[S].push(o.default.createElement(c.default,E))}else{var j=a.default.isEqual(_.concat(e.id),X.formErr.name);e.isFullTab&&(U[S]=W.fullSpace,Z.push(S));var D=e.id||"control".concat(F[S].length);!i||s||$.current||($.current=e.id),F[S].push((0,o.useMemo)((function(){return o.default.createElement(u.MappedFormControl,P({inputRef:function(t){k&&$.current===e.id&&(k.current=t)},state:t,key:D,viewHelperProps:l,name:D,value:t[D]},e,{id:D,readonly:d,disabled:s,visible:i,onChange:function(e){w({type:f.SCHEMA_STATE_ACTIONS.SET_VALUE,path:_.concat(D),value:e})},hasError:j,className:W.controlRow,noLabel:e.isFullTab}))}),[t[D],d,s,i,j,W.controlRow].concat(O(((0,b.evalFunc)(null,e.deps)||[]).map((function(e){return t[e]}))))))}}}));var ee=a.default.pickBy(F,(function(e,t){return Y.current.filterGroups.indexOf(t)<=-1})),te=!1,ne=(0,m.default)("SQL");return S&&(te=Object.keys(ee).length===H,ee[ne]=[(0,o.useMemo)((function(){return o.default.createElement(T,{key:"sqltab",active:te,getSQLValue:C})}),[te,t])],U[ne]=W.fullSpace,Z.push(ne)),(0,o.useEffect)((function(){j&&j(H,Object.keys(F)[H],te)}),[H]),a.default.isUndefined(L)||L?B?o.default.createElement(o.default.Fragment,null,o.default.createElement(i.Box,{height:"100%",display:"flex",flexDirection:"column",className:A,ref:G},o.default.createElement(i.Box,null,o.default.createElement(i.Tabs,{value:H,onChange:function(e,t){z(t)},variant:"scrollable",scrollButtons:"auto",action:function(e){return e&&e.updateIndicator()}},Object.keys(ee).map((function(e){return o.default.createElement(i.Tab,{key:e,label:e})})))),Object.keys(ee).map((function(e,t){return o.default.createElement(d.default,{key:e,value:H,index:t,classNameRoot:(0,s.default)(U[e],y?W.nestedTabPanel:null),className:-1==Z.indexOf(e)?W.nestedControl:null},ee[e])})))):o.default.createElement(o.default.Fragment,null,o.default.createElement(i.Box,{height:"100%",display:"flex",flexDirection:"column",className:A,ref:G},Object.keys(ee).map((function(e){return o.default.createElement(o.default.Fragment,{key:e},ee[e])})))):o.default.createElement(o.default.Fragment,null)}T.propTypes={active:l.default.bool,getSQLValue:l.default.func.isRequired},N.propTypes={value:l.default.any,schema:y.default.schemaUI.isRequired,viewHelperProps:l.default.object,isNested:l.default.bool,isDataGridForm:l.default.bool,isTabView:l.default.bool,visible:l.default.oneOfType([l.default.bool,l.default.func]),accessPath:l.default.array.isRequired,dataDispatch:l.default.func,hasSQLTab:l.default.bool,getSQLValue:l.default.func,onTabChange:l.default.func,firstEleRef:y.default.ref,className:y.default.className}},26850:(e,t,n)=>{n(82526),n(19601),n(69070),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.MappedCellControl=t.MappedFormControl=void 0,n(68309),n(47941),n(82772);var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(67294)),o=c(n(96486)),i=n(93299),a=c(n(19928)),l=n(44092),s=c(n(45697)),u=c(n(41832)),d=n(3622);function c(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e){var t=e.type,n=e.value,o=e.id,a=e.onChange,l=e.className,s=e.visible,u=e.inputRef,c=e.noLabel,f=g(e,["type","value","id","onChange","className","visible","inputRef","noLabel"]),p=o,m=(0,r.useCallback)((function(e){var t=e;e&&e.target&&(t=e.target.value),a&&a(t)}),[]),b=(0,r.useCallback)((function(e){a&&a(e)}),[]);if(!s)return r.default.createElement(r.default.Fragment,null);switch(t){case"int":return r.default.createElement(i.FormInputText,h({name:p,value:n,onChange:m,className:l,inputRef:u},f,{type:"int"}));case"numeric":return r.default.createElement(i.FormInputText,h({name:p,value:n,onChange:m,className:l,inputRef:u},f,{type:"numeric"}));case"tel":return r.default.createElement(i.FormInputText,h({name:p,value:n,onChange:m,className:l,inputRef:u},f,{type:"tel"}));case"text":return r.default.createElement(i.FormInputText,h({name:p,value:n,onChange:m,className:l,inputRef:u},f));case"multiline":return r.default.createElement(i.FormInputText,h({name:p,value:n,onChange:m,className:l,inputRef:u,controlProps:{multiline:!0}},f));case"password":return r.default.createElement(i.FormInputText,h({name:p,value:n,onChange:m,className:l,type:"password",inputRef:u},f));case"select":return r.default.createElement(i.FormInputSelect,h({name:p,value:n,onChange:m,className:l,inputRef:u},f));case"select-refresh":return r.default.createElement(d.SelectRefresh,h({name:p,value:n,onChange:m,className:l},f));case"switch":return r.default.createElement(i.FormInputSwitch,h({name:p,value:n,onChange:function(e){return m(e.target.checked,e.target.name)},className:l},f));case"checkbox":return r.default.createElement(i.FormInputCheckbox,h({name:p,value:n,onChange:function(e){return m(e.target.checked,e.target.name)},className:l},f));case"toggle":return r.default.createElement(i.FormInputToggle,h({name:p,value:n,onChange:m,className:l,inputRef:u},f));case"color":return r.default.createElement(i.FormInputColor,h({name:p,value:n,onChange:m,className:l},f));case"file":return r.default.createElement(i.FormInputFileSelect,h({name:p,value:n,onChange:m,className:l,inputRef:u},f));case"sql":return r.default.createElement(i.FormInputSQL,h({name:p,value:n,onChange:b,className:l,noLabel:c},f));case"note":return r.default.createElement(i.FormNote,h({className:l},f));case"datetimepicker":return r.default.createElement(i.FormInputDateTimePicker,h({name:p,value:n,onChange:m,className:l},f));default:return r.default.createElement(i.PlainString,h({value:n},f))}}function _(e){var t=e.cell,n=e.value,o=e.id,l=e.optionsLoaded,s=e.onCellChange,u=e.visible,d=e.reRenderRow,c=g(e,["cell","value","id","optionsLoaded","onCellChange","visible","reRenderRow"]),f=o,p=(0,r.useCallback)((function(e){var t=e;e&&e.target&&(t=e.target.value),s&&s(t)}),[]),m=(0,r.useCallback)((function(e){l&&l(e),d&&d()}),[]);if(!u)return r.default.createElement(r.default.Fragment,null);switch(t){case"int":return r.default.createElement(i.InputText,h({name:f,value:n,onChange:p},c,{type:"int"}));case"numeric":return r.default.createElement(i.InputText,h({name:f,value:n,onChange:p},c,{type:"numeric"}));case"text":case"password":return r.default.createElement(i.InputText,h({name:f,value:n,onChange:p},c));case"select":return r.default.createElement(i.InputSelect,h({name:f,value:n,onChange:p,optionsLoaded:m},c));case"switch":return r.default.createElement(i.InputSwitch,h({name:f,value:n,onChange:function(e){return p(e.target.checked,e.target.name)}},c));case"checkbox":return r.default.createElement(i.InputCheckbox,h({name:f,value:n,onChange:function(e){return p(e.target.checked,e.target.name)}},c));case"privilege":return r.default.createElement(a.default,h({name:f,value:n,onChange:p},c));case"datetimepicker":return r.default.createElement(i.InputDateTimePicker,h({name:f,value:n,onChange:p},c));default:return r.default.createElement(i.PlainString,h({value:n},c))}}v.propTypes={type:s.default.oneOfType([s.default.string,s.default.func]).isRequired,value:s.default.any,id:s.default.oneOfType([s.default.string,s.default.number]).isRequired,onChange:s.default.func,className:s.default.oneOfType([s.default.string,s.default.object]),visible:s.default.bool,inputRef:u.default.ref,noLabel:s.default.bool},_.propTypes={cell:s.default.oneOfType([s.default.string,s.default.func]).isRequired,value:s.default.any,id:s.default.oneOfType([s.default.string,s.default.number]).isRequired,onChange:s.default.func,reRenderRow:s.default.func,optionsLoaded:s.default.func,onCellChange:s.default.func,visible:s.default.bool};var w=["mode","value","readonly","disabled","hasError","id","label","options","optionsLoaded","controlProps","schema","inputRef","visible","autoFocus","helpMessage","className","optionsReloadBasis"],O=["type","onChange","state","noLabel","text"],S=["cell","onCellChange","row","reRenderRow"];t.MappedFormControl=function(e){var t=b({},e),n=(0,l.evalFunc)(null,t.type,t.state);return"object"===p(n)?t=b(b({},t),n):t.type=n,r.default.createElement(v,o.default.pick(t,o.default.union(w,O)))};t.MappedCellControl=function(e){var t=b({},e),n=(0,l.evalFunc)(null,t.cell,t.row);return"object"===p(n)?t=b(b({},t),n):t.cell=n,r.default.createElement(_,o.default.pick(t,o.default.union(w,S)))}},89406:(e,t,n)=>{n(47941),n(82526),n(38880),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(41539),n(66992),n(33948),n(57327),n(82772),n(23157),n(89554),n(54747),n(69070);var r,o=(r=n(96486))&&r.__esModule?r:{default:r};function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._defaults=t,this.keys=null,this.filterGroups=[],this.informText=null,this._top=null}var t,n,r;return t=e,(n=[{key:"top",get:function(){return this._top},set:function(e){this._top=e}},{key:"origData",get:function(){return this._origData||{}},set:function(e){this._origData=e}},{key:"sessData",get:function(){return this._sessData||{}},set:function(e){throw new Error("Property sessData is readonly.",e)}},{key:"defaults",get:function(){return this._defaults||{}}},{key:"idAttribute",get:function(){return"id"}},{key:"baseFields",get:function(){throw new Error("Property method 'baseFields()' must be implemented.")}},{key:"fields",get:function(){var e=this;return this.baseFields.filter((function(t){var n;return n=-1==e.filterGroups.indexOf(t.group),e.keys&&(n=n&&e.keys.indexOf(t.id)>-1),n}))}},{key:"initialise",value:function(){}},{key:"isNew",value:function(e){return o.default.isUndefined(e)&&(e=this.origData),o.default.has(e,this.idAttribute)?o.default.isUndefined(e[this.idAttribute])||o.default.isNull(e[this.idAttribute]):!o.default.has(e,"cid")||!e.cid.startsWith("nn")}},{key:"validate",value:function(){return!1}},{key:"getNewData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};return this.fields.forEach((function(t){n[t.id]=e.defaults[t.id]})),n=a(a({},n),t)}},{key:"addDisabled",value:function(){return!1}},{key:"inCatalog",value:function(){return!(!this.nodeInfo||!("catalog"in this.nodeInfo))}},{key:"isReadOnly",value:function(e){return!this.isNew(e)}},{key:"getServerVersion",value:function(){if(!o.default.isUndefined(this.nodeInfo)&&!o.default.isUndefined(this.nodeInfo.server)&&!o.default.isUndefined(this.nodeInfo.server.version))return this.nodeInfo.server.version}},{key:"getFilterOptions",value:function(e,t){var n=[];return e&&this.isNew(e)?t.forEach((function(e){e&&""==e.label||n.push({label:e.label,value:e.value})})):n=t,n}}])&&s(t.prototype,n),r&&s(t,r),e}();t.default=u},52237:(e,t,n)=>{n(82526),n(38880),n(49337),n(33321),n(47042),n(91038),n(78783),n(41817),n(32165),n(79753),n(19601),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.default=ae,t.SCHEMA_STATE_ACTIONS=t.StateUtilsContext=void 0,n(89554),n(54747),n(47941),n(41539),n(39714),n(83710),n(23157),n(21249),n(69826),n(34553),n(92222),n(69600),n(57327),n(82772),n(66992),n(33948),n(40561),n(32564),n(17727),n(88674),n(68309),n(15306),n(74916),n(69070);var r=M(n(67294)),o=n(65770),i=A(n(64566)),a=A(n(53375)),l=A(n(95409)),s=A(n(10637)),u=A(n(19439)),d=A(n(80366)),c=A(n(36782)),f=A(n(51159)),p=A(n(59067)),m=A(n(31682)),b=A(n(96486)),y=n(93299),h=A(n(4394)),g=n(87451),v=A(n(85650)),_=n(76055),w=n(26850),O=A(n(91669)),S=A(n(89406)),x=M(n(75835)),C=A(n(45697)),P=A(n(41832)),E=n(2832),j=M(n(64519)),k=A(n(57674)),D=A(n(8593)),T=n(50464),R=A(n(55958)),N=A(n(17971));function A(e){return e&&e.__esModule?e:{default:e}}function I(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return I=function(){return e},e}function M(e){if(e&&e.__esModule)return e;if(null===e||"object"!==F(e)&&"function"!=typeof e)return{default:e};var t=I();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=V(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function V(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=(0,o.makeStyles)((function(e){return{root:{display:"flex",flexDirection:"column",height:"100%"},form:{flexGrow:1,position:"relative",minHeight:0,display:"flex",flexDirection:"column"},footer:W({padding:e.spacing(1),background:e.otherVars.headerBg,display:"flex",zIndex:1010},e.mixins.panelBorder.top),mappedControl:{paddingBottom:e.spacing(1)},buttonMargin:{marginRight:"0.5rem"}}})),K=r.default.createContext();function Q(e,t){var n=!(b.default.isUndefined(e)||b.default.isUndefined(t)||b.default.isNull(e)||b.default.isNull(t));return b.default.isEqual(e,t)||(null===e||b.default.isUndefined(e))&&""===t||(null===e||b.default.isUndefined(e))&&"boolean"==typeof t&&!t||!!n&&b.default.isEqual(e.toString(),t.toString())}function J(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i="edit"===t.mode,a=function e(n,a,l){var s={};e.depth=b.default.isUndefined(e.depth)?0:e.depth+1;var u=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Q(b.default.get(a,t),b.default.get(l,t))&&!o?void 0:(n=n||b.default.get(l,t),r&&(b.default.isArray(n)||b.default.isObject(n))&&(n=JSON.stringify(n)),b.default.isNull(n)&&0===e.depth&&(n=""),s[t]=n)};return n.fields.forEach((function(r){if((0,x.getFieldMetaData)(r,n,{},t,!0).modeSupported&&(!r.skipChange||o))if("string"==typeof r.type&&r.type.startsWith("nested-"))s=W(W({},s),e(r.schema,a,l));else if(i&&!b.default.isEqual(b.default.get(a,r.id),b.default.get(l,r.id))){var d=null;if("collection"===r.type){var c=(0,m.default)(b.default.get(a,r.id)||[],b.default.get(l,r.id)||[],"cid");if(d={},c.added.length>0&&(d.added=te(c.added,t.keepCid)),c.removed.length>0&&(d.deleted=te(c.removed.map((function(e){return b.default.find(b.default.get(a,r.id),["cid",e.cid])})),t.keepCid)),c.updated.length>0){d.changed=[];var f,p=U(c.updated);try{var y=function(){var t,n=f.value,o=b.default.findIndex(b.default.get(l,r.id),(function(e){return e.cid==n.cid}));t=e(r.schema,b.default.get(a,[r.id,o]),b.default.get(l,[r.id,o]));var i=b.default.get(l,[r.id,o,r.schema.idAttribute]);b.default.isUndefined(i)?d.changed.push(W(W({},n),t)):d.changed.push(W($({},r.schema.idAttribute,i),t))};for(p.s();!(f=p.n()).done;)y()}catch(e){p.e(e)}finally{p.f()}d.changed=te(d.changed,t.keepCid)}Object.keys(d).length>0&&u(r.id,d,!0)}else u(r.id)}else if(!i)if("collection"===r.type){var h=(0,m.default)(b.default.get(a,r.id)||[],b.default.get(l,r.id)||[],"cid");if(!b.default.isUndefined(r.fixedRows)&&h.updated.length>0||b.default.isUndefined(r.fixedRows)&&(h.added.length>0||h.removed.length>0||h.updated.length>0)){var g=te(b.default.get(l,r.id),t.keepCid);u(r.id,g,!0)}}else u(r.id)})),e.depth--,s};return a(e,e.origData,n)}function Y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;t=t||{};var i,a=U(e.fields);try{var l=function(){var a=i.value;if(e.idAttribute==a.id)return"continue";if(a.schema&&a.schema instanceof S.default){if("collection"===a.type){var l=t[a.id]||[],s=r.concat(a.id);if((0,_.checkUniqueCol)(l,a.uniqueCol)>0){var u=b.default.filter(a.schema.fields,(function(e){return a.uniqueCol.indexOf(e.id)>-1})).map((function(e){return e.label})).join(", ");return(0,_.isEmptyString)(a.label)?n(s,(0,O.default)("%s must be unique.",u)):n(s,(0,O.default)("%s in %s must be unique.",u,a.label)),{v:!0}}var d,c=U(l.entries());try{for(c.s();!(d=c.n()).done;){var f=L(d.value,2),p=f[0],m=f[1];if(Y(a.schema,m,n,s.concat(p),a.label))return{v:!0}}}catch(e){c.e(e)}finally{c.f()}}else if(Y(a.schema,t,n,r))return{v:!0}}else{var y=t[a.id],h=null;if(a.noEmpty){var g=a.label;o&&(g=(0,O.default)("%s in %s",a.label,o)),a.noEmptyLabel&&(g=a.noEmptyLabel),h=(0,_.emptyValidator)(g,y)}if(h||"int"!=a.type&&"numeric"!=a.type||(h=(0,_.minMaxValidator)(a.label,y,a.min,a.max)),h||"int"!=a.type?h||"numeric"!=a.type||(h=(0,_.numberValidator)(a.label,y)):h=(0,_.integerValidator)(a.label,y),h)return n(r.concat(a.id),h),{v:!0}}};for(a.s();!(i=a.n()).done;){var s=l();if("continue"!==s&&"object"===F(s))return s.v}}catch(e){a.e(e)}finally{a.f()}return e.validate(t,(function(e,t){return n(r.concat(e),t)}))}t.StateUtilsContext=K;var X={INIT:"init",SET_VALUE:"set_value",ADD_ROW:"add_row",DELETE_ROW:"delete_row",RERENDER:"rerender",CLEAR_DEFERRED_QUEUE:"clear_deferred_queue",DEFERRED_DEPCHANGE:"deferred_depchange"};t.SCHEMA_STATE_ACTIONS=X;var Z=function(e,t,n,r){return r.depChange&&(t=r.depChange(e,t,{type:r.type,path:r.path,value:r.value,oldState:b.default.cloneDeep(n),listener:r.listener})),t},ee=function(e,t){var n,r,o,i=b.default.cloneDeep(e);switch(i.__deferred__=i.__deferred__||[],t.type){case X.INIT:i=t.payload;break;case X.SET_VALUE:b.default.set(i,t.path,t.value),i=Z(t.path,i,e,t),o=function(e,t,n,r){if(r.deferredDepChange)return r.deferredDepChange(e,t,{type:r.type,path:r.path,value:r.value,depChange:r.depChange,oldState:b.default.cloneDeep(n)})}(t.path,i,e,t),i.__deferred__=o||[];break;case X.ADD_ROW:r=b.default.uniqueId("c"),t.value.cid=r,n=(b.default.get(i,t.path)||[]).concat(t.value),b.default.set(i,t.path,n),i=Z(t.path,i,e,t);break;case X.DELETE_ROW:(n=b.default.get(i,t.path)||[]).splice(t.value,1),b.default.set(i,t.path,n),i=Z(t.path,i,e,t);break;case X.CLEAR_DEFERRED_QUEUE:i.__deferred__=[];break;case X.DEFERRED_DEPCHANGE:i=Z(t.path,i,e,t)}return i};function te(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!e||t?e:e.map((function(e){return b.default.pickBy(e,(function(e,t){return"cid"!=t}))}))}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return b.default.isPlainObject(e)?b.default.forIn(e,(function(e){b.default.isObject(e)&&ne(e,t)})):b.default.isArray(e)&&e.forEach((function(e){b.default.isPlainObject(e)&&(e.cid=t?b.default.uniqueId("c"):b.default.uniqueId("nn"),ne(e,t))})),e}function re(e){var t,n=e.getInitData,i=e.viewHelperProps,p=e.schema,m=void 0===p?{}:p,h=e.showFooter,_=void 0===h||h,w=e.isTabView,S=void 0===w||w,C=B(e,["getInitData","viewHelperProps","schema","showFooter","isTabView"]),P=G(),k=L((0,r.useState)(!1),2),D=k[0],N=k[1],A=L((0,r.useState)({}),2),I=A[0],M=A[1],q=L((0,r.useState)(""),2),F=q[0],U=q[1],V=L((0,r.useState)(!1),2),H=V[0],z=V[1],$=L((0,r.useState)(!1),2),Q=$[0],Z=$[1],te=L((0,r.useState)(0),2),re=te[0],oe=te[1],ie=(0,r.useRef)(),ae=m.isNew(m.origData),le=(0,T.useIsMounted)(),se=(0,r.useRef)(new j.default),ue=L((0,r.useReducer)(ee,{}),2),de=ue[0],ce=ue[1];(0,r.useEffect)((function(){if(Q){m._sessData=de,Y(m,de,(function(e,t){t&&M({name:e,message:t})}))||M({});var e=J(m,i,de,!1,!1),t=Object.keys(e).length>0;N(t),C.onDataChange&&C.onDataChange(t,e)}}),[de,Q]),(0,r.useEffect)((function(){var e;if((null===(e=de.__deferred__)||void 0===e?void 0:e.length)>0){ce({type:X.CLEAR_DEFERRED_QUEUE});var t=de.__deferred__[0];t.promise.then((function(e){ce({type:X.DEFERRED_DEPCHANGE,path:t.action.path,depChange:t.action.depChange,listener:W(W({},t.listener),{},{callback:e})})}))}}),[null===(t=de.__deferred__)||void 0===t?void 0:t.length]),(0,r.useEffect)((function(){var e=setTimeout((function(){ie.current&&ie.current.focus()}),250);if("edit"===i.mode){if(U("Loading..."),!n)throw new Error("getInitData must be passed for edit");n&&n().then((function(e){e=e||{},m.origData=ne(e||{}),m.initialise(m.origData),ce({type:X.INIT,payload:m.origData}),Z(!0),U("")})).catch((function(e){U(""),e.response&&e.response.data&&e.response.data.errormsg&&R.default.alert((0,O.default)(e.response.statusText),(0,O.default)(e.response.data.errormsg))}))}else m.origData=ne(m.defaults,!0),m.initialise(m.origData),ce({type:X.INIT,payload:m.origData}),Z(!0),U("");return function(){return clearTimeout(e)}}),[]),(0,r.useEffect)((function(){return ce({type:X.INIT,payload:m.origData}),!0}),[C.resetKey]);var fe=function(e){C.onSave(ae,e).then((function(){m.informText&&R.default.alert((0,O.default)("Warning"),m.informText)})).catch((function(e){console.error(e),M({name:"apierror",message:(0,E.parseApiError)(e)})})).finally((function(){le()&&(z(!1),U(""))}))},pe=(0,r.useCallback)((function(){M((function(e){return W(W({},e),{},{message:""})}))})),me=function(e){ce(W(W({},e),{},{depChange:function(){var e;return(e=se.current).getDepChange.apply(e,arguments)},deferredDepChange:function(){var e;return(e=se.current).getDeferredDepChange.apply(e,arguments)}}))},be=(0,r.useMemo)((function(){return{dataDispatch:me,initOrigData:function(e,t){if(e){var n=ne(t);b.default.set(m.origData,e,n),me({type:X.SET_VALUE,path:e,value:n})}},formResetKey:re,formErr:I}}),[re,I]),ye="upload"==C.customSaveBtnIconType?r.default.createElement(l.default,null):"done"==C.customSaveBtnIconType?r.default.createElement(s.default,null):r.default.createElement(a.default,null);return r.default.createElement(K.Provider,{value:be},r.default.createElement(j.DepListenerContext.Provider,{value:se.current},r.default.createElement(o.Box,{className:P.root},r.default.createElement(o.Box,{className:P.form},r.default.createElement(v.default,{message:F}),r.default.createElement(x.default,{value:de,viewHelperProps:i,schema:m,accessPath:[],dataDispatch:me,hasSQLTab:C.hasSQL,getSQLValue:function(){if(D){if(I.name)return Promise.resolve("-- "+(0,O.default)("Definition incomplete."));var e=J(m,i,de);return"edit"!==i.mode?e=b.default.assign({},m.origData,e):e[m.idAttribute]=m.origData[m.idAttribute],C.getSQLValue(ae,(t=W({},e),Object.keys(t).forEach((function(e){var n=t[e];b.default.isObject(n)&&(t[e]=JSON.stringify(n))})),t))}return Promise.resolve("-- "+(0,O.default)("No updates."));var t},firstEleRef:ie,isTabView:S}),r.default.createElement(y.FormFooterMessage,{type:y.MESSAGE_TYPE.ERROR,message:I.message,onClose:pe})),_&&r.default.createElement(o.Box,{className:P.footer},(0,r.useMemo)((function(){return r.default.createElement(o.Box,null,r.default.createElement(g.PgIconButton,{"data-test":"sql-help",onClick:function(){return C.onHelp(!0,ae)},icon:r.default.createElement(c.default,null),disabled:C.disableSqlHelp,className:P.buttonMargin,title:"SQL help for this object type."}),r.default.createElement(g.PgIconButton,{"data-test":"dialog-help",onClick:function(){return C.onHelp(!1,ae)},icon:r.default.createElement(f.default,null),title:"Help for this dialog.",disabled:C.disableDialogHelp}))}),[]),r.default.createElement(o.Box,{marginLeft:"auto"},r.default.createElement(g.DefaultButton,{"data-test":"Close",onClick:C.onClose,startIcon:r.default.createElement(d.default,null),className:P.buttonMargin},(0,O.default)("Close")),r.default.createElement(g.DefaultButton,{"data-test":"Reset",onClick:function(){var e=function(){return ie.current&&ie.current.focus(),oe((function(e){return e+1})),ce({type:X.INIT,payload:m.origData}),!0};C.confirmOnCloseReset?R.default.confirm((0,O.default)("Warning"),(0,O.default)("Changes will be lost. Are you sure you want to reset?"),e,(function(){return!0})):e()},startIcon:r.default.createElement(u.default,null),disabled:!D||H,className:P.buttonMargin},(0,O.default)("Reset")),r.default.createElement(g.PrimaryButton,{"data-test":"Save",onClick:function(){z(!0),U("Saving...");var e=J(m,i,de);"edit"!==i.mode?e=b.default.assign({},m.origData,e):e[m.idAttribute]=m.origData[m.idAttribute],m.warningText?R.default.confirm((0,O.default)("Warning"),m.warningText,(function(){fe(e)}),(function(){return z(!1),U(""),!0})):fe(e)},startIcon:ye,disabled:!("edit"!==i.mode||D)||H||Boolean(I.name)||!Q},C.customSaveBtnName?(0,O.default)(C.customSaveBtnName):(0,O.default)("Save")))))))}re.propTypes={getInitData:C.default.func,viewHelperProps:C.default.shape({mode:C.default.string.isRequired,serverInfo:C.default.shape({type:C.default.string,version:C.default.number}),inCatalog:C.default.bool}).isRequired,schema:P.default.schemaUI,onSave:C.default.func,onClose:C.default.func,onHelp:C.default.func,onDataChange:C.default.func,confirmOnCloseReset:C.default.bool,isTabView:C.default.bool,hasSQL:C.default.bool,getSQLValue:C.default.func,disableSqlHelp:C.default.bool,disableDialogHelp:C.default.bool,showFooter:C.default.bool,resetKey:C.default.any,customSaveBtnName:C.default.string,customSaveBtnIconType:C.default.string};var oe=(0,o.makeStyles)((function(e){return{root:{height:"100%",minHeight:0,display:"flex",flexDirection:"column"},controlRow:{marginBottom:e.spacing(1)},form:{padding:e.spacing(1),overflow:"auto",flexGrow:1},toolbar:W({padding:e.spacing(.5),background:e.palette.background.default},e.mixins.panelBorder.bottom),buttonMargin:{marginRight:"0.5rem"},noPadding:{padding:0}}}));function ie(e){var t=e.getInitData,n=e.viewHelperProps,a=e.schema,l=void 0===a?{}:a,s=B(e,["getInitData","viewHelperProps","schema"]),u=oe(),d="General",f={},m={},y={},h=L((0,r.useState)({}),2),_=h[0],S=h[1],C=L((0,r.useState)(""),2),P=C[0],E=C[1],j=(0,T.useIsMounted)();(0,r.useEffect)((function(){E("Loading..."),t().then((function(e){e=e||{},l.initialise(e),j()&&(S(e||{}),E(""))})).catch((function(e){E(""),e.response&&e.response.data&&e.response.data.errormsg&&R.default.alert((0,O.default)(e.response.statusText),(0,O.default)(e.response.data.errormsg))}))}),[t]),l.fields.forEach((function(e){var t=e.group,o=(0,x.getFieldMetaData)(e,l,_,n),i=o.visible,a=o.disabled,s=o.readonly,c=o.modeSupported;t=t||d,e.isFullTab&&(m[t]=u.noPadding),c&&(t=y[t]||t||d,e.helpMessageMode&&-1==e.helpMessageMode.indexOf(n.mode)&&(e.helpMessage=""),f[t]||(f[t]=[]),e&&"nested-fieldset"===e.type?f[t].push(r.default.createElement(k.default,q({key:"nested".concat(f[t].length),value:_,viewHelperProps:n,schema:e.schema,accessPath:[],controlClassName:u.controlRow},e,{visible:i}))):"collection"===e.type?f[t].push(r.default.createElement(D.default,{key:e.id,viewHelperProps:n,name:e.id,value:_[e.id],schema:e.schema,accessPath:[e.id],formErr:{},containerClassName:u.controlRow,canAdd:!1,canEdit:!1,canDelete:!1,visible:i})):"group"===e.type?(y[e.id]=e.label,i||l.filterGroups.push(e.label)):f[t].push(r.default.createElement(w.MappedFormControl,q({key:e.id,viewHelperProps:n,state:_,name:e.id,value:_[e.id]},e,{readonly:s,disabled:a,visible:i,className:e.isFullTab?null:u.controlRow,noLabel:e.isFullTab}))))}));var N=b.default.pickBy(f,(function(e,t){return l.filterGroups.indexOf(t)<=-1}));return r.default.createElement(o.Box,{className:u.root},r.default.createElement(v.default,{message:P}),r.default.createElement(o.Box,{className:u.toolbar},r.default.createElement(g.PgIconButton,{"data-test":"help",onClick:function(){return s.onHelp(!0,!1)},icon:r.default.createElement(c.default,null),disabled:s.disableSqlHelp,title:"SQL help for this object type.",className:u.buttonMargin}),r.default.createElement(g.PgIconButton,{"data-test":"edit",onClick:s.onEdit,icon:r.default.createElement(p.default,null),title:"Edit the object"})),r.default.createElement(o.Box,{className:u.form},r.default.createElement(o.Box,null,Object.keys(N).map((function(e){var t=e.replace(" ","");return r.default.createElement(o.Accordion,{key:t},r.default.createElement(o.AccordionSummary,{expandIcon:r.default.createElement(i.default,null),"aria-controls":"".concat(t,"-content"),id:"".concat(t,"-header")},e),r.default.createElement(o.AccordionDetails,{className:m[e]},r.default.createElement(o.Box,{style:{width:"100%"}},N[e])))})))))}function ae(e){var t=e.formType,n=B(e,["formType"]);return"tab"===t?r.default.createElement(h.default,null,r.default.createElement(N.default,null,r.default.createElement(ie,n))):r.default.createElement(h.default,null,r.default.createElement(N.default,null,r.default.createElement(re,n)))}ie.propTypes={getInitData:C.default.func.isRequired,viewHelperProps:C.default.shape({mode:C.default.string.isRequired,serverInfo:C.default.shape({type:C.default.string,version:C.default.number}),inCatalog:C.default.bool}).isRequired,schema:P.default.schemaUI,onHelp:C.default.func,disableSqlHelp:C.default.bool,onEdit:C.default.func},ae.propTypes={formType:C.default.oneOf(["tab","dialog"])}},24912:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.createMuiTheme)(e,{palette:{default:{main:"#6b6b6b",contrastText:"#fff",borderColor:"#2e2e2e",disabledBorderColor:"#2e2e2e",disabledContrastText:"#fff",hoverMain:"#303030",hoverContrastText:"#fff",hoverBorderColor:"#2e2e2e"},primary:{main:"#234d6e",light:"#323E43",contrastText:"#fff",hoverMain:(0,o.darken)("#234d6e",.25),hoverBorderColor:(0,o.darken)("#234d6e",.25),disabledMain:"#234d6e"},success:{main:"#26852B",light:"#2B472C",contrastText:"#000"},error:{main:"#da6758",light:"#212121",contrastText:"#fff",lighter:"#212121"},warning:{main:"#eea236",light:"#b18d5a",contrastText:"#fff"},info:{main:"#fde74c"},grey:{200:"#424242",400:"#303030",600:"#2e2e2e",800:"#212121"},text:{primary:"#d4d4d4",muted:"#8A8A8A"},checkbox:{disabled:"#6b6b6b"},background:{paper:"#212121",default:"#212121"}},custom:{icon:{main:"#6b6b6b",contrastText:"#fff",borderColor:"#2e2e2e",disabledMain:"#6b6b6b",disabledContrastText:"#fff",disabledBorderColor:"#2e2e2e",hoverMain:"#303030",hoverContrastText:"#fff"}},otherVars:{borderColor:"#4a4a4a",inputBorderColor:"#6b6b6b",inputDisabledBg:"inherit",headerBg:"#424242",activeColor:"#d4d4d4",tableBg:"#424242",activeStepBg:"#234d6e",activeStepFg:"#FFFFFF",stepBg:"#FFFFFF",stepFg:"#000",toggleBtnBg:"#000"}})};var r=n(30398),o=n(59114)},89592:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.createMuiTheme)(e,{palette:{default:{main:"transparent",contrastText:"#84d6ff",borderColor:"#84d6ff",disabledBorderColor:"#8B9CAD",disabledContrastText:"#8B9CAD",hoverMain:"transparent",hoverContrastText:"#fff",hoverBorderColor:"#fff"},primary:{main:"#84D6FF",light:"#84D6FF",contrastText:"#010B15",hoverMain:"#fff",hoverBorderColor:"#fff",disabledMain:"#8B9CAD"},success:{main:"#45D48A",light:"#010B15",contrastText:"#000"},error:{main:"#EE7A55",light:"#EE7A55",contrastText:"#010B15"},warning:{main:"#F4D35E",light:"#F4D35E",contrastText:"#010B15"},info:{main:"#fde74c"},grey:{200:"#8B9CAD",400:"#2D3A48",600:"#1F2932",800:"#010B15"},text:{primary:"#fff",muted:"#8b9cac"},checkbox:{disabled:"#6b6b6b"},background:{paper:"#010B15",default:"#010B15"}},custom:{icon:{main:"#010B15",contrastText:"#fff",borderColor:"#fff",disabledMain:"#1F2932",disabledContrastText:"#8B9CAD",disabledBorderColor:"#8B9CAD",hoverMain:"#fff",hoverContrastText:"#010B15"}},otherVars:{borderColor:"#4a4a4a",inputBorderColor:"#6b6b6b",inputDisabledBg:"#1F2932",headerBg:"#010B15",activeColor:"#d4d4d4",tableBg:"#010B15",activeStepBg:"#84D6FF",activeStepFg:"#010b15",stepBg:"#FFFFFF",stepFg:"#000",toggleBtnBg:"#6B6B6B"}})};var r=n(30398)},4394:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(4129),n(41539),n(78783),n(66992),n(33948),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.default=h,t.commonTableStyles=void 0,n(69070);var o,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=n(30398),l=c(n(41832)),s=c(n(84272)),u=c(n(24912)),d=c(n(89592));function c(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=(0,a.createMuiTheme)();function h(e){var t=(0,i.useMemo)((function(){var e,t=null===(e=document.querySelector("link[data-theme]"))||void 0===e?void 0:e.getAttribute("data-theme"),n=(0,s.default)(y);switch(t){case"dark":n=(0,u.default)(n);break;case"high_contrast":n=(0,d.default)(n)}return function(e){var t={panelBorder:{border:"1px solid "+e.otherVars.borderColor,all:{border:"1px solid "+e.otherVars.borderColor},top:{borderTop:"1px solid "+e.otherVars.borderColor},bottom:{borderBottom:"1px solid "+e.otherVars.borderColor},right:{borderRight:"1px solid "+e.otherVars.borderColor}},nodeIcon:{backgroundPosition:"center",padding:e.spacing(0,1.5)},tabPanel:{height:"100%",padding:e.spacing(1),overflow:"auto",backgroundColor:e.palette.grey[400],position:"relative"},fontSourceCode:{fontFamily:'"Source Code Pro", SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'}};return(0,a.createMuiTheme)({mixins:t,overrides:{MuiOutlinedInput:{root:{"&.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:e.otherVars.inputBorderColor}},notchedOutline:{borderColor:e.otherVars.inputBorderColor}},MuiFormControlLabel:{label:{"&.Mui-disabled":{color:e.palette.text.muted}}},MuiTabs:{root:m({backgroundColor:e.otherVars.headerBg},t.panelBorder.bottom),indicator:{backgroundColor:e.otherVars.activeColor}},MuiFormLabel:{root:{color:e.palette.text.primary,fontSize:e.typography.fontSize},asterisk:{color:e.palette.error.main}},MuiInputBase:{root:{backgroundColor:e.palette.background.default,textOverflow:"ellipsis","&.Mui-disabled":{backgroundColor:e.otherVars.inputDisabledBg}},inputMultiline:{fontSize:e.typography.fontSize,height:"unset",backgroundColor:e.palette.background.default,"&[readonly], &.Mui-disabled":{color:e.palette.text.muted,backgroundColor:e.otherVars.inputDisabledBg}},input:{fontSize:e.typography.fontSize,height:"unset",backgroundColor:e.palette.background.default,"&[readonly], &.Mui-disabled":{color:e.palette.text.muted,backgroundColor:e.otherVars.inputDisabledBg}}},MuiIconButton:{root:{color:e.palette.text.primary,"&$disabled":{color:"abc"}}},MuiAccordion:{root:m({},t.panelBorder)},MuiAccordionSummary:{root:m(m({},t.panelBorder.bottom),{},{backgroundColor:e.otherVars.headerBg})},MuiToggleButtonGroup:{groupedHorizontal:{"&:not(:first-child)":{borderLeft:"abc"}}},MuiSwitch:{root:{width:54,height:28,padding:"7px 12px"},colorPrimary:{"&$disabled":{color:"abc","& + .MuiSwitch-track":{backgroundColor:"abc"}}},switchBase:{padding:e.spacing(.5),"&$disabled":{color:"abc","& + .MuiSwitch-track":{opacity:e.palette.action.disabledOpacity}},"&.Mui-checked":{color:e.palette.success.main,transform:"translateX(24px)","& .MuiSwitch-thumb":{border:0}},"&.Mui-checked + .MuiSwitch-track":{backgroundColor:e.palette.success.light}},thumb:{border:"1px solid "+e.otherVars.inputBorderColor},track:{backgroundColor:e.otherVars.toggleBtnBg}},MuiCheckbox:{root:{padding:"0px",color:e.otherVars.inputBorderColor},colorPrimary:{"&.Mui-disabled":{color:e.palette.checkbox.disabled}}},MuiToggleButton:{root:{padding:"abc",paddingRight:e.spacing(2.5),paddingLeft:e.spacing(.5),color:"abc","&:hover":{backgroundColor:"abc"},"&$selected":{color:"abc",backgroundColor:"abc","&:hover":{backgroundColor:"abc"}}}},MuiFormHelperText:{root:{color:e.palette.text.muted}},MuiDialogContent:{root:{padding:0,userSelect:"text"}},MuiDialogTitle:{root:m({fontWeight:"bold",padding:"5px 10px",cursor:"move",display:"flex",alignItems:"center"},t.panelBorder.bottom)},MuiCardHeader:{root:m({padding:"4px 8px"},t.panelBorder.bottom)},MuiCardContent:{root:{padding:0,"&:last-child":{paddingBottom:0}}},MuiListItem:{root:m(m(m({color:e.palette.text.primary,backgroundColor:e.palette.background.default,flexDirection:"column",alignItems:"initial",padding:"0px 4px",paddingTop:"0px",paddingBottom:"0px"},t.panelBorder.top),t.panelBorder.bottom),{},{borderTopColor:"transparent",cursor:"pointer","&$selected":{backgroundColor:e.palette.primary.light,borderColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.light}}})}}},e)}(n)}),[]);return i.default.createElement(a.ThemeProvider,{theme:t},e.children)}y=(0,a.createMuiTheme)(y,{typography:{fontSize:14,htmlFontSize:14},shape:{borderRadius:4},palette:{action:{disabledOpacity:.32}},overrides:{MuiTabs:{root:{minHeight:0}},PrivateTabIndicator:{root:{height:"3px",transition:y.transitions.create(["all"],{duration:"150ms"})}},MuiTab:{root:(o={textTransform:"none",minHeight:0,padding:"3px 10px"},b(o,y.breakpoints.up("xs"),{minWidth:0}),b(o,y.breakpoints.up("sm"),{minWidth:0}),b(o,y.breakpoints.up("md"),{minWidth:0}),b(o,y.breakpoints.up("lg"),{minWidth:0}),o),textColorInherit:{textTransform:"none",opacity:1}},MuiButton:{root:{textTransform:"none,",padding:y.spacing(.5,1.5),"&.Mui-disabled":{opacity:.65},"&.MuiButton-outlinedSizeSmall":{height:"28px",fontSize:"0.875rem","& .MuiSvgIcon-root":{height:"0.8em"}}},contained:{boxShadow:"none","&:hover":{boxShadow:"none"}},outlined:{padding:y.spacing(.375,1)},startIcon:{marginRight:y.spacing(.5)}},MuiOutlinedInput:{multiline:{padding:"0px"},input:{padding:y.spacing(.75,1.5),borderRadius:"inherit"},inputMultiline:{padding:y.spacing(.75,1.5),resize:"vertical"},adornedEnd:{paddingRight:y.spacing(1.5)}},MuiAccordion:{root:{boxShadow:"none"}},MuiAccordionSummary:{root:{minHeight:0,"&.Mui-expanded":{minHeight:0},padding:y.spacing(0,1),fontWeight:y.typography.fontWeightBold},content:{margin:y.spacing(1),"&.Mui-expanded":{margin:y.spacing(1)}},expandIcon:{order:-1}},MuiAccordionDetails:{root:{padding:y.spacing(1)}},MuiFormControlLabel:{root:{marginBottom:0,marginLeft:0,marginRight:0}},MuiFormHelperText:{root:{fontSize:"1em"},contained:{marginLeft:0,marginRight:0}},MuiTypography:{body1:{fontSize:"1em"}},MuiDialog:{paper:{margin:0}},MuiTooltip:{popper:{top:0,zIndex:9999}},MuiMenu:{list:{padding:"0"}},MuiMenuItem:{root:{fontSize:14}}},transitions:{create:function(){return"none"}},zIndex:{modal:2e3},props:{MuiTextField:{variant:"outlined"},MuiButton:{disableTouchRipple:!0},MuiIconButton:{size:"small",disableTouchRipple:!0},MuiAccordion:{defaultExpanded:!0},MuiTab:{textColor:"inherit"},MuiCheckbox:{disableTouchRipple:!0},MuiDialogTitle:{disableTypography:!0},MuiCardHeader:{disableTypography:!0},MuiListItem:{disableGutters:!0}}}),h.propTypes={children:l.default.children};var g=(0,a.makeStyles)((function(e){return{table:{borderSpacing:0,width:"100%",overflow:"auto",backgroundColor:e.otherVars.tableBg,border:"1px solid "+e.otherVars.borderColor,"& tbody td, & thead th":{margin:0,padding:e.spacing(.5),border:"1px solid "+e.otherVars.borderColor,borderBottom:"none",position:"relative",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",userSelect:"text","&:first-of-type":{borderLeft:"none"}},"& thead tr:first-of-type th":{borderTop:"none"},"& tbody tr:last-of-type":{"&:hover td":{borderBottomColor:e.palette.primary.main},"& td":{borderBottomColor:e.otherVars.borderColor}},"& th":{fontWeight:e.typography.fontWeightBold,padding:e.spacing(1,.5),textAlign:"left"},"& tbody > tr":{"&:hover":{backgroundColor:e.palette.primary.light,"& td":{borderBottom:"1px solid "+e.palette.primary.main,borderTop:"1px solid "+e.palette.primary.main},"&:last-of-type td":{borderBottomColor:e.palette.primary.main}}}},noBorder:{border:0},borderBottom:{"& tbody tr:last-of-type td":{borderBottom:"1px solid "+e.otherVars.borderColor}},noHover:{"& tbody > tr":{"&:hover":{backgroundColor:e.otherVars.tableBg,"& td":{borderBottomColor:e.otherVars.borderColor,borderTopColor:e.otherVars.borderColor},"&:last-of-type td":{borderBottomColor:e.otherVars.borderColor}}}}}}));t.commonTableStyles=g},84272:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.createMuiTheme)(e,{palette:{default:{main:"#fff",contrastText:"#222",borderColor:"#bac1cd",disabledBorderColor:"#bac1cd",disabledContrastText:"#222",hoverMain:"#ebeef3",hoverContrastText:"#222",hoverBorderColor:"#bac1cd"},primary:{main:"#326690",light:"#d6effc",contrastText:"#fff",hoverMain:(0,o.darken)("#326690",.25),hoverBorderColor:(0,o.darken)("#326690",.25),disabledMain:"#326690"},success:{main:"#26852B",light:"#D9ECDA",contrastText:"#000"},error:{main:"#CC0000",light:"#FAECEC",contrastText:"#fff"},warning:{main:"#eea236",light:"#fce5c5",contrastText:"#000"},info:{main:"#fde74c"},grey:{200:"#f3f5f9",400:"#ebeef3",600:"#bac1cd",800:"#848ea0"},text:{primary:"#222",muted:"#646B82"},checkbox:{disabled:"#ebeef3"},background:{paper:"#fff",default:"#fff"}},custom:{icon:{main:"#fff",contrastText:"#222",borderColor:"#bac1cd",disabledMain:"#fff",disabledContrastText:"#222",disabledBorderColor:"#bac1cd",hoverMain:"#ebeef3",hoverContrastText:"#222"}},otherVars:{reactSelect:{padding:"5px 8px"},borderColor:"#dde0e6",loader:{backgroundColor:(0,o.fade)("#000",.65),color:"#fff"},inputBorderColor:"#dde0e6",inputDisabledBg:"#f3f5f9",headerBg:"#fff",activeColor:"#326690",tableBg:"#fff",activeStepBg:"#326690",activeStepFg:"#FFFFFF",stepBg:"#ddd",stepFg:"#000",toggleBtnBg:"#000"}})};var r=n(30398),o=n(59114)},2832:(e,t,n)=>{n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.default.create({headers:s(u({"Content-type":"application/json"},r.default.csrf_token_header,r.default.csrf_token),e)})},t.parseApiError=function(e){return e.response?"application/json"==e.response.headers["content-type"]?e.response.data.errormsg:e.response.statusText:e.request?(0,o.default)("Connection to pgAdmin server has been lost"):e.message},n(69070);var r=a(n(55112)),o=a(n(91669)),i=a(n(9669));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},61329:(e,t,n)=>{n(92222);var r,o=(r=n(81311))&&r.__esModule?r:{default:r};e.exports={generate_url:function(e,t,n,r,i,a){var l="";return o.default.each(o.default.sortBy(o.default.pick(t,i),(function(e){return e.priority})),(function(e){l="".concat(l,"/").concat(encodeURI(e._id))})),l=a?"".concat(l,"/").concat(a):"".concat(l,"/"),"".concat(e).concat(r,"/").concat(n).concat(l)}}},10416:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(69070),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(19601),n(4129),n(41539),n(78783),n(66992),n(33948),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.default=b,t.LineChart=function(e){return o.default.createElement(b,u({},e,{type:"line"}))},n(47941),n(82772);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=l(n(17757)),a=l(n(45697));function l(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m={responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:0,borderWidth:2,fill:!1}},layout:{padding:8},hover:{animationDuration:0}};function b(e){var t=e.type,n=void 0===t?"line":t,r=e.id,a=e.options,l=e.data,s=e.redraw,u=void 0!==s&&s,d=p(e,["type","id","options","data","redraw"]),f=o.default.useRef(),b=o.default.useRef(),y=i.default.helpers.configMerge(m,a),h=function(){var e=f.current.getContext("2d");b.current=new i.default(e,{type:n,data:l,options:y}),d.onInit&&d.onInit(b.current)},g=function(){b.current&&b.current.destroy()};return(0,o.useEffect)((function(){return h(),g}),[]),(0,o.useEffect)((function(){if(void 0!==b.current){b.current.data=l;for(var e=0;e<b.current.data.datasets.length;e++)b.current.data.datasets[e]=c(c({},b.current.data.datasets[e]),l.datasets[e]);b.current.options=y,b.current.update(d.updateOptions||{}),d.onUpdate&&d.onUpdate(b.current)}}),[l,a]),(0,o.useEffect)((function(){u&&(g(),h())}),[u]),o.default.createElement("canvas",{id:r,ref:f})}b.propTypes={type:a.default.string.isRequired,id:a.default.string,data:a.default.object.isRequired,options:a.default.object,redraw:a.default.bool,updateOptions:a.default.object,onInit:a.default.func,onUpdate:a.default.func}},86620:(e,t,n)=>{var r,o;n(23157),n(15306),n(74916),n(82772),r=[n(19755),n(81311)],void 0===(o=function(e,t){return function(e,n){if(t.isUndefined(n)||t.isNull(n))return!0;n.startsWith("coll-")&&(n=n.replace("coll-",""));if(t.indexOf(["server_group","server","catalog_object_column"],n)>=0)return!0;var r=e.get_preference("browser","show_node_"+n);return!r||r.value}}.apply(t,r))||(e.exports=o)},90338:(e,t,n)=>{var r,o,i,a;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=n.nmd(e),n(94986),n(82772),n(26699),n(32023),n(92222),n(24603),n(74916),n(39714),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),a=function(e){function t(e,t,n,r){return e>0&&(!t.includes(n)&&function(e,t){var n="\\b\\".concat(t,"\\s*\\(\\w*\\)(?!\\w)|\\b\\").concat(t,"\\(\\w*\\)(?!\\w)|\\b\\").concat(t,"\\s*(?!\\w)");return null!==RegExp(n,"g").exec(e)}(t,r)||(e=-1)),e}e.registerHelper("fold","sql",(function(n,r){return function(n,r,o){for(var i,a,l=r.line,s=n.getLine(l),u=s.length,d=0,c=o[d].start,f=o[d].end;u>0;){var p=s.toUpperCase().lastIndexOf(c,u),m=c,b=f;if((p=t(p,s.toUpperCase(),f,c))<r.ch){if(++d>=o.length)return;c=o[d].start,f=o[d].end,u=s.length}else{if(a=n.getTokenAt(e.Pos(l,p+1)).type,!/^(comment|string)/.test(a)){i=p;break}u=p-1}}if(!(null==i||s.toUpperCase().lastIndexOf(m)>i)){var y,h,g=1,v=n.lineCount();e:for(var _=l+1;_<v;++_)for(var w=n.getLine(_).toUpperCase(),O=0,S=0;S<1;){var x=w.indexOf(m,O);x=t(x,w,b,m);var C=w.indexOf(b,O);if(x<0&&(x=w.length),C<0&&(C=w.length),(O=Math.min(x,C))==w.length){S=1;break}if(n.getTokenAt(e.Pos(_,O+1)).type==a)if(O==x)++g;else if(!--g){y=_,h=O;break e}++O}if(null!=y&&y!=l+1)return{from:e.Pos(l,i+c.length),to:e.Pos(y,h)}}}(n,r,[{start:"BEGIN",end:"END;"},{start:"IF",end:"END IF"},{start:"LOOP",end:"END LOOP"},{start:"CASE",end:"END CASE"}])}))},"object"==l(t)&&"object"==l(e)?a(n(4631)):(o=[n(4631)],void 0===(i="function"==typeof(r=a)?r.apply(t,o):r)||(e.exports=i))},18473:(e,t,n)=>{var r;((r=n(4631))&&r.__esModule?r:{default:r}).default.defineExtension("centerOnLine",(function(e){var t=this.getScrollInfo().clientHeight,n=this.charCoords({line:e,ch:0},"local");this.scrollTo(null,(n.top+n.bottom-t)/2)}))},87451:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(19601),n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.PgIconButton=t.DefaultButton=t.PrimaryButton=void 0,n(47941),n(82772);var o=n(65770),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=u(n(86010)),l=u(n(45697)),s=u(n(41832));function u(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=(0,o.makeStyles)((function(e){return{primaryButton:{"&.MuiButton-outlinedSizeSmall":{height:"28px","& .MuiSvgIcon-root":{height:"0.8em"}},"&.Mui-disabled":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.disabledMain},"&:hover":{backgroundColor:e.palette.primary.hoverMain,borderColor:e.palette.primary.hoverBorderColor}},defaultButton:{backgroundColor:e.palette.default.main,color:e.palette.default.contrastText,border:"1px solid "+e.palette.default.borderColor,whiteSpace:"nowrap","&.MuiButton-outlinedSizeSmall":{height:"28px","& .MuiSvgIcon-root":{height:"0.8em"}},"&.Mui-disabled":{color:e.palette.default.disabledContrastText,borderColor:e.palette.default.disabledBorderColor},"&:hover":{backgroundColor:e.palette.default.hoverMain,color:e.palette.default.hoverContrastText,borderColor:e.palette.default.hoverBorderColor}},iconButton:{padding:"3px 6px",borderColor:e.custom.icon.borderColor,color:e.custom.icon.contrastText,backgroundColor:e.custom.icon.main,"&.Mui-disabled":{borderColor:e.custom.icon.disabledBorderColor,backgroundColor:e.custom.icon.disabledMain,color:e.custom.icon.disabledContrastText},"&:hover":{backgroundColor:e.custom.icon.hoverMain,color:e.custom.icon.hoverContrastText}},xsButton:{padding:"2px 1px",height:"24px","& .MuiSvgIcon-root":{height:"0.8em"}},noBorder:{border:0}}})),m=(0,i.forwardRef)((function(e,t){var n=e.children,r=e.className,l=e.size,s=e.noBorder,u=f(e,["children","className","size","noBorder"]),d=p(),m=[d.primaryButton,r];return"xs"==l&&(l=void 0,m.push(d.xsButton)),s&&m.push(d.noBorder),i.default.createElement(o.Button,c({ref:t,variant:"contained",color:"primary",size:l,className:(0,a.default)(m)},u),n)}));t.PrimaryButton=m,m.displayName="PrimaryButton",m.propTypes={size:l.default.string,noBorder:l.default.bool,children:s.default.children,className:l.default.oneOfType([l.default.string,l.default.object])};var b=(0,i.forwardRef)((function(e,t){var n=e.children,r=e.className,l=e.size,s=e.noBorder,u=f(e,["children","className","size","noBorder"]),d=p(),m=[d.defaultButton,r];return"xs"==l&&(l=void 0,m.push(d.xsButton)),s&&m.push(d.noBorder),i.default.createElement(o.Button,c({ref:t,variant:"outlined",color:"default",size:l,className:(0,a.default)(m)},u),n)}));t.DefaultButton=b,b.displayName="DefaultButton",b.propTypes={size:l.default.string,noBorder:l.default.bool,children:s.default.children,className:l.default.oneOfType([l.default.string,l.default.object])};var y=(0,i.forwardRef)((function(e,t){var n=e.icon,r=e.title,l=e.className,s=f(e,["icon","title","className"]),u=p();return i.default.createElement(o.Tooltip,{title:r||"","aria-label":r||""},i.default.createElement("span",null,i.default.createElement(b,c({ref:t,style:{minWidth:0},className:(0,a.default)(u.iconButton,l)},s),n)))}));t.PgIconButton=y,y.displayName="PgIconButton",y.propTypes={icon:s.default.children,title:l.default.string.isRequired,className:l.default.oneOfType([l.default.string,l.default.object])}},65621:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.default=c,n(68309),n(89554),n(54747),n(47941);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=u(n(20811)),a=n(50464),l=u(n(45697)),s=u(n(41832));function u(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function c(e){var t=e.currEditor,n=e.name,r=e.value,l=e.options,s=e.events,u=e.readonly,d=e.disabled,c=e.className,f=(0,o.useRef)(),p=(0,o.useRef)(),m=(0,o.useRef)(),b=(0,o.useRef)();(0,o.useEffect)((function(){if(p.current=new i.default.fromTextArea(f.current,l),p.current.setValue(r),t&&t(p.current),p.current)try{m.current=p.current.getWrapperElement()}catch(e){m.current=null}Object.keys(s||{}).forEach((function(e){p.current.on(e,s[e])}))}),[]),(0,o.useEffect)((function(){p.current&&(d?(m.current.classList.add("cm_disabled"),p.current.setOption("readOnly","nocursor")):u?(m.current.classList.add("cm_disabled"),p.current.setOption("readOnly",!0),p.current.addKeyMap({Tab:!1}),p.current.addKeyMap({"Shift-Tab":!1})):(m.current.classList.remove("cm_disabled"),p.current.setOption("readOnly",!1),p.current.removeKeyMap("Tab"),p.current.removeKeyMap("Shift-Tab")))}),[u,d]),(0,o.useMemo)((function(){p.current&&r!=p.current.getValue()&&p.current.setValue(r)}),[r]);var y,h=(0,a.useOnScreen)(m);!b.current&&h?(b.current=!0,null===(y=p.current)||void 0===y||y.refresh()):h||(b.current=!1);return o.default.createElement("div",{className:c},o.default.createElement("textarea",{ref:f,name:n}))}c.propTypes={currEditor:l.default.func,name:l.default.string,value:l.default.string,options:l.default.object,change:l.default.func,events:l.default.object,readonly:l.default.bool,disabled:l.default.bool,className:s.default.className}},84963:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var r=n(65770),o=s(n(67294)),i=s(n(86010)),a=s(n(45697)),l=s(n(41832));function s(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.makeStyles)((function(e){return{fieldset:{padding:e.spacing(.5),borderRadius:e.shape.borderRadius,backgroundColor:"inherit",border:"1px solid "+e.otherVars.borderColor},legend:{width:"unset",fontSize:"inherit",fontWeight:"bold"}}}));function d(e){var t=e.title,n=void 0===t?"":t,r=e.className,a=e.children,l=u();return o.default.createElement("fieldset",{className:(0,i.default)(l.fieldset,r)},o.default.createElement("legend",{className:l.legend},n),a)}d.propTypes={title:a.default.string,className:l.default.className,children:l.default.children}},93299:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(47941),n(82526),n(38880),n(89554),n(54747),n(49337),n(33321),n(19601),n(79753),n(41817),n(32165),n(78783),n(66992),n(33948),n(91038),n(47042),n(68309),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.FormInput=W,t.InputSQL=$,t.FormInputSQL=G,t.InputDateTimePicker=Z,t.FormInputDateTimePicker=ee,t.FormInputText=ne,t.InputFileSelect=re,t.FormInputFileSelect=oe,t.InputSwitch=ie,t.FormInputSwitch=ae,t.InputCheckbox=le,t.FormInputCheckbox=se,t.FormInputToggle=de,t.flattenSelectOptions=me,t.FormInputSelect=ye,t.InputColor=he,t.FormInputColor=ge,t.PlainString=ve,t.FormNote=_e,t.FormFooterMessage=Oe,t.NotifierMessage=Se,t.InputSelect=t.InputToggle=t.InputText=t.MESSAGE_TYPE=void 0,n(26833),n(83710),n(82772),n(21249),n(86535),n(99244),n(69826),n(88674),n(41539),n(57327),n(92222),n(39714),n(69070);var o=R(n(67294)),i=n(30398),a=n(65770),l=n(20975),s=D(n(77914)),u=D(n(36782)),d=D(n(79138)),c=D(n(45569)),f=D(n(16327)),p=D(n(85347)),m=D(n(67879)),b=R(n(14504)),y=D(n(49153)),h=D(n(39612)),g=D(n(86010)),v=D(n(45697)),_=D(n(15020)),w=n(43413),O=D(n(75365)),S=R(n(45321)),x=D(n(65621)),C=D(n(91669)),P=n(81922),E=D(n(96486)),j=n(87451),k=D(n(41832));function D(e){return e&&e.__esModule?e:{default:e}}function T(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return T=function(){return e},e}function R(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=T();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=(0,i.makeStyles)((function(e){return{formRoot:{padding:"1rem"},img:{maxWidth:"100%",height:"auto"},info:{color:e.palette.info.main,marginLeft:"0.25rem",fontSize:"1rem"},formLabel:{margin:e.spacing(.75,.75,.75,.75),display:"flex"},formLabelError:{color:e.palette.error.main},sql:{border:"1px solid "+e.otherVars.inputBorderColor,borderRadius:e.shape.borderRadius,height:"100%"},optionIcon:F({},e.mixins.nodeIcon),colorBtn:{height:e.spacing(3.5),minHeight:e.spacing(3.5),width:e.spacing(3.5),minWidth:e.spacing(3.5)},noteRoot:{display:"flex",backgroundColor:e.otherVars.borderColor,padding:e.spacing(1)},readOnlySwitch:{opacity:.75,"& .MuiSwitch-track":{opacity:e.palette.action.disabledOpacity}}}})),H={SUCCESS:"Success",ERROR:"Error",INFO:"Info",CLOSE:"Close",WARNING:"Warning"};function z(e){var t=e.type,n=e.close,r=void 0!==n&&n,i=B(e,["type","close"]),a=null;return r?a=d.default:t===H.SUCCESS?a=c.default:t===H.ERROR?a=s.default:t===H.INFO?a=u.default:t===H.WARNING&&(a=f.default),o.default.createElement(a,q({fontSize:"small"},i))}function W(e){var t=e.children,n=e.error,r=e.className,i=e.label,l=e.helpMessage,s=e.required,u=e.testcid,d=V(),c=u||E.default.uniqueId("c"),f="h".concat(c);return o.default.createElement(a.Grid,{container:!0,spacing:0,className:r},o.default.createElement(a.Grid,{item:!0,lg:3,md:3,sm:3,xs:12},o.default.createElement(a.InputLabel,{htmlFor:c,className:(0,g.default)(d.formLabel,n?d.formLabelError:null),required:s},i,o.default.createElement(z,{type:H.ERROR,style:{marginLeft:"auto",visibility:n?"unset":"hidden"}}))),o.default.createElement(a.Grid,{item:!0,lg:9,md:9,sm:9,xs:12},o.default.createElement(a.FormControl,{error:Boolean(n),fullWidth:!0},o.default.cloneElement(t,{cid:c,helpid:f})),o.default.createElement(a.FormHelperText,{id:f,variant:"outlined"},(0,_.default)(l||""))))}function $(e){var t=e.value,n=e.options,r=e.onChange,i=e.className,a=B(e,["value","options","onChange","className"]),l=V(),s=(0,o.useRef)();return o.default.createElement(x.default,q({currEditor:function(e){return s.current=e},value:t||"",options:F({lineNumbers:!0,mode:"text/x-pgsql"},n),className:(0,g.default)(l.sql,i),events:{change:function(e){r&&r(e.getValue())}}},a))}function G(e){var t=e.hasError,n=e.required,r=e.label,i=e.className,a=e.helpMessage,l=e.testcid,s=e.value,u=e.controlProps,d=e.noLabel,c=B(e,["hasError","required","label","className","helpMessage","testcid","value","controlProps","noLabel"]);return d?o.default.createElement($,q({value:s,options:u},c)):o.default.createElement(W,{required:n,label:r,error:t,className:i,helpMessage:a,testcid:l},o.default.createElement($,q({value:s,options:u},c)))}t.MESSAGE_TYPE=H,z.propTypes={type:v.default.oneOf(Object.values(H)),close:v.default.bool},W.propTypes={children:k.default.children,error:v.default.bool,className:k.default.className,label:v.default.string,helpMessage:v.default.string,required:v.default.bool,testcid:v.default.any},$.propTypes={value:v.default.string,options:v.default.object,onChange:v.default.func,readonly:v.default.bool,className:k.default.className},G.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string,value:v.default.string,controlProps:v.default.object,noLabel:v.default.bool,change:v.default.func};var K="yyyy-MM-dd hh:mm:ss aa xxx",Q="yyyy-MM-dd HH:mm:ss xxx",J="yyyy-MM-dd",Y="hh:mm:ss aa",X="HH:mm:ss";function Z(e){var t=e.value,n=e.onChange,r=e.readonly,i=e.controlProps,a=B(e,["value","onChange","readonly","controlProps"]),l="",s="";"Date"===(null==i?void 0:i.pickerType)?(l=i.format||J,s=i.placeholder||"YYYY-MM-DD"):"Time"===(null==i?void 0:i.pickerType)?(l=i.format||(i.ampm?Y:X),s=i.placeholder||"HH:mm:ss"):(l=i.format||(i.ampm?K:Q),s=i.placeholder||"YYYY-MM-DD HH:mm:ss Z");if(t=E.default.isUndefined(t)?null:t,!E.default.isNull(t)){var u=S.parse(t,l,new Date);S.isValid(u)||(u=S.parseISO(t)),t=S.isValid(u)?u:t}if(r)return o.default.createElement(te,q({value:t?S.format(t,l):t,readonly:r,controlProps:{placeholder:i.placeholder}},a));var d=F(F({},a),{},{value:t,format:l,placeholder:s,label:"",variant:"inline",readOnly:Boolean(r),autoOk:i.autoOk||!1,ampm:i.ampm||!1,disablePast:i.disablePast||!1,invalidDateMessage:"",maxDateMessage:"",minDateMessage:"",onChange:function(e,t){n(t)},fullWidth:!0});return"Date"===(null==i?void 0:i.pickerType)?o.default.createElement(w.MuiPickersUtilsProvider,{utils:O.default},o.default.createElement(w.KeyboardDatePicker,d)):"Time"===(null==i?void 0:i.pickerType)?o.default.createElement(w.MuiPickersUtilsProvider,{utils:O.default},o.default.createElement(w.KeyboardTimePicker,d)):o.default.createElement(w.MuiPickersUtilsProvider,{utils:O.default},o.default.createElement(w.KeyboardDateTimePicker,d))}function ee(e){var t=e.hasError,n=e.required,r=e.label,i=e.className,a=e.helpMessage,l=e.testcid,s=B(e,["hasError","required","label","className","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:r,error:t,className:i,helpMessage:a,testcid:l},o.default.createElement(Z,s))}Z.propTypes={value:v.default.string,options:v.default.object,onChange:v.default.func,readonly:v.default.bool,controlProps:v.default.object},ee.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string,value:v.default.string,controlProps:v.default.object,change:v.default.func};var te=(0,o.forwardRef)((function(e,t){var n=e.cid,r=e.helpid,i=e.readonly,l=e.disabled,s=e.maxlength,u=void 0===s?255:s,d=e.value,c=e.onChange,f=e.controlProps,p=e.type,m=B(e,["cid","helpid","readonly","disabled","maxlength","value","onChange","controlProps","type"]),b=V(),y=E.default.isNull(d)||E.default.isUndefined(d)?"":d;return null!=f&&f.formatter&&(y=f.formatter.fromRaw(y)),o.default.createElement(a.OutlinedInput,q({ref:t,color:"primary",fullWidth:!0,className:b.formInput,inputProps:F({id:n,maxLength:null!=f&&f.multiline?null:u,"aria-describedby":r},p?{pattern:E.default.isUndefined(f)||E.default.isUndefined(f.pattern)?{numeric:"^-?[0-9]\\d*\\.?\\d*$",int:"^-?[0-9]\\d*$"}[p]:f.pattern}:{}),readOnly:Boolean(i),disabled:Boolean(l),rows:4,notched:!1,value:E.default.isNull(y)||E.default.isUndefined(y)?"":y,onChange:function(e){var t=e.target.value;["numeric","int","tel"].indexOf(p)>-1&&!e.target.validity.valid&&""!==t&&"-"!==t||(null!=f&&f.formatter&&(t=f.formatter.toRaw(t)),c&&c(t))}},f,m,["numeric","int"].indexOf(p)>-1?{type:"tel"}:{type:p}))}));function ne(e){var t=e.hasError,n=e.required,r=e.label,i=e.className,a=e.helpMessage,l=e.testcid,s=B(e,["hasError","required","label","className","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:r,error:t,className:i,helpMessage:a,testcid:l},o.default.createElement(te,q({label:r},s)))}function re(e){var t=e.controlProps,n=e.onChange,r=e.disabled,i=e.readonly,l=B(e,["controlProps","onChange","disabled","readonly"]),s=(0,o.useRef)(),u=function(e){n&&n(decodeURI(e)),s.current.focus()};return o.default.createElement(te,q({ref:s,disabled:r,readonly:i,onChange:n},l,{endAdornment:o.default.createElement(a.IconButton,{onClick:function(){return(0,P.showFileDialog)(t,u)},disabled:r||i,"aria-label":(0,C.default)("Select a file")},o.default.createElement(p.default,null))}))}function oe(e){var t=e.hasError,n=e.required,r=e.label,i=e.className,a=e.helpMessage,l=e.testcid,s=B(e,["hasError","required","label","className","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:r,error:t,className:i,helpMessage:a,testcid:l},o.default.createElement(re,q({required:n,label:r},s)))}function ie(e){var t=e.cid,n=e.helpid,r=e.value,i=e.onChange,l=e.readonly,s=e.controlProps,u=B(e,["cid","helpid","value","onChange","readonly","controlProps"]),d=V();return o.default.createElement(a.Switch,q({color:"primary",checked:Boolean(r),onChange:l?function(){}:i,id:t,inputProps:{"aria-describedby":n}},s,u,{className:l||u.disabled?d.readOnlySwitch:null}))}function ae(e){var t=e.hasError,n=e.required,r=e.label,i=e.className,a=e.helpMessage,l=e.testcid,s=B(e,["hasError","required","label","className","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:r,error:t,className:i,helpMessage:a,testcid:l},o.default.createElement(ie,s))}function le(e){var t=e.cid,n=e.helpid,r=e.value,i=e.onChange,l=e.controlProps,s=e.readonly,u=B(e,["cid","helpid","value","onChange","controlProps","readonly"]);return l=l||{},o.default.createElement(a.FormControlLabel,{control:o.default.createElement(a.Checkbox,q({id:t,checked:Boolean(r),onChange:s?function(){}:i,color:"primary",inputProps:{"aria-describedby":n}},u)),label:l.label})}function se(e){var t=e.hasError,n=e.required,r=e.label,i=e.className,a=e.helpMessage,l=e.testcid,s=B(e,["hasError","required","label","className","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:r,error:t,className:i,helpMessage:a,testcid:l},o.default.createElement(le,s))}t.InputText=te,te.displayName="InputText",te.propTypes={cid:v.default.string,helpid:v.default.string,label:v.default.string,readonly:v.default.bool,disabled:v.default.bool,maxlength:v.default.number,value:v.default.any,onChange:v.default.func,controlProps:v.default.object,type:v.default.string},ne.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string},re.propTypes={controlProps:v.default.object,onChange:v.default.func,disabled:v.default.bool,readonly:v.default.bool},oe.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string},ie.propTypes={cid:v.default.string,helpid:v.default.string,value:v.default.any,onChange:v.default.func,readonly:v.default.bool,disabled:v.default.bool,controlProps:v.default.object},ae.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string},le.propTypes={cid:v.default.string,helpid:v.default.string,value:v.default.bool,controlProps:v.default.object,onChange:v.default.func,readonly:v.default.bool},se.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string};var ue=(0,o.forwardRef)((function(e,t){var n=e.cid,r=e.value,i=e.onChange,a=e.options,s=e.disabled,u=e.readonly,d=B(e,["cid","value","onChange","options","disabled","readonly"]);return o.default.createElement(l.ToggleButtonGroup,q({id:n,value:r,exclusive:!0,onChange:function(e,t){null!==t&&i(t)}},d),(a||[]).map((function(e,n){var i=e.value===r,a=s||e.disabled||u&&!i;return o.default.createElement(l.ToggleButton,{ref:0==n?t:null,key:e.label,value:e.value,component:i?j.PrimaryButton:j.DefaultButton,disabled:a,"aria-label":e.label},o.default.createElement(c.default,{style:{visibility:i?"visible":"hidden"}})," ",e.label)})))}));function de(e){var t=e.hasError,n=e.required,r=e.label,i=e.className,a=e.helpMessage,l=e.testcid,s=e.inputRef,u=B(e,["hasError","required","label","className","helpMessage","testcid","inputRef"]);return o.default.createElement(W,{required:n,label:r,error:t,className:i,helpMessage:a,testcid:l},o.default.createElement(ue,q({ref:s},u)))}t.InputToggle=ue,ue.displayName="InputToggle",ue.propTypes={cid:v.default.string,value:v.default.oneOfType([v.default.string,v.default.number,v.default.bool]),options:v.default.array,controlProps:v.default.object,onChange:v.default.func,disabled:v.default.bool,readonly:v.default.bool},de.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string,inputRef:k.default.ref};function ce(e){var t=e.image,n=e.label,r=V();return o.default.createElement(o.default.Fragment,null,t&&o.default.createElement("span",{className:(0,g.default)(r.optionIcon,t)}),o.default.createElement("span",null,n))}function fe(e){return o.default.createElement(b.components.Option,e,o.default.createElement(ce,{image:e.data.image,label:e.data.label}))}function pe(e){return o.default.createElement(b.components.SingleValue,e,o.default.createElement(ce,{image:e.data.image,label:e.data.label}))}function me(e){return E.default.flatMap(e,(function(e){return e.options?e.options:e}))}ce.propTypes={image:v.default.string,label:v.default.string},fe.propTypes={data:v.default.object},pe.propTypes={data:v.default.object};var be=(0,o.forwardRef)((function(e,t){var n=e.cid,r=e.onChange,i=e.options,l=e.readonly,s=void 0!==l&&l,u=e.value,d=e.controlProps,c=void 0===d?{}:d,f=e.optionsLoaded,p=e.optionsReloadBasis,m=e.disabled,h=B(e,["cid","onChange","options","readonly","value","controlProps","optionsLoaded","optionsReloadBasis","disabled"]),g=N((0,o.useState)([[],!0]),2),v=N(g[0],2),_=v[0],w=v[1],O=g[1],S=(0,a.useTheme)();(0,o.useEffect)((function(){var e=i,t=!1;return"function"==typeof i&&(e=i()),Promise.resolve(e).then((function(e){if(!t){f&&f(e,u);var n,o,i,a=me(e||[]);if(c.multiple)n=null===(o=E.default.filter(a,(function(e){return e.selected})))||void 0===o?void 0:o.map((function(e){return e.value}));else n=null===(i=E.default.find(a,(function(e){return e.selected})))||void 0===i?void 0:i.value;(!E.default.isUndefined(n)&&!E.default.isArray(n)||E.default.isArray(n)&&0!=n.length)&&r&&r(n),O([e||[],!1])}})),function(){return t=!0}}),[p]);var x=c.filter&&c.filter(_)||_,P=function(e,t,n,r){var o=null;if(E.default.isArray(t))o=A(t),o=r?r.fromRaw(o,e):n?o.map((function(e){return{label:e,value:e}})):o.map((function(t){return E.default.find(e,(function(e){return E.default.isEqual(e.value,t)}))}));else{var i=me(e);o=E.default.find(i,(function(e){return e.value==t}))||(!n||E.default.isUndefined(t)||E.default.isNull(t)?null:{label:t,value:t})}return o}(me(x),u,c.creatable,c.formatter);P&&E.default.isPlainObject(P)&&E.default.isUndefined(P.value)&&console.error("Undefined option value not allowed",P,x);var j={isSearchable:!s,isClearable:!s&&(!!E.default.isUndefined(c.allowClear)||c.allowClear),isDisabled:Boolean(m)},k=function(e,t){return{input:function(e){return F(F({},e),{},{padding:0,margin:0,color:"inherit"})},singleValue:function(e){return F(F({},e),{},{color:"inherit"})},control:function(n,r){return F(F({},n),{},{minHeight:"0",backgroundColor:t?e.otherVars.inputDisabledBg:e.palette.background.default,color:t?e.palette.text.muted:e.palette.text.primary,borderColor:e.otherVars.inputBorderColor},r.isFocused?{borderColor:e.palette.primary.main,boxShadow:"inset 0 0 0 1px "+e.palette.primary.main,"&:hover":{borderColor:e.palette.primary.main}}:{})},dropdownIndicator:function(e){return F(F({},e),{},{padding:"0rem 0.25rem"})},indicatorsContainer:function(e){return F(F({},e),t?{display:"none"}:{})},clearIndicator:function(e){return F(F({},e),{},{padding:"0rem 0.25rem"})},valueContainer:function(t){return F(F({},t),{},{padding:e.otherVars.reactSelect.padding})},groupHeading:function(e){return F(F({},e),{},{color:"inherit",fontSize:"0.85em",textTransform:"none"})},menu:function(t){return F(F({},t),{},{backgroundColor:e.palette.background.default,color:e.palette.text.primary,boxShadow:"none",border:"1px solid "+e.otherVars.inputBorderColor,marginTop:"2px"})},menuPortal:function(e){return F(F({},e),{},{zIndex:9999,backgroundColor:"inherit",color:"inherit"})},option:function(t,n){var r="inherit";return n.isFocused?r=e.palette.grey[400]:n.isSelected&&(r=e.palette.primary.light),F(F({},t),{},{padding:"0.5rem",color:"inherit",backgroundColor:r})},multiValue:function(t){return F(F({},t),{},{backgroundColor:e.palette.grey[400]})},multiValueLabel:function(t){return F(F({},t),{},{fontSize:"1em",zIndex:99,color:e.palette.text.primary})},multiValueRemove:function(n){return F(F({},n),{},{"&:hover":{backgroundColor:"unset",color:e.palette.error.main}},t?{display:"none"}:{})}}}(S,s||m),D=(0,o.useCallback)((function(e){E.default.isArray(e)?(E.default.isUndefined(e.find((function(e){return"Select All"===e.label})))||(e=x),e=c.formatter?c.formatter.toRaw(e,x):e.map((function(e){return e.value})),r&&r(e)):r&&r(e?e.value:null)}),[r,x]),T=F(F({components:{Option:fe,SingleValue:pe},isMulti:Boolean(c.multiple),openMenuOnClick:!s,onChange:D,isLoading:w,options:c.allowSelectAll?[{label:(0,C.default)("Select All"),value:"*"}].concat(A(x)):x,value:P,menuPortalTarget:document.body,styles:k,inputId:n,placeholder:s||m?"":c.placeholder||(0,C.default)("Select an item...")},j),h);return c.creatable?o.default.createElement(y.default,q({ref:t},T)):o.default.createElement(b.default,q({ref:t},T))}));function ye(e){var t=e.hasError,n=e.required,r=e.className,i=e.label,a=e.helpMessage,l=e.testcid,s=B(e,["hasError","required","className","label","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:i,error:t,className:r,helpMessage:a,testcid:l},o.default.createElement(be,q({ref:s.inputRef},s)))}function he(e){var t=e.value,n=e.controlProps,r=e.disabled,i=e.onChange,a=e.currObj,l=F(F({showPalette:!0,allowEmpty:!0,colorFormat:"HEX",defaultColor:null,position:"right-middle",clearText:(0,C.default)("No color")},n),{},{disabled:r}),s=(0,o.useRef)(),u=(0,o.useRef)(),c=V(),f=function(e){u.current&&u.current.setColor(E.default.isUndefined(e)||""==e?l.defaultColor:e)},p=function(){u.current&&(u.current.destroy(),u.current=null)};(0,o.useEffect)((function(){return p(),u.current=new h.default({el:s.current,useAsButton:!0,theme:"monolith",swatches:["#000","#666","#ccc","#fff","#f90","#ff0","#0f0","#f0f","#f4cccc","#fce5cd","#d0e0e3","#cfe2f3","#ead1dc","#ea9999","#b6d7a8","#a2c4c9","#d5a6bd","#e06666","#93c47d","#76a5af","#c27ba0","#f1c232","#6aa84f","#45818e","#a64d79","#bf9000","#0c343d","#4c1130"],position:l.position,strings:{clear:l.clearText},components:{palette:l.showPalette,preview:!0,hue:l.showPalette,interaction:{clear:l.allowEmpty,defaultRepresentation:l.colorFormat,disabled:l.disabled}}}).on("init",(function(e){f(t),r&&e.disable();var n=e.getRoot().preview.lastColor,o=e.getRoot().interaction.clear;o.addEventListener("keydown",(function(e){9===e.keyCode&&(e.preventDefault(),e.stopPropagation(),n.focus())})),n.addEventListener("keydown",(function(e){9===e.keyCode&&e.shiftKey&&(e.preventDefault(),e.stopPropagation(),o.focus())}))})).on("clear",(function(){i&&i("")})).on("change",(function(e){i&&i(e.toHEXA().toString())})).on("show",(function(e,t){t.getRoot().palette.palette.focus()})).on("hide",(function(e){e.getRoot().button.focus()})),a&&a(u.current),function(){p()}}),A(Object.values(l))),(0,o.useEffect)((function(){u.current&&f(t)}),[t]);var m={backgroundColor:t};return o.default.createElement(j.PgIconButton,{ref:s,title:(0,C.default)("Select the color"),className:c.colorBtn,style:m,disabled:l.disabled,icon:(E.default.isUndefined(t)||E.default.isNull(t)||""===t)&&o.default.createElement(d.default,null)})}function ge(e){var t=e.hasError,n=e.required,r=e.className,i=e.label,a=e.helpMessage,l=e.testcid,s=B(e,["hasError","required","className","label","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:i,error:t,className:r,helpMessage:a,testcid:l},o.default.createElement(he,s))}function ve(e){var t=e.controlProps,n=e.value;return null!=t&&t.formatter&&(n=t.formatter.fromRaw(n)),o.default.createElement("span",null,n)}function _e(e){var t=e.text,n=e.className,r=V();return o.default.createElement(a.Box,{className:n},o.default.createElement(a.Paper,{elevation:0,className:r.noteRoot},o.default.createElement(a.Box,{paddingRight:"0.25rem"},o.default.createElement(m.default,{fontSize:"small"})),o.default.createElement(a.Box,null,(0,_.default)(t||""))))}t.InputSelect=be,be.displayName="InputSelect",be.propTypes={cid:v.default.string,value:v.default.oneOfType([v.default.string,v.default.number,v.default.array,v.default.bool]),options:v.default.oneOfType([v.default.array,v.default.instanceOf(Promise),v.default.func]),controlProps:v.default.object,optionsLoaded:v.default.func,optionsReloadBasis:v.default.any,onChange:v.default.func,disabled:v.default.bool,readonly:v.default.bool},ye.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string,inputRef:k.default.ref},he.propTypes={value:v.default.string,controlProps:v.default.object,onChange:v.default.func,disabled:v.default.bool,currObj:v.default.func},ge.propTypes={hasError:v.default.bool,required:v.default.bool,className:k.default.className,label:v.default.string,helpMessage:v.default.string,testcid:v.default.string},ve.propTypes={controlProps:v.default.object,value:v.default.any},_e.propTypes={text:v.default.string,className:k.default.className};var we=(0,i.makeStyles)((function(e){return{root:{padding:e.spacing(.5),position:"absolute",bottom:0,left:0,right:0,zIndex:10},container:{borderWidth:"1px",borderStyle:"solid",borderRadius:e.shape.borderRadius,padding:e.spacing(.5),display:"flex",alignItems:"center"},containerSuccess:{borderColor:e.palette.success.main,backgroundColor:e.palette.success.light},iconSuccess:{color:e.palette.success.main},containerError:{borderColor:e.palette.error.main,backgroundColor:e.palette.error.light},iconError:{color:e.palette.error.main},containerInfo:{borderColor:e.palette.primary.main,backgroundColor:e.palette.primary.light},iconInfo:{color:e.palette.primary.main},containerWarning:{borderColor:e.palette.warning.main,backgroundColor:e.palette.warning.light},iconWarning:{color:e.palette.warning.main},message:{marginLeft:e.spacing(.5)},closeButton:{marginLeft:"auto"}}}));function Oe(e){var t=we();return e.message?o.default.createElement(a.Box,{className:t.root},o.default.createElement(Se,e)):o.default.createElement(o.default.Fragment,null)}function Se(e){var t=e.type,n=void 0===t?H.SUCCESS:t,r=e.message,i=e.closable,l=void 0===i||i,s=e.onClose,u=void 0===s?function(){}:s,d=we();return o.default.createElement(a.Box,{className:(0,g.default)(d.container,d["container".concat(n)])},o.default.createElement(z,{type:n,className:d["icon".concat(n)]}),o.default.createElement(a.Box,{className:d.message},r),l&&o.default.createElement(a.IconButton,{className:(0,g.default)(d.closeButton,d["icon".concat(n)]),onClick:u},o.default.createElement(z,{close:!0})))}Oe.propTypes={message:v.default.string},Se.propTypes={type:v.default.oneOf(Object.values(H)).isRequired,message:v.default.string,closable:v.default.bool,onClose:v.default.func}},85650:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=n(65770),o=a(n(67294)),i=a(n(45697));function a(e){return e&&e.__esModule?e:{default:e}}var l=(0,r.makeStyles)((function(e){return{root:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:e.otherVars.loader.backgroundColor,color:e.otherVars.loader.color,zIndex:1e3,display:"flex"},loaderRoot:{color:e.otherVars.loader.color,display:"flex",alignItems:"center",margin:"auto",".MuiTypography-root":{marginLeft:e.spacing(1)}},loader:{color:e.otherVars.loader.color},message:{marginLeft:"0.5rem"}}}));function s(e){var t=e.message,n=l();return t?o.default.createElement(r.Box,{className:n.root},o.default.createElement(r.Box,{className:n.loaderRoot},o.default.createElement(r.CircularProgress,{className:n.loader}),o.default.createElement(r.Typography,{className:n.message},t))):o.default.createElement(o.default.Fragment,null)}s.propTypes={message:i.default.string}},6734:(e,t,n)=>{n(47941),n(82526),n(38880),n(89554),n(54747),n(49337),n(33321),n(82772),n(19601),n(79753),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(91038),n(47042),n(68309),Object.defineProperty(t,"__esModule",{value:!0}),t.default=_,n(92222),n(21249),n(57327),n(69070);var r=c(n(67294)),o=n(79521),i=n(74061),a=n(30398),l=c(n(86010)),s=c(n(45697)),u=c(n(11728)),d=n(65770);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,a.makeStyles)((function(e){return{root:h(h({display:"flex",flexDirection:"column",height:"100%"},e.mixins.panelBorder),{},{backgroundColor:e.palette.background.default}),autoResizer:{height:"100% !important",width:"100% !important"},fixedSizeList:{direction:"ltr",overflowX:"hidden !important",overflow:"overlay !important"},table:{flexGrow:1,minHeight:0,borderSpacing:0,width:"100%",overflow:"hidden",borderRadius:e.shape.borderRadius},extraTable:{backgroundColor:e.palette.grey[400],flexGrow:1},tableCell:h(h(h({margin:0,padding:e.spacing(.5)},e.mixins.panelBorder.bottom),e.mixins.panelBorder.right),{},{position:"relative",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",backgroundColor:e.otherVars.tableBg},e.mixins.panelBorder.left),selectCell:{textAlign:"center"},tableCellHeader:h(h(h(h({fontWeight:e.typography.fontWeightBold,padding:e.spacing(1,.5),textAlign:"left",overflowY:"auto",overflowX:"hidden",alignContent:"center",backgroundColor:e.otherVars.tableBg},e.mixins.panelBorder.bottom),e.mixins.panelBorder.right),e.mixins.panelBorder.top),e.mixins.panelBorder.left),resizer:{display:"inline-block",width:"5px",height:"100%",position:"absolute",right:0,top:0,transform:"translateX(50%)",zIndex:1,touchAction:"none"},cellIcon:{paddingLeft:"1.8em",paddingTop:"0.35em",height:35,backgroundPosition:"1%"}}}));function _(e){var t=e.columns,n=e.data,a=e.isSelectRow,c=b(e,["columns","data","isSelectRow"]),p=v(),y=r.default.useMemo((function(){return{minWidth:150}}),[]),h=r.default.forwardRef((function(e,t){var n=e.indeterminate,o=b(e,["indeterminate"]),i=r.default.useRef(),a=t||i;return r.default.useEffect((function(){a.current.indeterminate=n}),[a,n]),r.default.createElement(r.default.Fragment,null,r.default.createElement(d.Checkbox,m({color:"primary",ref:a},o)))}));h.displayName="SelectCheckbox",h.propTypes={indeterminate:s.default.bool,rest:s.default.func,getToggleAllRowsSelectedProps:s.default.func,row:s.default.object};var g=(0,o.useTable)({columns:t,data:n,defaultColumn:y,isSelectRow:a},o.useGlobalFilter,o.useSortBy,o.useRowSelect,o.useResizeColumns,o.useFlexLayout,(function(e){e.visibleColumns.push((function(e){return a?[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return r.default.createElement("div",{className:p.selectCell},r.default.createElement(h,t()))},Cell:function(e){var t=e.row;return r.default.createElement("div",{className:p.selectCell},r.default.createElement(h,t.getToggleRowSelectedProps()))},sortble:!1,width:50,minWidth:0}].concat(f(e)):f(e)})),e.useInstanceBeforeDimensions.push((function(e){e.headerGroups[0].headers[0].resizable=!1}))})),_=g.getTableProps,w=g.getTableBodyProps,O=g.headerGroups,S=g.rows,x=g.prepareRow,C=g.selectedFlatRows,P=g.state.selectedRowIds,E=g.setGlobalFilter,j=g.setHiddenColumns;r.default.useEffect((function(){j(t.filter((function(e){return void 0!==e.isVisible&&!0!==t.isVisible})).map((function(e){return e.accessor})))}),[j,t]),r.default.useEffect((function(){c.setSelectedRows&&c.setSelectedRows(C)}),[P]),r.default.useEffect((function(){c.getSelectedRows&&c.getSelectedRows(C)}),[P]),r.default.useEffect((function(){E(c.searchText||void 0)}),[c.searchText]);var k=r.default.useCallback((function(e){var t=e.index,n=e.style,o=S[t];return x(o),r.default.createElement("div",m({},o.getRowProps({style:n}),{className:p.tr}),o.cells.map((function(e){return r.default.createElement("div",m({key:e.column.id},e.getCellProps(),{className:(0,l.default)(p.tableCell,o.original.icon&&o.original.icon[e.column.id],o.original.icon[e.column.id]&&p.cellIcon),title:e.value}),e.render("Cell"))})))}),[x,S,P]);return r.default.createElement(u.default,{className:"panel"===c.type?c.className:p.autoResizer},(function(e){var t=e.height;return r.default.createElement("div",m({},_(),{className:p.table}),r.default.createElement("div",null,O.map((function(e){return r.default.createElement("div",m({key:""},e.getHeaderGroupProps()),e.headers.map((function(e){return r.default.createElement("div",m({key:e.id},e.getHeaderProps(),{className:(0,l.default)(p.tableCellHeader,e.className)}),r.default.createElement("div",e.sortble?e.getSortByToggleProps():{},e.render("Header"),r.default.createElement("span",null,e.isSorted?e.isSortedDesc?" 🔽":" 🔼":""),e.resizable&&r.default.createElement("div",m({},e.getResizerProps(),{className:p.resizer}))))})))}))),r.default.createElement("div",m({},w(),{className:p}),r.default.createElement(i.FixedSizeList,{className:p.fixedSizeList,height:t-75,itemCount:S.length,itemSize:35,sorted:null==c?void 0:c.sortOptions},k)))}))}_.propTypes={stepId:s.default.number,height:s.default.number,className:s.default.oneOfType([s.default.string,s.default.object]),children:s.default.oneOfType([s.default.arrayOf(s.default.node),s.default.node]),getToggleAllRowsSelectedProps:s.default.func,columns:s.default.array,data:s.default.array,isSelectRow:s.default.bool,row:s.default.func,setSelectedRows:s.default.func,getSelectedRows:s.default.func,searchText:s.default.string,type:s.default.string,sortOptions:s.default.array}},19928:(e,t,n)=>{n(47042),n(41539),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),n(69070),n(47941),n(57327),n(38880),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.default=y,n(21249),n(69826),n(89554),n(54747),n(68309),n(26541);var r=n(65770),o=u(n(96486)),i=u(n(67294)),a=n(93299),l=u(n(86010)),s=u(n(45697));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=(0,r.makeStyles)((function(){return{root:{"&:not(:focus-within) .priv-table":{display:"none"}},table:{borderSpacing:0,width:"100%",fontSize:"0.8em"},tableCell:{textAlign:"left"}}}));function y(e){var t,n,r,s=e.value,u=e.onChange,d=e.controlProps,f={C:"CREATE",T:"TEMPORARY",c:"CONNECT",a:"INSERT",r:"SELECT",w:"UPDATE",d:"DELETE",D:"TRUNCATE",x:"REFERENCES",t:"TRIGGER",U:"USAGE",X:"EXECUTE"},m=b(),y="",h=p(s||[]);try{for(h.s();!(r=h.n()).done;){var g=r.value;g.privilege&&(y+=g.privilege_type,g.with_grant&&(y+="*"))}}catch(e){h.e(e)}finally{h.f()}var v=o.default.uniqueId(),_=((null==d?void 0:d.supportedPrivs)||[]).map((function(e){var t=o.default.find(s,(function(t){return t.privilege_type===e}))||{privilege:!1,with_grant:!1};return{privilege_type:e,privilege:Boolean(t.privilege),with_grant:Boolean(t.with_grant)}})),w=function(e,t){var n=[];_.forEach((function(r){t?n.push(c(c({},r),{},{privilege:!0,with_grant:e.target.checked})):e.target.checked&&n.push(c(c({},r),{},{privilege:e.target.checked}))})),u(n)},O=function(e,t){var n=!1,r=[];(s||[]).forEach((function(o){o.privilege_type===e.target.name?(n=!0,t&&r.push(c(c({},o),{},{with_grant:e.target.checked}))):r.push(o)})),!n&&e.target.checked&&r.push({privilege_type:e.target.name,privilege:e.target.checked,with_grant:!1}),u(r)};return t=_.length===(s||[]).length,n=_.length===(s||[]).length&&(s||[]).every((function(e){return e.with_grant})),i.default.createElement("div",{className:m.root},i.default.createElement(a.InputText,{value:y,readOnly:!0}),i.default.createElement("table",{className:(0,l.default)(m.table,"priv-table")},_.length>1&&i.default.createElement("thead",null,i.default.createElement("tr",null,i.default.createElement("td",{className:m.tableCell},i.default.createElement(a.InputCheckbox,{name:"all",controlProps:{label:"ALL"},id:v,size:"small",onChange:function(e){return w(e,!1)},value:t})),i.default.createElement("td",{className:m.tableCell},i.default.createElement(a.InputCheckbox,{name:"all",controlProps:{label:"WITH GRANT OPTION"},id:v,size:"small",disabled:!t,onChange:function(e){return w(e,!0)},value:n})))),i.default.createElement("tbody",null,_.map((function(e){return i.default.createElement("tr",{key:e.privilege_type},i.default.createElement("td",{className:m.tableCell},i.default.createElement(a.InputCheckbox,{name:e.privilege_type,controlProps:{label:f[e.privilege_type]},id:v,value:Boolean(e.privilege),size:"small",onChange:function(e){return O(e,!1)}})),i.default.createElement("td",{className:m.tableCell},i.default.createElement(a.InputCheckbox,{name:e.privilege_type,controlProps:{label:"WITH GRANT OPTION"},id:v,value:Boolean(e.with_grant),size:"small",disabled:!e.privilege,onChange:function(e){return O(e,!0)}})))})))))}y.propTypes={value:s.default.array,onChange:s.default.func,controlProps:s.default.object}},3622:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(79753),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),n(19601),n(4129),n(69070),n(38880),Object.defineProperty(t,"__esModule",{value:!0}),t.SelectRefresh=h,n(47941),n(82772);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=n(65770),a=n(93299),l=c(n(45697)),s=c(n(41832)),u=c(n(36210)),d=n(87451);function c(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function h(e){var t=e.required,n=e.className,r=e.label,l=e.helpMessage,s=e.testcid,c=e.controlProps,f=y(e,["required","className","label","helpMessage","testcid","controlProps"]),b=m((0,o.useState)([]),2),h=b[0],g=b[1],v=m((0,o.useState)(!1),2),_=v[0],w=v[1],O=c.getOptionsOnRefresh,S=y(c,["getOptionsOnRefresh"]);return o.default.createElement(a.FormInput,{required:t,label:r,className:n,helpMessage:l,testcid:s},o.default.createElement(i.Box,{display:"flex"},o.default.createElement(i.Box,{flexGrow:"1"},o.default.createElement(a.InputSelect,p({},f,{options:h,optionsReloadBasis:_,controlProps:S}))),o.default.createElement(i.Box,null,o.default.createElement(d.PgIconButton,{onClick:function(){O&&O().then((function(e){g(e),w((function(e){return!e}))}))},icon:o.default.createElement(u.default,null),title:r||""}))))}h.propTypes={required:l.default.bool,label:l.default.string,className:s.default.className,helpMessage:l.default.string,testcid:l.default.string,controlProps:l.default.object}},32982:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var r=s(n(67294)),o=n(65770),i=s(n(86010)),a=s(n(45697)),l=s(n(41832));function s(e){return e&&e.__esModule?e:{default:e}}var u=(0,o.makeStyles)((function(e){return{root:{height:"100%",padding:e.spacing(1),overflow:"auto",backgroundColor:e.palette.grey[400]},content:{height:"100%"}}}));function d(e){var t=e.children,n=e.classNameRoot,a=e.className,l=e.value,s=e.index,d=u(),c=l===s;return r.default.createElement(o.Box,{className:(0,i.default)(d.root,n),component:"div",hidden:!c},r.default.createElement(o.Box,{className:(0,i.default)(d.content,a)},t))}d.propTypes={children:l.default.children,classNameRoot:l.default.className,className:l.default.className,value:a.default.any.isRequired,index:a.default.any.isRequired}},87789:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.setPGCSRFToken=function(e,t){if(!t)throw new Error("csrf-token meta tag has not been set");var n=o.default.sync;o.default.sync=function(r,o,i){return i.beforeSend=function(n){n.setRequestHeader(e,t)},n(r,o,i)};var a=o.default.get;o.default.get=function(n,r,o){return o.beforeSend=function(n){n.setRequestHeader(e,t)},a(n,r,o)},r.default.ajaxSetup({beforeSend:function(n){n.setRequestHeader(e,t)}}),i.default.interceptors.request.use((function(n){return n.headers[e]=t,n}),(function(e){return Promise.reject(e)}))},n(88674),n(41539);var r=a(n(19755)),o=a(n(72316)),i=a(n(9669));function a(e){return e&&e.__esModule?e:{default:e}}},50464:(e,t,n)=>{n(79753),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.useInterval=function(e,t){var n=(0,r.useRef)();(0,r.useEffect)((function(){n.current=e})),(0,r.useEffect)((function(){if(t>-1){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},t.usePrevious=function(e){var t=(0,r.useRef)();return(0,r.useEffect)((function(){t.current=e})),t.current},t.useDelayDebounce=function(e,t,n){(0,r.useEffect)((function(){var r=setTimeout((function(){t&&e(t)}),n);return function(){return clearTimeout(r)}}),[t])},t.useOnScreen=function(e){var t=o((0,r.useState)(!1),2),n=t[0],i=t[1],a=new IntersectionObserver((function(e){var t=o(e,1)[0];i(t.isIntersecting)}));return(0,r.useEffect)((function(){return null!=e&&e.current&&a.observe(e.current),function(){a.disconnect()}}),[]),n},t.useIsMounted=function(){var e=(0,r.useRef)(!0);return(0,r.useEffect)((function(){return function(){e.current=!1}}),[]),(0,r.useCallback)((function(){return e.current}),[])},n(32564);var r=n(67294);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},41832:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(45697)),o=i(n(89406));function i(e){return e&&e.__esModule?e:{default:e}}var a={ref:r.default.oneOfType([r.default.func,r.default.shape({current:r.default.instanceOf(Element)}),r.default.object]),schemaUI:r.default.instanceOf(o.default),children:r.default.oneOfType([r.default.arrayOf(r.default.node),r.default.node]),className:r.default.oneOfType([r.default.string,r.default.object])};t.default=a},89087:(e,t,n)=>{n(69826),n(24812),n(32564),n(69070);var r=a(n(19755)),o=a(n(42441)),i=n(44092);function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialogContainer=t,this.tabSwitching=!1,this.tabs=this.dialogContainer.find(".nav-tabs:visible"),this.tabs.length>0&&(this.tabs=this.tabs[0]),this.dialogTabBackward=(0,i.parseShortcutValue)(n),this.dialogTabForward=(0,i.parseShortcutValue)(r),(0,o.default)(this.dialogContainer[0]).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this)),(0,o.default)(this.dialogContainer[0]).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}var t,n,a;return t=e,(n=[{key:"onKeyboardEvent",value:function(e,t){var n=this.dialogContainer.find(".tab-content:first > .tab-pane.active:first:visible"),r=this.isActivePaneHasChildTabs(n);this.tabSwitching||(this.tabSwitching=!0,r&&this.navigate(t,r.childTab,r.childTabPane,e)||this.navigate(t,this.tabs,n,e))}},{key:"isActivePaneHasChildTabs",value:function(e){var t=e.find(".nav-tabs:first:visible");return t.length>0?{childTab:t,childTabPane:e.find(".tab-content:first > .tab-pane.active:first:visible")}:null}},{key:"navigate",value:function(e,t,n,r){return e==this.dialogTabBackward?this.navigateBackward(t,n,r):e==this.dialogTabForward&&this.navigateForward(t,n,r)}},{key:"navigateBackward",value:function(e,t,n){var o,a,l=this,s=(0,r.default)(e).find("li").has("a.active").prev("li");return s.length>0?(s.find("a").tab("show"),(a=(o=t.prev()).find(".tab-content:first > .tab-pane.active:first:visible")).length>0?(0,i.findAndSetFocus)(a):(0,i.findAndSetFocus)(o),setTimeout((function(){l.tabSwitching=!1}),200),n.stopPropagation(),!0):(this.tabSwitching=!1,!1)}},{key:"navigateForward",value:function(e,t,n){var o,a,l=this,s=(0,r.default)(e).find("li").has("a.active").next("li");return s.length>0?(s.find("a").tab("show"),(a=(o=t.next()).find(".tab-content:first > .tab-pane.active:first:visible")).length>0?(0,i.findAndSetFocus)(a):(0,i.findAndSetFocus)(o),setTimeout((function(){l.tabSwitching=!1}),200),n.stopPropagation(),!0):(this.tabSwitching=!1,!1)}},{key:"detach",value:function(){(0,o.default)(this.dialogContainer[0]).unbind(this.dialogTabBackward),(0,o.default)(this.dialogContainer[0]).unbind(this.dialogTabForward)}}])&&l(t.prototype,n),a&&l(t,a),e}();e.exports={dialogTabNavigator:s}},91669:(e,t,n)=>{var r,o;n(69600),n(21249),n(23123),n(74916),r=[n(52536)],void 0===(o=function(e){return function(t){var n=e[t]?e[t]:t;if(1==arguments.length)return n;try{var r=arguments;return n.split("%s").map((function(e,t){return t>0?t<r.length?[r[t],e].join(""):["%s",e].join(""):e})).join("")}catch(e){return console.error(e),n}}}.apply(t,r))||(e.exports=o)},35971:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(82772),n(79753),n(41817),n(32165),n(78783),n(66992),n(33948),n(68309),n(91038),n(19601),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.default=x,n(47042),n(88674),n(41539),n(69070);var o=b(n(67294)),i=n(65770),a=b(n(8593)),l=b(n(52237)),s=n(87451),u=n(44092),d=p(n(45697)),c=p(n(41832)),f=p(n(96486));function p(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function b(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=(0,i.makeStyles)((function(e){return{formBorder:w(w({},e.mixins.panelBorder),{},{borderBottom:0}),form:{padding:"0.25rem"},addBtn:{marginLeft:"auto"}}}));function x(e){var t=e.containerClassName,n=e.headerSchema,r=e.headerVisible,d=v(e,["containerClassName","headerSchema","headerVisible"]),c=S(),p=(0,o.useRef)({}),m=(0,o.useRef)(d.schema),b=h((0,o.useState)(!0),2),g=b[0],_=b[1],w=h((0,o.useState)(0),2),O=w[0],x=w[1],C=(0,o.useCallback)((function(){if(d.canAddRow){var e=n.getNewData(p.current);d.dataDispatch({type:l.SCHEMA_STATE_ACTIONS.ADD_ROW,path:d.accessPath,value:e}),x((function(e){return e+1}))}}),[]);(0,o.useEffect)((function(){n.top=m.current.top}),[]);var P=m.current.top?f.default.get(m.current.top.sessData,f.default.slice(d.accessPath,0,-1)):f.default.get(m.current.sessData);return r=r&&(0,u.evalFunc)(null,r,P),o.default.createElement(i.Box,{className:t},o.default.createElement(i.Box,{className:c.formBorder},e.label&&o.default.createElement(a.DataGridHeader,{label:e.label}),r&&o.default.createElement(i.Box,{className:c.form},o.default.createElement(l.default,{formType:"dialog",getInitData:function(){return Promise.resolve({})},schema:n,viewHelperProps:e.viewHelperProps,showFooter:!1,onDataChange:function(e,t){p.current=t,_(n.addDisabled(p.current))},hasSQL:!1,isTabView:!1,resetKey:O}),o.default.createElement(i.Box,{display:"flex"},o.default.createElement(s.DefaultButton,{className:c.addBtn,onClick:C,disabled:g},"Add")))),o.default.createElement(a.default,y({},d,{label:"",canAdd:!1})))}x.propTypes={label:d.default.string,value:d.default.array,viewHelperProps:d.default.object,formErr:d.default.object,headerSchema:c.default.schemaUI.isRequired,headerVisible:d.default.func,schema:c.default.schemaUI,accessPath:d.default.array.isRequired,dataDispatch:d.default.func.isRequired,containerClassName:d.default.oneOfType([d.default.object,d.default.string])}},17971:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(67294)),i=a(n(41832));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,n,r,i=u(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={hasError:!1},t}return t=a,(n=[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0}),console.error(e,t)}},{key:"render",value:function(){return this.state.hasError?o.default.createElement("h2",null,"Something went wrong."):this.props.children}}])&&l(t.prototype,n),r&&l(t,r),a}(o.default.Component);t.default=f,f.propTypes={children:i.default.children}},96066:(e,t,n)=>{n(82526),n(41817),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),n(69070),n(47941),n(38880),n(89554),n(54747),n(49337),n(33321),n(19601),Object.defineProperty(t,"__esModule",{value:!0}),t.useModal=O,t.default=S,n(41539),n(39714),n(83710),n(92222),n(57327),n(21249),n(79753);var r=n(65770),o=f(n(67294)),i=n(44092),a=n(87451),l=f(n(61193)),s=f(n(79138)),u=f(n(41832)),d=f(n(45697)),c=f(n(91669));function f(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=o.default.createContext({});function O(){return o.default.useContext(w)}function S(e){var t=e.children,n=g(o.default.useState([]),2),r=n[0],a=n[1],l=function(e,t,n){var r=(0,i.getEpoch)().toString()+Math.random();a((function(o){return[].concat(h(o),[b({id:r,title:e,content:t},n)])}))},s=function(e){a((function(t){return t.filter((function(t){return t.id!=e}))}))},u=o.default.useMemo((function(){return{showModal:l,closeModal:s}}),[]);return o.default.createElement(w.Provider,{value:u},t,r.map((function(e,t){return o.default.createElement(C,p({key:t},e))})))}function x(e){return o.default.createElement(l.default,{cancel:'[class*="MuiDialogContent-root"]'},o.default.createElement(r.Paper,p({},e,{style:{minWidth:"600px"}})))}function C(e){var t=e.id,n=e.title,i=e.content,l=O(),u=function(){return l.closeModal(t)};return o.default.createElement(r.Dialog,{open:!0,onClose:u,PaperComponent:x,disableBackdropClick:!0},o.default.createElement(r.DialogTitle,null,o.default.createElement(r.Box,{marginRight:"0.25rem"},n),o.default.createElement(r.Box,{marginLeft:"auto"},o.default.createElement(a.PgIconButton,{title:(0,c.default)("Close"),icon:o.default.createElement(s.default,null),size:"xs",noBorder:!0,onClick:u}))),o.default.createElement(r.DialogContent,null,i(u)))}S.propTypes={children:u.default.children},C.propTypes={id:d.default.string,title:u.default.children,content:d.default.func}},55958:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(4129),n(41539),n(78783),n(66992),n(33948),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.initializeNotifier=D,t.initializeModalProvider=R,t.default=void 0,n(82772),n(15306),n(74916),n(24603),n(39714),n(69070);var o=n(73400),i=O(n(67294)),a=O(n(73935)),l=O(n(4394)),s=n(93299),u=O(n(41832)),d=O(n(91669)),c=O(n(96486)),f=O(n(1950)),p=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=w();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(96066)),m=n(87451),b=n(65770),y=n(7361),h=O(n(15020)),g=O(n(79138)),v=O(n(45569)),_=O(n(45697));function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function O(e){return e&&e.__esModule?e:{default:e}}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P,E,j=3e3,k=!1;function D(e){k=!0;var t=function(){return P=(0,o.useSnackbar)(),i.default.createElement(i.default.Fragment,null)};e||(e=document.createElement("div"),document.body.appendChild(e)),a.default.render(i.default.createElement(l.default,null,i.default.createElement(o.SnackbarProvider,{maxSnack:30,anchorOrigin:{horizontal:"right",vertical:"bottom"}},i.default.createElement(t,null))),e)}var T=!1;function R(e){T=!0;var t=function(){return E=(0,p.useModal)(),i.default.createElement(i.default.Fragment,null)};e||(e=document.createElement("div"),document.body.appendChild(e)),a.default.render(i.default.createElement(l.default,null,i.default.createElement(p.default,null,i.default.createElement(t,null))),e)}var N=i.default.forwardRef((function(e,t){var n=e.children;return i.default.createElement(o.SnackbarContent,{style:{justifyContent:"end"},ref:t},n)}));N.displayName="FinalNotifyContent",N.propTypes={children:u.default.children};var A=(0,y.makeStyles)((function(e){return{footer:x({display:"flex",justifyContent:"flex-end",padding:"0.5rem"},e.mixins.panelBorder.top),margin:{marginLeft:"0.25rem"}}}));function I(e){var t=e.text,n=e.confirm,r=e.okLabel,o=void 0===r?(0,d.default)("OK"):r,a=e.cancelLabel,l=void 0===a?(0,d.default)("Cancel"):a,s=e.onOkClick,u=e.onCancelClick,c=A();return i.default.createElement(b.Box,{display:"flex",flexDirection:"column",height:"100%"},i.default.createElement(b.Box,{flexGrow:"1",p:2},(0,h.default)(t)),i.default.createElement(b.Box,{className:c.footer},n&&i.default.createElement(m.DefaultButton,{startIcon:i.default.createElement(g.default,null),onClick:u},l),i.default.createElement(m.PrimaryButton,{className:c.margin,startIcon:i.default.createElement(v.default,null),onClick:s,autoFocus:!0},o)))}I.propTypes={text:_.default.string,confirm:_.default.bool,onOkClick:_.default.func,onCancelClick:_.default.func,okLabel:_.default.string,cancelLabel:_.default.string};var M={success:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;this._callNotify(e,s.MESSAGE_TYPE.SUCCESS,t)},warning:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;this._callNotify(e,s.MESSAGE_TYPE.WARNING,t)},info:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;this._callNotify(e,s.MESSAGE_TYPE.INFO,t)},error:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;this._callNotify(e,s.MESSAGE_TYPE.ERROR,t)},notify:function(e,t){if(e){k||D();var n={autoHideDuration:t,content:function(t){return i.default.createElement(N,null,i.default.cloneElement(e,{onClose:function(){P.closeSnackbar(t)}}))}};n.content.displayName="content",P.enqueueSnackbar(null,n)}},_callNotify:function(e,t,n){c.default.isNull(n)?this.notify(i.default.createElement(s.NotifierMessage,{type:t,message:e}),null):this.notify(i.default.createElement(s.NotifierMessage,{type:t,message:e,closable:!1}),n)},pgRespErrorNotify:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=e.getResponseHeader("Content-Type");if(410===e.status){var o=window.pgAdmin.Browser;o.report_error((0,d.default)("Error: Object not found - %s.",e.statusText),e.responseJSON.errormsg)}else{try{if(0===e.status)t=(0,d.default)("Connection to the server has been lost.");else{if(r&&r.indexOf("application/json")>=0){var i=JSON.parse(e.responseText);t=c.default.escape(i.result)||c.default.escape(i.errormsg)||(0,d.default)("Unknown error")}r.indexOf("text/html")>=0&&(t=(0,d.default)("INTERNAL SERVER ERROR"),console.warn(e.responseText))}}catch(e){t=e.message}this.error(n+" "+t)}},pgNotifier:function(e,t,n,r){var o=t.responseText,i=t.getResponseHeader("Content-Type");if(0==t.status)o=(0,d.default)("Connection to the server has been lost."),n=(0,d.default)("Connection Lost");else if(i)try{if(0==i.indexOf("application/json")){var a=JSON.parse(o);if("CRYPTKEY_MISSING"==a.info)return void window.pgAdmin.Browser.set_master_password("",(function(){r&&"function"==typeof r&&r("CRYPTKEY_SET")}));if(null!=a.result&&(!a.errormsg||""==a.errormsg)&&r&&"function"==typeof r)return r(a.result);o=c.default.escape(a.result)||c.default.escape(a.errormsg)||"Unknown error"}if(0==i.indexOf("text/html"))return void("error"===e&&this.alert("Error",n))}catch(e){this.alert("Error",e.message)}this.alert(n,o.replace(new RegExp(/\r?\n/,"g"),"<br />"))},alert:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,d.default)("OK");T||R(),E.showModal(e,(function(e){return i.default.createElement(I,{text:t,onOkClick:function(){n&&n(),e()},okLabel:r})}))},confirm:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,d.default)("Yes"),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,d.default)("No");T||R(),E.showModal(e,(function(e){return i.default.createElement(I,{text:t,confirm:!0,onOkClick:function(){n&&n(),e()},onCancelClick:function(){r&&r(),e()},okLabel:o,cancelLabel:a})}))}};window.frameElement?M=f.default.Notifier||M:f.default.Notifier||(f.default.Notifier=M);var q=M;t.default=q},81922:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.confirmDeleteRow=function(e,t,n,o){i.default.confirm(n||(0,r.default)("Delete Row"),o||(0,r.default)("Are you sure you wish to delete this row?"),(function(){return e(),!0}),(function(){return t(),!0}))},t.showFileDialog=function(e,t){var n={supported_types:e.supportedTypes||[],dialog_type:e.dialogType||"select_file",dialog_title:e.dialogTitle||"",btn_primary:e.btnPrimary||""};o.default.FileManager.init(),o.default.FileManager.show_dialog(n);var r=function(e){a(),t(e)},i=function(){return a()};o.default.Browser.Events.on("pgadmin-storage:finish_btn:"+n.dialog_type,r),o.default.Browser.Events.on("pgadmin-storage:cancel_btn:"+n.dialog_type,i);var a=function(){o.default.Browser.Events.off("pgadmin-storage:finish_btn:"+n.dialog_type,r),o.default.Browser.Events.off("pgadmin-storage:cancel_btn:"+n.dialog_type,i)}},t.onPgadminEvent=function(e,t){o.default.Browser.Events.on(e,t)},t.offPgadminEvent=function(e,t){o.default.Browser.Events.off(e,t)};var r=a(n(91669)),o=a(n(55112)),i=a(n(55958));function a(e){return e&&e.__esModule?e:{default:e}}},57550:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i,a,l;n(82526),n(41817),n(32165),n(78783),n(66992),n(33948),n(41539),n(24603),n(74916),n(39714),n(15306),o=Object.prototype.toString,i=Function.prototype.toString,a=/^\[object .+?Constructor\]$/,l=RegExp("^"+String(o).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),e.exports=function(e){var t=r(e);return"function"==t?l.test(i.call(e)):e&&"object"==t&&a.test(o.call(e))||!1}},72945:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.processEventDebugger=function(e,t,n,o){var i,a,l="";this.validateShortcutKeys(n.edit_grid_values,t)?(this._stopEventPropagation(t),(i=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")')).length&&(a=(0,r.default)(i).find("td.editable:first")).length&&a.trigger("click")):this.validateShortcutKeys(n.move_next,t)?(this._stopEventPropagation(t),l=s(o,"right")):this.validateShortcutKeys(n.move_previous,t)?(this._stopEventPropagation(t),l=s(o,"left")):this.validateShortcutKeys(n.switch_panel,t)&&(this._stopEventPropagation(t),l=s(o,"switch"));return l},t.processEventQueryTool=function(e,t,n,o){if(e.isQueryRunning())return;var i=n.which||n.keyCode,a="",l=e.preferences.execute_query,u=e.preferences.explain_query,d=e.preferences.explain_analyze_query,c=e.preferences.download_results,f=e.preferences.move_next,p=e.preferences.move_previous,m=e.preferences.switch_panel,b=e.preferences.toggle_case,y=e.preferences.commit_transaction,h=e.preferences.rollback_transaction,g=e.preferences.save_data,v=e.preferences.show_query_tool;if(this.validateShortcutKeys(l,n))this._stopEventPropagation(n),t.executeQuery(e);else if(this.validateShortcutKeys(u,n))this._stopEventPropagation(n),t.explain(e);else if(this.validateShortcutKeys(d,n))this._stopEventPropagation(n),t.explainAnalyze(e);else if(this.validateShortcutKeys(c,n))e.is_save_results_to_file_disabled||(this._stopEventPropagation(n),t.download(e));else if(this.validateShortcutKeys(b,n))this._stopEventPropagation(n),t.toggleCaseOfSelectedText(e);else if(this.validateShortcutKeys(y,n))e.is_transaction_buttons_disabled||(this._stopEventPropagation(n),t.executeCommit(e));else if(this.validateShortcutKeys(h,n))e.is_transaction_buttons_disabled||(this._stopEventPropagation(n),t.executeRollback(e));else if(this.validateShortcutKeys(g,n))this._stopEventPropagation(n),t.saveDataChanges(e);else if(this.validateShortcutKeys(v,n))this._stopEventPropagation(n),t.openQueryTool(e);else if((this.isMac()&&n.metaKey||!this.isMac()&&n.ctrlKey)&&!n.altKey&&n.shiftKey&&191===i)this._stopEventPropagation(n),t.commentBlockCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(n)&&n.metaKey||!this.isMac()&&!this.isKeyAltShift(n)&&n.ctrlKey)&&191===i)this._stopEventPropagation(n),t.commentLineCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(n)&&n.metaKey||!this.isMac()&&!this.isKeyAltShift(n)&&n.ctrlKey)&&190===i)this._stopEventPropagation(n),t.uncommentLineCode(e);else if((this.isMac()&&n.metaKey||!this.isMac()&&n.ctrlKey)&&!n.altKey&&n.shiftKey&&75===i)this._stopEventPropagation(n),t.formatSql(e);else if(27==i)t.focusOut(e),(0,r.default)(n.target).hasClass("dropdown-item")&&(0,r.default)(n.target).closest(".dropdown-submenu").length>0&&(0,r.default)(n.target).closest(".dropdown-submenu").find(".dropdown-menu").removeClass("show");else if(this.validateShortcutKeys(f,n))this._stopEventPropagation(n),a=s(o,"right");else if(this.validateShortcutKeys(p,n))this._stopEventPropagation(n),a=s(o,"left");else if(this.validateShortcutKeys(m,n))this._stopEventPropagation(n),a=s(o,"switch");else if(38===i||40===i){if((0,r.default)(n.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(n);var _=(0,r.default)(n.target).closest("li");for((0,r.default)(n.target).closest(".dropdown-menu").find(".show").removeClass("show"),38===i?_=_.prev():40===i&&(_=_.next());_.hasClass("dropdown-divider")||_.hasClass("d-none")||_.find(".dropdown-item").first().hasClass("disabled");)38===i?_=_.prev():40===i&&(_=_.next());_.find(".dropdown-item").trigger("focus")}}else if(37===i||39===i){if((0,r.default)(n.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(n);var w=(0,r.default)(n.target).closest("li");if(39===i)w.hasClass("dropdown-submenu")&&(w.find(".dropdown-menu").addClass("show"),w.find(".dropdown-menu .dropdown-item").first().trigger("focus"));else if(37===i){var O=w.closest(".dropdown-menu");O.closest(".dropdown-submenu").length>0&&(O.removeClass("show"),(w=O.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}}}else{var S=this.validateMacros(e,n);!1!==S&&(this._stopEventPropagation(n),t.executeMacro(e,S))}return a},t.focusDockerPanel=s,t.validateShortcutKeys=function(e,t){if(!e)return!1;var n=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==n},t.validateMacros=function(e,t){var n=t.which||t.keyCode,r=e.macros.filter((function(e){return e.alt==t.altKey&&e.control==t.ctrlKey&&e.key_code==n}));if(1==r.length)return r[0].id;return!1},t._stopEventPropagation=function(e){e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.isMac=function(){return-1!=window.navigator.platform.search("Mac")},t.isKeyCtrlAlt=function(e){return e.ctrlKey||e.altKey},t.isKeyAltShift=function(e){return e.altKey||e.shiftKey},t.isKeyCtrlShift=function(e){return e.ctrlKey||e.shiftKey},t.isKeyCtrlAltShift=function(e){return e.ctrlKey||e.altKey||e.shiftKey},t.isAltShiftBoth=function(e){return e.altKey&&e.shiftKey&&!e.ctrlKey},t.isCtrlShiftBoth=function(e){return e.ctrlKey&&e.shiftKey&&!e.altKey},t.isCtrlAltBoth=function(e){return e.ctrlKey&&e.altKey&&!e.shiftKey},t.shortcut_key=l,t.shortcut_title=function(e,t){var n="";if(null==t)return n;t.alt&&(n=(0,o.default)("Alt")+"+");t.shift&&(n+=(0,o.default)("Shift")+"+");t.control&&(n+=(0,o.default)("Ctrl")+"+");return n+=l(t),"".concat(e," (").concat(n,")")},t.shortcut_accesskey_title=function(e,t){return"".concat(e," (")+(0,o.default)("accesskey")+" + ".concat(l(t),")")},n(64765),n(74916),n(92222),n(69826),n(57327);var r=a(n(19755)),o=a(n(91669)),i=n(44092);function a(e){return e&&e.__esModule?e:{default:e}}function l(e){var t="";return e.key&&e.key.char&&(t=e.key.char.toUpperCase()),t}function s(e,t){if(e){if(!e._focusFrame){if(0==e._frameList.length&&0==e._frameList[0]._panelList.length)return;e._frameList[0]._panelList[e._frameList[0]._curTab].focus()}var n=e._focusFrame,r=0,o=!1;if("switch"==t){var a,l=e._frameList.length;for(a=0;a<l&&n!==e._frameList[a];a++);r=(n=e._frameList[(0,i.getMod)(a+1,l)])._curTab,o=!0}else"left"==t?r=(0,i.getMod)(n._curTab-1,n._panelList.length):"right"==t&&(r=(0,i.getMod)(n._curTab+1,n._panelList.length));var s=n._panelList[r];return s.$container.find('*[tabindex]:not([tabindex="-1"])').trigger("focus"),s.focus(o),s._type}}},23602:(e,t,n)=>{n(69826);var r=a(n(19755)),o=a(n(81311)),i=a(n(1950));function a(e){return e&&e.__esModule?e:{default:e}}e.exports={modifyAcitreeAnimation:function(e,t){var n=e.get_preference("browser","enable_acitree_animation").value;o.default.isUndefined(t)&&(t=e.tree),n?t.options({animateRoot:!0,unanimated:!1,show:o.default.extend(t.options().show,{duration:75}),hide:o.default.extend(t.options().hide,{duration:75}),view:o.default.extend(t.options().view,{duration:75})}):t.options({animateRoot:!1,unanimated:!0,show:o.default.extend(t.options().show,{duration:0}),hide:o.default.extend(t.options().hide,{duration:0}),view:o.default.extend(t.options().view,{duration:0})})},modifyAlertifyAnimation:function(e){(o.default.isUndefined(e)||o.default.isNull(e))&&(e=i.default.pgAdmin.Browser),e.get_preference("browser","enable_alertify_animation").value?((0,r.default)(document).find("body").removeClass("alertify-no-animation"),o.default.each(document.getElementsByTagName("iframe"),(function(e){(0,r.default)(e.contentDocument).find("body").removeClass("alertify-no-animation")}))):((0,r.default)(document).find("body").addClass("alertify-no-animation"),o.default.each(document.getElementsByTagName("iframe"),(function(e){(0,r.default)(e.contentDocument).find("body").addClass("alertify-no-animation")})))}}},90585:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.url=function(e,t,n){var r=i.default.tree.findNodeByDomElement(t),a=null;r&&r.anyFamilyMember((function(e){var t=e.getData(),r=i.default.Nodes[t._type],l=r&&r.dashboard;return(0,o.isFunction)(l)&&(l=l.apply(r,[e,t,n])),null!==(a=(0,o.isString)(l)?l:null)}));return a};var r,o=n(44092),i=(r=n(33883))&&r.__esModule?r:{default:r}},55112:(e,t,n)=>{var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(41817),n(32165),n(78783),n(66992),n(33948),n(4723),n(74916),n(54678),n(47042),n(15306),n(23123),n(91058),n(83710),n(41539),n(39714),void 0===(r=function(){var e=window.pgAdmin=window.pgAdmin||{};function t(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))}return function(e,t,n){function r(t,n,r,i){r=r||"width";var a,s,u,f=(n.match(d)||[])[2],p="px"===f?1:c[f+"toPx"];if(p||/r?em/i.test(f)&&!i)t=p?t:"rem"===f?l:"fontSize"===r&&+e.parentNode||t,p=p||parseFloat(o(t,"fontSize")),u=parseFloat(n)*p;else{s=(a=t.style)[r];try{a[r]=n}catch(e){return 0}u=a[r]?parseFloat(o(t,r)):0,a[r]=undefined!==s?s:null}return u}function o(e,t){var n,a,l,s,c,f=["paddingTop","paddingBottom","borderTop","borderBottom"],p=4;if(a=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)],"%"===(l=((n=u?u(e)[t]:a?a+"px":"fontSize"===t?r(e,"1em","left",1)+"px":e.currentStyle[t]).match(d)||[])[2])&&i)if(/^top|bottom/.test(t)){for(s=(c=e.parentNode||e).offsetHeight;p--;)s-=parseFloat(o(c,f[p]));n=parseFloat(n)/100*s+"px"}else n=r(e,n);else("auto"===n||l&&"px"!==l)&&u?n=0:l&&"px"!==l&&!u&&(n=r(e,n)+"px");return n}var i,a=t.createElement("test"),l=t.documentElement,s=t.defaultView,u=s&&s.getComputedStyle,d=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,c={},f=[1/25.4,1/2.54,1/72,1/6],p=["mm","cm","pt","pc","in","mozmm"],m=6;for(l.appendChild(a),u&&(a.style.marginTop="1%",i="1%"===u(a).marginTop);m--;)c[p[m]+"toPx"]=f[m]?f[m]*c.inToPx:r(a,"1"+p[m]);l.removeChild(a),e.toPx=r}(e,window.document),e.natural_sort=function(e,t,n){n=n||{};var r,i,a=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,l=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,d=/^0/,c=function(e){return n.insensitive&&(""+e).toLowerCase()||""+e},f=c(e).replace(l,"")||"",p=c(t).replace(l,"")||"",m=f.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=p.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),y=parseInt(f.match(u))||1!==m.length&&f.match(s)&&Date.parse(f),h=parseInt(p.match(u))||y&&p.match(s)&&Date.parse(p)||null,g=n.desc?-1:1;if(h){if(y<h)return-1*g;if(y>h)return 1*g}for(var v=0,_=Math.max(m.length,b.length);v<_;v++){if(r=!(m[v]||"").match(d)&&parseFloat(m[v])||m[v]||0,i=!(b[v]||"").match(d)&&parseFloat(b[v])||b[v]||0,isNaN(r)!==isNaN(i))return(isNaN(r)?1:-1)*g;if(o(r)!==o(i)&&(r+="",i+=""),r<i)return-1*g;if(r>i)return 1*g}return 0},e.numeric_comparator=function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:e==t?0:1},Math.round10||(Math.round10=function(e,n){return t("round",e,n)}),Math.floor10||(Math.floor10=function(e,n){return t("floor",e,n)}),Math.ceil10||(Math.ceil10=function(e,n){return t("ceil",e,n)}),e.ui={dialogs:{}},e}.apply(t,[]))||(e.exports=r)},75471:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.showOnScroll){var t=r.default.fn.select2.amd.require("select2/utils"),n=function(e,t){this.$element=e,this.options=t,this._dataToConvert=t.get("data")||[]},i=null;i=null!=e.data?r.default.fn.select2.amd.require("select2/data/array"):r.default.fn.select2.amd.require("select2/data/select"),t.Extend(n,i),n.prototype.query=function(e,t){var n=[],o=this;e.page||(e.page=1);this.$element.children().each((function(){var t=(0,r.default)(this);if(t.is("option")||t.is("optgroup")){var i=o.item(t),a=o.matches(e,i);null!==a&&n.push(a)}})),t({results:n.slice(20*(e.page-1),20*e.page),pagination:{more:n.length>=20*e.page}})},e.minimumInputLength>0&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/minimumInputLength"))),e.maximumInputLength>0&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/maximumInputLength"))),e.maximumSelectionLength>0&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/maximumSelectionLength"))),e.tags&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/tags"))),null==e.tokenSeparators&&null==e.tokenizer||(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/tokenizer"))),e.dataAdapter=n,o.default.isUndefined(e.ajax)&&(e.ajax={})}return e},n(47042),n(20454);var r=i(n(19755)),o=i(n(81311));function i(e){return e&&e.__esModule?e:{default:e}}},58963:(e,t,n)=>{var r,o;r=[n(19755),n(25750)],void 0===(o=function(e,t){return function(){var n,r=!1,o=!1,i=!1;function a(e,t){r=!0,n.setActiveCell(t.range.start.row,t.range.start.cell)}function l(a,l){if(i&&o)return o=!1,void a.stopPropagation();if(!e(a.target).hasClass("slick-resizable-handle")){r=!0;var s=l.column.pos+1;m(0,s)?b()?n.resetActiveCell():n.setActiveCell(0,y().fromCell):function(e){var r=t.rangeForColumn(n,e),o=n.getSelectionModel().getSelectedRanges();return t.isRangeSelected(o,r)}(s)||n.setActiveCell(0,s)}}function s(){i=!1}function u(){i=!0,o=!1}function d(){o=!0}function c(e,o){if(a=o.cell,"row-header-column"===n.getColumns()[a].id){r=!0;var i=o.row;if(i>=n.getDataLength())return;m(i,1)?b()||0===n.getSelectionModel().getSelectedRanges().length?n.resetActiveCell():n.setActiveCell(y().fromRow,1):function(e){var r=t.rangeForRow(n,e),o=n.getSelectionModel().getSelectedRanges();return t.isRangeSelected(o,r)}(i)||n.setActiveCell(i,1)}var a}function f(e){r&&(r=!1,e.stopPropagation())}function p(e){var t,r;h()&&function(e){return function(e){return e.shiftKey&&!e.ctrlKey&&!e.altKey}(e)&&function(e){return 39===e.which||38===e.which||37===e.which||40===e.which}(e)}(e)&&(t=n.getSelectionModel(),(r=t.getSelectedRanges()).length>1&&t.setSelectedRanges([r.pop()]))}function m(e,t){return h()&&n.getActiveCell().row===e&&n.getActiveCell().cell===t}function b(){return 1===n.getSelectionModel().getSelectedRanges().length}function y(){var e=n.getSelectionModel().getSelectedRanges();return e[e.length-2]}function h(){return!!n.getActiveCell()}e.extend(this,{init:function(e){(n=e).onDragEnd.subscribe(a),n.onHeaderClick.subscribe(l),n.onClick.subscribe(c),n.onActiveCellChanged.subscribe(f),n.onKeyDown.subscribe(p),n.onHeaderMouseEnter.subscribe(u),n.onHeaderMouseLeave.subscribe(s),n.onColumnsResized.subscribe(d)},destroy:function(){n.onDragEnd.unsubscribe(a),n.onHeaderClick.unsubscribe(l),n.onActiveCellChanged.unsubscribe(f),n.onKeyDown.unsubscribe(p),n.onHeaderMouseEnter.unsubscribe(u),n.onHeaderMouseLeave.unsubscribe(s),n.onColumnsResized.unsubscribe(d)}})}}.apply(t,r))||(e.exports=o)},34038:(e,t,n)=>{var r,o,i,a=(i=n(55958))&&i.__esModule?i:{default:i};r=[n(91669)],void 0===(o=function(e){return{copyTextToClipboard:function(t){var n=document.createElement("textarea");n.style.position="fixed",n.style.top=0,n.style.left=0,n.style.width="2em",n.style.height="2em",n.style.padding=0,n.style.border="none",n.style.outline="none",n.style.boxShadow="none",n.style.background="transparent",document.body.appendChild(n),n.textContent=t,n.select();document.addEventListener("copy",(function e(n){document.removeEventListener("copy",e);var r=n.clipboardData||window.clipboardData;r&&(r.setData("text",t),window.parent.window.clipboardData=t,n.preventDefault())}));try{document.execCommand("copy")}catch(t){a.default.alert(e("Error"),e("Oops, unable to copy to clipboard"))}document.body.removeChild(n)},getTextFromClipboard:function(){return window.parent.window.clipboardData||""}}}.apply(t,r))||(e.exports=o)},14744:(e,t,n)=>{var r,o,i=n(64492);n(24812),n(69826),n(21249),r=[n(19755),n(25750),n(52947)],void 0===(o=function(e,t){return function(){var n=window.Slick,r=new n.EventHandler,o=new n.Event,a=new n.Event,l=function(t,n,r){var i=r.column;if(t.focus(),f(i)){var a=e(n.target);if(c(n)){if(e(n.target).hasClass("slick-resizable-handle"))return;a=e(n.target).parents(".slick-header-column")}a.toggleClass("selected"),a.hasClass("selected")&&o.notify(r,n),n.isPropagationStopped()||n.isImmediatePropagationStopped()||d(t,i.id)}else s(t)},s=function(t){if(e(".copy-with-header").hasClass("visibility-hidden"))e(".slick-header-column").each((function(t,n){e(n).removeClass("selected")}));else{var n=t.getSelectedRows();e(".slick-header-column").each((function(r,o){0==n.length?(e(o).removeClass("selected"),t.getColumns()[r].selected=!1):r>0&&t.getColumns()[r].selectable&&(e(o).addClass("selected"),t.getColumns()[r].selected=!0)}))}}.bind(t),u=function(n,r,o){e(".slick-header-column").each((function(r,i){var a=e(i).find('[data-cell-type="column-header-row"]'),l=n.getColumnIndex(a.data("column-id"));p(n,o,l)?(e(i).addClass("selected"),l&&(n.getColumns()[l].selected=!0)):t.areAllRangesCompleteRows(n,o)||(e(i).removeClass("selected"),l&&(n.getColumns()[l].selected=!1))}))},d=function(e,n){var r,o=e.getSelectionModel(),i=o.getSelectedRanges(),a=e.getColumnIndex(n),l=t.rangeForColumn(e,a);r=t.isRangeSelected(i,l)?t.removeRange(i,l):t.areAllRangesSingleColumns(i,e)?t.addRange(i,l):[l],o.setSelectedRanges(r)},c=function(t){return!e(t.target).hasClass("slick-header-column")},f=function(e){return!1!==e.selectable},p=function(e,n,r){var o=t.areAllRangesCompleteRows(e,n);return m(e,n,r)&&!o},m=function(e,n,r){var o=t.isRangeEntirelyWithinSelectedRanges(n,t.rangeForColumn(e,r)),i=t.isAnyCellOfColumnSelected(n,r);return o||i};e.extend(this,{init:function(e){r.subscribe(e.onHeaderClick,l.bind(null,e)),e.getSelectionModel().onSelectedRangesChanged.subscribe(u.bind(null,e)),a.subscribe((function(e,t){d(t.grid,t.column.id)}))},getColumnDefinitions:function(e){return i.map(e,(function(e){if(f(e)){var t="<span data-cell-type='column-header-row'        data-test='output-column-header'       data-column-id='"+e.id+"'>  <span class='column-description'>    <span class='column-name'>"+e.display_name+"</span>    <span class='column-type'>"+e.column_type+"</span>  </span></span>";return i.extend(e,{name:t})}return e}))},onBeforeColumnSelectAll:o,onColumnSelectAll:a,toggleColumnHeaderForCopyHeader:s})}}.apply(t,r))||(e.exports=o)},82927:(e,t,n)=>{var r,o;n(21249),r=[n(19755),n(81311),n(34038),n(25750),n(26602)],void 0===(o=function(e,t,n,r,o){var i=function(){return!e(".copy-with-header").hasClass("visibility-hidden")},a=function(t,n){t&&(e("#btn-paste-row").prop("disabled",!n),n&&window.parent.$&&window.parent.$(window.parent.document).trigger("pgadmin-sqleditor:rows-copied",i()))};return function(){var e=this||window,t=e.slickgrid,l=t.getColumns(),s=t.getSelectionModel().getSelectedRanges(),u=t.getData(),d=t.getSelectedRows(),c=t.CSVOptions;r.areAllRangesCompleteRows(t,s)?(e.copied_rows=d.map((function(e){return t.getDataItem(e)})),a(e.can_edit,!0)):(e.copied_rows=[],a(e.can_edit,!1));var f=o.rangesToCsv(u.getItems(),l,s,c,i());f&&n.copyTextToClipboard(f)}}.apply(t,r))||(e.exports=o)},18980:(e,t,n)=>{var r,o;n(24812),n(68309),r=[n(19755),n(91669),n(14744),n(18431),n(25750),n(28008)],void 0===(o=function(e,t,n,r,o,i){return function(a){var l=window.Slick,s=new r(a),u=new n(a),d=new l.Event,c=new l.Event,f=u.onBeforeColumnSelectAll,p=u.onColumnSelectAll;function m(t){o.isEntireGridSelected(t)?e("[data-id='select-all']").addClass("selected"):e("[data-id='select-all']").removeClass("selected")}e.extend(this,{init:function(t){this.grid=t,t.onHeaderClick.subscribe((function(n,r){r.column.selectAllOnClick&&!e(n.target).hasClass("slick-resizable-handle")&&function(e,t,n){o.isEntireGridSelected(e)?function(e){e.getSelectionModel().setSelectedRanges([])}(e):(d.notify(n,t),t.isPropagationStopped()||t.isImmediatePropagationStopped()||o.selectAll(e))}(t,n,r)})),t.getSelectionModel().onSelectedRangesChanged.subscribe(m.bind(null,t)),t.registerPlugin(s),t.registerPlugin(u),c.subscribe((function(e,t){o.selectAll(t.grid)}))},getColumnDefinitions:function(e){return e=u.getColumnDefinitions(e),(e=s.getColumnDefinitions(e))[0].selectAllOnClick=!0,e[0].name='<span data-id="select-all" title="'+t("Select/Deselect All")+'"><br>'+e[0].name+'<img class="select-all-icon" src="'+i("static",{filename:"img/select-all-icon.png"})+'"></img></span>',e},onBeforeGridSelectAll:d,onGridSelectAll:c,onBeforeGridColumnSelectAll:f,onGridColumnSelectAll:p})}}.apply(t,r))||(e.exports=o)},26602:(e,t,n)=>{var r,o,i=n(64492);n(2707),n(89554),n(54747),n(24812),n(69600),n(21249),n(15306),n(74916),n(41539),n(39714),n(83710),r=[n(25750),n(28210)],void 0===(o=function(e,t){return{getUnion:function(e){if(i.isEmpty(e))return[];e.sort((function(e,t){return e[0]-t[0]}));var t=[e[0]];return e.forEach((function(e){var n=i.last(t);!function(e,t){return e[0]<=t[1]+1}(e,n)?t.push(e):function(e,t){return e[1]<=t[1]}(e,n)||(n[1]=e[1])})),t},mapDimensionBoundaryUnion:function(e,t){var n=[];return e.forEach((function(e){for(var r=e[0];r<=e[1];r+=1)n.push(t(r))})),n},mapOver2DArray:function(e,t,n,r){var o=this.getUnion(e),i=this.getUnion(t);return this.mapDimensionBoundaryUnion(o,function(e){var t=this.mapDimensionBoundaryUnion(i,(function(t){return n(e,t)}));return r(t)}.bind(this))},getHeaderData:function(e,t){var n=[],r=t.field_separator||"\t",o=t.quote_char||'"';return i.each(e,(function(e){e.display_name&&e.selected&&n.push(o+e.display_name+o)})),n.join(r)},rangesToCsv:function(t,n,r,o,i){var a=r.map((function(e){return[e.fromRow,e.toRow]})),l=r.map((function(e){return[e.fromCell,e.toCell]}));e.isFirstColumnData(n)||(l=this.removeFirstColumn(l));var s=this.mapOver2DArray(a,l,this.csvCell.bind(this,t,n,o),(function(e){var t=o.field_separator||"\t";return e.join(t)}));if(i){return this.getHeaderData(n,o)+"\n"+s.join("\n")}return s.join("\n")},removeFirstColumn:function(e){var t=this.getUnion(e);if(0==t.length)return[];return 0==t[0][0]&&(0==t[0][1]?t.shift():t[0][0]=1),t},csvCell:function(e,n,r,o,a){var l=e[o][n[a].field],s=n[a].cell||"",u=r.quoting||"strings",d=r.quote_char||'"',c=function(e){return'"'==d?e.replace(/\"/g,'""'):e.replace(/\'/g,"''")};return"all"==u?l&&i.isObject(l)?l=d+t.stringify(l)+d:l?l=d+c(l.toString())+d:(i.isNull(l)||i.isUndefined(l))&&(l=""):"strings"==u&&(l&&i.isObject(l)?l=d+t.stringify(l)+d:l&&"number"!=s&&"boolean"!=s?l=d+c(l.toString())+d:"string"==s&&i.isNull(l)?l=null:(i.isNull(l)||i.isUndefined(l))&&(l="")),l}}}.apply(t,r))||(e.exports=o)},25750:(e,t,n)=>{var r,o,i=n(64492);n(57327),n(26541),n(24812),n(89554),n(54747),n(92222),n(34553),r=[n(52947)],void 0===(o=function(){var e=window.Slick,t=function(e,t){return e.fromCell==t.fromCell&&e.toCell==t.toCell&&e.fromRow==t.fromRow&&e.toRow==t.toRow},n=function(t){return new e.Range(0,1,t.getDataLength()-1,t.getColumns().length-1)},r=function(e){return!i.isUndefined(e[0].pos)},o=function(e,t){return t.fromCell==t.toCell&&0==t.fromRow&&t.toRow==e.getDataLength()-1},a=function(e,t){return 0===t.fromRow&&t.toRow===e.getDataLength()-1},l=function(e,t){return t.fromCell===function(e){return i.findIndex(e.getColumns(),(function(e){var t=e.pos;return!i.isUndefined(t)&&s(e)}))}(e)&&t.toCell===function(e){return i.findLastIndex(e.getColumns(),s)}(e)};function s(e){return i.isUndefined(e.selectable)||!0===e.selectable}return{addRange:function(e,t){return e.push(t),e},removeRange:function(e,n){return i.filter(e,(function(e){return!t(e,n)}))},isRangeSelected:function(e,n){return i.any(e,(function(e){return t(e,n)}))},areAllRangesSingleRows:function(e,t){return i.every(e,(function(e){return e.fromRow==e.toRow&&l(t,e)}))},areAllRangesSingleColumns:function(e,t){return i.every(e,o.bind(this,t))},areAllRangesCompleteRows:function(e,t){return i.every(t,(function(t){return l(e,t)}))},areAllRangesCompleteColumns:function(e,t){return i.every(t,(function(t){return a(e,t)}))},rangeForRow:function(t,n){var o=t.getColumns();return r(o)?new e.Range(n,0,n,t.getColumns().length-1):new e.Range(n,1,n,t.getColumns().length-1)},rangeForColumn:function(t,n){return new e.Range(0,n,t.getDataLength()-1,n)},isEntireGridSelected:function(e){var r=e.getSelectionModel().getSelectedRanges();return 1==r.length&&t(r[0],n(e))},getRangeOfWholeGrid:n,isFirstColumnData:r,getIndexesOfCompleteRows:function(e,t){var n=[];return t.forEach((function(t){l(e,t)&&(n=n.concat(i.range(t.fromRow,t.toRow+1)))})),n},selectAll:function(e){var t=n(e);e.getSelectionModel().setSelectedRanges([t])},isRangeAColumn:o,rangeHasCompleteColumns:a,rangeHasCompleteRows:l,isAnyCellOfColumnSelected:function(e,t){return i.any(e,(function(e){return e.fromCell<=t&&e.toCell>=t}))},isRangeEntirelyWithinSelectedRanges:function(e,t){return i.any(e,(function(e){return e.fromCell<=t.fromCell&&e.toCell>=t.toCell&&e.fromRow<=t.fromRow&&e.toRow>=t.toRow}))},isAnyCellOfRowSelected:function(e,t){return i.any(e,(function(e){return e.fromRow<=t&&e.toRow>=t}))}}}.apply(t,r))||(e.exports=o)},18431:(e,t,n)=>{var r,o;n(24812),n(69826),n(91058),r=[n(19755),n(25750),n(14744),n(52947)],void 0===(o=function(e,t,n){return function(){var r=new window.Slick.EventHandler,o=new n,i=function(t,n,r){if("row-header-column"===t.getColumns()[r.cell].id){var i=e(n.target);"row-header-selector"!=i.data("cell-type")&&(i=e(n.target).find('[data-cell-type="row-header-selector"]')),i.parent().toggleClass("selected"),l(t,r.row),o.toggleColumnHeaderForCopyHeader(t)}},a=function(t,n,r){e('[data-cell-type="row-header-selector"]').each((function(n,o){var i=e(o),a=parseInt(i.data("row"));s(t,r,a)?i.parent().addClass("selected"):i.parent().removeClass("selected")}))},l=function(e,n){var r,o=e.getSelectionModel(),i=o.getSelectedRanges(),a=t.rangeForRow(e,n);r=t.isRangeSelected(i,a)?t.removeRange(i,a):t.areAllRangesSingleRows(i,e)?t.addRange(i,a):[a],o.setSelectedRanges(r)},s=function(e,n,r){var o=t.areAllRangesCompleteColumns(e,n);return function(e,n,r){var o=t.isRangeEntirelyWithinSelectedRanges(n,t.rangeForRow(e,r)),i=t.isAnyCellOfRowSelected(n,r);return o||i}(e,n,r)&&!o};e.extend(this,{init:function(e){e.getSelectionModel().onSelectedRangesChanged.subscribe(a.bind(null,e)),r.subscribe(e.onClick,i.bind(null,e))},getColumnDefinitions:function(e){return e.unshift({id:"row-header-column",name:"",selectable:!1,focusable:!1,formatter:function(e){return'<span data-row="'+e+'" data-cell-type="row-header-selector">'+(e+1)+"</span>"},width:30}),e}})}}.apply(t,r))||(e.exports=o)},40904:(e,t,n)=>{var r,o;n(85827),n(69826),n(41539),n(66992),n(33948),r=[n(19755),n(81311),n(25750)],void 0===(o=function(e,t,n){function r(t){e(t).prop("disabled",!0)}function o(t){e(t).prop("disabled",!1)}function i(e,n,r,o){return t.reduce(e,(function(e,i){var a=r.getItem(i);return function(e,n){if(t.isUndefined(e))return!0;return!t.isUndefined(t.find(n,(function(n){return t.isUndefined(e[n])})))}(a,n)||(e[a[o]]=function(e,n){var r={};e&&e.length&&t.each(t.keys(n),(function(o){t.contains(e,o)&&(r[o]=n[o])}));return r}(n,a)),e}),{})}return function(){var e=this;function a(t){e.editor.handler.data_store.staged_rows=t}if(r("#btn-delete-row"),r("#btn-copy-row"),this.selection.getSelectedRanges().length>0&&o("#btn-copy-row"),n.areAllRangesCompleteRows(e.grid,e.selection.getSelectedRanges())){var l=n.getIndexesOfCompleteRows(this.grid,this.selection.getSelectedRanges()),s=function(e,n){var r=e.grid.getData();return i(n,t.keys(e.keys),r,e.client_primary_key)}(e,l);a(s),t.isEmpty(s)&&this.selection.setSelectedRows([]),e.editor.handler.can_edit&&!t.isEmpty(s)&&o("#btn-delete-row")}else a({})}}.apply(t,r))||(e.exports=o)},12436:(e,t,n)=>{var r,o;function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(47042),n(41539),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),r=[n(19755),n(81311),n(25750),n(1950),n(52947)],void 0===(o=function(e,t,n,r){return function(o){var a,l,s=window.Slick,u=[],d=this,c=new s.CellRangeSelector({selectionCss:{border:"2px solid black"},offset:{top:0,left:-1,height:2,width:1}}),f={selectActiveCell:!0};function p(e){var t,n=[],r=i(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;a.canCellBeSelected(o.fromRow,o.fromCell)&&a.canCellBeSelected(o.toRow,o.toCell)&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}return n}function m(e){(u&&0!==u.length||e&&0!==e.length)&&(u=p(e),d.onSelectedRangesChanged.notify(u))}function b(){return u}function y(e){if(a.getEditorLock().isActive())return e.stopPropagation(),!1}function h(e,t){m([t.range])}function g(e,t){l.selectActiveCell&&null!=t.row&&null!=t.cell&&m([new s.Range(t.row,t.cell)])}function v(e){var t,n,r,o,i,l,u,d,c,f,y,h=a.getActiveCell();function g(t){return e.which===t}if(h&&function(e){return e.shiftKey&&!e.ctrlKey&&!e.altKey&&function(e){return 39==e.which||37==e.which||38==e.which||40==e.which}(e)}(e)){(t=b()).length||t.push(new s.Range(h.row,h.cell)),(n=t.pop()).contains(h.row,h.cell)||(n=new s.Range(h.row,h.cell));var v=(f=h,(y={}).row=(c=n).fromRow===f.row?c.toRow:c.fromRow,y.cell=c.fromCell===f.cell?c.toCell:c.fromCell,y);switch(e.which){case 37:v.cell-=1;break;case 39:v.cell+=1;break;case 38:v.row-=1;break;case 40:v.row+=1}var _=(o=v,i=(r=h).cell<=o.cell?r.cell:o.cell,l=r.cell<=o.cell?o.cell:r.cell,u=r.row<=o.row?r.row:o.row,d=r.row<=o.row?o.row:r.row,new s.Range(u,i,d,l));if(p([_]).length){var w=h.row===_.fromRow?_.toRow:_.fromRow,O=h.cell===_.fromCell?_.toCell:_.fromCell;g(39)||g(37)?a.scrollColumnIntoView(O):(g(38)||g(40))&&a.scrollRowIntoView(w),t.push(_)}else t.push(n);m(t),e.preventDefault(),e.stopPropagation()}}function _(){var e=c.getCurrentRange();t.isUndefined(e)||a.onDragEnd.notify({range:e})}e.extend(this,{getSelectedRanges:b,setSelectedRanges:m,setSelectedRows:function(e){u=[];var t,r=i(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;u.push(n.rangeForRow(a,o))}}catch(e){r.e(e)}finally{r.f()}},init:function(t){l=e.extend(!0,{},f,o),(a=t).onActiveCellChanged.subscribe(g),a.onKeyDown.subscribe(v),t.registerPlugin(c),c.onCellRangeSelected.subscribe(h),c.onBeforeCellRangeSelected.subscribe(y),e(r.default).on("mouseup",_)},destroy:function(){a.onActiveCellChanged.unsubscribe(g),a.onKeyDown.unsubscribe(v),c.onCellRangeSelected.unsubscribe(h),c.onBeforeCellRangeSelected.unsubscribe(y),a.unregisterPlugin(c),e(r.default).off("mouseup",_)},onSelectedRangesChanged:new s.Event})}}.apply(t,r))||(e.exports=o)},73870:(e,t)=>{var n;void 0===(n=function(){return function(e){var t=Math.abs(e),n=0,r=["bytes","kB","MB","GB","TB","PB"];if(t<10240)return t+" "+r[n];do{t/=1024,n+=1}while(t>10239);return Math.round(t)+" "+r[n]}}.apply(t,[]))||(e.exports=n)},79387:(e,t,n)=>{var r,o=n(19755);n(24812),n(69826),(r=o).extend(!0,window,{Slick:{Plugins:{HeaderButtons:function(e){var t,n=this,o=new window.Slick.EventHandler,i={buttonCssClass:"slick-header-button"};function a(t,n){var o=n.column;if(o.header&&o.header.buttons)for(var i=o.header.buttons.length;i--;){var a=o.header.buttons[i],l=r("<div></div>").addClass(e.buttonCssClass).data("column",o).data("button",a);a.content&&l.append(a.content),a.showOnHover&&l.addClass("slick-header-button-hidden"),a.image&&l.css("backgroundImage","url("+a.image+")"),a.cssClass&&l.addClass(a.cssClass),a.tooltip&&l.attr("title",a.tooltip),a.command&&l.data("command",a.command),a.handler&&l.bind("click",a.handler),l.bind("click",s).prependTo(n.node)}}function l(t,n){var o=n.column;o.header&&o.header.buttons&&r(n.node).find("."+e.buttonCssClass).remove()}function s(e){var o=r(this).data("command"),i=r(this).data("column"),a=r(this).data("button");null!=o&&(n.onCommand.notify({grid:t,column:i,command:o,button:a},e,n),t.updateColumnHeader(i.id)),e.preventDefault(),e.stopPropagation()}r.extend(this,{init:function(n){e=r.extend(!0,{},i,e),t=n,o.subscribe(t.onHeaderCellRendered,a).subscribe(t.onBeforeHeaderCellDestroy,l),t.setColumns(t.getColumns())},destroy:function(){o.unsubscribeAll()},onCommand:new window.Slick.Event})}}}})},40370:(e,t,n)=>{var r,o;r=[n(82927),n(25750)],void 0===(o=function(e,t){return function(n,r){var o=n.keyCode,i=n.ctrlKey||n.metaKey,a=this||window;a.slickgrid=r.grid,i&&67==o&&e.apply(a),i&&65==o&&t.selectAll(a.slickgrid)}}.apply(t,r))||(e.exports=o)},5205:(e,t,n)=>{var r,o=n(19755);function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(47042),n(41539),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),n(69826),(r=o).extend(!0,window,{Slick:{AutoColumnSize:function(){var e,t,n,o={A:65};function a(e){e.ctrlKey&&e.shiftKey&&e.keyCode===o.A&&l()}function l(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.find(".slick-header-column"),a=e.getColumns();i.each((function(t,i){var l=r(i).data("column");if(void 0===l.width||isNaN(l.width)||o){var s=d(i),c=e.getColumnIndex(l.id),f=a[c],p=Math.max(s,u(l,c))+1;void 0!==n&&n>0&&(p=Math.min(n,p)),f.width=p+(l.addWidth||0)}})),e.setColumns(a),e.onColumnsResized.notify()}function s(t){var n=r(t.currentTarget).closest(".slick-header-column"),o=n.data("column");if(o&&o.resizable){t.preventDefault(),t.stopPropagation();var i=d(n[0]),a=e.getColumnIndex(o.id),l=e.getColumns(),s=l[a],c=Math.max(i,u(o,a))+1;c!==s.width&&(s.width=c,e.setColumns(l),e.onColumnsResized.notify())}}function u(o,a){var l=[],s=function(){var e=r('<div class="slick-row"><div class="slick-cell"></div></div>');e.find(".slick-cell").css({visibility:"hidden","text-overflow":"initial","white-space":"nowrap"});var n=t.find(".grid-canvas").first();return r(n).append(e),e}(),u=e.getData();window.Slick.Data&&u instanceof window.Slick.Data.DataView&&(u=u.getItems());var d,c=i(u);try{for(c.s();!(d=c.n()).done;){var f=d.value;l.push(f[o.field])}}catch(e){c.e(e)}finally{c.f()}var p=function(e,t){var n=r(e.find(".slick-cell"));return n.append(t),n.find("*").css("position","relative"),n.outerWidth()+1}(s,function(e,t,o,i,a){var l=0,s=null,u=t.formatter;return r(e).each((function(e,d){var c;u&&(d=(c=r("<span>"+u(e,o,d,t,i[e])+"</span>")).text()||d);var f=d?function(e,t){return n.font=e.css("font-size")+" "+e.css("font-family"),n.measureText(t).width}(a,d):0;f>l&&(l=f,s=c||d)})),s}(l,o,a,u,s));return function(e){r(e).remove()}(s),p}function d(e){var t,n=e.cloneNode(!0);return n.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;",e.parentNode.insertBefore(n,e),t=n.offsetWidth,n.parentNode.removeChild(n),t}return{init:function(o){(t=r((e=o).getContainerNode())).on("dblclick.autosize",".slick-resizable-handle",s),t.keydown(a),n=document.createElement("canvas").getContext("2d"),e.resizeAllColumns=l},destroy:function(){t.off()}}}}})},92007:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.calculateQueryRunTime=function(e,t){var n,i,a,l=(0,r.default)(t).diff(e);return n=parseInt(l/1e3),l%=1e3,i=parseInt(n/60),n%=60,a=parseInt(i/60),i%=60,((a>0?a+" "+(0,o.default)("hr")+" ":"")+(i>0?i+" "+(0,o.default)("min")+" ":"")+(a<=0&&n>0?n+" "+(0,o.default)("secs")+" ":"")+(a<=0&&i<=0?l+" "+(0,o.default)("msec")+" ":"")).trim()},n(91058),n(73210);var r=i(n(30381)),o=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}},45592:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.callRenderAfterPoll=function(e,t,n){if(e.query_end_time=new Date,e.rows_affected=n.rows_affected,e.has_more_rows=n.has_more_rows,function(e){return null!=e.colinfo}(n))e._render(n);else{e.total_time=(0,o.calculateQueryRunTime)(e.query_start_time,e.query_end_time);var r=(0,i.default)("Query returned successfully in %s.",e.total_time);n.result?n.result+="\n\n"+r:n.result=r,e.update_msg_history(!0,n.result,!1),e.reset_data_store(),function(e){return e.info_notifier_timeout>=0}(e)&&t.success(r,e.info_notifier_timeout),e.enable_disable_download_btn(!0)}(function(e){return e.is_query_tool})(e)&&e.disable_tool_buttons(!1);e.trigger("pgadmin-sqleditor:check_synchronous_db_name_change",n),e.setIsQueryRunning(!1),e.trigger("pgadmin-sqleditor:loading-icon:hide")},n(83710);var r,o=n(92007),i=(r=n(91669))&&r.__esModule?r:{default:r}},65887:(e,t,n)=>{var r=n(64492);n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(4129),n(38880),n(69070),n(32564),n(83710);var o=p(n(91669)),i=p(n(19755)),a=p(n(28008)),l=p(n(9669)),s=f(n(90865)),u=f(n(20882)),d=f(n(81240));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function p(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}var g=function(){function e(t){b(this,e),this.sqlEditor=t}return h(e,[{key:"setMessage",value:function(e){this.sqlEditor.trigger("pgadmin-sqleditor:loading-icon:message",(0,o.default)(e))}},{key:"show",value:function(e){this.sqlEditor.trigger("pgadmin-sqleditor:loading-icon:show",e)}},{key:"hide",value:function(){this.sqlEditor.trigger("pgadmin-sqleditor:loading-icon:hide")}}]),e}(),v=function(){function e(t,n){b(this,e),this.sqlServerObject=t,this.loadingScreen=new g(t),this.userManagement=n}return h(e,[{key:"delayedPoll",value:function(){var e=this;setTimeout((function(){e.poll()}),e.sqlServerObject.POLL_FALLBACK_TIME())}},{key:"execute",value:function(t,n,r){if(t.length<=0)(0,i.default)("#btn-flash").prop("disabled",!1);else{var o=this;o.explainPlan=n;var a=e.prepareAnalyzeSql(t,n);o.initializeExecutionOnSqlEditor(a),l.default.post(this.generateURLReconnectionFlag(r),JSON.stringify(a),{headers:{"Content-Type":"application/json"}}).then((function(t){var n=t.data;o.removeGridViewMarker(),o.updateSqlEditorLastTransactionStatus(n.data.transaction_status),e.isSqlCorrect(n)?(o.loadingScreen.setMessage("Waiting for the query to complete..."),d.disable_connection_dropdown(!0),o.updateSqlEditorStateWithInformationFromServer(n.data),o.delayedPoll()):(o.loadingScreen.hide(),o.enableSQLEditorButtons(),o.disableDownloadButton(),t.data.data.transaction_status==u.TRANSACTION_STATUS_INTRANS||t.data.data.transaction_status==u.TRANSACTION_STATUS_INERROR?o.enableTransactionButtons():o.disableTransactionButtons(),o.sqlServerObject.update_msg_history(!1,n.data.result),"notifies"in n.data&&o.sqlServerObject.update_notifications(n.data.notifies),o.sqlServerObject._highlight_error(n.data.result))})).catch((function(e){o.onExecuteHTTPError(e)}))}}},{key:"generateURLReconnectionFlag",value:function(e){var t=(0,a.default)("sqleditor.query_tool_start",{trans_id:this.sqlServerObject.transId});return e&&(t+="?connect=1"),t}},{key:"poll",value:function(){var t=this,n=this;l.default.get((0,a.default)("sqleditor.poll",{trans_id:n.sqlServerObject.transId})).then((function(r){n.updateSqlEditorLastTransactionStatus(r.data.data.transaction_status),r.data.data.transaction_status==u.TRANSACTION_STATUS_INTRANS||r.data.data.transaction_status==u.TRANSACTION_STATUS_INERROR?n.enableTransactionButtons():n.disableTransactionButtons(),e.isQueryFinished(r)?(t.sqlServerObject.close_on_idle_transaction&&r.data.data.transaction_status==u.TRANSACTION_STATUS_IDLE&&t.sqlServerObject.check_needed_confirmations_before_closing_panel(),n.loadingScreen.setMessage("Loading data from the database server and rendering..."),n.sqlServerObject.call_render_after_poll(r.data.data),"notifies"in r.data.data&&n.sqlServerObject.update_notifications(r.data.data.notifies)):e.isQueryStillRunning(r)?(t.delayedPoll(),n.sqlServerObject.setIsQueryRunning(!0),r.data.data.result&&n.sqlServerObject.update_msg_history(r.data.data.status,r.data.data.result,!1)):e.isConnectionToServerLostWhilePolling(r)?(n.loadingScreen.hide(),n.sqlServerObject.is_query_tool&&n.enableSQLEditorButtons(),n.sqlServerObject.update_msg_history(!1,r.data.data.result,!0)):e.isQueryCancelled(r)&&(n.loadingScreen.hide(),n.sqlServerObject.update_msg_history(!1,"Execution Cancelled!",!0)),n.sqlServerObject.is_query_tool&&!e.isQueryStillRunning(r)&&d.disable_connection_dropdown(!1)})).catch((function(t){if(n.sqlServerObject.resetQueryHistoryObject(n.sqlServerObject),n.loadingScreen.hide(),n.sqlServerObject.setIsQueryRunning(!1),n.sqlServerObject.is_query_tool&&(n.enableSQLEditorButtons(),d.disable_connection_dropdown(!1)),t.response){if(e.wasConnectionLostToPythonServer(t.response))return void n.handleConnectionToServerLost();var r=t.response.data;if(n.userManagement.isPgaLoginRequired(r))return n.userManagement.pgaLogin();var o=e.extractErrorMessage(r);n.sqlServerObject.update_msg_history(!1,o),n.sqlServerObject._highlight_error(o)}else{if(t.request)return void n.handleConnectionToServerLost();console.error(t)}}))}},{key:"initializeExecutionOnSqlEditor",value:function(e){this.loadingScreen.show((0,o.default)("Running query...")),(0,i.default)("#btn-flash").prop("disabled",!0),this.disableDownloadButton(),this.sqlServerObject.query_start_time=new Date,"object"===m(e)?this.sqlServerObject.query=e.sql:this.sqlServerObject.query=e,this.sqlServerObject.rows_affected=0,this.sqlServerObject._init_polling_flags(),this.disableSQLEditorButtons(),this.disableTransactionButtons()}},{key:"onExecuteHTTPError",value:function(t){if(this.loadingScreen.hide(),this.enableSQLEditorButtons(),e.wasConnectionLostToPythonServer(t.response))this.handleConnectionToServerLost();else{if(this.userManagement.isPgaLoginRequired(t.response)&&(this.sqlServerObject.saveState("check_data_changes_to_execute_query",[this.explainPlan]),this.userManagement.pgaLogin()),s.httpResponseRequiresNewTransaction(t.response)&&(this.sqlServerObject.saveState("check_data_changes_to_execute_query",[this.explainPlan]),this.sqlServerObject.initTransaction()),this.wasDatabaseConnectionLost(t)&&(this.sqlServerObject.saveState("check_data_changes_to_execute_query",[this.explainPlan]),this.sqlServerObject.handle_connection_lost(!1,t)),this.isCryptKeyMissing(t))return this.sqlServerObject.saveState("check_data_changes_to_execute_query",[this.explainPlan]),void this.sqlServerObject.handle_cryptkey_missing();var n=t.response.data.errormsg;this.sqlServerObject.update_msg_history(!1,n)}}},{key:"wasDatabaseConnectionLost",value:function(e){return 503===e.response.status&&void 0!==e.response.data.info&&"CONNECTION_LOST"===e.response.data.info}},{key:"isCryptKeyMissing",value:function(e){return 503===e.response.status&&void 0!==e.response.data.info&&"CRYPTKEY_MISSING"===e.response.data.info}},{key:"removeGridViewMarker",value:function(){this.sqlServerObject.gridView.marker&&(this.sqlServerObject.gridView.marker.clear(),delete this.sqlServerObject.gridView.marker,this.sqlServerObject.gridView.marker=null,this.sqlServerObject.gridView.query_tool_obj.removeLineClass(this.sqlServerObject.marked_line_no,"wrap","CodeMirror-activeline-background"))}},{key:"disableDownloadButton",value:function(){this.sqlServerObject.enable_disable_download_btn(!0)}},{key:"enableSQLEditorButtons",value:function(){this.sqlServerObject.disable_tool_buttons(!1)}},{key:"disableSQLEditorButtons",value:function(){this.sqlServerObject.disable_tool_buttons(!0)}},{key:"enableTransactionButtons",value:function(){this.sqlServerObject.disable_transaction_buttons(!1)}},{key:"disableTransactionButtons",value:function(){this.sqlServerObject.special_sql=void 0,this.sqlServerObject.disable_transaction_buttons(!0)}},{key:"handleConnectionToServerLost",value:function(){this.sqlServerObject.update_msg_history(!1,(0,o.default)("Not connected to the server or the connection to the server has been closed."))}},{key:"updateSqlEditorStateWithInformationFromServer",value:function(e){this.sqlServerObject.can_edit=e.can_edit,this.sqlServerObject.can_filter=e.can_filter,this.sqlServerObject.info_notifier_timeout=e.info_notifier_timeout}},{key:"updateSqlEditorLastTransactionStatus",value:function(e){this.sqlServerObject.last_transaction_status=e}}],[{key:"prepareAnalyzeSql",value:function(e,t){return{sql:e,explain_plan:t}}},{key:"wasConnectionLostToPythonServer",value:function(e){return r.isUndefined(e)||r.isUndefined(e.data)}},{key:"isSqlCorrect",value:function(e){return e.data.status}},{key:"extractErrorMessage",value:function(e){var t=e.errormsg;return void 0!==e.responseJSON&&void 0!==e.responseJSON.errormsg&&(t=e.responseJSON.errormsg),t}},{key:"isQueryFinished",value:function(e){return"Success"===e.data.data.status}},{key:"isQueryStillRunning",value:function(e){return"Busy"===e.data.data.status}},{key:"isQueryCancelled",value:function(e){return"Cancel"===e.data.data.status}},{key:"isConnectionToServerLostWhilePolling",value:function(e){return"NotConnected"===e.data.data.status}}]),e}();e.exports={ExecuteQuery:v}},87913:(e,t,n)=>{n(69826),n(68309),n(5735),n(83753),n(32564);var r=p(n(91669)),o=p(n(28008)),i=p(n(19755)),a=p(n(55455)),l=p(n(55112)),s=p(n(12030)),u=p(n(9669)),d=p(n(16240)),c=n(90865),f=p(n(55958));function p(e){return e&&e.__esModule?e:{default:e}}var m=n(94860),b={geturl:function(e,t){var n=(0,o.default)("sqleditor.get_filter_data",{trans_id:e});return t&&(n+="?connect=1"),n},dialog:function(e,t){var n=(0,r.default)("Sort/Filter options");i.default.ajax({url:this.geturl(e.transId,t),headers:{"Cache-Control":"no-cache"}}).done((function(t){var c=t.data.result;a.default.filterDialog&&delete a.default.filterDialog,a.default.dialog("filterDialog",(function(){var t=(0,i.default)("<div class='data_sorting_dialog'></div>");return{main:function(){this.set("title",(0,r.default)("Sort/Filter options"))},build:function(){this.elements.content.appendChild(t.get(0)),a.default.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,r.default)("Help"),"aria-label":(0,r.default)("Help"),url:(0,o.default)("help.static",{filename:"editgrid.html"})}},{text:(0,r.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button","data-btn-name":"cancel"},{text:(0,r.default)("OK"),className:"btn btn-primary fa fa-check pg-alertify-button","data-btn-name":"ok"}],options:{title:n,padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1,autoReset:!1}}},hooks:{onclose:function(){this.view&&(this.filterCollectionModel.stopSession(),this.view.model.stopSession(),this.view.remove({data:!0,internal:!0,silent:!0}))}},prepare:function(){var e=this;t.html(""),this.__internal.buttons[2].element.disabled=!0,this.statusBar=(0,i.default)('<div class=\'pg-prop-status-bar pg-el-xs-12 d-none\'>  <div class="error-in-footer">     <div class="d-flex px-2 py-1">       <div class="pr-2">         <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>       </div>       <div class="alert-text" role="alert"></div>     </div>   </div> </div>').appendTo(t),this.showFilterProgress=(0,i.default)('<div id="show_filter_progress" class="pg-sp-container sql-editor-busy-fetching d-none">\n                  <div class="pg-sp-content">\n                      <div class="row"><div class="col-12 pg-sp-icon sql-editor-busy-icon"></div></div>\n                      <div class="row"><div class="col-12 pg-sp-text sql-editor-busy-text">'+(0,r.default)("Loading data...")+"</div></div>\n                  </div>\n              </div>").appendTo(t),(0,i.default)(e.showFilterProgress[0]).removeClass("d-none"),e.filterCollectionModel=(0,d.default)(c);var n=s.default.generateViewSchema(null,e.filterCollectionModel,"create",null,null,!0),o=this.view=new s.default.Dialog({el:"<div></div>",model:e.filterCollectionModel,schema:n});(0,i.default)(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),t.append(o.render().$el),o.listenTo(o.model,"pgadmin-session:start",(function(){o.listenTo(o.model,"pgadmin-session:invalid",(function(t){e.statusBar.removeClass("d-none"),(0,i.default)(e.statusBar.find(".alert-text")).html(t),e.__internal.buttons[2].element.disabled=!0})),o.listenTo(o.model,"pgadmin-session:valid",(function(){e.statusBar.addClass("d-none"),(0,i.default)(e.statusBar.find(".alert-text")).html(""),e.__internal.buttons[2].element.disabled=!1}))})),o.listenTo(o.model,"pgadmin-session:stop",(function(){o.stopListening(o.model,"pgadmin-session:invalid"),o.stopListening(o.model,"pgadmin-session:valid")})),o.model.startNewSession(),o.model.get("data_sorting").add(c.data_sorting),(0,i.default)(e.showFilterProgress[0]).addClass("d-none")},callback:function(t){var n=this;if("dialog_help"==t.button.element.name)t.cancel=!0,l.default.Browser.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);else if("ok"===t.button["data-btn-name"]){t.cancel=!0;var a=this.filterCollectionModel.toJSON();(0,i.default)(n.showFilterProgress[0]).removeClass("d-none"),u.default.put((0,o.default)("sqleditor.set_filter_data",{trans_id:e.transId}),a).then((function(t){(0,i.default)(n.showFilterProgress[0]).addClass("d-none");var o=t.data.data;o.status?setTimeout((function(){n.close(),f.default.success((0,r.default)("Filter updated successfully")),m.executeQuery(e)}),10):f.default.alert((0,r.default)("Validation Error"),o.result)})).catch((function(t){(0,i.default)(n.showFilterProgress[0]).addClass("d-none"),e.onExecuteHTTPError(t),setTimeout((function(){f.default.error(t)}),10)}))}else n.close()}}})),a.default.filterDialog(n).resizeTo(l.default.Browser.stdW.md,l.default.Browser.stdH.md)})).fail((function(t){(0,c.handleQueryToolAjaxError)(l.default,e,t,"_show_filter",[],!0)}))}};e.exports=b},16240:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={asc:(0,r.default)("ASC"),desc:(0,r.default)("DESC")},n=i.default.Browser.DataModel.extend({idAttribute:"name",defaults:{name:void 0,order:"asc"},schema:[{id:"name",name:"name",label:(0,r.default)("Column"),cell:"select2",editable:!0,cellHeaderClasses:"width_percent_60",headerCell:a.default.Extension.CustomHeaderCell,disabled:!1,control:"select2",select2:{allowClear:!1},options:function(){return o.default.map(e.column_list,(function(e){return{value:e,label:e}}))}},{id:"order",name:"order",label:(0,r.default)("Order"),control:"select2",cell:"select2",cellHeaderClasses:"width_percent_40",headerCell:a.default.Extension.CustomHeaderCell,editable:!0,deps:["type"],select2:{allowClear:!1},options:function(){return o.default.map(t,(function(e,t){return{value:t,label:e}}))}}],validate:function(){var e=null;return this.errorModel.clear(),o.default.isUndefined(this.get("name"))||o.default.isNull(this.get("name"))||""==String(this.get("name")).replace(/^\s+|\s+$/g,"")?(e=(0,r.default)("Please select a column."),this.errorModel.set("name",e),e):o.default.isUndefined(this.get("order"))||o.default.isNull(this.get("order"))||""==String(this.get("order")).replace(/^\s+|\s+$/g,"")?(e=(0,r.default)("Please select the order."),this.errorModel.set("order",e),e):null}});return new(i.default.Browser.DataModel.extend({idAttribute:"sql",defaults:{sql:e.sql||null},schema:[{id:"sql",label:(0,r.default)("SQL Filter"),cell:"string",type:"text",mode:["create"],control:l.default.SqlFieldControl.extend({render:function(){var e=l.default.SqlFieldControl.prototype.render.apply(this,arguments);return setTimeout((function(){e.sqlCtrl.focus()}),1e3),e}}),extraClasses:["custom_height_css_class"]},{id:"data_sorting",name:"data_sorting",label:(0,r.default)("Data Sorting"),model:n,editable:!0,type:"collection",mode:["create"],control:"unique-col-collection",uniqueCol:["name"],canAdd:!0,canEdit:!1,canDelete:!0,visible:!0,version_compatible:!0}],validate:function(){return null}}))},n(21249),n(15306),n(74916),n(32564);var r=s(n(91669)),o=s(n(81311)),i=s(n(55112)),a=s(n(71158)),l=s(n(12030));function s(e){return e&&e.__esModule?e:{default:e}}},74898:(e,t,n)=>{var r=n(64492);n(21249),n(41539),n(66992),n(33948),n(44914),n(32564),n(51532),n(78783),n(26541),n(91058),n(82772),n(69600);var o=l(n(91669)),i=n(48764),a=l(n(19755));function l(e){return e&&e.__esModule?e:{default:e}}var s=null,u=null,d={panel_closed:!0,go_for_render:function(e,t,n,o){var i=this;if(i.map_component||(i.map_component=function(){var e={radius:4,weight:3},t={weight:2},n={closeButton:!1,minWidth:260,maxWidth:300,maxHeight:300},o=(0,a.default)('<div class="geometry-viewer-container"></div>'),i=s.map(o.get(0),{preferCanvas:!0}).setZoom(0);i.attributionControl.setPrefix("");var l=s.geoJSON([],{style:t,pointToLayer:function(t,n){return s.circleMarker(n,e)}});l.addTo(i);var u={Empty:s.tileLayer(""),Street:s.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>'}),Topography:s.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>, &copy; <a href="http://viewfinderpanoramas.org" target="_blank">SRTM</a>, &copy; <a href="https://opentopomap.org" target="_blank">OpenTopoMap</a>'}),"Gray Style":s.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>, &copy; <a href="http://cartodb.com/attributions" target="_blank">CartoDB</a>',subdomains:"abcd",maxZoom:19}),"Light Color":s.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>, &copy; <a href="http://cartodb.com/attributions" target="_blank">CartoDB</a>',subdomains:"abcd",maxZoom:19}),"Dark Matter":s.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>, &copy; <a href="http://cartodb.com/attributions" target="_blank">CartoDB</a>',subdomains:"abcd",maxZoom:19})},d=s.control.layers(u),c=u.Street,f=r.values(u),p=s.control({position:"topright"});p.onAdd=function(){return this._div=s.DomUtil.create("div","geometry-viewer-info-control"),this._div},p.update=function(e){this._div.innerHTML=e};var m=function(){i.options.crs!==s.CRS.EPSG3857&&(i.options.crs=s.CRS.EPSG3857,d.addTo(i),i.addLayer(c),o.addClass("geometry-viewer-container-plain-background"),i.setMinZoom(0))},b=function(){i.options.crs!==s.CRS.Simple&&(i.options.crs=s.CRS.Simple,d.remove(),r.each(f,(function(e){i.hasLayer(e)&&(c=e,e.remove())})),o.removeClass("geometry-viewer-container-plain-background"))};return b(),m(),{mapContainer:o,clearMap:function(){i.closePopup(),p.remove(),l.clearLayers()},loseFocus:function(){i.fire("blur")},renderMap:function(e){var t=e.geoJSONs,r=e.selectedSRID,o=e.getPopupContent,a=e.infoList,u=!1;0===t.length&&(u=!0);try{l.addData(t)}catch(e){a.push("An error occurred while rendering data."),u=!0}var c=l.getBounds();if(c.isValid()||(u=!0),a.length>0){i.options.crs===s.CRS.EPSG3857?(d.remove(),p.addTo(i),d.addTo(i)):p.addTo(i);var f=function(e){return e.join("<br>")}(a);p.update(f)}if(u)return b(),void i.setView([0,0],i.getZoom());if("function"==typeof o){var y=function(e){e.bindPopup((function(){return o(e.feature.geometry)}),n)};l.eachLayer(y)}c=c.pad(.1);var h=Math.max(c.getNorth()-c.getSouth(),c.getEast()-c.getWest());if(4326===r)m();else if(b(),h>=180){var g=Math.floor(Math.log2(360/h))-2;i.setMinZoom(g)}else i.setMinZoom(0);h>0?i.fitBounds(c):i.setView(c.getCenter(),i.getZoom())},resizeMap:function(){setTimeout((function(){i.invalidateSize()}),10)}}}()),i.panel_closed){var l=window.wcDocker,d=e.gridView.geometry_viewer=e.gridView.docker.addPanel("geometry_viewer",l.DOCK.STACKED,e.gridView.data_output_panel);(0,a.default)("#geometry_viewer_panel")[0].appendChild(i.map_component.mapContainer.get(0)),i.panel_closed=!1,d.on(l.EVENT.CLOSED,(function(){(0,a.default)("#geometry_viewer_panel").empty(),i.map_component.clearMap(),i.panel_closed=!0})),d.on(l.EVENT.RESIZE_ENDED,(function(){d.isVisible()&&i.map_component.resizeMap()})),d.on(l.EVENT.VISIBILITY_CHANGED,(function(e){e?i.map_component.resizeMap():i.map_component.loseFocus()}))}e.gridView.geometry_viewer.focus(),i.map_component.clearMap();var f=c(t,n,o,u);i.map_component.renderMap(f)},render_geometries:function(e,t,r,o){var i=this;n.e(322).then(function(a){s=n(45243),u=n(11011).Geometry,i.go_for_render(e,t,r,o)}.bind(null,n)).catch((function(e){throw e}))},add_header_button:function(e){e.header={buttons:[{cssClass:"div-view-geometry-column",tooltip:"View all geometries in this column",showOnHover:!1,command:"view-geometries",content:'<button class="btn-xs btn-primary"><i class="fa fa-eye" aria-hidden="true"></i></button>'}]}},parse_data:c};function c(e,t,n,a){var l=t[n].field,s=[],u=[],d=[],c=[],f=new Map,p=!1,m=0,b=!1,y=!1;if(0===e.length)return c.push("Empty row."),{geoJSONs:[],selectedSRID:0,getPopupContent:void 0,infoList:c};if(r.every(e,(function(e){try{var t=e[l],n=i.Buffer.from(t,"hex"),r=a.parse(n);if(r.hasZ)s.push(r);else{if((m+=n.byteLength)>20971520)return b=!0,!1;if(u.length>=1e5)return y=!0,!1;r.srid||(r.srid=0),u.push(r),f.set(r,e)}}catch(t){d.push(e)}return!0})),(b||y)&&c.push(u.length+" of "+e.length+" geometries rendered."),s.length>0&&c.push((0,o.default)("3D geometries not rendered.")),d.length>0&&c.push((0,o.default)("Unsupported geometries not rendered.")),0===u.length)return{geoJSONs:[],selectedSRID:0,getPopupContent:void 0,infoList:c};var h=r.groupBy(u,"srid"),g=r.pairs(h);g.length>1&&(p=!0);var v,_=r.max(g,(function(e){return e[1].length})),w=parseInt(_[0]),O=_[1],S=r.map(O,(function(e){return e.toGeoJSON()}));return t.length>=3&&(v=function(e){var o=O[S.indexOf(e)];return function(e,t,n){for(var o='<table class="table table-bordered table-striped view-geometry-property-table"><tbody>',i=1;i<t.length;i++)if(i!==n){var a=t[i];o+="<tr><th>"+a.display_name+"</th>";var l=e[a.field];r.isUndefined(l)&&a.has_default_val?o+='<td class="td-disabled">[default]</td>':r.isUndefined(l)&&a.not_null||r.isUndefined(l)||null===l?o+='<td class="td-disabled">[null]</td>':o+="<td>"+l+"</td>",o+="</tr>"}return o+="</tbody></table>"}(f.get(o),t,n)}),p&&c.push((0,o.default)("Geometries with non-SRID %s not rendered.",w)),{geoJSONs:S,selectedSRID:w,getPopupContent:v,infoList:c}}e.exports=d},74701:(e,t,n)=>{var r=n(64492);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(40561),n(69070);var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.historyList=r.sortBy(t,(function(e){return e.start_time})),this.onAdd((function(){}))}var t,n,i;return t=e,(n=[{key:"length",value:function(){return this.historyList.length}},{key:"add",value:function(e){var t=r.sortedIndex(this.historyList,e,(function(e){return e.start_time}));this.historyList.splice(t,0,e),this.onAddHandler(e)}},{key:"reset",value:function(){this.historyList=[],this.onResetHandler(this.historyList)}},{key:"onAdd",value:function(e){this.onAddHandler=e}},{key:"onReset",value:function(e){this.onResetHandler=e}}])&&o(t.prototype,n),i&&o(t,i),e}();t.default=i},13895:(e,t,n)=>{n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(24812),n(21249),n(69070);var r=s(n(27894)),o=n(1964),i=s(n(33486)),a=s(n(91669)),l=s(n(19755));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentNode=t,this.histCollection=n,this.editorPref={},this.onCopyToEditorHandler=function(){},this.histCollection.onAdd(this.onAddEntry.bind(this)),this.histCollection.onReset(this.onResetEntries.bind(this))}var t,n,s;return t=e,(n=[{key:"focus",value:function(){this.queryHistEntries&&this.queryHistEntries.focus()}},{key:"onAddEntry",value:function(e){1==this.histCollection.length()?this.render():this.queryHistEntries&&this.queryHistEntries.addEntry(e)}},{key:"onResetEntries",value:function(){this.isRendered=!1,this.queryHistEntries=null,this.queryHistDetails=null,this.render()}},{key:"onCopyToEditorClick",value:function(e){this.onCopyToEditorHandler=e,this.queryHistDetails&&this.queryHistDetails.onCopyToEditorClick(this.onCopyToEditorHandler)}},{key:"setEditorPref",value:function(e){this.editorPref=d(d({},this.editorPref),e),this.queryHistDetails&&this.queryHistDetails.setEditorPref(this.editorPref)}},{key:"render",value:function(){var e=this;if(0==this.histCollection.length())this.parentNode.empty().removeClass("d-flex").append('<div role="status" class="pg-panel-message">'+(0,a.default)("No history found")+"</div>");else{this.parentNode.empty().addClass("d-flex");var t=(0,l.default)("<div><div>").appendTo(this.parentNode),n=(0,l.default)("<div><div>").appendTo(this.parentNode);(0,i.default)([t[0],n[0]],{gutterSize:1,cursor:"ew-resize"}),n.css("overflow","auto"),this.queryHistDetails=new r.default(n),this.queryHistDetails.setEditorPref(this.editorPref),this.queryHistDetails.onCopyToEditorClick(this.onCopyToEditorHandler),this.queryHistDetails.render(),this.queryHistEntries=new o.QueryHistoryEntries(t),this.queryHistEntries.onSelectedChange(function(t){e.queryHistDetails.setEntry(t)}.bind(this)),this.queryHistEntries.render(),this.histCollection.historyList.map((function(t){e.queryHistEntries.addEntry(t)}))}}}])&&f(t.prototype,n),s&&f(t,s),e}();t.default=p},27894:(e,t,n)=>{n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(4723),n(74916),n(32564),n(92222),n(69826),n(24812),n(69070);var r=s(n(20811)),o=s(n(34038)),i=s(n(91669)),a=s(n(19755)),l=s(n(81311));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentNode=t,this.isCopied=!1,this.timeout=null,this.isRendered=!1,this.sqlFontSize=null,this.onCopyToEditorHandler=function(){},this.editorPref={sql_font_size:"1em",copy_to_editor:!0}}var t,n,s;return t=e,(n=[{key:"setEntry",value:function(e){this.entry=e,this.isRendered?this.selectiveRender():this.render()}},{key:"setEditorPref",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.editorPref=d(d({},this.editorPref),e),this.query_codemirror&&!l.default.isUndefined(e.sql_font_size)&&((0,a.default)(this.query_codemirror.getWrapperElement()).css("font-size",this.editorPref.sql_font_size),this.query_codemirror.refresh()),this.$copyToEditor&&!l.default.isUndefined(e.copy_to_editor)&&(e.copy_to_editor?this.$copyToEditor.removeClass("d-none"):this.$copyToEditor.addClass("d-none"))}},{key:"parseErrorMessage",value:function(e){return e.match(/ERROR:\s*([^\n\r]*)/i)?e.match(/ERROR:\s*([^\n\r]*)/i)[1]:e}},{key:"formatDate",value:function(e){return e.toLocaleDateString()+" "+e.toLocaleTimeString()}},{key:"copyAllHandler",value:function(){var e=this;o.default.copyTextToClipboard(this.entry.query),this.clearPreviousTimeout(),this.updateCopyButton(!0),this.timeout=setTimeout((function(){e.updateCopyButton(!1)}),1500)}},{key:"onCopyToEditorClick",value:function(e){this.onCopyToEditorHandler=e}},{key:"clearPreviousTimeout",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}},{key:"updateCopyButton",value:function(e){e?(this.$copyBtn.addClass("was-copied").removeClass("copy-all"),this.$copyBtn.text((0,i.default)("Copied!"))):(this.$copyBtn.addClass("copy-all").removeClass("was-copied"),this.$copyBtn.text((0,i.default)("Copy")))}},{key:"updateQueryMetaData",value:function(){var e=function(e,t){return e?"<div class='item'>\n                  <span class='value'>".concat(e,"</span>\n                  <span class='description'>").concat(t,"</span>\n              </div>"):""};this.$metaData.empty().append('<div class="metadata">'+e(this.formatDate(this.entry.start_time),(0,i.default)("Date"))+e(this.entry.row_affected.toLocaleString(),(0,i.default)("Rows Affected"))+e(this.entry.total_time,(0,i.default)("Duration"))+"</div>")}},{key:"updateMessageContent",value:function(){this.$message_content.empty().append("<pre class='content-value'>".concat(l.default.escape(this.entry.message),"</pre>"))}},{key:"updateErrorMessage",value:function(){this.entry.status?(this.$errMsgBlock.addClass("d-none"),this.$errMsgBlock.empty()):(this.$errMsgBlock.removeClass("d-none"),this.$errMsgBlock.empty().append("<div class='history-error-text'>\n            <span>"+(0,i.default)("Error Message")+"</span> ".concat(l.default.escape(this.parseErrorMessage(this.entry.message)),"\n        </div>")))}},{key:"updateInfoMessage",value:function(){this.entry.info?(this.$infoMsgBlock.removeClass("d-none"),this.$infoMsgBlock.empty().append("<div class='history-info-text'>\n            ".concat(this.entry.info,"\n        </div>"))):(this.$infoMsgBlock.addClass("d-none"),this.$infoMsgBlock.empty())}},{key:"selectiveRender",value:function(){this.updateErrorMessage(),this.updateInfoMessage(),this.updateCopyButton(!1),this.updateQueryMetaData(),this.query_codemirror.setValue(this.entry.query),this.updateMessageContent()}},{key:"render",value:function(){var e=this;this.entry&&(this.parentNode.empty().append("<div id='query_detail' class='query-detail'>\n            <div class='error-message-block'></div>\n            <div class='info-message-block'></div>\n            <div class='metadata-block'></div>\n            <div class='query-statement-block'>\n              <div id='history-detail-query'>\n                <button class='btn-copy' tabindex=0 accesskey='y'></button>\n                <button class='btn-copy-editor copy-to-editor' tabindex=0 accesskey='y'>"+(0,i.default)("Copy to Query Editor")+"</button>\n                <div></div>\n              </div>\n            </div>\n            <div>\n              <hr class='block-divider'/>\n            </div>\n            <div class='message-block'>\n              <div class='message'>\n                <div class='message-header'>"+(0,i.default)("Messages")+"</div>\n                <div class='content'></div>\n              </div>\n            </div>\n        </div>"),this.$errMsgBlock=this.parentNode.find(".error-message-block"),this.$infoMsgBlock=this.parentNode.find(".info-message-block"),this.$copyBtn=this.parentNode.find("#history-detail-query .btn-copy"),this.$copyBtn.off("click").on("click",this.copyAllHandler.bind(this)),this.$copyToEditor=this.parentNode.find("#history-detail-query .btn-copy-editor"),this.$copyToEditor.off("click").on("click",(function(){e.onCopyToEditorHandler(e.entry.query)})),this.$copyToEditor.addClass(this.editorPref.copy_to_editor?"":"d-none"),this.$metaData=this.parentNode.find(".metadata-block"),this.query_codemirror=(0,r.default)(this.parentNode.find("#history-detail-query div")[0],{tabindex:-1,mode:"text/x-pgsql",readOnly:!0}),(0,a.default)(this.query_codemirror.getWrapperElement()).css("font-size",this.editorPref.sql_font_size),this.$message_content=this.parentNode.find(".message-block .content"),this.isRendered=!0,this.selectiveRender())}}])&&f(t.prototype,n),s&&f(t,s),e}();t.default=p},1964:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QueryHistoryEntries=t.QueryHistoryItem=t.QueryHistoryEntryDateGroup=void 0,n(92222),n(69826),n(82772),n(21249),n(24812),n(69070);var r=l(n(30381)),o=l(n(19755)),i=l(n(81311));n(56796);var a=l(n(91669));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}var c=function(){function e(t,n){s(this,e),this.date=t,this.formatString="MMM DD YYYY",this.groupKey=n}return d(e,[{key:"getDatePrefix",value:function(){var e="";return this.isDaysBefore(0)?e="Today - ":this.isDaysBefore(1)&&(e="Yesterday - "),e}},{key:"getDateFormatted",value:function(e){return e.toLocaleDateString()}},{key:"isDaysBefore",value:function(e){return this.getDateFormatted(this.date)===this.getDateFormatted((0,r.default)().subtract(e,"days").toDate())}},{key:"render",value:function(){return(0,o.default)("<div class='query-group' data-key='".concat(this.groupKey,"'>\n            <div class='date-label'>").concat(this.getDatePrefix()).concat(this.getDateFormatted(this.date),"</div>\n            <ul class='query-entries'></ul>\n        </div>"))}}]),e}();t.QueryHistoryEntryDateGroup=c;var f=function(){function e(t){s(this,e),this.entry=t,this.$el=null,this.onClickHandler=null}return d(e,[{key:"onClick",value:function(e){var t=this;this.onClickHandler=e,this.$el&&this.$el.off("click").on("click",(function(e){t.onClickHandler((0,o.default)(e.currentTarget))}))}},{key:"formatDate",value:function(e){return(0,r.default)(e).format("HH:mm:ss")}},{key:"dataKey",value:function(){return this.formatDate(this.entry.start_time)}},{key:"render",value:function(e){var t=this;this.$el=(0,o.default)("<li class='list-item' tabindex='0' data-key='".concat(this.dataKey(),"'>\n          <div class='entry ").concat(this.entry.status?"":"error",'\'>\n              <div class=\'query\'>\n                  <span id="query_source_icon" class="query-history-icon sql-icon-lg"></span>\n                  ').concat(i.default.escape(this.entry.query),"\n              </div>\n              <div class='other-info'>\n              <div class='timestamp'>").concat(this.formatDate(this.entry.start_time),"</div>\n              </div>\n          </div>\n      </li>")).data("entrydata",this.entry).on("click",(function(e){t.onClickHandler((0,o.default)(e.currentTarget))}));var n=this.entry.query_source;n&&this.$el.find("#query_source_icon").addClass(n.ICON_CSS_CLASS).attr("role","img"),this.entry.is_pgadmin_query&&(this.$el.addClass("pgadmin-query-history-entry"),e||this.$el.addClass("d-none"))}}]),e}();t.QueryHistoryItem=f;var p=function(){function e(t){s(this,e),this.parentNode=t,this.$selectedItem=null,this.groupKeyFormat="YYYY MM DD",this.$el=null,this.is_pgadmin_queries_shown=null}return d(e,[{key:"onSelectedChange",value:function(e){this.onSelectedChangeHandler=e}},{key:"focus",value:function(){this.$selectedItem||this.setSelectedListItem(this.$entriesEl.find(".list-item").first()),this.$selectedItem.trigger("click"),this.$entriesEl.focus()}},{key:"isArrowDown",value:function(e){return 40===(e.keyCode||e.which)}},{key:"isArrowUp",value:function(e){return 38===(e.keyCode||e.which)}},{key:"navigateUpAndDown",value:function(e){var t=[38,40],n=e.keyCode||e.which;return!(t.indexOf(n)>-1)||(e.preventDefault(),this.onKeyDownHandler(e),!1)}},{key:"onKeyDownHandler",value:function(e){if(this.isArrowDown(e))if(this.$selectedItem.next().length>0)this.setSelectedListItem(this.$selectedItem.next());else{var t=this.$selectedItem.closest(".query-group");t.next().length>0&&this.setSelectedListItem(t.next().find(".list-item").first())}else if(this.isArrowUp(e))if(this.$selectedItem.prev().length>0)this.setSelectedListItem(this.$selectedItem.prev());else{var n=this.$selectedItem.closest(".query-group");n.prev().length>0&&this.setSelectedListItem(n.prev().find(".list-item").last())}}},{key:"onSelectListItem",value:function(e){this.setSelectedListItem((0,o.default)(e.currentTarget))}},{key:"dateAsGroupKey",value:function(e){return(0,r.default)(e).format(this.groupKeyFormat)}},{key:"setSelectedListItem",value:function(e){this.$selectedItem&&this.$selectedItem.removeClass("selected"),e.addClass("selected"),this.$selectedItem=e,this.$selectedItem[0].scrollIntoView({block:"center"}),this.onSelectedChangeHandler&&this.onSelectedChangeHandler(this.$selectedItem.data("entrydata"))}},{key:"addEntry",value:function(e){var t=this.$entriesEl.find(".query-group"),n=o.default.map(t,(function(e){return(0,o.default)(e).attr("data-key")})),r=this.dateAsGroupKey(e.start_time),a=i.default.indexOf(n,r),l=null;if(0==t.length)l=new c(e.start_time,r).render(),this.$entriesEl.prepend(l);else if(a<0&&0!=t.length){l=new c(e.start_time,r).render();for(var s=0;s<n.length;){if(r>n[s]){l.insertBefore(t[s]);break}s++}s==n.length&&this.$entriesEl.append(l)}else a>=0&&(l=(0,o.default)(t[a]));var u=new f(e);if(u.onClick(this.setSelectedListItem.bind(this)),u.render(this.is_pgadmin_queries_shown),!i.default.isUndefined(l)){var d=l.find(".query-entries").find(".list-item"),p=0;if(d.length>0)for(;p<d.length;){if(u.$el.attr("data-key")>(0,o.default)(d[p]).attr("data-key")){(0,o.default)(u.$el).insertBefore(d[p]);break}(0,o.default)(u.$el).insertAfter(d[p]),p++}else l.find(".query-entries").append(u.$el)}this.setSelectedListItem(u.$el)}},{key:"toggleGeneratedQueries",value:function(){this.$el.find(".pgadmin-query-history-entry").each((function(){(0,o.default)(this).toggleClass("d-none")})),this.is_pgadmin_queries_shown=!this.is_pgadmin_queries_shown}},{key:"render",value:function(){var e=this;e.$el=(0,o.default)('\n        <div class="toggle-and-history-container">\n            <div class="query-history-toggle">\n                <label class="control-label" for="generated-queries-toggle">\n                    '+(0,a.default)("Show queries generated internally by pgAdmin?")+'\n                </label>\n                <input id="generated-queries-toggle" type="checkbox"\n                  class="pgadmin-controls" data-style="quick"\n                  data-size="mini" data-on="'+(0,a.default)("Yes")+'" data-off="'+(0,a.default)("No")+"\"\n                  data-onstyle=\"success\" data-offstyle=\"ternary\" checked>\n            </div>\n            <div id='query_list' class='query-history' tabindex='0'></div>\n        </div>\n    "),e.$entriesEl=e.$el.find("#query_list"),e.$entriesEl.on("keydown",this.navigateUpAndDown.bind(this)),e.is_pgadmin_queries_shown=!0,e.$el.find("#generated-queries-toggle").bootstrapToggle().change((function(){e.toggleGeneratedQueries()})),e.parentNode.empty().append(e.$el)}}]),e}();t.QueryHistoryEntries=p},67563:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.QuerySources=void 0;t.QuerySources={EXECUTE:{ICON_CSS_CLASS:"fa fa-play"},EXPLAIN:{ICON_CSS_CLASS:"fa fa-hand-pointer"},EXPLAIN_ANALYZE:{ICON_CSS_CLASS:"fa fa-list-alt"},COMMIT:{ICON_CSS_CLASS:"pg-font-icon icon-commit"},ROLLBACK:{ICON_CSS_CLASS:"pg-font-icon icon-rollback"},SAVE_DATA:{ICON_CSS_CLASS:"pg-font-icon icon-save_data_changes"},VIEW_DATA:{ICON_CSS_CLASS:"pg-font-icon picon-view_data"}}},5221:(e,t,n)=>{n(69826),n(68309),n(5735),n(83753),n(32564),n(57327),n(92222);var r=p(n(91669)),o=p(n(28008)),i=p(n(19755)),a=p(n(81311)),l=p(n(55455)),s=p(n(55112)),u=p(n(12030)),d=p(n(48567)),c=p(n(9669)),f=p(n(55958));function p(e){return e&&e.__esModule?e:{default:e}}var m={dialog:function(e){var t=(0,r.default)("Manage Macros");l.default.macroDialog&&delete l.default.macroDialog,l.default.dialog("macroDialog",(function(){var n=(0,i.default)("<div class='macro_dialog'></div>");return{main:function(){this.set("title",'<i class="fa fa-scroll sql-icon-lg" aria-hidden="true" role="img"></i> '+(0,r.default)("Manage Macros"))},build:function(){this.elements.content.appendChild(n.get(0)),l.default.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,r.default)("Help"),"aria-label":(0,r.default)("Help"),url:(0,o.default)("help.static",{filename:"query_tool.html"})}},{text:(0,r.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button","data-btn-name":"cancel"},{text:(0,r.default)("Save"),className:"btn btn-primary fa fa-save pg-alertify-button","data-btn-name":"ok"}],focus:{element:function(){return(0,i.default)(this.elements.dialog).find(".header-icon-cell button")[0]},select:!0},options:{title:t,padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1,autoReset:!1}}},hooks:{onclose:function(){this.view&&(this.macroCollectionModel.stopSession(),this.view.model.stopSession(),this.view.remove({data:!0,internal:!0,silent:!0}))}},prepare:function(){var t=this;n.html(""),this.statusBar=(0,i.default)('<div class=\'pg-prop-status-bar pg-el-xs-12 d-none\'>  <div class="error-in-footer">     <div class="d-flex px-2 py-1">       <div class="pr-2">         <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>       </div>       <div class="alert-text" role="alert"></div>     </div>   </div> </div>').appendTo(n),this.showFilterProgress=(0,i.default)('<div id="show_filter_progress" class="pg-sp-container sql-editor-busy-fetching d-none">\n              <div class="pg-sp-content">\n                  <div class="row"><div class="col-12 pg-sp-icon sql-editor-busy-icon"></div></div>\n                  <div class="row"><div class="col-12 pg-sp-text sql-editor-busy-text">'+(0,r.default)("Loading data...")+"</div></div>\n              </div>\n          </div>").appendTo(n),t.macroCollectionModel=(0,d.default)(e.transId);var o=u.default.generateViewSchema(null,t.macroCollectionModel,"edit",null,null,!0),l=u.default.Dialog.extend({template:{panel:a.default.template('<div role="tabpanel" tabindex="-1" class="tab-pane <%=label%> <%=tabPanelCodeClass%> pg-el-sm-12 pg-el-md-12 pg-el-lg-12 pg-el-12 fade" id="<%=cId%>"></div>')},render:function(){this.cleanup();var e=this.model,t=this.controls,n=this.template,r=this,o=100*this.tabIndex;this.$el.empty().attr("role","tabpanel").attr("class",a.default.result(this,"tabPanelClassName")),e.panelEl=this.$el;var l=(0,i.default)('<div class="tab-content pg-el-sm-12 pg-el-md-12 pg-el-lg-12 pg-el-12 macro-tab"></div>').appendTo(this.$el);return a.default.each(this.schema,(function(s){if(o++,s.version_compatible&&(u=s.visible,d=s,c=e,a.default.isFunction(u)?u.apply(d,[c]):u)){var u,d,c,f=(0,i.default)(n.panel(a.default.extend(s,{tabIndex:o,tabPanelCodeClass:s.tabPanelCodeClass?s.tabPanelCodeClass:""}))).appendTo(l).removeClass("collapse").addClass("collapse");s.fields.each((function(n){var i=new(n.get("control"))({field:n,model:e,dialog:r,tabIndex:o});f.append(i.render().$el),t.push(i)}))}})),l.find(".tab-pane").first().addClass("active show"),this}}),s=t.view=new l({el:"<div></div>",model:t.macroCollectionModel,schema:o});t.macroCollectionModel.fetch({success:function(){n.append(t.view.render().$el),t.__internal.buttons[2].element.disabled=!0,t.view.listenTo(t.view.model,"pgadmin-session:start",(function(){t.view.listenTo(t.view.model,"pgadmin-session:invalid",(function(e){t.statusBar.removeClass("d-none"),(0,i.default)(t.statusBar.find(".alert-text")).html(e),t.__internal.buttons[2].element.disabled=!0})),s.listenTo(t.view.model,"pgadmin-session:valid",(function(){t.statusBar.addClass("d-none"),(0,i.default)(t.statusBar.find(".alert-text")).html(""),t.__internal.buttons[2].element.disabled=!1}))})),s.listenTo(t.view.model,"pgadmin-session:stop",(function(){s.stopListening(t.view.model,"pgadmin-session:invalid"),s.stopListening(t.view.model,"pgadmin-session:valid")})),t.view.model.startNewSession()}}),(0,i.default)(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties")},callback:function(t){var n=this;if("dialog_help"==t.button.element.name)t.cancel=!0,s.default.Browser.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);else if("ok"===t.button["data-btn-name"]){t.cancel=!0;var l=n.view.model.get("macro").toJSON(!0);if(null==l||null==l)return void n.close();c.default.put((0,o.default)("sqleditor.set_macros",{trans_id:e.transId}),l).then((function(t){(0,i.default)(n.showFilterProgress[0]).addClass("d-none");var o=t;o.status?setTimeout((function(){var t=n.view.model.get("macro").toJSON().filter((function(e){return void 0!==e.name||null!==e.name}));e.macros=t;var o='\n                      <li>\n                          <a class="dropdown-item" id="btn-manage-macros" href="#" tabindex="0">\n                              <span> '.concat((0,r.default)("Manage Macros...")," </span>\n                          </a>\n                      </li>"),l="";a.default.each(t,(function(e){e.name&&(l+='<li>\n                        <a class="dropdown-item btn-macro" data-macro-id="'.concat(e.id,'" href="#" tabindex="0">\n                            <span> ').concat(a.default.escape(e.name)," </span>\n                            <span> (").concat(e.key_label,") </span>\n                        </a>\n                       </li>"))})),l.length>0&&(o+='<li class="dropdown-divider"></li>'+l),(0,i.default)(i.default.find("div.btn-group.mr-1.user_macros ul.dropdown-menu")).html((0,i.default)(o)),n.close(),f.default.success((0,r.default)("Macro updated successfully"))}),10):f.default.alert((0,r.default)("Validation Error"),o.result)})).catch((function(e){(0,i.default)(n.showFilterProgress[0]).addClass("d-none"),setTimeout((function(){f.default.error(e.response.data.errormsg)}),10)}))}else n.close()}}})),l.default.macroDialog(t).resizeTo(s.default.Browser.stdW.calc(s.default.Browser.stdW.lg),s.default.Browser.stdH.calc(s.default.Browser.stdH.lg))}};e.exports=m},48567:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=o.default.Browser.DataModel.extend({idAttribute:"id",defaults:{id:void 0,key:void 0,name:void 0,sql:void 0,key_label:void 0},schema:[{id:"key_label",name:"key_label",label:(0,r.default)("Key"),type:"text",cell:"string",editable:!1,cellHeaderClasses:"width_percent_10",headerCell:a.default.Extension.CustomHeaderCell,disabled:!1},{id:"name",name:"name",label:(0,r.default)("Name"),cell:"string",type:"text",editable:!0,cellHeaderClasses:"width_percent_20",headerCell:a.default.Extension.CustomHeaderCell,disabled:!1},{id:"sql",name:"sql",label:(0,r.default)("SQL"),cell:a.default.Extension.SqlCell,type:"multiline",control:i.default.SqlCodeControl,editable:!0,cellHeaderClasses:"width_percent_70",headerCell:a.default.Extension.CustomHeaderCell,disabled:!1}],validate:function(){var e=null;return this.errorModel.clear(),u.default.isEmpty(this.get("name"))&&!u.default.isEmpty(this.get("sql"))?(e=(0,r.default)("Please enter macro name."),this.errorModel.set("name",e),e):u.default.isEmpty(this.get("sql"))&&!u.default.isEmpty(this.get("name"))?(e=(0,r.default)("Please enter macro sql."),this.errorModel.set("sql",e),e):null}});return new(o.default.Browser.DataModel.extend({defaults:{macro:void 0},urlRoot:(0,l.default)("sqleditor.get_macros",{trans_id:e}),schema:[{id:"macro",name:"macro",label:(0,r.default)("Macros"),model:t,editable:!0,type:"collection",control:i.default.SubNodeCollectionControl.extend({showGridControl:function(e){var t=this,n=(0,s.default)("<div class='pgadmin-control-group backgrid form-group pg-el-12 object subnode'></div>"),l=e.subnode.schema?e.subnode:e.subnode.prototype,c=i.default.generateGridColumnsFromModel(e.node_info,l,this.field.get("mode"),e.columns,e.schema_node);t.grid&&t.grid.remove(),(e.disabled||0==e.canAdd)&&(0,s.default)(n).find("button.add").remove(),c.columns.unshift({name:"pg-backform-clear",label:'<i aria-label="'+(0,r.default)("Clear row")+'" class="fa fa-eraser" title="'+(0,r.default)("Clear row")+'"></i>',cell:a.default.Extension.ClearCell,editable:!1,cell_priority:-1,sortable:!1,headerCell:a.default.Extension.CustomHeaderCell.extend({className:"header-icon-cell",events:{click:"clearrAll"},clearrAll:function(e){e.preventDefault();var t=this;t.collection.toJSON().filter((function(e){return void 0!==e.name&&null!==e.name})).length>0&&d.default.confirm((0,r.default)("Clear All Rows"),(0,r.default)("Are you sure you wish to clear all rows?"),(function(){u.default.each(t.collection.toJSON(),(function(e){t.collection.get(e.id).set({name:null,sql:null})}))}),(function(){return!0}))},render:function(){this.$el.empty();var e=this.column,t=(0,s.default)('<button type="button" title="'+(0,r.default)("Clear row")+'" aria-label="Clear row" aria-expanded="false" tabindex="0">').html(e.get("label")).append("<span class='sort-caret' aria-hidden='true'></span>");return this.$el.append(t),this.$el.addClass(e.get("name")),this.$el.addClass(e.get("direction")),this.$el.attr("role","columnheader"),this.$el.attr("aria-label","columnheader"),this.$el.attr("alt","columnheader"),this.delegateEvents(),this}})});var f=t.model.get(e.name);f||(f=new o.default.Browser.Node.Collection(null,{handler:t.model.handler||t.model,model:e.model,top:t.model.top||t.model,silent:!0}),t.model.set(e.name,f,{silent:!0}));f.on("enteringEditMode",(function(e){var t=this,n=e[0];this.each((function(e){if(n.model!=e){var r=t.indexOf(e);if(r>-1){var o=p.body.rows[r].$el.find(".subnode-edit-in-process").parent();if(o.length>0){var i=new Event("click");o[0].dispatchEvent(i)}}}}))}),f);var p=t.grid=new a.default.Grid({columns:c.columns,collection:f,row:this.row,className:"backgrid table presentation table-bordered table-noouter-border table-hover"}),m=p.render().$el;return n.append(m)}}),columns:["key_label","name","sql"],visible:!0}],validate:function(){return null}}))},n(69826),n(57327),n(5735),n(83753),n(68309),n(82772);var r=c(n(91669)),o=c(n(55112)),i=c(n(12030)),a=c(n(71158)),l=c(n(28008)),s=c(n(19755)),u=c(n(81311)),d=c(n(55958));function c(e){return e&&e.__esModule?e:{default:e}}},11346:(e,t,n)=>{var r=n(64492);n(69826),n(15306),n(74916),n(24603),n(39714),n(68309),n(5735),n(83753),n(89554),n(54747),n(91058),n(32564);var o=f(n(91669)),i=f(n(28008)),a=f(n(19755)),l=f(n(55455)),s=f(n(55112)),u=f(n(12030)),d=f(n(16880)),c=f(n(55958));function f(e){return e&&e.__esModule?e:{default:e}}var p={dialog:function(e,t,n){var f=(0,i.default)("sqleditor.get_new_connection_data",{sid:e.url_params.sid,sgid:e.url_params.sgid});t&&(f+="?connect=1");var p=(0,o.default)("Connect to server");a.default.ajax({url:f,headers:{"Cache-Control":"no-cache"}}).done((function(t){var f=t.data.result;f.database_list=[],f.user_list=[],l.default.newConnectionDialog&&delete l.default.newConnectionDialog,l.default.dialog("newConnectionDialog",(function(){var t=(0,a.default)("<div class='new-connection-dialog'></div>");return{main:function(e){this.msg=e},build:function(){this.elements.content.appendChild(t.get(0)),l.default.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,o.default)("Help"),"aria-label":(0,o.default)("Help"),url:(0,i.default)("help.static",{filename:"query_tool.html"})}},{text:(0,o.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button","data-btn-name":"cancel"},{text:(0,o.default)("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button","data-btn-name":"ok"}],focus:{element:function(){return(0,a.default)(this.elements.dialog).find(".new-connection-dialog .nav-link.active.show")},select:!0},options:{title:p,padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!1,pinnable:!1,closableByDimmer:!1,modal:!1,autoReset:!1,closable:!1}}},prepare:function(){var n=this;t.html(""),this.__internal.buttons[2].element.disabled=!0,this.statusBar=(0,a.default)('<div class=\'pg-prop-status-bar pg-el-xs-12 d-none\'>  <div class="error-in-footer">     <div class="d-flex px-2 py-1">       <div class="pr-2">         <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>       </div>       <div class="alert-text" role="alert"></div>     </div>   </div> </div>').appendTo(t),this.showNewConnectionProgress=(0,a.default)('<div id="show_filter_progress" class="pg-sp-container sql-editor-busy-fetching d-none">\n                <div class="pg-sp-content">\n                    <div class="row"><div class="col-12 pg-sp-icon sql-editor-busy-icon"></div></div>\n                    <div class="row"><div class="col-12 pg-sp-text sql-editor-busy-text">'+(0,o.default)("Loading data...")+"</div></div>\n                </div>\n            </div>").appendTo(t),(0,a.default)(n.showNewConnectionProgress[0]).removeClass("d-none"),n.newConnCollectionModel=(0,d.default)(f,e.url_params.sgid,e.url_params.sid,e,n);var r=u.default.generateViewSchema(null,n.newConnCollectionModel,"create",null,null,!0),i=this.view=new u.default.Dialog({el:"<div></div>",model:n.newConnCollectionModel,schema:r});(0,a.default)(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),t.append(i.render().$el),i.listenTo(i.model,"pgadmin-session:start",(function(){i.listenTo(i.model,"pgadmin-session:invalid",(function(e){n.statusBar.removeClass("d-none"),(0,a.default)(n.statusBar.find(".alert-text")).html(e),n.__internal&&(n.__internal.buttons[2].element.disabled=!0)})),i.listenTo(i.model,"pgadmin-session:valid",(function(){n.statusBar.addClass("d-none"),(0,a.default)(n.statusBar.find(".alert-text")).html(""),n.__internal&&(n.__internal.buttons[2].element.disabled=!1)}))})),i.listenTo(i.model,"pgadmin-session:stop",(function(){i.stopListening(i.model,"pgadmin-session:invalid"),i.stopListening(i.model,"pgadmin-session:valid")})),i.model.startNewSession(),(0,a.default)(n.showNewConnectionProgress[0]).addClass("d-none")},get_title:function(e,t,n,r){return e=e.replace(new RegExp("%DATABASE%"),t),e=(e=n.role?e.replace(new RegExp("%USERNAME%"),n.role):e.replace(new RegExp("%USERNAME%"),n.user)).replace(new RegExp("%SERVER%"),r.server_name)},callback:function(t){if("dialog_help"==t.button.element.name)t.cancel=!0,s.default.Browser.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);else if("ok"===t.button["data-btn-name"]){t.cancel=!0;var o=this.newConnCollectionModel.toJSON(),i=null;f.database_list.forEach((function(e){if(o.database==e.value)return i=e.label,!1}));var a,u=n.qt_tab_title_placeholder;a=this.get_title(u,i,o,f);var d=s.default.qt_default_placeholder,p=this.get_title(d,i,o,f);o.role||(o.role=null);var m=!0;if(e.gridView.connection_list.forEach((function(e){if(parseInt(e.server)==o.server&&parseInt(e.database)==o.database&&e.user==o.user&&e.role==o.role)return m=!1,!1})),m){var b={server_group:e.gridView.handler.url_params.sgid,server:o.server,database:o.database,title:r.escape(a),conn_title:r.escape(p),user:o.user,role:o.role,server_name:r.escape(f.server_name),database_name:r.escape(i),password:f.password,is_selected:!1};e.gridView.on_change_connection(b,this)}else{c.default.info("Connection with this configuration already present.")}}else l.default.newConnectionDialog().destroy()}}})),setTimeout((function(){l.default.newConnectionDialog("Connect to server.").resizeTo(s.default.Browser.stdW.md,s.default.Browser.stdH.md)}),500)})).fail((function(){c.default.alert().setting({title:(0,o.default)("Connection lost"),label:(0,o.default)("OK"),message:(0,o.default)("Connection to the server has been lost."),onok:function(){window.close()}}).show()}))}};e.exports=p},16880:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,c,f){var p=l.default.Select2Control.extend({fetchData:function(){var e=this,n=e.field.get("url");n=(0,s.default)(n,{sid:e.model.attributes.server,sgid:t}),i.default.ajax({url:n,headers:{"Cache-Control":"no-cache"}}).done((function(t){var n=e.field.get("transform");if(t.data.status){var r=t.data.result.data;n&&o.default.isFunction(n)?e.field.set("options",n.bind(e,r)):e.field.set("options",r)}else n&&o.default.isFunction(n)?e.field.set("options",n.bind(e,[])):e.field.set("options",[]);l.default.Select2Control.prototype.render.apply(e,arguments)})).fail((function(e){var t="";t=404==e.status?"Unable to find url.":e.responseJSON.errormsg,d.default.error(t)}))},render:function(){return this.fetchData(),l.default.Select2Control.prototype.render.apply(this,arguments)},onChange:function(){l.default.Select2Control.prototype.onChange.apply(this,arguments)}}),m=function(e){if(!e.id)return e.text;var t=(0,i.default)(e.element).data("image");return t?(0,i.default)("<span></span>").append((0,i.default)("<span></span>",{class:"wcTabIcon "+t})).append((0,i.default)("<span></span>").text(e.text)):e.text};return new(a.default.Browser.DataModel.extend({idAttribute:"name",defaults:{server:parseInt(n),database:null,user:null,server_name:"",database_name:""},schema:[{id:"server",name:"server",label:(0,r.default)("Server"),type:"text",editable:!0,disabled:!1,select2:{allowClear:!1,width:"style",templateResult:m,templateSelection:m},events:{"focus select":"clearInvalid","keydown :input":"processTab","select2:select":"onSelect","select2:selecting":"beforeSelect","select2:clear":"onChange"},transform:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({group:n,optval:e[n]});return t},control:l.default.Select2Control.extend({template:o.default.template(["<% if(label == false) {} else {%>",'  <label class="<%=Backform.controlLabelClassName%>"><%=label%></label>',"<% }%>",'<div class="<%=controlsClassName%>">'," <select class=\"<%=Backform.controlClassName%> <%=extraClasses.join(' ')%>\"",'  name="<%=name%>" value="<%-value%>" <%=disabled ? "disabled" : ""%>','  <%=required ? "required" : ""%><%= select2.multiple ? " multiple>" : ">" %>','  <%=select2.first_empty ? " <option></option>" : ""%>',"  <% for (var i=0; i < options.length; i++) {%>","   <% if (options[i].group) { %>","     <% var group = options[i].group; %>","     <% if (options[i].optval) { %> <% var option_length = options[i].optval.length; %>",'      <optgroup label="<%=group%>">',"      <% for (var subindex=0; subindex < option_length; subindex++) {%>","        <% var option = options[i].optval[subindex]; %>","        <option ","        <% if (option.image) { %> data-image=<%=option.image%> <%}%>","        <% if (option.connected) { %> data-connected=connected <%}%>","        value=<%- formatter.fromRaw(option.value) %>",'        <% if (option.selected) {%>selected="selected"<%} else {%>','        <% if (!select2.multiple && option.value === rawValue) {%>selected="selected"<%}%>','        <% if (select2.multiple && rawValue && rawValue.indexOf(option.value) != -1){%>selected="selected" data-index="rawValue.indexOf(option.value)"<%}%>',"        <%}%>",'        <%= disabled ? "disabled" : ""%>><%-option.label%></option>',"      <%}%>","      </optgroup>","     <%}%>","   <%} else {%>","     <% var option = options[i]; %>","     <option ","     <% if (option.image) { %> data-image=<%=option.image%> <%}%>","     <% if (option.connected) { %> data-connected=connected <%}%>","     value=<%- formatter.fromRaw(option.value) %>",'     <% if (option.selected) {%>selected="selected"<%} else {%>','     <% if (!select2.multiple && option.value === rawValue) {%>selected="selected"<%}%>','     <% if (select2.multiple && rawValue && rawValue.indexOf(option.value) != -1){%>selected="selected" data-index="rawValue.indexOf(option.value)"<%}%>',"     <%}%>",'     <%= disabled ? "disabled" : ""%>><%-option.label%></option>',"   <%}%>","  <%}%>"," </select>"," <% if (helpMessage && helpMessage.length) { %>",' <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>'," <% } %>","</div>"].join("\n")),beforeSelect:function(){var e=arguments[0].params.args.data.id;this.field.get("connect")&&"connected"!==this.$el.find('option[value="'+e+'"]').attr("data-connected")?this.field.get("connect").apply(this,[e,this.changeIcon.bind(this)]):((0,i.default)(this.$sel).trigger("change"),setTimeout(function(){this.onChange.apply(this)}.bind(this),200))},changeIcon:function(e){var t=this.$el.find(".select2-selection .select2-selection__rendered span.wcTabIcon"),n=this.$el.find("option:selected");if(t.hasClass("icon-server-not-connected")||t.hasClass("icon-shared-server-not-connected")){var r=e.icon?e.icon:"icon-pg";t.removeClass("icon-server-not-connected"),t.addClass(r),t.attr("data-connected","connected"),n.data().image=r,n.attr("data-connected","connected"),u.default.connectServer().destroy(),this.onChange.apply(this)}else if(t.hasClass("icon-database-not-connected")){var o=e.icon?e.icon:"pg-icon-database";t.removeClass("icon-database-not-connected"),t.addClass(o),t.attr("data-connected","connected"),n.removeClass("icon-database-not-connected"),n.data().image=o,n.attr("data-connected","connected"),u.default.connectServer().destroy(),this.onChange.apply(this)}},connect:function(t){var n=t;u.default.connectServer&&delete u.default.connectServer,u.default.dialog("connectServer",(function(){return{main:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.set("title",e),this.message=t,this.server_id=n,this.submit_password=r,this.connect_server=o},setup:function(){return{buttons:[{text:(0,r.default)("Cancel"),className:"btn btn-secondary fa fa-times pg-alertify-button",key:27},{text:(0,r.default)("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button"}],focus:{element:"#password",select:!0},options:{modal:0,resizable:!1,maximizable:!1,pinnable:!1}}},build:function(){},prepare:function(){this.setContent(this.message)},callback:function(t){var o=(0,i.default)("#show_filter_progress");if(t.button.text==(0,r.default)("OK"))if(this.submit_password){var a=(0,s.default)("sqleditor.connect_server",{sid:this.server_id});o.removeClass("d-none"),i.default.ajax({type:"POST",timeout:3e4,url:a,data:(0,i.default)("#frmPassword").serialize()}).done((function(t){n.model.attributes.database=null,n.changeIcon(t.data),n.model.attributes.user=null,n.model.attributes.role=null,l.default.Select2Control.prototype.onChange.apply(n,arguments),Object.keys(e.server_list).forEach((function(t){e.server_list[t].forEach((function(t){t.value==n.getValueFromDOM()&&(e.server_name=t.label)}))})),o.addClass("d-none"),u.default.connectServer().destroy()})).fail((function(e){o.addClass("d-none"),u.default.connectServer().destroy(),u.default.connectServer("Connect to server",e.responseJSON.result,n.getValueFromDOM())}))}else Object.keys(this.connect_server).length>0?(this.connect_server.password=(0,i.default)("#password").val(),this.connect_server.is_selected=!1,c.gridView.on_change_connection(this.connect_server,f,!1),(o=(0,i.default)("#fetching_data")).addClass("d-none")):(e.password=(0,i.default)("#password").val(),o.addClass("d-none"));else n.model.attributes.database=null,n.model.attributes.user=null,n.model.attributes.role=null,l.default.Select2Control.prototype.onChange.apply(n,arguments),o.addClass("d-none"),u.default.connectServer().destroy();t.close=!0}}}))},render:function(){var t=this;t.connect(t),Object.keys(e.server_list).forEach((function(t){e.server_list[t].forEach((function(t){t.value==parseInt(n)&&(e.server_name=t.label)}))}));var r=t.field.get("transform")||t.defaults.transform;return r&&o.default.isFunction(r)?t.field.set("options",r.bind(t,e.server_list)):t.field.set("options",e.server_list),l.default.Select2Control.prototype.render.apply(t,arguments)},onChange:function(){this.model.attributes.database=null,this.model.attributes.user=null;var t=this;t.connect(t);var n=(0,s.default)("sqleditor.connect_server",{sid:t.getValueFromDOM(),usr:t.model.attributes.user}),r=(0,i.default)("#show_filter_progress");r.removeClass("d-none"),i.default.ajax({url:n,type:"POST",headers:{"Cache-Control":"no-cache"}}).done((function(){l.default.Select2Control.prototype.onChange.apply(t,arguments),Object.keys(e.server_list).forEach((function(n){e.server_list[n].forEach((function(n){n.value==t.getValueFromDOM()&&(e.server_name=n.label)}))})),r.addClass("d-none")})).fail((function(e){r.addClass("d-none"),u.default.connectServer("Connect to server",e.responseJSON.result,t.getValueFromDOM())}))}})},{id:"database",name:"database",label:(0,r.default)("Database"),type:"text",editable:!0,disabled:function(e){var t=this;return!(!o.default.isUndefined(e.get("server"))&&!o.default.isNull(e.get("server"))&&""!==e.get("server"))||(setTimeout((function(){t.options.length&&t.options.forEach((function(t){t.selected&&e.set("database",t.value)}))}),10),!1)},deps:["server"],url:"sqleditor.get_new_connection_database",select2:{allowClear:!1,width:"100%",first_empty:!0,select_first:!1},extraClasses:["new-connection-dialog-style"],control:p,transform:function(t){return e.database_list=t,t}},{id:"user",name:"user",label:(0,r.default)("User"),type:"text",editable:!0,deps:["server"],select2:{allowClear:!1,width:"100%"},control:p,url:"sqleditor.get_new_connection_user",disabled:function(e){var t=this;return!(!o.default.isUndefined(e.get("server"))&&!o.default.isNull(e.get("server"))&&""!==e.get("server"))||(setTimeout((function(){t.options.length&&e.set("user",t.options[0].value)}),10),!1)}},{id:"role",name:"role",label:(0,r.default)("Role"),type:"text",editable:!0,deps:["server"],select2:{allowClear:!1,width:"100%",first_empty:!0},control:p,url:"sqleditor.get_new_connection_role",disabled:!1}],validate:function(){var e=null;return this.errorModel.clear(),o.default.isUndefined(this.get("database"))||o.default.isNull(this.get("database"))?(e=(0,r.default)("Please select database"),this.errorModel.set("database",e),e):o.default.isUndefined(this.get("database"))||o.default.isUndefined(this.get("user"))||o.default.isNull(this.get("user"))?(e=(0,r.default)("Please select user"),this.errorModel.set("user",e),e):null}}))},n(24812),n(91058),n(69600),n(69826),n(32564),n(89554),n(54747),n(47941);var r=c(n(91669)),o=c(n(81311)),i=c(n(19755)),a=c(n(55112)),l=c(n(12030)),s=c(n(28008)),u=c(n(55455)),d=c(n(55958));function c(e){return e&&e.__esModule?e:{default:e}}},94860:(e,t,n)=>{n(83710);var r=i(n(19755)),o=i(n(1950));function i(e){return e&&e.__esModule?e:{default:e}}var a={_verbose:function(){return!(0,r.default)(".explain-verbose").hasClass("visibility-hidden")},_costsEnabled:function(){return!(0,r.default)(".explain-costs").hasClass("visibility-hidden")},_buffers:function(){return!(0,r.default)(".explain-buffers").hasClass("visibility-hidden")},_timing:function(){return!(0,r.default)(".explain-timing").hasClass("visibility-hidden")},_summary:function(){return!(0,r.default)(".explain-summary").hasClass("visibility-hidden")},_settings:function(){return!(0,r.default)(".explain-settings").hasClass("visibility-hidden")},_clearMessageTab:function(){(0,r.default)(".sql-editor-message").html("")},executeMacro:function(e,t){this._clearMessageTab(),e.check_data_changes_to_execute_query(null,!1,t)},executeQuery:function(e){this._clearMessageTab(),e.check_data_changes_to_execute_query()},explainAnalyze:function(e){var t={format:"json",analyze:!0,verbose:this._verbose(),costs:this._costsEnabled(),buffers:this._buffers(),timing:this._timing(),summary:this._summary(),settings:this._settings()};this._clearMessageTab(),e.check_data_changes_to_execute_query(t)},explain:function(e){var t={format:"json",analyze:!1,verbose:this._verbose(),costs:this._costsEnabled(),buffers:!1,timing:!1,summary:this._summary(),settings:this._settings()};this._clearMessageTab(),e.check_data_changes_to_execute_query(t)},download:function(e){var t=","===e.preferences.csv_field_separator?".csv":".txt",n="data-"+(new Date).getTime()+t;e.is_query_tool||(n=e.table_name+t),e.trigger_csv_download(n)},commentBlockCode:function(e){var t=e.gridView.query_tool_obj;t.getValue()&&t.toggleComment(t.getCursor(!0),t.getCursor(!1))},commentLineCode:function(e){var t=e.gridView.query_tool_obj;t.getValue()&&t.lineComment(t.getCursor(!0),t.getCursor(!1),{lineComment:"--"})},uncommentLineCode:function(e){var t=e.gridView.query_tool_obj;t.getValue()&&t.uncomment(t.getCursor(!0),t.getCursor(!1),{lineComment:"--"})},formatSql:function(e){e.gridView.on_format_sql()},focusOut:function(){document.activeElement.blur(),o.default.document.activeElement.blur()},toggleCaseOfSelectedText:function(e){var t=e.gridView.query_tool_obj,n=t.getSelection();n&&(n===n.toUpperCase()?t.replaceSelection(n.toLowerCase()):t.replaceSelection(n.toUpperCase()))},executeCommit:function(e){e.special_sql="COMMIT;",this.executeQuery(e)},executeRollback:function(e){e.special_sql="ROLLBACK;",this.executeQuery(e)},saveDataChanges:function(e){e.close_on_save=!1,e.save_data()},openQueryTool:function(e){e.gridView.handler.trigger("pgadmin-sqleditor:button:show_query_tool",e.gridView,e.gridView.handler)}};e.exports=a},90865:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.httpResponseRequiresNewTransaction=i,t.handleLoginRequiredAndTransactionRequired=a,t.handleQueryToolAjaxError=function(e,t,n,r,i,l){if(0===n.readyState)return(0,o.default)("Not connected to the server or the connection to the server has been closed.");a(e,t,n,r,i,l);var s=n.responseText;void 0!==n.responseJSON&&(void 0!==n.responseJSON.errormsg&&(s=n.responseJSON.errormsg),503===n.status&&void 0!==n.responseJSON.info&&"CONNECTION_LOST"==n.responseJSON.info&&(s=null,setTimeout((function(){r&&t.saveState(r,i),t.handle_connection_lost(!1,n)}))));return s},n(32564);var r,o=(r=n(91669))&&r.__esModule?r:{default:r};function i(e){return void 0===e.responseJSON&&void 0!==e.data?404===e.status&&e.data&&e.data.info&&"DATAGRID_TRANSACTION_REQUIRED"===e.data.info:404===e.status&&e.responseJSON&&e.responseJSON.info&&"DATAGRID_TRANSACTION_REQUIRED"===e.responseJSON.info}function a(e,t,n,r,o,a){return o=o&&o.length>0?o:[],e.Browser.UserManagement.isPgaLoginRequired(n)?(r&&t.saveState(r,o),e.Browser.UserManagement.pgaLogin()):a&&i(n)?(r&&t.saveState(r,o),t.initTransaction()):void 0}},28522:(e,t,n)=>{n(69826);var r=l(n(91669)),o=l(n(71158)),i=l(n(72316)),a=l(n(55958));function l(e){return e&&e.__esModule?e:{default:e}}var s=i.default.Model.extend({defaults:{recorded_time:void 0,event:void 0,pid:void 0,payload:void 0},schema:[{id:"recorded_time",label:(0,r.default)("Recorded time"),cell:"string",type:"text",editable:!1,cellHeaderClasses:"width_percent_20",headerCell:o.default.Extension.CustomHeaderCell},{id:"channel",label:(0,r.default)("Event"),cell:"string",type:"text",editable:!1,cellHeaderClasses:"width_percent_20",headerCell:o.default.Extension.CustomHeaderCell},{id:"pid",label:(0,r.default)("Process ID"),cell:"string",type:"text",editable:!1,cellHeaderClasses:"width_percent_20",headerCell:o.default.Extension.CustomHeaderCell},{id:"payload",label:(0,r.default)("Payload"),cell:"string",type:"text",editable:!1,cellHeaderClasses:"width_percent_40",headerCell:o.default.Extension.CustomHeaderCell}]}),u=i.default.Collection.extend({model:s}),d={collection:null,renderNotificationsGrid:function(e){d.collection||(d.collection=new u);var t=[{name:"recorded_time",label:(0,r.default)("Recorded time"),type:"text",editable:!1,cell:"string"},{name:"channel",label:(0,r.default)("Event"),type:"text",editable:!1,cell:"string"},{name:"pid",label:(0,r.default)("Process ID"),type:"text",editable:!1,cell:"string"},{name:"payload",label:(0,r.default)("Payload"),type:"text",editable:!1,cell:"string"}],n=new o.default.Grid({emptyText:(0,r.default)("No data found"),columns:t,collection:d.collection,className:"backgrid presentation table table-bordered table-hover table-noouter-border table-bottom-border"});e&&e.$container.find(".sql-editor-notifications").append(n.render().el)},updateNotifications:function(e){if(null!=e&&e.length>0){for(var t in e){var n="";n=""!=e[t].payload?(0,r.default)('Asynchronous notification "%s" with payload "%s" received from server process with PID %s',e[t].channel,e[t].payload,e[t].pid):(0,r.default)('Asynchronous notification "%s" received from server process with PID %s',e[t].channel,e[t].pid),a.default.info(n)}d.collection.add(e)}}};e.exports=d},72622:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.updateUIPreferences=function(e){var t=e.$el,n=e.preferences;e.handler.slickgrid&&(e.handler.slickgrid.CSVOptions={quoting:e.preferences.results_grid_quoting,quote_char:e.preferences.results_grid_quote_char,field_separator:e.preferences.results_grid_field_separator});t.find("#btn-load-file").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Open File"),n.btn_open_file)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Open File"),n.btn_open_file)).attr("accesskey",(0,o.shortcut_key)(n.btn_open_file)),t.find("#btn-save-file").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Save File"),n.btn_save_file)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Save File"),n.btn_save_file)).attr("accesskey",(0,o.shortcut_key)(n.btn_save_file)),t.find("#btn-find-menu-dropdown").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Find"),n.btn_find_options)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Find"),n.btn_find_options)).attr("accesskey",(0,o.shortcut_key)(n.btn_find_options)),t.find("#btn-copy-row").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Copy"),n.btn_copy_row)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Copy"),n.btn_copy_row)).attr("accesskey",(0,o.shortcut_key)(n.btn_copy_row)),t.find("#btn-paste-row").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Paste"),n.btn_paste_row)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Paste"),n.btn_paste_row)).attr("accesskey",(0,o.shortcut_key)(n.btn_paste_row)),t.find("#btn-delete-row").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Delete"),n.btn_delete_row)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Delete"),n.btn_delete_row)).attr("accesskey",(0,o.shortcut_key)(n.btn_delete_row)),t.find("#btn-filter").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Filter"),n.btn_filter_dialog)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Filter"),n.btn_filter_dialog)).attr("accesskey",(0,o.shortcut_key)(n.btn_filter_dialog)),t.find("#btn-filter-dropdown").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Filter options"),n.btn_filter_options)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Filter options"),n.btn_filter_options)).attr("accesskey",(0,o.shortcut_key)(n.btn_filter_options)),t.find("#btn-rows-limit").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Rows limit"),n.btn_rows_limit)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Rows limit"),n.btn_rows_limit)).attr("accesskey",(0,o.shortcut_key)(n.btn_rows_limit)),t.find("#btn-query-dropdown").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Execute options"),n.btn_execute_options)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Execute options"),n.btn_execute_options)).attr("accesskey",(0,o.shortcut_key)(n.btn_execute_options)),t.find("#btn-cancel-query").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Cancel query"),n.btn_cancel_query)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Cancel query"),n.btn_cancel_query)).attr("accesskey",(0,o.shortcut_key)(n.btn_cancel_query)),t.find("#btn-clear-dropdown").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Clear"),n.btn_clear_options)).attr("aria-label",(0,o.shortcut_accesskey_title)((0,l.default)("Clear"),n.btn_clear_options)).attr("accesskey",(0,o.shortcut_key)(n.btn_clear_options)),t.find("#btn-conn-status").attr("accesskey",(0,o.shortcut_key)(n.btn_conn_status)).find("i").attr("title",(0,o.shortcut_accesskey_title)((0,l.default)("Connection status (click for details)"),n.btn_conn_status)),t.find("#btn-flash").attr("title",(0,o.shortcut_title)((0,l.default)("Execute/Refresh"),n.execute_query)).attr("aria-label",(0,o.shortcut_title)((0,l.default)("Execute/Refresh"),n.execute_query)),t.find("#btn-explain").attr("title",(0,o.shortcut_title)((0,l.default)("Explain"),n.explain_query)).attr("aria-label",(0,o.shortcut_title)((0,l.default)("Explain"),n.explain_query)),t.find("#btn-explain-analyze").attr("title",(0,o.shortcut_title)((0,l.default)("Explain Analyze"),n.explain_analyze_query)).attr("aria-label",(0,o.shortcut_title)((0,l.default)("Explain Analyze"),n.explain_analyze_query)),t.find("#btn-save-results-to-file").attr("title",(0,o.shortcut_title)((0,l.default)("Save results to file"),n.download_results)).attr("aria-label",(0,o.shortcut_title)((0,l.default)("Save results to file"),n.download_results)),t.find("#btn-save-data").attr("title",(0,o.shortcut_title)((0,l.default)("Save Data Changes"),n.save_data)).attr("aria-label",(0,o.shortcut_title)((0,l.default)("Save Data Changes"),n.save_data)),t.find("#btn-commit").attr("title",(0,o.shortcut_title)((0,l.default)("Commit"),n.commit_transaction)).attr("aria-label",(0,o.shortcut_title)((0,l.default)("Commit"),n.commit_transaction)),t.find("#btn-rollback").attr("title",(0,o.shortcut_title)((0,l.default)("Rollback"),n.rollback_transaction)).attr("aria-label",(0,o.shortcut_title)((0,l.default)("Rollback"),n.rollback_transaction)),t.find("#btn-show-query-tool").attr("title",(0,o.shortcut_title)((0,l.default)("Query tool"),n.show_query_tool)).attr("aria-label",(0,o.shortcut_title)((0,l.default)("Query tool"),n.show_query_tool)),n.explain_verbose?t.find(".explain-verbose").removeClass("visibility-hidden"):t.find(".explain-verbose").addClass("visibility-hidden");n.explain_costs?t.find(".explain-costs").removeClass("visibility-hidden"):t.find(".explain-costs").addClass("visibility-hidden");n.explain_buffers?t.find(".explain-buffers").removeClass("visibility-hidden"):t.find(".explain-buffers").addClass("visibility-hidden");n.explain_timing?t.find(".explain-timing").removeClass("visibility-hidden"):t.find(".explain-timing").addClass("visibility-hidden");n.explain_summary?t.find(".explain-summary").removeClass("visibility-hidden"):t.find(".explain-summary").addClass("visibility-hidden");n.explain_settings?t.find(".explain-settings").removeClass("visibility-hidden"):t.find(".explain-settings").addClass("visibility-hidden");null!=e.connIntervalId&&(clearInterval(e.connIntervalId),e.connIntervalId=null);if(n.connection_status){var r=t.find("#btn-conn-status"),s=r.find("i");r.popover(),r.removeClass("connection-status-hide"),i.fetchConnectionStatus(e.handler,r,s),e.connIntervalId=setInterval(i.fetchConnectionStatus.bind(null,e.handler,r,s),1e3*n.connection_status_fetch_time)}else t.find("#btn-conn-status").addClass("connection-status-hide");var u=i.calcFontSize(n.sql_font_size);(0,a.default)(e.query_tool_obj.getWrapperElement()).css("font-size",u),n.plain_editor_mode?(e.query_tool_obj.setOption("mode","text/plain"),e.query_tool_obj.setOption("foldGutter",!1)):(e.query_tool_obj.setOption("mode","text/x-pgsql"),e.query_tool_obj.setOption("foldGutter",n.code_folding));e.query_tool_obj.setOption("foldGutter",n.code_folding),e.query_tool_obj.setOption("indentWithTabs",!n.use_spaces),e.query_tool_obj.setOption("indentUnit",n.use_spaces?n.tab_size:4),e.query_tool_obj.setOption("tabSize",n.use_spaces?n.tab_size:4),e.query_tool_obj.setOption("lineWrapping",n.wrap_code),e.query_tool_obj.setOption("autoCloseBrackets",n.insert_pair_brackets),e.query_tool_obj.setOption("matchBrackets",n.brace_matching),e.query_tool_obj.refresh(),e.historyComponent.setEditorPref({sql_font_size:u})},n(69826),n(32564),n(24812);var o=n(72945),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(81240)),a=s(n(19755)),l=s(n(91669));function s(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}},20882:e=>{e.exports={TRANSACTION_STATUS_IDLE:0,TRANSACTION_STATUS_ACTIVE:1,TRANSACTION_STATUS_INTRANS:2,TRANSACTION_STATUS_INERROR:3,TRANSACTION_STATUS_UNKNOWN:5}},81240:(e,t,n)=>{var r,o;function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(41539),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(69600),n(15306),n(74916),n(47042),n(54678),n(9653),n(79753),r=[n(19755),n(81311),n(91669),n(28008),n(55455)],void 0===(o=function(e,t,n,r,o){var a={epicRandomString:function(e){for(var t=[],n="0123456789abcdef",r=0;r<36;r++)t[r]=n.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=n.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("").replace(/-/g,"").substr(0,e)},getHash:function(e){for(var t=0,n=e.length,r=0;r<n;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t},calculateColumnWidth:function(t){e("body").append('<span id="pg_text" style="visibility: hidden;">'+t+"</span>");var n=e("#pg_text").width()+23;return e("#pg_text").remove(),n},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},disable_connection_dropdown:function(t){t?(e(".conn-info-dd").prop("disabled",!0),e(".connection-data").css({pointerEvents:"none",cursor:"arrow"})):(e(".conn-info-dd").prop("disabled",!1),e(".connection-data").css({pointerEvents:"auto",cursor:"pointer"}))},previousStatus:null,fetchConnectionStatus:function(t,o,i){var l=r("sqleditor.connection_status",{trans_id:t.transId});if("visible"===document.visibilityState&&"visible"===o.data("panel-visible")&&!i.hasClass("obtaining-conn")){var s=t;e.ajax({url:l,method:"GET"}).done((function(e){if(e&&e.data){var t=e.data.status,r=e.data.message,l=!1;switch(s.update_notifications(e.data.notifies),t){case 1:t!=a.previousStatus||i.hasClass("fa-hourglass-half")||(i.removeClass().addClass("fa fa-hourglass-half"),l=!0);break;case 2:a.previousStatus==t||i.hasClass("fa-clock")||(i.removeClass().addClass("fa fa-clock"),l=!0);break;case 3:a.previousStatus==t||i.hasClass("fa-exclamation-circle")||(i.removeClass().addClass("fa fa-exclamation-circle"),l=!0);break;case 4:a.previousStatus==t||i.hasClass("fa-exclamation-triangle")||(i.removeClass().addClass("fa fa-exclamation-triangle"),l=!0);break;default:a.previousStatus==t||i.hasClass("fa-query_tool_connected")||(i.removeClass().addClass("pg-font-icon icon-connected"),l=!0)}a.previousStatus=t,l&&(o.popover("hide"),o.attr("data-content",r))}else a.previousStatus=-99,r=n("An unexpected error occurred - ensure you are logged into the application."),o.attr("data-content",r),i.hasClass("icon-disconnected")||(o.popover("hide"),i.removeClass().addClass("pg-icon-font icon-disconnected"))})).fail((function(e){a.previousStatus=-1;var t=n("Transaction status check failed.");0==e.readyState?t=n("Not connected to the server or the connection to the server has been closed."):e.responseJSON&&e.responseJSON.errormsg&&(t=e.responseJSON.errormsg),o.attr("data-content",t),i.hasClass("icon-disconnected")||(o.popover("hide"),i.removeClass().addClass("pg-font-icon icon-disconnected"))}))}},updateConnectionStatusFlag:function(t){var n=e(".connection_status");n.data("panel-visible")!=t&&n.data("panel-visible",t)},calcFontSize:function(e){if(e){e=parseFloat(Math.round(parseFloat(e+"e+2"))+"e-2");var t=Number(e);if(t>0)return t+"em"}return"1em"},addEditableIcon:function(e,n){var r={cssClass:"editable-column-header-icon",content:n?'<i class="fa fa-pencil-alt"></i>':'<i class="fa fa-lock"></i>'};t.isUndefined(e.header)||t.isUndefined(e.header.buttons)?e.header={buttons:[r]}:e.header.buttons.push(r)},isModalOpen:function(e){if(Array.isArray(e)){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;try{if(o.dialog(r)&&o.dialog(r).isOpen())return!0}catch(e){console.warn(e.stack||e)}}}catch(e){n.e(e)}finally{n.f()}}return!1}};return a}.apply(t,r))||(e.exports=o)},77019:(e,t,n)=>{n(79753),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(91038),n(47042),n(68309),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.browserTreeState=t.pgBrowser=void 0,n(32564),n(69600),n(69826),n(64765),n(74916),n(82772),n(23123),n(40561);var r=s(n(81311)),o=s(n(19755)),i=s(n(28008)),a=s(n(91669)),l=s(n(55112));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=l.default.Browser=l.default.Browser||{};t.pgBrowser=c;var f=c.browserTreeState=c.browserTreeState||{};t.browserTreeState=f,r.default.extend(c.browserTreeState,{parent:"server",orig_parent:"server_group",stored_state:{},last_state:{},current_state:{},init:function(){var e=c.get_preference("browser","browser_tree_state_save_interval");r.default.isUndefined(e)||-1===e.value?r.default.isUndefined(e)||o.default.ajax({url:(0,i.default)("settings.reset_tree_state"),type:"DELETE"}).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,a.default)('Error resetting the tree saved state."'),t)})):(setInterval(this.save_state,1e3*e.value),this.fetch_state.apply(this),c.Events.on("pgadmin:browser:tree:expand-from-previous-tree-state",this.expand_from_previous_state,this),c.Events.on("pgadmin:browser:tree:remove-from-tree-state",this.remove_from_cache,this),c.Events.on("pgadmin:browser:tree:update-tree-state",this.update_cache,this))},save_state:function(){var e=c.browserTreeState;e.last_state!=JSON.stringify(e.current_state)&&o.default.ajax({url:(0,i.default)("settings.save_tree_state"),type:"POST",contentType:"application/json",data:JSON.stringify(e.current_state)}).done((function(){e.last_state=JSON.stringify(e.current_state)})).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,a.default)('Error saving the tree state."'),t)}))},fetch_state:function(){var e=this;o.default.ajax({url:(0,i.default)("settings.get_tree_state"),type:"GET",dataType:"json",contentType:"application/json"}).done((function(t){e.stored_state=t})).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,a.default)("Error fetching the tree state."),t)}))},update_cache:function(e){var t,n=e&&c.tree.itemData(e),o=c.tree.getTreeNodeHierarchy(e),i=c.tree.pathId(c.tree.parent(e)),a=i.join(),l=[],s=-1;if(c.tree.hasParent(e)&&this.parent in o){if(t=o[this.parent]._id,c.tree.isOpen(e)){i.push(n.id),l=i.join(),t in this.current_state||(this.current_state[t]={paths:[],selected:{},conn_status:{},is_opened:{}});var u=r.default.find(this.current_state[t].paths,(function(e){return-1!==e.search(l)}));r.default.isUndefined(u)&&(r.default.isUndefined(this.current_state[t].paths)?this.current_state[t].paths=[]:s=this.current_state[t].paths.indexOf(a),-1!==s?this.current_state[t].paths[s]=l:this.current_state[t].paths.push(l))}this.update_database_status(e),this.update_current_selected_item(o)}},remove_from_cache:function(e){var t=this,n=t.stored_state||{},o=e&&c.tree.itemData(e),i=c.tree.getTreeNodeHierarchy(e);if(null!==i&&c.tree.hasParent(e)&&i.hasOwnProperty(t.parent)){var a=i&&i[t.parent]._id,l=i&&i[t.orig_parent].id;if(this.update_database_status(e),o._type!=t.parent&&"database"!=o._type){if(c.tree.isClosed(e)){var s=t.current_state[a].paths,u=void 0;if(i.hasOwnProperty("database")&&(u=i.database.id),!r.default.isUndefined(s)&&!r.default.isUndefined(s.length)){var d=0,f=void 0;r.default.each(s,(function(e){if(!r.default.isUndefined(e)){var n=e.split(",");if(-1!==n.indexOf(o.id)&&(void 0===u||void 0!==u&&-1!==n.indexOf(u))){var i=n.indexOf(o.id);n.splice(i),(f=n.join())==l?t.current_state[a].paths.splice(e,1):t.current_state[a].paths[d]=f}d++}}))}}}else a in n&&"paths"in n[a]&&(n[a].paths=t.current_state[a].paths,t.save_state())}},expand_from_previous_state:function(e){var t=this,n=this.current_state||{},o=e&&c.tree.itemData(e),i=c.tree.getTreeNodeHierarchy(e);if(null!==i&&c.tree.hasParent(e)&&i.hasOwnProperty(t.parent)&&(o._type!=t.parent||!1!==c.tree.isOpen(e))){var a=n[i[t.parent]._id];if(!("database"==o._type&&a&&"conn_status"in a&&"is_opened"in a)||0!==a.conn_status[o.id]&&0!==a.is_opened[o.id]&&o.id in a.is_opened){if(!r.default.isUndefined(a)&&"paths"in a&&!r.default.isUndefined(a.paths.length)){var l=u(a.paths),s=void 0;i.hasOwnProperty("database")&&(s=i.database.id),r.default.each(l,(function(a){if(!r.default.isUndefined(a)){var l=a.split(",");if(-1!==l.indexOf(o.id)&&(void 0===s||void 0!==s&&-1!==l.indexOf(s))){var u=l.indexOf(o.id);if(c.tree.open(e),c.tree.ensureLoaded(e),u==l.length-1){var d=n[i[t.parent]._id].paths.indexOf(a);n[i[t.parent]._id].paths.splice(d,1)}}}}))}this.select_tree_item(e)}}},update_database_status:function(e){var t=e&&c.tree.itemData(e),n=c.tree.getTreeNodeHierarchy(e);if(n.hasOwnProperty("database")){var r=n.database.id,o=n&&n[this.parent]._id;o in this.current_state&&"selected"in this.current_state[o]&&(n.database.connected?this.current_state[o].conn_status[r]=1:this.current_state[o].conn_status[r]=0,"database"==t._type&&(c.tree.isOpen(e)?this.current_state[o].is_opened[r]=1:this.current_state[o].is_opened[r]=0))}},update_current_selected_item:function(e){if(this.parent in e){var t=e&&e[this.parent]._id,n=c.tree.itemData(c.tree.selected()),o=void 0;n=n?n.id:void 0,e.hasOwnProperty("database")&&(o=e.database.id),t in this.current_state&&"selected"in this.current_state[t]&&!r.default.isUndefined(n)&&(this.current_state[t].selected[e[this.parent].id]=n,r.default.isUndefined(o)||(this.current_state[t].selected[o]=n))}},select_tree_item:function(e){var t=this.stored_state||{},n=e&&c.tree.itemData(e),r=c.tree.getTreeNodeHierarchy(e),o=t[r[this.parent]._id];if(r.hasOwnProperty("server")){var i=r.server.id;o&&"selected"in o&&i in o.selected&&o.selected[i]==n.id&&c.tree.select(e,!0,"center")}}})},79226:(e,t,n)=>{n(82526),n(41817),n(32165),n(78783),n(66992),n(33948),n(38880),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.findInTree=_,t.isValidTreeNodeData=t.Tree=void 0,n(88674),n(41539),n(82772),n(23123),n(74916),n(40561),n(57327),n(79753),n(69600),n(23157),n(89554),n(54747),n(47941),n(15306),n(69070),n(35666);var r=u(n(96486)),o=u(n(19755)),i=u(n(55112)),a=n(46521),l=n(95197),s=n(44092);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){m(i,r,o,a,l,"next",e)}function l(e){m(i,r,o,a,l,"throw",e)}a(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){var o,a=n?n._metadata.data:[],l=i.default.Browser;if(a&&l.Nodes[a._type]){if(o=l.Nodes[a._type],null===l.tree)return;if("dragstart"==t&&l.tree.handleDraggable(e,n),"added"!=t&&"beforeopen"!=t&&"loaded"!=t||l.tree.addNewNode(n.getMetadata("data").id,n.getMetadata("data"),n,n.parent.path),r.default.isObject(o.callbacks)&&t in o.callbacks&&"function"==typeof o.callbacks[t]&&!o.callbacks[t].apply(o,[n,a,l,[],t]))return!0;try{o.trigger("browser-node."+t,o,n,a),l.Events.trigger("pgadmin-browser:tree:"+t,n,a,o)}catch(e){return console.warn(e.stack||e),!1}}return!0}var g=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tree=t,this.tree.onTreeEvents(h),this.rootNode=n.tempTree,this.Nodes=r?r.Nodes:i.default.Browser.Nodes,this.draggableTypes={}}var t,n,s,u,d,f,m,g,w,O,S,x,C,P,E,j,k,D,T,R,N,A,I;return t=e,(n=[{key:"refresh",value:(I=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.refresh(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"add",value:(A=b(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.create(t.parent,n.itemData);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return A.apply(this,arguments)})},{key:"before",value:(N=b(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,this.tree.create(t.parent,n);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.resolve.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return N.apply(this,arguments)})},{key:"update",value:(R=b(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.update(t,n);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return R.apply(this,arguments)})},{key:"remove",value:(T=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.remove(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"append",value:(D=b(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,this.tree.create(t,n);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.resolve.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return D.apply(this,arguments)})},{key:"destroy",value:(k=b(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.tree.getModel(),this.rootNode.children=[],!t.root){e.next=6;break}return t.root.isExpanded=!1,e.next=6,t.root.hardReloadChildren();case 6:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"next",value:function(e){if(e){var t=this.parent(e);if(t&&t.children.length>0){var n=t.children.indexOf(e);if(-1!==n&&t.children.length!==n+1)return t.children[n+1]}}return null}},{key:"prev",value:function(e){if(e){var t=this.parent(e);if(t&&t.children.length>0){var n=t.children.indexOf(e);if(-1!==n&&0!==n)return t.children[n-1]}}return null}},{key:"open",value:(j=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isOpen(t)){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,this.tree.toggleDirectory(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)})},{key:"ensureLoaded",value:(E=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ensureLoaded();case 2:case"end":return e.stop()}}),e)}))),function(e){return E.apply(this,arguments)})},{key:"ensureVisible",value:(P=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.ensureVisible(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"openPath",value:(C=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return parent=t.parent,e.next=3,this.tree.openDirectory(parent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"close",value:(x=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.closeDirectory(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"toggle",value:(S=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.toggleDirectory(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"select",value:(O=b(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],r=o.length>2&&void 0!==o[2]?o[2]:"auto",e.next=4,this.tree.setActiveFile(t,n,r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"selectNode",value:(w=b(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>1&&void 0!==o[1]&&o[1],r=o.length>2&&void 0!==o[2]?o[2]:"auto",this.tree.setActiveFile(t,n,r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"unload",value:(g=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.unload(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"addIcon",value:(m=b(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==t&&void 0!==t.getMetadata("data")&&(t.getMetadata("data").icon=n.icon),e.next=3,this.tree.addIcon(t,n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"removeIcon",value:function(){}},{key:"setLeaf",value:function(){}},{key:"setLabel",value:(f=b(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.tree.setLabel(t,n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"setInode",value:(d=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._children&&(t._children=null),e.next=3,this.tree.closeDirectory(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"setId",value:(u=b(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(t.getMetadata("data").id=n.id);case 1:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})},{key:"deselect",value:function(e){this.tree.deSelectActiveFile(e)}},{key:"wasInit",value:function(){return!0}},{key:"wasLoad",value:function(e){return!e||e.type!==a.FileType.Directory||e.isExpanded&&null!=e.children&&e.children.length>0}},{key:"parent",value:function(e){return e.parent}},{key:"first",value:function(e){var t=this.tree.getModel();return null==e&&null!==t.root.children?t.root.children[0]:null!=e&&e.branchSize>0?e.children[0]:null}},{key:"children",value:function(e){var t=this.tree.getModel();return e?null!==e.children?e.children:[]:t.root.children}},{key:"itemFrom",value:function(e){return this.tree.getItemFromDOM(e[0])}},{key:"DOMFrom",value:function(e){return this.tree.getDOMFromItem(e)}},{key:"addCssClass",value:function(e,t){this.tree.addCssClass(e,t)}},{key:"path",value:function(e){if(e)return e.path}},{key:"pathId",value:function(e){if(e){var t=e.path.split("/");return t.splice(0,1),t}return[]}},{key:"itemFromDOM",value:function(e){return this.tree.getItemFromDOM(e[0])}},{key:"siblings",value:function(e){if(this.hasParent(e)){var t=this.parent(e).children.filter((function(t){return t.path!==e.path}));return"object"!==p(t)?[t]:t}return[]}},{key:"hasParent",value:function(e){return!(!e||!e.parent)}},{key:"isOpen",value:function(e){return e.type===a.FileType.Directory&&e.isExpanded}},{key:"isClosed",value:function(e){return e.type===a.FileType.Directory&&!e.isExpanded}},{key:"itemData",value:function(e){return null!=e&&void 0!==e.getMetadata("data")?e._metadata.data:[]}},{key:"getData",value:function(e){return void 0!==e&&void 0!==e.getMetadata("data")?e._metadata.data:[]}},{key:"isRootNode",value:function(e){return e===this.tree.getModel().root}},{key:"isInode",value:function(e){var t=this.children(e);return null!=t&&t.length>0}},{key:"selected",value:function(){return this.tree.getActiveFile()}},{key:"resizeTree",value:function(){this.tree.resize()}},{key:"findNodeWithToggle",value:function(e){var t=this;if(null==e||!Array.isArray(e))return Promise.reject();e="/browser/"+e.join("/");var n=function(t){return void 0!==t&&void 0!==e&&(e.startsWith(t)||e===t)};return function r(o){return new Promise((function(i,a){null!=e&&0!==e.length||i(null),void 0===o.path||n(o.path)?o.path===e?i(o):t.open(o).then((function(){for(var e=o.children,t=0,l=e.length;t<l;t++){var s=e[t];if(n(s.path))return void i(r(s))}a(null)})).catch((function(){a(null)})):a(null)}))}(t.tree.getModel().root)}},{key:"findNodeByDomElement",value:function(e){var t=e.path;if(t&&t[0])return this.findNode(t)}},{key:"addNewNode",value:function(e,t,n,r){var o;return o=this.findNode(r),this.createOrUpdateNode(e,t,o,n)}},{key:"findNode",value:function(e){return null==e||0===e.length?this.rootNode:_(this.rootNode,e)}},{key:"createOrUpdateNode",value:function(e,t,n,r){var o=e;null!=n&&void 0!==n.path&&"/browser"!=n.path&&(o=n.path+"/"+e);var i=this.findNode(o);if(null!==i)return i.data=t,i.domNode=r,i;var a=new l.TreeNode(e,t,r,n);return n===this.rootNode&&(a.parentNode=null),null!=n&&n.children.push(a),a}},{key:"translateTreeNodeIdFromReactTree",value:function(e){for(var t=e,n=[];null!=t&&("/browser"!==t.path&&n.unshift(t.path),this.hasParent(t));)t=this.parent(t);return n}},{key:"getTreeNodeHierarchy",value:function(e){var t=0,n=0,o={};if(void 0!==e){var i=l.TreeNode.prototype.isPrototypeOf(e)?e:this.findNode(e.path);if(void 0!==i){do{var a=i.getData();if(a._type in this.Nodes&&this.Nodes[a._type].hasId){var s=v(a._type,n);void 0===o[s]&&(o[s]=r.default.extend({},a,{priority:t}),t-=1)}n+=1,i=i.hasParent()?i.parent():null}while(i);return o}}}},{key:"registerDraggableType",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"object"==p(e)?Object.keys(e).forEach((function(n){t.registerDraggableType(n,e[n])})):null!=n&&e.replace(/ +/," ").split(" ").forEach((function(e){t.draggableTypes[e]=n}))}},{key:"getDraggable",value:function(e){return this.draggableTypes[e]?this.draggableTypes[e]:null}},{key:"handleDraggable",value:function(e,t){var n=t.getMetadata("data"),i=this.getDraggable(n._type);if(null!=i){var a=i(n,t,this.getTreeNodeHierarchy(t));if("string"==typeof a?a={text:a,cur:{from:a.length,to:a.length}}:a.cur||(a=c(c({},a),{},{cur:{from:a.text.length,to:a.text.length}})),e.dataTransfer.setData("text",JSON.stringify(a)),e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="move"),e.dataTransfer.setDragImage){var l=(0,o.default)('\n            <div class="drag-tree-node">\n              <span>'.concat(r.default.escape(a.text),"</span>\n            </div>"));(0,o.default)("body .drag-tree-node").remove(),(0,o.default)("body").append(l),e.dataTransfer.setDragImage(l[0],0,0)}}}}])&&y(t.prototype,n),s&&y(t,s),e}();function v(e,t){return"partition"===e&&t>0?"table":e}function _(e,t){return null===t?e:function e(n){if(void 0!==n.path&&void 0!==t&&!t.startsWith(n.path))return null;for(var r=0,o=n.children.length;r<o;r++){var i=e(n.children[r]);if(null!==i)return i}return n.path===t?n:null}(e)}t.Tree=g;var w=s.isValidData;t.isValidTreeNodeData=w},28008:(e,t,n)=>{var r,o;n(15306),n(74916),r=[n(8012)],void 0===(o=function(e){return function(t,n){var r=e[t],o=r;return r?o=o.replace(/([<])([^:^>]*:)?([^>]+)([>])/g,(function(e,t,r,o){return o in n?n[o]:e})):r}}.apply(t,r))||(e.exports=o)},44092:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.parseShortcutValue=function(e){var t="";e.alt&&(t+="alt+");e.shift&&(t+="shift+");e.control&&(t+="ctrl+");return t+=e.key.char.toLowerCase()},t.handleKeyNavigation=function(e){var t=(0,o.default)(e.currentTarget).find(".wizard-header"),n=(0,o.default)(e.currentTarget).find(".wizard-footer"),r=(0,o.default)(e.currentTarget).find(".select-row-cell:first"),i=(0,o.default)(e.currentTarget).find(".select-row-cell:last"),a=(0,o.default)(t).find("button:enabled:first"),l=(0,o.default)(t).find("button:enabled:last"),s=(0,o.default)(n).find("button:enabled:last"),u=(0,o.default)(n).find("button:enabled:first");e.shiftKey&&9===e.keyCode?a&&(0,o.default)(a).is((0,o.default)(e.target))?s&&((0,o.default)(s).focus(),e.preventDefault(),e.stopPropagation()):(0,o.default)(u).is((0,o.default)(e.target))&&((0,o.default)(r).find(".custom-control-input").is(":visible")?((0,o.default)(i).find(".custom-control-input").focus(),e.preventDefault(),e.stopPropagation()):(0,o.default)(e.currentTarget).find(".wizard-content").find(".CodeMirror-scroll").is(":visible")&&(0,o.default)(l).focus()):9===e.keyCode?s&&(0,o.default)(s).is((0,o.default)(e.target))?((0,o.default)(a).focus(),e.preventDefault(),e.stopPropagation()):"Name"==e.target.innerText?((0,o.default)(r).find(".custom-control-input").is(":visible")?(0,o.default)(r).find(".custom-control-input").focus():(0,o.default)(u).focus(),e.preventDefault(),e.stopPropagation()):"DIV"==e.target.tagName?((0,o.default)(e.currentTarget).find(".custom-control-input:first").trigger("focus"),e.preventDefault(),e.stopPropagation()):"TEXTAREA"==e.target.tagName&&(0,o.default)(u).focus():27===e.keyCode&&(0,o.default)(t).find("button.ajs-close").click()},t.findAndSetFocus=function(e){if(0==e.length)return;setTimeout((function(){var t=e.find("button.fa-plus:first");0==t.length&&(t=e.find("\n          .pgadmin-controls:first .btn:not(.toggle),\n          .pgadmin-controls:first,\n          .ajs-commands:first,\n          .CodeMirror-scroll,\n          .pgadmin-wizard").find('*[tabindex]:not([tabindex="-1"]),input:enabled')),t.length>0?t[0].focus():e[0].focus()}),200)},t.getEpoch=function(e){var t=e||new Date;return parseInt(t.getTime()/1e3)},t.getGCD=function(e){var t=function e(t,n){return 0==t?n:e(n%t,t)},n=e.length;if(n<=2)return t(e[0],e[1]);for(var r=e[0],o=1;o<n;o++)r=t(e[o],r);return r},t.getMod=function(e,t){return(e%t+t)%t},t.parseFuncParams=function(e){var t=[],n="",r="";if(e.endsWith("()"))n=e.substring(0,e.length-2);else if(e.endsWith(")")){if(!e.endsWith("()")&&e.endsWith(")")){var o=0,i=e.length;for(o=e.length-2;o>=0;){if("("==e[o]){i=o;break}if('"'==e[o])for(o--;'"'!=e[o];)o--;o--}n=e.substring(0,i),r=e.substring(i+1,e.length-1);var a=0,l="",s=["IN","OUT","INOUT","VARIADIC"];for(o=0;o<r.length;){if('"'==r[o])for(o++;'"'!=r[o];)o++;else" "==r[o]?(""==l||s.indexOf(l)>-1)&&(l=r.substring(a,o),a=o+1):","==r[o]&&(t.push([l,r.substring(a,o)]),l="",a=o+1);o++}t.push([l,r.substring(a)])}}else n=e;return{func_name:n,param_string:r,params:t}},t.quote_ident=u,t.fully_qualify=function(e,t,n){var r=e.tree.getTreeNodeHierarchy(n),o="";void 0!==r.schema?o=u(r.schema._label):void 0!==r.view?o=u(r.view._label):void 0!==r.catalog&&(o=u(r.catalog._label));void 0!==r.package&&"package"!=t._type&&(""==o?o=u(r.package._label):o+="."+u(r.package._label));return""!=o?o+"."+u(t._label):u(t._label)},t.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},t.titleize=function(e){return""===e||null===e?e:e.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})).join(" ")},t.sprintf=function(e){try{var t=arguments;return e.split("%s").map((function(e,n){return n>0?n<t.length?[t[n],e].join(""):["%s",e].join(""):e})).join("")}catch(t){return console.error(t),e}},t.CSVToArray=function(e,t,n){t=t||",",n=n||'"';var r=new RegExp("(\\"+t+"|\\r?\\n|\\r|^)"+('"'==n?'(?:"([^"]*(?:""[^"]*)*)"|':"(?:'([^']*(?:''[^']*)*)'|")+('"'==n?'([^"\\'+t+"\\r\\n]*))":"([^'\\"+t+"\\r\\n]*))"),"gi"),o=[[]],i=null;for(;i=r.exec(e);){var a,l=i[1];l.length&&l!==t&&o.push([]),a=i[2]?i[2].replace(new RegExp(n+n,"g"),n):i[3],o[o.length-1].push(a)}return o},t.hasBinariesConfiguration=function(e,t){var n="paths",o="pg_bin_dir",l=(0,i.default)("Please configure the PostgreSQL Binary Path in the Preferences dialog.");(t.type&&"ppas"===t.type||"ppas"===t.server_type)&&(o="ppas_bin_dir",l=(0,i.default)("Please configure the EDB Advanced Server Binary Path in the Preferences dialog."));var s=e.get_preference(n,o);if(!s)return a.default.alert((0,i.default)("Preferences Error"),(0,i.default)("Failed to load preference %s of module %s",o,n)),!1;if(r.default.isUndefined(s.value)||(u=s.value,d=t.version,c=!1,f=!1,p=JSON.parse(u),r.default.each(p,(function(e){d>=e.version&&d<e.next_major_version&&(r.default.isUndefined(e.binaryPath)||r.default.isNull(e.binaryPath)||""===e.binaryPath.trim()||(f=!0)),e.isDefault&&(c=!0)})),!(f|c)))return a.default.alert((0,i.default)("Configuration required"),l),!1;var u,d,c,f,p;return!0},t.evalFunc=function(e,t,n){if(r.default.isFunction(t))return t.apply(e,[n]);return t},t.registerDetachEvent=function(e){e.on(s.EVENT.DETACHED,(function(){(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").attr({style:"z-index: 1200"})})),e.on(s.EVENT.ORDER_CHANGED,(function(){var e=this.docker(this._panel).$container.offset(),t=this.$container.offset(),n=this.$container.width(),r=this.$container.height();(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").css("top",t.top-e.top),(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").css("left",t.left-e.left),(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").css("width",n),(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").find(".wcIFrameFloating").css("height",r),(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").attr({style:"z-index: 1200"})}))},t.isString=t.isFunction=t.isValidData=void 0,n(69826),n(32564),n(83710),n(91058),n(27852),n(82772),n(64765),n(74916),n(15306),n(69600),n(21249),n(23123),n(24603),n(39714),n(73210);var r=l(n(81311)),o=l(n(19755)),i=l(n(91669));n(35816);var a=l(n(55958));function l(e){return e&&e.__esModule?e:{default:e}}var s=window.wcDocker;t.isValidData=function(e){return!r.default.isUndefined(e)&&!r.default.isNull(e)};t.isFunction=function(e){return r.default.isFunction(e)};function u(e){var t=!1;return isNaN(parseInt(e))||(t=!0),e.search(/[^a-z0-9_]/g)>-1&&(e=e.replace(/"/g,'""'),t=!0),t?'"'.concat(e,'"'):e}t.isString=function(e){return r.default.isString(e)}},76055:(e,t,n)=>{n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(79753),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.minMaxValidator=function(e,t,n,a){if(o.default.isUndefined(t)||o.default.isNull(t)||""===String(t))return null;if(!o.default.isUndefined(n)&&t<n)return(0,r.sprintf)(i.default.Browser.messages.MUST_GR_EQ,e,n);if(!o.default.isUndefined(a)&&t>a)return(0,r.sprintf)(i.default.Browser.messages.MUST_LESS_EQ,e,a);return null},t.numberValidator=function(e,t){if(o.default.isUndefined(t)||o.default.isNull(t)||""===String(t))return null;if(!new RegExp("^-?[0-9]+(.?[0-9]*)?$").test(t))return(0,r.sprintf)(i.default.Browser.messages.MUST_BE_NUM,e);return null},t.integerValidator=function(e,t){if(o.default.isUndefined(t)||o.default.isNull(t)||""===String(t))return null;if(!new RegExp("^-?[0-9]*$").test(t))return(0,r.sprintf)(i.default.Browser.messages.MUST_BE_INT,e);return null},t.emptyValidator=function(e,t){if(c(t))return(0,r.sprintf)(i.default.Browser.messages.CANNOT_BE_EMPTY,e);return null},t.isEmptyString=c,t.checkUniqueCol=function(e,t){if(t){var n,r=s(e.entries());try{for(r.s();!(n=r.n()).done;){var i,a=l(n.value,2),u=a[0],d=a[1],c=s(e.slice(0,u));try{for(c.s();!(i=c.n()).done;){var f=i.value;if(o.default.isEqual(o.default.pick(f,t),o.default.pick(d,t)))return u}}catch(e){c.e(e)}finally{c.f()}}}catch(e){r.e(e)}finally{r.f()}}return-1},n(24603),n(74916),n(39714),n(73210),n(15306),n(41539),n(66992),n(33948),n(47042);var r=n(44092),o=a(n(96486)),i=a(n(55112));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return o.default.isUndefined(e)||o.default.isNull(e)||""===String(e).trim()||""==String(e).replace(/^\s+|\s+$/g,"")}},1950:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function e(t){return t.opener&&t.opener.pgAdmin?e(t.opener):t},o=function(){var e=null;try{e=window.opener&&window.opener.pgAdmin?r(window.opener):window.parent&&window.parent.pgAdmin?window.parent:window.top&&window.top.pgAdmin?window.top:window}catch(t){e=window}return e}();t.default=o},9807:(e,t,n)=>{var r=n(64492);n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getDatabaseLabel=u,t.getPanelTitle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=e.get_preferences_for_module("browser");null==t&&null==r&&(t=e.tree.selected());if(null==r){if(null==(r=e.tree.getTreeNodeHierarchy(t)))return;if(d(r))return}i||(i=u(r));var l="";l=o?s.qt_default_placeholder:n||a.qt_tab_title_placeholder;var c={database:i,username:r.server.user.name,server:r.server.label,type:"query_tool"};return f(l,c)},t.setQueryToolDockerTitle=function(e,t,n,i){var a="",l="";c(e,i),i||"true"==i?(l=(0,o.default)("File - ")+n,a="fa fa-file-alt"):"false"==t||0==t?(l=(0,o.default)("View/Edit Data - ")+n,a="pg-font-icon icon-view_data"):(l=(0,o.default)("Query Tool - ")+n,a="pg-font-icon icon-query_tool");e.title('<span title="'+r.escape(l)+'">'+r.escape(n)+"</span>"),e.icon(a)},t.set_renamable_option=c,t.generateTitle=f,t.refresh_db_node=function(e,t){a.default.alert().setting({title:(0,o.default)("Database moved/renamed"),label:(0,o.default)("OK"),message:(0,o.default)(e),onok:function(){s.Browser.Nodes.database.callbacks.refresh(void 0,t)}}).show()},n(68309),n(15306),n(74916),n(24603),n(39714);var o=l(n(91669)),i=l(n(1950)),a=l(n(55958));function l(e){return e&&e.__esModule?e:{default:e}}var s=i.default.pgAdmin;function u(e){return e.database?e.database.label:e.server.db}function d(e){return void 0===e.server}function c(e,t){t||"true"==t?e.renamable(!1):e.renamable(!0)}function f(e,t){return"query_tool"==t.type?e=(e=(e=e.replace(new RegExp("%DATABASE%"),r.unescape(t.database))).replace(new RegExp("%USERNAME%"),r.unescape(t.username))).replace(new RegExp("%SERVER%"),r.unescape(t.server)):"datagrid"==t.type?e=(e=(e=(e=(e=e.replace(new RegExp("%DATABASE%"),r.unescape(t.database))).replace(new RegExp("%USERNAME%"),r.unescape(t.username))).replace(new RegExp("%SERVER%"),r.unescape(t.server))).replace(new RegExp("%SCHEMA%"),r.unescape(t.schema))).replace(new RegExp("%TABLE%"),r.unescape(t.table)):"debugger"==t.type?e=(e=(e=(e=e.replace(new RegExp("%FUNCTION%"),r.unescape(t.function_name))).replace(new RegExp("%ARGS%"),r.unescape(t.args))).replace(new RegExp("%SCHEMA%"),r.unescape(t.schema))).replace(new RegExp("%DATABASE%"),r.unescape(t.database)):"psql_tool"==t.type&&(e=(e=(e=e.replace(new RegExp("%DATABASE%"),r.unescape(t.database))).replace(new RegExp("%USERNAME%"),r.unescape(t.username))).replace(new RegExp("%SERVER%"),r.unescape(t.server))),r.escape(e)}},52934:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.showDataGrid=function(e,t,n,r,a,l){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,f=t.tree.findNodeByDomElement(a);if(void 0===f||!f.getData())return void c.default.alert((0,o.default)("Data Grid Error"),(0,o.default)("No object selected."));var p=t.tree.getTreeNodeHierarchy(a);if(g(p)||!v(p))return;var m=["table","partition","view","mview","foreign_table","catalog_object"];if(-1===m.indexOf(f.getData()._type))return;var w=b(l,r,f.getData(),p),O=_(t,a);if(s){h(n,t);var S=y(f.getData(),p),x=function(t){e.launch_grid(l,w,!1,O,null,t)};u.default.get((0,i.default)("datagrid.filter"),(function(e){n.filterDialog((0,o.default)("Data Filter - %s",O),e,S,d,x).resizeTo(t.stdW.sm,t.stdH.sm)}))}else e.launch_grid(l,w,!1,O)},t.retrieveNameSpaceName=m,t.generateDatagridTitle=_,n(82772),n(69826),n(32564),n(68309);var o=p(n(91669)),i=p(n(28008)),a=n(9807),l=p(n(20811)),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(81240)),u=p(n(19755)),d=p(n(81311)),c=p(n(55958));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e){return e&&e.__esModule?e:{default:e}}function m(e){return void 0!==e.schema?e.schema.label:void 0!==e.view?e.view.label:void 0!==e.catalog?e.catalog.label:""}function b(e,t,n,r){var o=(0,i.default)("datagrid.panel",{trans_id:e});return o+="?is_query_tool=".concat(!1)+"&cmd_type=".concat(t.mnuid)+"&obj_type=".concat(n._type)+"&obj_id=".concat(n._id)+"&sgid=".concat(r.server_group._id)+"&sid=".concat(r.server._id)+"&did=".concat(r.database._id)+"&server_type=".concat(r.server.server_type)}function y(e,t){var n={sid:t.server._id,did:t.database._id,obj_id:e._id};return(0,i.default)("datagrid.filter_validate",n)}function h(e,t){var n=null;e.filterDialog||e.dialog("filterDialog",(function(){return{main:function(e,t,n,r,o){this.set("title",e),this.message=t,this.validateUrl=n,this.okCallback=o,this.preferences=r},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,o.default)("Data Filter"),"aria-label":(0,o.default)("Help"),url:(0,i.default)("help.static",{filename:"viewdata_filter.html"})}},{text:(0,o.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:(0,o.default)("OK"),key:null,className:"btn btn-primary fa fa-check pg-alertify-button"}],options:{modal:0,resizable:!0,maximizable:!1,pinnable:!1,autoReset:!1}}},build:function(){var t=this;e.pgDialogBuild.apply(t),(0,u.default)(t.__internal.buttons[2].element).attr("title",(0,o.default)("Use SHIFT + ENTER to apply filter...")),(0,u.default)(t.elements.body).on("keypress",(function(e){e.shiftKey&&13==e.keyCode&&t.__internal.buttons[2].element.click()}))},prepare:function(){var e=this,r=(0,u.default)(this.message),i=r.find("#sql_filter");(0,u.default)(this.elements.header).attr("data-title",this.get("title")),(0,u.default)(this.elements.body.childNodes[0]).addClass("dataview_filter_dialog"),this.setContent(r.get(0)),e.__internal.buttons[2].element.disabled=!0,n=this.filter_obj=l.default.fromTextArea(i.get(0),{lineNumbers:!0,mode:"text/x-pgsql",extraKeys:t.editor_shortcut_keys,indentWithTabs:!e.preferences.use_spaces,indentUnit:e.preferences.tab_size,tabSize:e.preferences.tab_size,lineWrapping:e.preferences.wrap_code,autoCloseBrackets:e.preferences.insert_pair_brackets,matchBrackets:e.preferences.brace_matching,screenReaderLabel:(0,o.default)("Filter SQL")});var a=s.calcFontSize(e.preferences.sql_font_size);(0,u.default)(this.filter_obj.getWrapperElement()).css("font-size",a),setTimeout((function(){e.filter_obj.refresh(),e.filter_obj.focus()}),500),e.filter_obj.on("change",(function(){""!==e.filter_obj.getValue()?e.__internal.buttons[2].element.disabled=!1:e.__internal.buttons[2].element.disabled=!0}))},callback:function(e){if(e.button.text==(0,o.default)("OK")){var r=this.filter_obj.getValue(),i=this;e.cancel=!0,u.default.ajax({url:i.validateUrl,method:"POST",async:!1,contentType:"application/json",data:JSON.stringify(r)}).done((function(e){e.data.status?(i.okCallback(r),i.close()):c.default.alert((0,o.default)("Validation Error"),(0,o.default)(e.data.result),(function(){n.focus()}))})).fail((function(e){410===e.status?t.report_error((0,o.default)("Error filtering rows - %s.",e.statusText),e.responseJSON.errormsg):c.default.alert((0,o.default)("Validation Error"),e)}))}else if(0==e.index)return e.cancel=!0,void t.showHelp(e.button.element.name,e.button.element.getAttribute("url"),null,null)}}}))}function g(e){return void 0===e.server||void 0===e.database}function v(e){return void 0!==e.schema||void 0!==e.view||void 0!==e.catalog}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get_preferences_for_module("browser"),i=e.tree.getTreeNodeHierarchy(t),l=m(i),s=!d.default.isUndefined(r)&&null!=r&&r.hasOwnProperty("db_name")?r.db_name:(0,a.getDatabaseLabel)(i),u=e.tree.findNodeByDomElement(t),c="";c=n||o.vw_edt_tab_title_placeholder;var f={database:s,username:i.server.user.name,server:i.server.label,schema:l,table:u.getData().label,type:"datagrid"};return(0,a.generateTitle)(c,f)}},7167:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.showQueryTool=function(e,t,n,o,a){var l=n||"",u=function(e,t){return(0,i.getPanelTitle)(e,t)}(t,o),f=t.tree.findNodeByDomElement(o);if(void 0===f)return void s.default.alert((0,r.default)("Query Tool Error"),(0,r.default)("No object selected."));var p=t.tree.getTreeNodeHierarchy(f);if(function(e){return void 0===e.server}(p))return;var m=d(a,u,p);c(e,a,m,u,l)},t.generateScript=function(e,t){var n="".concat(e.database,"/").concat(e.user,"@").concat(e.server),r=(0,a.getRandomInt)(1,9999999),i=(0,o.default)("datagrid.panel",{trans_id:r});i+="?is_query_tool=".concat(!0)+"&sgid=".concat(e.sgid)+"&sid=".concat(e.sid)+"&server_type=".concat(e.stype)+"&did=".concat(e.did),c(t,r,i,n,"")},t.showERDSqlTool=function(e,t,n,r){var o=(0,a.getRandomInt)(1,9999999);e={server_group:{_id:e.sgid},server:{_id:e.sid,server_type:e.stype},database:{_id:e.did}};var i=d(o,n,e,t);c(r,o,i,n,"")},t.launchDataGrid=c,t._set_dynamic_tab=function(e,t){e.docker.findPanels("frm_datagrid").forEach((function(e){f(e,t)})),e.docker.findPanels("frm_debugger").forEach((function(e){f(e,t)}))},n(92222),n(89554),n(54747);var r=u(n(91669)),o=u(n(28008)),i=n(9807),a=n(44092),l=u(n(19755)),s=u(n(55958));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,r){var i=(0,o.default)("datagrid.panel",{trans_id:e});return i+="?is_query_tool=".concat(!0)+"&sgid=".concat(n.server_group._id)+"&sid=".concat(n.server._id)+"&server_type=".concat(n.server.server_type),function(e){return e.database}(n)&&(i+="&did=".concat(n.database._id)),r&&(i+="&sql_id=".concat(r)),i}function c(e,t,n,o,i){e.launch_grid(t,n,!0,o,i)||s.default.alert((0,r.default)("Query tool launch error"),(0,r.default)("Please allow pop-ups for this site to perform the desired action. If the main window of pgAdmin is closed then close this window and open a new pgAdmin session."))}function f(e,t){t?(0,l.default)("#"+e.$title.index()+" div:first").addClass("wcPanelTab-dynamic"):(0,l.default)("#"+e.$title.index()+" div:first").removeClass("wcPanelTab-dynamic")}},97783:(e,t,n)=>{var r=n(64492);n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaDiffSqlControl=t.SchemaDiffFooterView=t.SchemaDiffHeaderView=t.SchemaDiffSelect2Control=void 0,n(69600),n(69826),n(32564),n(24812),n(23123),n(74916),n(15306);var o=u(n(19755)),i=u(n(72316)),a=u(n(12030)),l=u(n(91669)),s=u(n(34038));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){if(!e.id)return e.text;var t=(0,o.default)(e.element).data("image");return t?(0,o.default)("<span></span>").append((0,o.default)("<span></span>",{class:"wcTabIcon "+t})).append((0,o.default)("<span></span>").text(e.text)):e.text},c=a.default.SqlFieldControl.extend({defaults:{label:"",extraClasses:[],helpMessage:null,maxlength:4096,rows:void 0,copyRequired:!1},template:r.template(['<% if (copyRequired) { %><button class="btn btn-secondary ddl-copy d-none">'+(0,l.default)("Copy")+"</button> <% } %>","<div class=\"pgadmin-controls pg-el-9 pg-el-12 sql_field_layout <%=extraClasses.join(' ')%>\">","  <textarea ",'    class="<%=Backform.controlClassName%> " name="<%=name%>" aria-label="<%=name%>"','    maxlength="<%=maxlength%>" placeholder="<%-placeholder%>" <%=disabled ? "disabled" : ""%>',"    rows=<%=rows%>",'    <%=required ? "required" : ""%>><%-value%></textarea>',"  <% if (helpMessage && helpMessage.length) { %>",'    <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),initialize:function(){a.default.TextareaControl.prototype.initialize.apply(this,arguments),this.sqlCtrl=null,r.bindAll(this,"onFocus","onBlur","refreshTextArea","copyData")},render:function(){var e=a.default.SqlFieldControl.prototype.render.apply(this,arguments);return e.sqlCtrl.setOption("readOnly",!0),this.$el.find(".ddl-copy")&&this.$el.find(".ddl-copy").on("click",this.copyData),e},copyData:function(){event.stopPropagation(),s.default.copyTextToClipboard(this.model.get("diff_ddl")),this.$el.find(".ddl-copy").text((0,l.default)("Copied!"));var e=this;return setTimeout((function(){var t=e.$el.find(".ddl-copy");t.hasClass("d-none")||t.addClass("d-none"),t.text((0,l.default)("Copy"))}),3e3),!1},onFocus:function(){var e=this.$el.find(".pgadmin-controls").first(),t=this.$el.find(".ddl-copy");e.hasClass("focused")||e.addClass("focused"),t.hasClass("d-none")&&t.removeClass("d-none")}});t.SchemaDiffSqlControl=c;var f=a.default.Select2Control.extend({defaults:r.extend(a.default.Select2Control.prototype.defaults,{url:void 0,transform:void 0,url_with_id:!1,select2:{allowClear:!0,placeholder:(0,l.default)("Select an item..."),width:"style",templateResult:d,templateSelection:d},controlsClassName:"pgadmin-controls pg-el-sm-11 pg-el-12"}),className:function(){return"pgadmin-controls pg-el-sm-4"},events:{"focus select":"clearInvalid","keydown :input":"processTab","select2:select":"onSelect","select2:selecting":"beforeSelect","select2:clear":"onChange"},template:r.template(["<% if(label == false) {} else {%>",'  <label class="<%=Backform.controlLabelClassName%>"><%=label%></label>',"<% }%>",'<div class="<%=controlsClassName%>">'," <select class=\"<%=Backform.controlClassName%> <%=extraClasses.join(' ')%>\"",'  name="<%=name%>" aria-label="<%=name%>" value="<%-value%>" <%=disabled ? "disabled" : ""%>','  <%=required ? "required" : ""%><%= select2.multiple ? " multiple>" : ">" %>','  <%=select2.first_empty ? " <option></option>" : ""%>',"  <% for (var i=0; i < options.length; i++) {%>","   <% if (options[i].group) { %>","     <% var group = options[i].group; %>","     <% if (options[i].optval) { %> <% var option_length = options[i].optval.length; %>",'      <optgroup label="<%=group%>">',"      <% for (var subindex=0; subindex < option_length; subindex++) {%>","        <% var option = options[i].optval[subindex]; %>","        <option ","        <% if (option.image) { %> data-image=<%=option.image%> <%}%>","        <% if (option.connected) { %> data-connected=connected <%}%>","        value=<%- formatter.fromRaw(option.value) %>",'        <% if (option.selected) {%>selected="selected"<%} else {%>','        <% if (!select2.multiple && option.value === rawValue) {%>selected="selected"<%}%>','        <% if (select2.multiple && rawValue && rawValue.indexOf(option.value) != -1){%>selected="selected" data-index="rawValue.indexOf(option.value)"<%}%>',"        <%}%>",'        <%= disabled ? "disabled" : ""%>><%-option.label%></option>',"      <%}%>","      </optgroup>","     <%}%>","   <%} else {%>","     <% var option = options[i]; %>","     <option ","     <% if (option.image) { %> data-image=<%=option.image%> <%}%>","     <% if (option.connected) { %> data-connected=connected <%}%>","     value=<%- formatter.fromRaw(option.value) %>",'     <% if (option.selected) {%>selected="selected"<%} else {%>','     <% if (!select2.multiple && option.value === rawValue) {%>selected="selected"<%}%>','     <% if (select2.multiple && rawValue && rawValue.indexOf(option.value) != -1){%>selected="selected" data-index="rawValue.indexOf(option.value)"<%}%>',"     <%}%>",'     <%= disabled ? "disabled" : ""%>><%-option.label%></option>',"   <%}%>","  <%}%>"," </select>"," <% if (helpMessage && helpMessage.length) { %>",' <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>'," <% } %>","</div>"].join("\n")),beforeSelect:function(){var e=arguments[0].params.args.data.id;this.field.get("connect")&&"connected"!==this.$el.find('option[value="'+e+'"]').attr("data-connected")?this.field.get("connect").apply(this,[e,this.changeIcon.bind(this)]):((0,o.default)(this.$sel).trigger("change"),setTimeout(function(){this.onChange.apply(this)}.bind(this),200))},changeIcon:function(e){var t=this.$el.find(".select2-selection .select2-selection__rendered span.wcTabIcon"),n=this.$el.find("option:selected");if(t.hasClass("icon-server-not-connected")||t.hasClass("icon-shared-server-not-connected")){var r=e.icon?e.icon:"icon-pg";t.removeClass("icon-server-not-connected"),t.addClass(r),t.attr("data-connected","connected"),n.data().image=r,n.attr("data-connected","connected"),this.onChange.apply(this)}else if(t.hasClass("icon-database-not-connected")){var o=e.icon?e.icon:"pg-icon-database";t.removeClass("icon-database-not-connected"),t.addClass(o),t.attr("data-connected","connected"),n.removeClass("icon-database-not-connected"),n.data().image=o,n.attr("data-connected","connected"),this.onChange.apply(this)}},onChange:function(){var e=this.model,t=this.field.get("name").split("."),n=t.shift(),o=t.join("."),a=this.getValueFromDOM(),l={},s=this;if(this.model.errorModel instanceof i.default.Model)if(r.isEmpty(o))this.model.errorModel.unset(n);else{var u=this.model.errorModel.get(n);u&&(this.keyPathSetter(u,o,null),this.model.errorModel.set(n,u))}l[n]=r.isEmpty(o)?a:r.clone(e.get(n))||{},r.isEmpty(o)||s.keyPathSetter(l[n],o,a),s.stopListening(s.model,"change:"+n,s.render),e.set(l),s.listenTo(s.model,"change:"+n,s.render)},render:function(){return this.fetchData(),a.default.Select2Control.prototype.render.apply(this,arguments)},fetchData:function(){var e=this,t=e.field.get("url"),n=e.model;if((t=r.isFunction(t)?t.apply(n):t)&&e.field.get("deps")&&(t=t.replace("sid",n.get(e.field.get("deps")[0]))),t){var i;n.trigger("pgadmin:view:fetching",n,e.field),o.default.ajax({async:!1,url:t}).done((function(e){i=e.data})).fail((function(){n.trigger("pgadmin:view:fetch:error",n,e.field)})),n.trigger("pgadmin:view:fetched",n,e.field);var a=this.field.get("transform")||e.defaults.transform;a&&r.isFunction(a)?e.field.set("options",a.bind(e,i)):e.field.set("options",i)}}});t.SchemaDiffSelect2Control=f;var p=a.default.Form.extend({label:"",className:function(){return"pg-el-sm-12 pg-el-md-12 pg-el-lg-12 pg-el-12"},tabPanelClassName:function(){return a.default.tabClassName},tabIndex:0,initialize:function(e){this.label=e.label,a.default.Form.prototype.initialize.apply(this,arguments)},template:r.template('\n    <div class="row pgadmin-control-group">\n      <div class="col-1 control-label">'+(0,l.default)("Select Source")+'</div>\n      <div class="col-6 source row"></div>\n    </div>\n    <div class="row pgadmin-control-group">\n      <div class="col-1 control-label">'+(0,l.default)("Select Target")+'</div>\n      <div class="col-6 target row"></div>\n      <div class="col-5 target-buttons">\n          <div class="action-btns d-flex">\n              <button class="btn btn-primary mr-auto"><span class="pg-font-icon icon-compare sql-icon-lg"></span>&nbsp;'+(0,l.default)("Compare")+'</button>\n              <button id="generate-script" class="btn btn-primary-icon mr-1" disabled><i class="fa fa-file-code sql-icon-lg"></i>&nbsp;'+(0,l.default)("Generate Script")+'</button>\n              <div class="btn-group mr-1" role="group" aria-label="">\n                <button id="btn-filter" type="button" class="btn btn-primary-icon"\n                        title=""\n                        tabindex="0"\n                        style="pointer-events: none;">\n                    <i class="fa fa-filter sql-icon-lg" aria-hidden="true"></i>&nbsp;'+(0,l.default)("Filter")+'\n                </button>\n                <button id="btn-filter-dropdown" type="button" class="btn btn-primary-icon dropdown-toggle dropdown-toggle-split"\n                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="filter"\n                        title=""\n                        tabindex="0">\n                </button>'+['<ul class="dropdown-menu filter">',"<li>",'<a class="dropdown-item" id="btn-identical" href="#" tabindex="0">','<i class="identical fa fa-check visibility-hidden" aria-hidden="true"></i>',"<span> "+(0,l.default)("Identical")+" </span>","</a>","</li>","<li>",'<a class="dropdown-item" id="btn-differentt" href="#" tabindex="0">','<i class="different fa fa-check" aria-hidden="true"></i>',"<span> "+(0,l.default)("Different")+" </span>","</a>","</li>","<li>",'<a class="dropdown-item" id="btn-source-only" href="#" tabindex="0">','<i class="source-only fa fa-check" aria-hidden="true"></i>',"<span> "+(0,l.default)("Source Only")+" </span>","</a>","</li>","<li>",'<a class="dropdown-item" id="btn-target-only" href="#" tabindex="0">','<i class="target-only fa fa-check" aria-hidden="true"></i>',"<span> "+(0,l.default)("Target Only")+" </span>","</a>","</li>","</ul>","</div>","</div>","</div>","</div>"].join("\n")),render:function(){this.cleanup();var e=this.controls,t=this.model,n=this,r=100*this.tabIndex;return this.$el.empty(),(0,o.default)(this.template()).appendTo(this.$el),this.fields.each((function(o){var i=new(o.get("control"))({field:o,model:t,dialog:n,tabIndex:r});o.get("group")&&"source"==o.get("group")?n.$el.find(".source").append(i.render().$el):n.$el.find(".target").append(i.render().$el),e.push(i)})),this},remove:function(e){e&&e.data&&(this.model&&(this.model.reset&&this.model.reset({validate:!1,silent:!0,stop:!0}),this.model.clear({validate:!1,silent:!0,stop:!0}),delete this.model),this.errorModel&&(this.errorModel.clear({validate:!1,silent:!0,stop:!0}),delete this.errorModel)),this.cleanup(),a.default.Form.prototype.remove.apply(this,arguments)}});t.SchemaDiffHeaderView=p;var m=a.default.Form.extend({className:function(){return"set-group pg-el-12"},tabPanelClassName:function(){return a.default.tabClassName},legendClass:"badge",contentClass:a.default.accordianContentClassName,template:{content:r.template('\n       <div class="pg-el-sm-12 row <%=contentClass%>">\n                  <div class="pg-el-sm-4 ddl-source">'+(0,l.default)("Source")+'</div>\n                  <div class="pg-el-sm-4 ddl-target">'+(0,l.default)("Target")+'</div>\n                  <div class="pg-el-sm-4 ddl-diff">'+(0,l.default)("Difference")+"\n                  </div>\n              </div>\n      </div>\n    ")},initialize:function(e){this.label=e.label,a.default.Form.prototype.initialize.apply(this,arguments)},render:function(){this.cleanup();var e=this.model,t=this.$el,n=this.template,i=this.controls,a={className:r.result(this,"className"),legendClass:r.result(this,"legendClass"),contentClass:r.result(this,"contentClass"),collapse:r.result(this,"collapse")},l=100*this.tabIndex;this.$el.empty();var s=(0,o.default)(n.content(a)).appendTo(t);this.fields.each((function(t){var n=new(t.get("control"))({field:t,model:e,dialog:self,tabIndex:l,name:t.get("name")});t.get("group")&&"ddl-source"==t.get("group")?s.find(".ddl-source").append(n.render().$el):t.get("group")&&"ddl-target"==t.get("group")?s.find(".ddl-target").append(n.render().$el):s.find(".ddl-diff").append(n.render().$el),i.push(n)})),(0,o.default)("div.CodeMirror div textarea").attr("aria-label","textarea");var u=this.$el.find(".source_ddl"),d=this.$el.find(".target_ddl"),c=this.$el.find(".diff_ddl"),f=this.$el.parent().height()-50;return u.height(f),u.css({height:f+"px"}),d.height(f),d.css({height:f+"px"}),c.height(f),c.css({height:f+"px"}),this}});t.SchemaDiffFooterView=m},26400:(e,t,n)=>{var r=n(64492);function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(79753),n(82526),n(41817),n(32165),n(91038),n(47042),n(68309),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.handleDependencies=function(){event.stopPropagation();var e=event.target.checked||void 0===event.target.checked&&event.target.className&&-1==event.target.className.indexOf("unchecked"),t=!1;void 0!==event.target.id&&(t=event.target.id.includes("header-selector"));if(this.gridContext&&this.gridContext.rowIndex&&r.isUndefined(this.gridContext.row.rows)){var n=this.grid.getData().getItem(this.gridContext.rowIndex);if(this.gridContext={},n.status){var o=this.selectDependencies(n,e);this.selectedRowCount=this.grid.getSelectedRows().length,e&&o.length>0?this.grid.setSelectedRows(o):e||this.grid.setSelectedRows(this.grid.getSelectedRows().filter((function(e){return!o.includes(e)}))),this.ddlCompare(n)}}else if(this.gridContext&&this.gridContext.row&&!r.isUndefined(this.gridContext.row.rows)||this.selectedRowCount!=this.grid.getSelectedRows().length)if(this.selectedRowCount=this.grid.getSelectedRows().length,this.gridContext.row&&this.gridContext.row.__group){var i=this.gridContext;this.gridContext={},this.selectDependenciesForGroup(e,i)}else this.gridContext={},this.selectDependenciesForAll(e,t);this.grid.getSelectedRows().length>0?this.header.$el.find("button#generate-script").removeAttr("disabled"):this.header.$el.find("button#generate-script").attr("disabled",!0)},t.selectDependenciesForGroup=function(e,t){var n=this,i=[];e?r.each(n.grid.getSelectedRows(),(function(t){var r=n.grid.getData().getItem(t);r.status&&"identical"!=r.status.toLowerCase()&&(i=i.concat(n.selectDependencies(r,e)))})):r.each(t.row.rows,(function(t){if(t&&t.status&&"identical"!=t.status.toLowerCase()){var r=n.selectDependencies(t,e);i=i.concat(r)}}));if(i=o(new Set(i)),e)n.grid.setSelectedRows(i);else{var a;a=n.grid.getSelectedRows().filter((function(e){return!i.includes(e)})),n.selectedRowCount=a.length,n.grid.setSelectedRows(a)}},t.selectDependenciesForAll=function(e,t){var n=this,i=[];if(!e&&t)return n.dataView.getItems().map((function(e){e.dependentCount=[],e.dependLevel=1})),void(n.selectedRowCount=0);if(r.each(n.grid.getSelectedRows(),(function(t){var r=n.grid.getData().getItem(t);r.status&&(i=i.concat(n.selectDependencies(r,e)))})),i=o(new Set(i)),e&&i.length>0)n.grid.setSelectedRows(i);else if(!e){var a;a=n.grid.getSelectedRows().filter((function(e){return!i.includes(e)})),n.selectedRowCount=a.length,n.grid.setSelectedRows(a)}},t.selectDependencies=function(e,t){var n=this,o=[],i=void 0,a=void 0,l=[];e.dependLevel&&t||(e.dependLevel=1);e.dependentCount&&t||(e.dependentCount=[]);if(e.status&&"identical"==e.status.toLowerCase())return n.selectedRowCount=n.grid.getSelectedRows().length,[];(i=function(e,t,a){var l=t.filter((function(e){return"extension"==e.type}));l.length>0&&(t=l),r.each(t,(function(t){if(0!=t.length){var l=[];if((l=n.dataView.getItems().filter((function(e){return e.type==t.type&&e.oid==t.oid}))).length>0){(l=l[0]).dependentCount||(l.dependentCount=[]);var s=[];if(l.status&&"identical"!=l.status.toLowerCase()&&((s=n.dataView.getGroups().find((function(e){if(l.group_name==e.groupingKey)return e.groups})))&&s.groups&&(s=s.groups.find((function(e){return e.groupingKey==l.group_name+":|:"+l.type})))&&1==s.collapsed&&n.dataView.expandGroup(l.group_name+":|:"+l.type),a||r.isUndefined(a)?(l.dependLevel=e.dependLevel+1,-1===l.dependentCount.indexOf(e.oid)&&l.dependentCount.push(e.oid),o[o.length]=l):(l.dependentCount.splice(l.dependentCount.indexOf(e.oid),1),0==l.dependentCount.length&&(o[o.length]=l,l.dependLevel=1))),Object.keys(l.dependencies).length>0){if(-1!==l.dependentCount.indexOf(e.oid)){var u=l.dependencies.filter((function(t){return t.oid!==e.oid}));l.orig_dependencies||(l.orig_dependencies=Object.assign([],l.dependencies)),l.dependencies=u}i(l,l.dependencies,a)}}}}))})(e,e.dependencies,t),(a=function(e){r.each(e,(function(e){if(0!=e.length){var t=[];(t=n.dataView.getItems().filter((function(t){return t.type==e.type&&t.oid==e.oid}))).length>0&&(t=t[0]).orig_dependencies&&Object.keys(t.orig_dependencies).length>0&&(t.dependentCount||(t.dependentCount=[]),t.status&&"identical"!=t.status.toLowerCase()&&(t.dependencies=t.orig_dependencies,t.orig_dependencies=[]),t.dependencies.length>0&&a(t.dependencies))}}))})(e.dependencies),t&&(l=n.grid.getSelectedRows());return r.each(o,(function(e){var t=n.grid.getData().getRowByItem(e);r.isUndefined(t)||-1!==l.indexOf(t)||l.push(n.grid.getData().getRowByItem(e))})),n.selectedRowCount=l.length,l},n(82772),n(26699),n(32023),n(57327),n(69826),n(92222),n(70189),n(41539),n(78783),n(66992),n(33948),n(21249),n(40561),n(47941),n(19601)},78474:(e,t,n)=>{var r,o;r=[n(28008),n(19755),n(55112),n(3226)],void 0===(o=function(e,t,n,r){var o=n.Tools=n.Tools||{},i=r.default;return o.SchemaDiffHook||(o.SchemaDiffHook={load:function(n){window.onbeforeunload=function(){t.ajax({url:e("schema_diff.close",{trans_id:n}),method:"DELETE"})},new i(t("#schema-diff-container"),n).render()}}),o.SchemaDiffHook}.apply(t,r))||(e.exports=o)},3226:(e,t,n)=>{n(47042),n(41539),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(32564),n(24812),n(5735),n(83753),n(91058),n(69826),n(68309),n(65069),n(47941),n(69600),n(82772),n(57327),n(23123),n(74916),n(2707),n(15306),n(40561),n(69070);var r=h(n(28008)),o=h(n(19755)),i=h(n(91669)),a=h(n(55455)),l=h(n(72316)),s=h(n(73409)),u=h(n(55112)),d=n(87789),c=n(7167);n(93841);var f=h(n(1950)),p=h(n(81311)),m=h(n(55958)),b=n(97783),y=n(26400);function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=window.wcDocker,O=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=this;this.$container=t,this.header=null,this.trans_id=n,this.filters=["Identical","Different","Source Only","Target Only"],this.sel_filters=["Different","Source Only","Target Only"],this.dataView=null,this.grid=null,this.selection={},this.model=new l.default.Model({source_sid:void 0,source_did:void 0,source_scid:void 0,target_sid:void 0,target_did:void 0,target_scid:void 0,source_ddl:void 0,target_ddl:void 0,diff_ddl:void 0}),(0,d.setPGCSRFToken)(u.default.csrf_token_header,u.default.csrf_token),this.docker=new w(this.$container,{allowContextMenu:!1,allowCollapse:!1,loadingClass:"pg-sp-icon",themePath:(0,r.default)("static",{filename:"css"}),theme:"webcabin.overrides.css"}),this.header_panel=new u.default.Browser.Panel({name:"schema_diff_header_panel",showTitle:!1,isCloseable:!1,isPrivate:!0,content:'<div id="schema-diff-header" class="pg-el-container" el="sm"></div><div id="schema-diff-grid" class="pg-el-container" el="sm"></div>',elContainer:!0}),this.footer_panel=new u.default.Browser.Panel({name:"schema_diff_footer_panel",title:(0,i.default)("DDL Comparison"),isCloseable:!1,isPrivate:!0,height:"60",content:'<div id="schema-diff-ddl-comp" class="pg-el-container" el="sm">\n      <div id="ddl_comp_fetching_data" class="pg-sp-container schema-diff-busy-fetching d-none">\n        <div class="pg-sp-content">\n            <div class="row">\n                <div class="col-12 pg-sp-icon"></div>\n            </div>\n            <div class="row"><div class="col-12 pg-sp-text">'+(0,i.default)("Comparing objects...")+"</div></div>\n        </div>\n    </div></div>"}),this.header_panel.load(this.docker),this.footer_panel.load(this.docker),this.panel_obj=this.docker.addPanel("schema_diff_header_panel",w.DOCK.TOP,{w:"95%",h:"50%"}),this.footer_panel_obj=this.docker.addPanel("schema_diff_footer_panel",w.DOCK.BOTTOM,this.panel_obj,{w:"95%",h:"50%"}),o.footer_panel_obj.on(w.EVENT.VISIBILITY_CHANGED,(function(){setTimeout(function(){this.resize_grid()}.bind(o),200)})),o.footer_panel_obj.on(w.EVENT.RESIZE_ENDED,(function(){setTimeout(function(){this.resize_panels()}.bind(o),200)}))}var t,n,y;return t=e,(n=[{key:"raise_error_on_fail",value:function(e,t){try{if(p.default.isUndefined(t.responseText))m.default.alert(e,(0,i.default)("Unable to get the response text."));else{var n=JSON.parse(t.responseText);m.default.alert(e,n.errormsg)}}catch(t){m.default.alert(e,(0,i.default)(t.message))}}},{key:"resize_panels",value:function(){var e=(0,o.default)("#schema-diff-ddl-comp .source_ddl"),t=(0,o.default)("#schema-diff-ddl-comp .target_ddl"),n=(0,o.default)("#schema-diff-ddl-comp .diff_ddl"),r=(0,o.default)("#schema-diff-ddl-comp").height()-50;e.height(r),e.css({height:r+"px"}),t.height(r),t.css({height:r+"px"}),n.height(r),n.css({height:r+"px"}),this.resize_grid()}},{key:"compare_schemas",value:function(){var e=this,t=e.model.toJSON();if(""==t.source_sid||p.default.isUndefined(t.source_sid)||""==t.source_did||p.default.isUndefined(t.source_did)||""==t.target_sid||p.default.isUndefined(t.target_sid)||""==t.target_did||p.default.isUndefined(t.target_did))return m.default.alert((0,i.default)("Selection Error"),(0,i.default)("Please select source and target.")),!1;for(var n=!0,a=0,l=[["source_sid","target_sid"],["source_did","target_did"],["source_scid","target_scid"]];a<l.length;a++){var s=l[a];t[s[0]]&&t[s[1]]&&parseInt(t[s[0]])!==parseInt(t[s[1]])&&(n=!1)}if(n)return m.default.alert((0,i.default)("Selection Error"),(0,i.default)("Please select the different source and target.")),!1;this.selection=JSON.parse(JSON.stringify(t)),t.trans_id=e.trans_id,p.default.each(t,(function(e,n){t[e]=parseInt(n,10)}));var u=(0,r.default)("schema_diff.compare_database",t);return""==t.source_scid||p.default.isUndefined(t.source_scid)||""==t.target_scid||p.default.isUndefined(t.target_scid)||(u=(0,r.default)("schema_diff.compare_schema",t)),e.model.set({source_ddl:void 0,target_ddl:void 0,diff_ddl:void 0}),e.render_grid([]),e.footer.render(),e.startDiffPoller(),o.default.ajax({url:u,method:"GET",dataType:"json",contentType:"application/json"}).done((function(t){e.stopDiffPoller(),e.render_grid(t.data)})).fail((function(t){e.raise_error_on_fail((0,i.default)("Schema compare error"),t),e.stopDiffPoller()}))}},{key:"generate_script",value:function(){var e,t,n=this,l=(0,r.default)("schema_diff.get_server",{sid:n.selection.target_sid,did:n.selection.target_did}),s=n.grid?n.grid.getSelectedRows():[],u=n.selection,d=void 0;if(t=(0,i.default)("-- This script was generated by the Schema Diff utility in pgAdmin 4. \n"),t+=(0,i.default)("-- For the circular dependencies, the order in which Schema Diff writes the objects is not very sophisticated \n"),t+=(0,i.default)("-- and may require manual changes to the script to ensure changes are applied in the correct order.\n"),t+=(0,i.default)("-- Please report an issue for any failure with the reproduction steps. \n"),p.default.each(u,(function(e,t){u[e]=parseInt(t,10)})),(0,o.default)("#diff_fetching_data").removeClass("d-none"),(0,o.default)("#diff_fetching_data").find(".schema-diff-busy-text").text("Generating script..."),e=function(){o.default.ajax({url:l,method:"GET",dataType:"json",contentType:"application/json"}).done((function(e){var r=e.data,i={};r&&(i.sgid=r.gid,i.sid=r.sid,i.stype=r.type,i.server=r.name,i.user=r.user,i.did=n.model.get("target_did"),i.database=r.database,p.default.isUndefined(d)&&(d=t+"BEGIN;\n"+n.model.get("diff_ddl")+"\nEND;"),f.default.pgAdmin.ddl_diff=d,(0,c.generateScript)(i,f.default.pgAdmin.DataGrid,a.default)),(0,o.default)("#diff_fetching_data").find(".schema-diff-busy-text").text(""),(0,o.default)("#diff_fetching_data").addClass("d-none")})).fail((function(e){n.raise_error_on_fail((0,i.default)("Generate script error"),e),(0,o.default)("#diff_fetching_data").find(".schema-diff-busy-text").text(""),(0,o.default)("#diff_fetching_data").addClass("d-none")}))},s.length>0){var m,b={1:[],2:[],3:[],4:[],5:[]},y="",h=g(s);try{for(h.s();!(m=h.n()).done;){var v=m.value,_=n.grid.getData().getItem(v);if(!p.default.isUndefined(_.diff_ddl)){if(_.dependLevel in b||(b[_.dependLevel]=[]),!p.default.isUndefined(_.source_schema_name)&&!p.default.isNull(_.source_schema_name)){var w="\nCREATE SCHEMA IF NOT EXISTS "+_.source_schema_name+";\n";-1==b[_.dependLevel].indexOf(w)&&b[_.dependLevel].push(w)}b[_.dependLevel].push(_.diff_ddl)}}}catch(e){h.e(e)}finally{h.f()}p.default.each(Object.keys(b).reverse(),(function(e){b[e].length>0&&(y+=b[e].join("\n")+"\n\n")})),d=t+"BEGIN;\n"+y+"END;",e()}else p.default.isUndefined(n.model.get("diff_ddl"))||e();return!1}},{key:"check_empty_diff",value:function(){if(this.panel_obj.$container.find("#schema-diff-grid .slick-viewport .pg-panel-message").remove(),0==this.dataView.getFilteredItems().length){var e=(0,i.default)("No difference found");this.panel_obj.$container.find("#schema-diff-grid .slick-viewport .grid-canvas")[0].style.height="0px",this.panel_obj.$container.find("#schema-diff-grid .slick-viewport").prepend('<div class="pg-panel-message">'+e+"</div>")}}},{key:"render_grid",value:function(e){var t,n=this;if(n.grid)return n.render_grid_data(e),void n.check_empty_diff();var r=new s.default.CheckboxSelectColumn({cssClass:"slick-cell-checkboxsel",minWidth:30}),a=(n.grid_width-47)/2,l=[r.getColumnDefinition(),{id:"title",name:(0,i.default)("Objects"),field:"title",minWidth:a,formatter:function(e,t,n,r,o){return'<i class="ml-2 wcTabIcon icon-'+o.type+'"></i><span>'+n+"</span>"}},{id:"status",name:(0,i.default)("Comparison Result"),field:"status",minWidth:a},{id:"label",name:(0,i.default)("Objects"),field:"label",width:0,minWidth:0,maxWidth:0,cssClass:"really-hidden",headerCssClass:"really-hidden"},{id:"type",name:(0,i.default)("Objects"),field:"type",width:0,minWidth:0,maxWidth:0,cssClass:"really-hidden",headerCssClass:"really-hidden"},{id:"id",name:"id",field:"id",width:0,minWidth:0,maxWidth:0,cssClass:"really-hidden",headerCssClass:"really-hidden"}];n.groupBySchemaObject=function(){n.dataView.setGrouping([{getter:"group_name",formatter:function(e){var t="icon-schema";return"Database Objects"==e.rows[0].group_name&&(t="icon-coll-database"),'<i class="wcTabIcon '+t+'"></i><span>'+p.default.escape(e.rows[0].group_name)},aggregateCollapsed:!0,lazyTotalsCalculation:!0},{getter:"type",formatter:function(e){var t,r="icon-coll-"+e.value,o=0,a=0,l=0,s=0,u=g(e.rows);try{for(u.s();!(t=u.n()).done;){var d=t.value;d.status==n.filters[0]?o++:d.status==n.filters[1]?a++:d.status==n.filters[2]?l++:d.status==n.filters[3]&&s++}}catch(e){u.e(e)}finally{u.f()}return'<i class="wcTabIcon '+r+'"></i><span>'+e.rows[0].label+" - "+(0,i.default)("Identical")+": <strong>"+o+"</strong>&nbsp;&nbsp;"+(0,i.default)("Different")+": <strong>"+a+"</strong>&nbsp;&nbsp;"+(0,i.default)("Source Only")+": <strong>"+l+"</strong>&nbsp;&nbsp;"+(0,i.default)("Target Only")+": <strong>"+s+"</strong></span>"},aggregateCollapsed:!0,collapsed:!0,lazyTotalsCalculation:!0}])};var u=new s.default.Data.GroupItemMetadataProvider({checkboxSelect:!0,checkboxSelectPlugin:r});n.dataView=new s.default.Data.DataView({groupItemMetadataProvider:u,inlineFilters:!1}),n.dataView.onRowCountChanged.subscribe((function(){t.updateRowCount(),t.render(),n.accessibility_error()})),n.dataView.onRowsChanged.subscribe((function(e,r){t.invalidateRows(r.rows),t.render(),n.accessibility_error()})),n.dataView.getItemMetadata=function(e){var t=n.dataView.getItem(e),r=u.getGroupRowMetadata(t);return t.__group?r:"Different"===t.status?{cssClasses:"different"}:"Source Only"===t.status?{cssClasses:"source"}:"Target Only"===t.status?{cssClasses:"target"}:null},n.filter=function(e){return-1!==this.sel_filters.indexOf(e.status)};var d=(0,o.default)("#schema-diff-grid");t=this.grid=new s.default.Grid(d,n.dataView,l,{enableCellNavigation:!0,enableColumnReorder:!1,enableRowSelection:!0}),(0,o.default)("label[for="+l[0].name.split("'")[1]+"]").append('<span style="display:none">checkbox</span>'),t.registerPlugin(u),t.setSelectionModel(new s.default.RowSelectionModel({selectActiveRow:!1})),t.registerPlugin(r),n.dataView.syncGridSelection(t,!0,!0),t.onMouseEnter.subscribe(function(e){var r=t.getCellFromEvent(e);n.gridContext={},n.gridContext.rowIndex=r.row,n.gridContext.row=t.getDataItem(r.row)}.bind(n)),t.onMouseLeave.subscribe((function(){n.gridContext={}})),t.onClick.subscribe(function(t,n){n.row&&(e=n.grid.getData().getItem(n.row)).status&&this.ddlCompare(e)}.bind(n)),t.onSelectedRowsChanged.subscribe(n.handleDependencies.bind(this)),n.model.on("change:diff_ddl",(function(e){n.handleDependencies.bind(e,n)})),(0,o.default)("#schema-diff-grid").on("keyup",function(){38!=event.keyCode&&40!=event.keyCode||!this.grid.getActiveCell().row||(e=this.grid.getData().getItem(this.grid.getActiveCell().row),this.ddlCompare(e))}.bind(n)),n.render_grid_data(e)}},{key:"render_grid_data",value:function(e){var t=this;t.grid.setSelectedRows([]),t.selected_row_count=t.grid.getSelectedRows().length,e.sort((function(e,t){return e.label>t.label||e.label===t.label&&e.title>t.title?1:-1})),t.dataView.beginUpdate(),t.dataView.setItems(e),t.dataView.setFilter(t.filter.bind(t)),t.groupBySchemaObject(),t.dataView.endUpdate(),t.dataView.refresh(),t.resize_grid(),t.accessibility_error()}},{key:"accessibility_error",value:function(){(0,o.default)(".slick-viewport").scroll((function(){setTimeout((function(){(0,o.default)("span.slick-column-name label").append('<span style="display:none">checkbox</span>'),(0,o.default)("div.slick-cell.l0 label").each((function(e,t){(0,o.default)(t).append('<span style="display:none">checkbox</span>')}))}),0)}))}},{key:"handle_generate_button",value:function(){this.grid.getSelectedRows().length>0||""!=this.model.get("diff_ddl")&&!p.default.isUndefined(this.model.get("diff_ddl"))?this.header.$el.find("button#generate-script").removeAttr("disabled"):this.header.$el.find("button#generate-script").attr("disabled",!0)}},{key:"resize_grid",value:function(){var e=(0,o.default)("#schema-diff-grid"),t=this.panel_obj.height()>0?this.panel_obj.height()-100:this.grid_height-100;e.height(t),e.css({height:t+"px"}),this.grid&&this.grid.resizeCanvas()}},{key:"getCompareStatus",value:function(){var e=this,t={trans_id:e.trans_id},n=(0,r.default)("schema_diff.poll",t);o.default.ajax({url:n,method:"GET",dataType:"json",contentType:"application/json"}).done((function(e){var t=p.default.escape(e.data.compare_msg);100!=e.data.diff_percentage&&(t+=(0,i.default)(" (this may take a few minutes)...")),t=t+"<br>"+(0,i.default)("%s completed.",e.data.diff_percentage+"%"),(0,o.default)("#diff_fetching_data").find(".schema-diff-busy-text").html(t)})).fail((function(t){e.raise_error_on_fail((0,i.default)("Poll error"),t),e.stopDiffPoller("fail")}))}},{key:"startDiffPoller",value:function(){(0,o.default)("#ddl_comp_fetching_data").addClass("d-none"),(0,o.default)("#diff_fetching_data").removeClass("d-none"),this.getCompareStatus(),this.diff_poller_int_id=setInterval(this.getCompareStatus.bind(this),1e3)}},{key:"stopDiffPoller",value:function(e){clearInterval(this.diff_poller_int_id),"fail"!==e&&this.getCompareStatus(),(0,o.default)("#diff_fetching_data").find(".schema-diff-busy-text").text(""),(0,o.default)("#diff_fetching_data").addClass("d-none")}},{key:"ddlCompare",value:function(e){var t,n=this,i=e.type,a=e.oid;if(n.model.set({source_ddl:void 0,target_ddl:void 0,diff_ddl:void 0},{silent:!0}),e.status&&"identical"==e.status.toLowerCase()){var l=n.selection;t=e.target_oid,l.trans_id=n.trans_id,l.source_scid=e.source_scid,l.target_scid=e.target_scid,l.source_oid=a,l.target_oid=t,l.comp_status=e.status,l.node_type=i,p.default.each(l,(function(e,t){l[e]=parseInt(t,10)})),(0,o.default)("#ddl_comp_fetching_data").removeClass("d-none");var s=(0,r.default)("schema_diff.ddl_compare",l);n.model.url=s,n.model.fetch({success:function(){n.footer.render(),(0,o.default)("#ddl_comp_fetching_data").addClass("d-none")},error:function(){n.footer.render(),(0,o.default)("#ddl_comp_fetching_data").addClass("d-none")}})}else n.model.set({source_ddl:e.source_ddl,target_ddl:e.target_ddl,diff_ddl:e.diff_ddl},{silent:!0}),n.footer.render()}},{key:"transformFunc",value:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({group:n,optval:e[n]});return t}},{key:"render",value:function(){var e=this,t=e.docker.findPanels("schema_diff_header_panel")[0].$container.find("#schema-diff-header");e.header=new b.SchemaDiffHeaderView({el:t,model:this.model,fields:[{name:"source_sid",label:!1,control:b.SchemaDiffSelect2Control,transform:function(t){return e.transformFunc(t)},url:(0,r.default)("schema_diff.servers"),select2:{allowClear:!0,placeholder:(0,i.default)("Select server...")},connect:function(){e.connect_server(arguments[0],arguments[1])},group:"source",disabled:function(){return!1}},{name:"source_did",group:"source",deps:["source_sid"],control:b.SchemaDiffSelect2Control,url:function(){return!!this.get("source_sid")&&(0,r.default)("schema_diff.databases",{sid:this.get("source_sid")})},select2:{allowClear:!0,placeholder:(0,i.default)("Select database...")},disabled:function(e){var t=this;return p.default.isUndefined(e.get("source_sid"))||p.default.isNull(e.get("source_sid"))||""===e.get("source_sid")?(setTimeout((function(){e.set("source_did",void 0)}),10),!0):(setTimeout((function(){var n,r=g(t.options);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.is_maintenance_db&&e.set("source_did",o.value)}}catch(e){r.e(e)}finally{r.f()}}),10),!1)},connect:function(){e.connect_database(this.model.get("source_sid"),arguments[0],arguments[1])}},{name:"source_scid",control:b.SchemaDiffSelect2Control,group:"source",deps:["source_sid","source_did"],url:function(){return!(!this.get("source_sid")||!this.get("source_did"))&&(0,r.default)("schema_diff.schemas",{sid:this.get("source_sid"),did:this.get("source_did")})},select2:{allowClear:!0,placeholder:(0,i.default)("Select schema...")},disabled:function(e){return!(!p.default.isUndefined(e.get("source_did"))&&!p.default.isNull(e.get("source_did"))&&""!==e.get("source_did")||(setTimeout((function(){e.set("source_scid",void 0)}),10),0))}},{name:"target_sid",label:!1,control:b.SchemaDiffSelect2Control,transform:function(t){return e.transformFunc(t)},group:"target",url:(0,r.default)("schema_diff.servers"),select2:{allowClear:!0,placeholder:(0,i.default)("Select server...")},disabled:function(){return!1},connect:function(){e.connect_server(arguments[0],arguments[1])}},{name:"target_did",control:b.SchemaDiffSelect2Control,group:"target",deps:["target_sid"],url:function(){return!!this.get("target_sid")&&(0,r.default)("schema_diff.databases",{sid:this.get("target_sid")})},select2:{allowClear:!0,placeholder:(0,i.default)("Select database...")},disabled:function(e){var t=this;return p.default.isUndefined(e.get("target_sid"))||p.default.isNull(e.get("target_sid"))||""===e.get("target_sid")?(setTimeout((function(){e.set("target_did",void 0)}),10),!0):(setTimeout((function(){var n,r=g(t.options);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.is_maintenance_db&&e.set("target_did",o.value)}}catch(e){r.e(e)}finally{r.f()}}),10),!1)},connect:function(){e.connect_database(this.model.get("target_sid"),arguments[0],arguments[1])}},{name:"target_scid",control:b.SchemaDiffSelect2Control,group:"target",deps:["target_sid","target_did"],url:function(){return!(!this.get("target_sid")||!this.get("target_did"))&&(0,r.default)("schema_diff.schemas",{sid:this.get("target_sid"),did:this.get("target_did")})},select2:{allowClear:!0,placeholder:(0,i.default)("Select schema...")},disabled:function(e){return!(!p.default.isUndefined(e.get("target_did"))&&!p.default.isNull(e.get("target_did"))&&""!==e.get("target_did")||(setTimeout((function(){e.set("target_scid",void 0)}),10),0))}}]}),e.footer=new b.SchemaDiffFooterView({model:this.model,fields:[{name:"source_ddl",label:!1,control:b.SchemaDiffSqlControl,group:"ddl-source"},{name:"target_ddl",label:!1,control:b.SchemaDiffSqlControl,group:"ddl-target"},{name:"diff_ddl",label:!1,control:b.SchemaDiffSqlControl,group:"ddl-diff",copyRequired:!0}]}),e.header.render(),e.header.$el.find("button.btn-primary").on("click",e.compare_schemas.bind(e)),e.header.$el.find("button#generate-script").on("click",e.generate_script.bind(e)),e.header.$el.find("ul.filter a.dropdown-item").on("click",e.refresh_filters.bind(e));var n=e.docker.findPanels("schema_diff_footer_panel")[0],a=e.docker.findPanels("schema_diff_header_panel")[0];n.$container.find("#schema-diff-ddl-comp").append(e.footer.render().$el),(0,o.default)("div.CodeMirror div textarea").attr("aria-label","textarea"),a.$container.find("#schema-diff-grid").append("<div class='obj_properties container-fluid'>\n    <div class='pg-panel-message'>"+(0,i.default)("<strong>Database Compare:</strong> Select the server and database for the source and target and Click <strong>Compare</strong>.")+(0,i.default)("</br><strong>Schema Compare:</strong> Select the server, database and schema for the source and target and Click <strong>Compare</strong>.")+(0,i.default)("</br><strong>Note:</strong> The dependencies will not be resolved in the Schema comparison.")+"</div></div>"),e.grid_width=(0,o.default)("#schema-diff-grid").width(),e.grid_height=this.panel_obj.height()}},{key:"refresh_filters",value:function(e){var t=this;p.default.each(t.filters,(function(n){var r=t.sel_filters.indexOf(n),i="."+n.replace(" ","-").toLowerCase();1==(0,o.default)(e.currentTarget).find(i).length&&(!0===(0,o.default)(i).hasClass("visibility-hidden")?((0,o.default)(i).removeClass("visibility-hidden"),-1===r&&t.sel_filters.push(n)):((0,o.default)(i).addClass("visibility-hidden"),-1!==r&&t.sel_filters.splice(r,1)))})),p.default.isUndefined(t.dataView)||p.default.isNull(t.dataView)||(t.dataView.refresh(),t.check_empty_diff())}},{key:"connect_database",value:function(e,t,n){var a=(0,r.default)("schema_diff.connect_database",{sid:e,did:t});o.default.post(a).done((function(e){e.success&&e.data&&n(e.data)})).fail((function(e,t){m.default.pgNotifier(t,e,(0,i.default)("Failed to connect the database."))}))}},{key:"connect_server",value:function(e,t){var n=function(e,t,n,r,o){m.default.pgNotifier("error",e,n,(function(e){setTimeout((function(){a.default.dlgServerPass((0,i.default)("Connect to Server"),e,r,o).resizeTo()}),100)}))},l=function(e,t){e&&e.data&&t(e.data)};a.default.dlgServerPass||a.default.dialog("dlgServerPass",(function(){return{main:function(e,t,r,o,i,a,u){this.set("title",e),this.message=t,this.server_id=r,this.success_callback=o,this.onSuccess=i||l,this.onFailure=a||n,this.onCancel=u||s},setup:function(){return{buttons:[{text:(0,i.default)("Cancel"),className:"btn btn-secondary fa fa-times pg-alertify-button",key:27},{text:(0,i.default)("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button"}],focus:{element:"#password",select:!0},options:{modal:0,resizable:!1,maximizable:!1,pinnable:!1}}},build:function(){},prepare:function(){this.setContent(this.message)},callback:function(e){var t=this.onFailure,n=this.onSuccess,a=this.onCancel,l=this.success_callback;if(e.button.text==(0,i.default)("OK")){var s=(0,r.default)("schema_diff.connect_server",{sid:this.server_id});o.default.ajax({type:"POST",timeout:3e4,url:s,data:(0,o.default)("#frmPassword").serialize()}).done((function(e){if(1==e.success)return n(e,l)})).fail((function(e,n,r){return t(e,n,r,this.server_id,l)}))}else a&&"function"==typeof a&&a()}}}));var s=function(){return!1},u=(0,r.default)("schema_diff.connect_server",{sid:e});o.default.post(u).done((function(e){if(1==e.success)return l(e,t)})).fail((function(r,o,i){return n(r,0,i,e,t)}))}}])&&_(t.prototype,n),y&&_(t,y),e}();t.default=O,O.prototype.handleDependencies=y.handleDependencies,O.prototype.selectDependenciesForGroup=y.selectDependenciesForGroup,O.prototype.selectDependenciesForAll=y.selectDependenciesForAll,O.prototype.selectDependencies=y.selectDependencies},93841:(e,t,n)=>{var r,o;n(69070),n(82526),n(57327),n(38880),n(49337),n(33321),n(91038),n(41817),n(32165),n(89554),n(54747),n(21249),n(69826),n(91058),n(32564),n(92222),n(24812),n(26699),n(32023),n(2707),n(47042),n(4723),n(74916),n(68309),n(73210),n(82772),n(47941),n(41539),n(66992),n(33948),n(40561),n(39714),n(83710),n(64765),n(15306),n(79753),n(94986),n(19601),n(23123),n(3843),n(85827),n(60285),n(78783);var i,a=n(7167),l=n(52934),s=(i=n(55958))&&i.__esModule?i:{default:i};function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.p=window.resourceBasePath,r=[n(91669),n(28008),n(19755),n(96939),n(40729),n(81311),n(55455),n(55112),n(72316),n(20811),n(44092),n(50654),n(6537),n(18980),n(58963),n(34038),n(82927),n(25750),n(40370),n(12436),n(40904),n(81240),n(65887),n(90865),n(87913),n(11346),n(74898),n(74701),n(13895),n(67563),n(72945),n(94860),n(28522),n(81400),n(23602),n(92007),n(45592),n(72622),n(20882),n(87789),n(9807),n(1950),n(57550),n(5221),n(10426),n(73409),n(58386),n(27528),n(63828),n(5205),n(33883),n(90491)],void 0===(o=function(e,t,n,r,o,i,d,c,m,b,y,h,g,v,_,w,O,S,x,C,P,E,j,k,D,T,R,N,A,I,M,q,B,L,F,U,V,H,z,W,$,G,K,Q,J){if(c.SqlEditor)return c.SqlEditor;var Y=window.wcDocker,X=c.Browser,Z=b.default,ee=window.Slick,te=N.default,ne=A.default,re=I.QuerySources;W.setPGCSRFToken(c.csrf_token_header,c.csrf_token);var oe=!1,ie='<div role="status" class="pg-panel-message">'+e("No data output. Execute a query to get output.")+"</div>",ae='<div role="status" class="pg-panel-message">'+e('Use Explain/Explain analyze button to generate the plan for a query. Alternatively, you can also execute "EXPLAIN (FORMAT JSON) [QUERY]".')+"</div>",le=m.View.extend({initialize:function(t){this.$el=t.el,this.handler=t.handler,this.handler.col_size={};var n=G.default.pgAdmin.Browser;this.preferences=n.get_preferences_for_module("sqleditor"),this.browser_preferences=n.get_preferences_for_module("browser"),this.handler.preferences=this.preferences,this.handler.browser_preferences=this.browser_preferences,this.connIntervalId=null,this.layout=t.layout,this.set_server_version(t.server_ver),this.trigger("pgadmin-sqleditor:view:initialised"),this.connection_list=[{server_group:null,server:null,database:null,user:null,role:null,conn_title:"<"+e("New Connection")+">"}]},events:{"click #btn-show-query-tool":"on_show_query_tool","click .btn-load-file":"on_file_load","click #btn-save-file":"on_save_file","click #btn-file-menu-save":"on_save_file","click #btn-file-menu-save-as":"on_save_as","click #btn-find":"on_find","click #btn-find-menu-find":"on_find","click #btn-find-menu-find-next":"on_find_next","click #btn-find-menu-find-previous":"on_find_previous","click #btn-find-menu-replace":"on_replace","click #btn-find-menu-replace-all":"on_replace_all","click #btn-find-menu-find-persistent":"on_find_persistent","click #btn-find-menu-jump":"on_jump","click #btn-delete-row":"on_delete","click #btn-save-data":"on_save_data","click #btn-filter":"on_show_filter","click #btn-filter-menu":"on_show_filter","click #btn-include-filter":"on_include_filter","click #btn-exclude-filter":"on_exclude_filter","click #btn-remove-filter":"on_remove_filter","click #btn-cancel":"on_cancel","click #btn-copy-row":"on_copy_row","click #btn-copy-with-header":"on_copy_row_with_header","click #btn-paste-row":"on_paste_row","click #btn-flash":"on_flash","click #btn-flash-menu":"on_flash","click #btn-cancel-query":"on_cancel_query","click #btn-save-results-to-file":"on_download","click #btn-clear":"on_clear","click #btn-auto-commit":"on_auto_commit","click #btn-auto-rollback":"on_auto_rollback","click #btn-clear-history":"on_clear_history","click .noclose":"do_not_close_menu","click #btn-explain":"on_explain","click #btn-explain-analyze":"on_explain_analyze","click #btn-explain-verbose":"on_explain_verbose","click #btn-explain-costs":"on_explain_costs","click #btn-explain-buffers":"on_explain_buffers","click #btn-explain-timing":"on_explain_timing","click #btn-explain-summary":"on_explain_summary","click #btn-explain-settings":"on_explain_settings","change .limit":"on_limit_change",keydown:"keyAction","click #btn-comment-code":"on_toggle_comment_block_code","click #btn-toggle-comment-block":"on_toggle_comment_block_code","click #btn-comment-line":"on_comment_line_code","click #btn-uncomment-line":"on_uncomment_line_code","click #btn-indent-code":"on_indent_code","click #btn-unindent-code":"on_unindent_code","click #btn-format-sql":"on_format_sql","click #btn-commit":"on_commit_transaction","click #btn-rollback":"on_rollback_transaction","click #btn-manage-macros":"on_manage_macros","click .btn-macro":"on_execute_macro"},render_connection:function(e){if(this.handler.is_query_tool){document.getElementById("connections-list").innerHTML="",e.forEach((function(e,t){var r="";r="is_selected"in e&&e.is_selected?'<li class="connection-list-item selected-connection" data-index='+t+'><a class="dropdown-item" href="#" tabindex="0">'+i.escape(e.conn_title)+"</a></li>":'<li class="connection-list-item" data-index='+t+'><a class="dropdown-item" href="#" tabindex="0">'+i.escape(e.conn_title)+"</a></li>",n("#connections-list").append(r)}));var t=this;n(".connection-list-item").click((function(){t.get_connection_data(this)}))}else n(".conn-info-dd").hide(),n(".connection-data").css({pointerEvents:"none",cursor:"arrow"})},get_connection_data:function(e){var t=n(e).attr("data-index"),r=this.connection_list[t];r.server_group?this.on_change_connection(r):this.on_new_connection()},reflectPreferences:function(){var e=this,t=G.default.pgAdmin.Browser,n=t.get_preferences_for_module("browser");X.preference_version()<t.preference_version()&&(X.preference_version(t.preference_version()),e.preferences=t.get_preferences_for_module("sqleditor"),e.preferences.show_query_tool=n.sub_menu_query_tool,e.handler.preferences=e.preferences,H.updateUIPreferences(e))},buildDefaultLayout:function(e){var t=e.addPanel("sql_panel",Y.DOCK.TOP);e.addPanel("scratch",Y.DOCK.RIGHT,t),e.addPanel("history",Y.DOCK.STACKED,t);var n=e.addPanel("data_output",Y.DOCK.BOTTOM);e.addPanel("explain",Y.DOCK.STACKED,n),e.addPanel("messages",Y.DOCK.STACKED,n),e.addPanel("notifications",Y.DOCK.STACKED,n)},set_server_version:function(e){var t=this;t.server_ver=e,this.$el.find("*[data-min-ver]").map((function(){var e=n(this);parseInt(e.attr("data-min-ver"))>t.server_ver?e.addClass("d-none"):e.removeClass("d-none")}))},set_editor_title:function(e){this.$el.find(".editor-title").text(i.unescape(e)),this.render_connection(this.connection_list)},render:function(){var r=this;r.gain_focus=function(){setTimeout((function(){E.updateConnectionStatusFlag("visible")}),100)},r.lost_focus=function(){setTimeout((function(){E.updateConnectionStatusFlag("hidden")}),100)},r.docker=new Y("#editor-panel",{allowContextMenu:!0,allowCollapse:!1,loadingClass:"pg-sp-icon",themePath:t("static",{filename:"css"}),theme:"webcabin.overrides.css"});var o=new c.Browser.Panel({name:"sql_panel",title:e("Query Editor"),width:"75%",height:"33%",isCloseable:!1,isPrivate:!0}),a=new c.Browser.Panel({name:"data_output",title:e("Data Output"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,extraClasses:"hide-vertical-scrollbar",content:'<div class="data-output-container">\n          <div id="fetching_data" class="pg-sp-container sql-editor-busy-fetching">\n              <div class="pg-sp-content">\n                  <div class="row">\n                      <div class="col-12 pg-sp-icon sql-editor-busy-icon"></div>\n                  </div>\n                  <div class="row"><div class="col-12 pg-sp-text sql-editor-busy-text">'.concat(e("Loading..."),'</div></div>\n              </div>\n          </div>\n          <div id ="datagrid" class="sql-editor-grid-container text-12" tabindex="0">').concat(ie,"</div>\n        </div>")}),l=new c.Browser.Panel({name:"explain",title:e("Explain"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div class="sql-editor-explain pg-el-container" tabindex="0">'.concat(ae,"</div>")}),u=new c.Browser.Panel({name:"messages",title:e("Messages"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div role="status" class="sql-editor-message" tabindex="0"></div>'}),d=new c.Browser.Panel({name:"history",title:e("Query History"),width:"100%",height:"33%",isCloseable:!1,isPrivate:!0,content:'<div id ="history_grid" class="sql-editor-history-container" tabindex="0"></div>'}),p=new c.Browser.Panel({name:"scratch",title:e("Scratch Pad"),width:"25%",height:"33%",isCloseable:!0,isPrivate:!1,content:'<div class="sql-scratch"><textarea wrap="off" tabindex="0"></textarea></div>'}),m=new c.Browser.Panel({name:"notifications",title:e("Notifications"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="notification_grid" class="sql-editor-notifications" tabindex="0"></div>'}),b=new c.Browser.Panel({name:"geometry_viewer",title:e("Geometry Viewer"),width:"100%",height:"100%",isCloseable:!0,isPrivate:!0,isLayoutMember:!1,content:'<div id ="geometry_viewer_panel" class="sql-editor-geometry-viewer" tabindex="0"></div>'});o.load(r.docker),a.load(r.docker),l.load(r.docker),u.load(r.docker),d.load(r.docker),p.load(r.docker),m.load(r.docker),b.load(r.docker),X.restore_layout(r.docker,this.layout,this.buildDefaultLayout.bind(this)),r.docker.on(Y.EVENT.LAYOUT_CHANGED,(function(){X.save_current_layout("SQLEditor/Layout",r.docker)})),r.sql_panel_obj=r.docker.findPanels("sql_panel")[0],r.history_panel=r.docker.findPanels("history")[0],r.data_output_panel=r.docker.findPanels("data_output")[0],r.explain_panel=r.docker.findPanels("explain")[0],r.messages_panel=r.docker.findPanels("messages")[0],r.notifications_panel=r.docker.findPanels("notifications")[0],(i.isUndefined(r.sql_panel_obj)||i.isUndefined(r.history_panel)||i.isUndefined(r.data_output_panel)||i.isUndefined(r.explain_panel)||i.isUndefined(r.messages_panel)||i.isUndefined(r.notifications_panel))&&s.default.alert(e("Panel Loading Error"),e("Something went wrong while loading the panels. Please make sure to reset the layout (File > Reset Layout) for the better user experience.")),r.sql_panel_obj.on(Y.EVENT.RESIZE_ENDED,(function(){setTimeout((function(){r&&r.query_tool_obj&&r.query_tool_obj.refresh()}),200)})),r.render_history_grid(),X.Events.on("pgadmin:query_tool:connected:"+r.handler.transId,(function(){r.fetch_query_history()})),r.handler.on("pgadmin-sqleditor:check_synchronous_db_name_change",(function(e){r.handler.check_db_name_change(e)})),B.renderNotificationsGrid(r.notifications_panel);var y=n('<textarea id="sql_query_tool" tabindex="-1"></textarea>'),h=n('<label for="sql_query_tool" class="sr-only">SQL Editor</label><div id="output-panel" tabindex="0"></div>').append(y);r.sql_panel_obj.$container.find(".pg-panel-content").append(h),r.query_tool_obj=Z.fromTextArea(y.get(0),{tabindex:"0",lineNumbers:!0,styleSelectedText:!0,mode:"text/x-pgsql",foldOptions:{widget:"…"},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:X.editor_shortcut_keys,scrollbarStyle:"simple",dragDrop:!1,screenReaderLabel:e("SQL editor")}),r.handler.is_query_tool&&(r.query_tool_obj.setOption("dragDrop",!0),r.query_tool_obj.on("drop",(function(e,t){var n=null;try{n=JSON.parse(t.dataTransfer.getData("text")),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()}catch(e){return}var r=e.coordsChar({left:t.x,top:t.y});e.replaceRange(n.text,r),e.focus(),e.setSelection(f(f({},r),{},{ch:r.ch+n.cur.from}),f(f({},r),{},{ch:r.ch+n.cur.to}))}))),X.Events.on("pgadmin:query_tool:sql_panel:focus",(function(){r.query_tool_obj.focus()})),X.Events.on("pgadmin:query_tool:explain:focus",(function(){setTimeout((function(){n(".sql-editor-explain .backform-tab .nav-link.active").focus()}),200)})),n("#datagrid").bind("dragover drop",(function(e){e.stopPropagation(),e.preventDefault()}));var g=r.browser_preferences.new_browser_tab_open;(i.isNull(g)||i.isUndefined(g)||!g.includes("qt"))&&(i.each(G.default.pgAdmin.Browser.docker.findPanels("frm_datagrid"),(function(e){e.trans_id==r.transId&&(r.currentPanel=e,e.on(Y.EVENT.CLOSING,(function(){return r.handler.check_needed_confirmations_before_closing_panel(!0)})),e.on(Y.EVENT.GAIN_FOCUS,(function(){var e=n(this.$container),t=r.handler.transId;if(!e.hasClass("wcPanelTabContentHidden")){E.isModalOpen(["fileSelectionDlg","createModeDlg","confirm","alert","confirmSave","newConnectionDialog","macroDialog"])||(setTimeout((function(){r.handler.gridView.query_tool_obj.focus()}),200),X.Events.trigger("pgadmin:query_tool:panel:gain_focus:"+t))}})),e.on(Y.EVENT.LOST_FOCUS,(function(){var e=n(this.$container),t=r.handler.transId;e.hasClass("wcPanelTabContentHidden")&&X.Events.trigger("pgadmin:query_tool:panel:lost_focus:"+t)})))})),X.Events.on("pgadmin:query_tool:panel:gain_focus:"+r.handler.transId,r.gain_focus,r),X.Events.on("pgadmin:query_tool:panel:lost_focus:"+r.handler.transId,r.lost_focus,r)),setTimeout((function(){r.query_tool_obj.focus()}),500),Z.registerHelper("hint","sql",(function(e){var o=[],a=e.getDoc(),l=a.getCursor(),s=l.ch,u={editor:e,url:t("sqleditor.autocomplete",{trans_id:r.transId}),data:o,current_line:l.line,hint_render:function(e,t,n){var r=document.createElement("span");switch(n.type){case"database":r.className="sqleditor-hint pg-icon-"+n.type;break;case"datatype":r.className="sqleditor-hint icon-type";break;case"keyword":r.className="fa fa-key";break;case"table alias":r.className="fa fa-at";break;default:r.className="sqleditor-hint icon-"+n.type}r.appendChild(document.createTextNode(n.text)),e.appendChild(r)}};return o.push(a.getValue()),o.push(a.getRange({line:0,ch:0},{line:u.current_line,ch:s})),{then:function(e){var t=this;n.ajax({url:t.url,method:"POST",contentType:"application/json",data:JSON.stringify(t.data)}).done((function(n){var r=[];i.each(n.data.result,(function(e,n){r.push({text:n,type:e.object_type,render:t.hint_render})})),r.sort((function(e,t){var n=e.text.toLowerCase(),r=t.text.toLowerCase();return n<r?-1:n>r?1:0}));var o,a,s,u=t.editor.getTokenAt(l);u.end>l.ch&&(u.end=l.ch,u.string=u.string.slice(0,l.ch-u.start)),u.string.match(/^[.`\w@]\w*$/)?(s=u.string,o=u.start,a=u.end):(o=a=l.ch,s=""),"."!=s.charAt(0)&&"``"!=s.charAt(0)||(o+=1),e({list:r,from:{line:t.current_line,ch:o},to:{line:t.current_line,ch:a}})})).fail((function(e){return k.handleLoginRequiredAndTransactionRequired(c,t,e,null,[],!1)}))}.bind(u)}})),n(".dropdown-submenu").on("mouseenter",(function(){var e=n(this).find("ul.dropdown-menu");if(n(e).offset().left+e.width()>n(window).width()){var t=-n(e).width();e.css("left",t)}})).on("mouseleave",(function(){n(this).find("ul.dropdown-menu").css("left","")})),r.reflectPreferences(),r.preferences.auto_commit?n(".auto-commit").removeClass("visibility-hidden"):n(".auto-commit").addClass("visibility-hidden"),r.preferences.auto_rollback?n(".auto-rollback").removeClass("visibility-hidden"):n(".auto-rollback").addClass("visibility-hidden"),G.default.pgAdmin.Browser.onPreferencesChange("sqleditor",(function(){r.reflectPreferences()}));var v=r.browser_preferences.new_browser_tab_open;v&&v.includes("qt")&&(X.bind_beforeunload(),setInterval((function(){G.default.pgAdmin&&r.reflectPreferences()}),1e3)),X.register_to_activity_listener(document,(function(){s.default.alert(e("Timeout"),e("Your session has timed out due to inactivity. Please close the window and login again."))})),r.render_connection(r.connection_list)},render_grid:function(t,r,o,a,l){var u=this;u.handler.numberOfModifiedCells=0,u.handler.reset_data_store(),u.handler.rows_to_disable=new Array,u.handler.temp_new_rows=new Array,u.handler.primary_keys_data={},u.client_primary_key=a,u.client_primary_key_counter=0,u.handler.slickgrid&&u.handler.slickgrid.destroy(),i.isArray(t)&&i.size(t)||(t=[]);var d,c=[],f=u.handler.col_size,m=u.handler.query,b=m.match(/select.*from\s+\w+\.*(\w+)/i);d=b?b[1]:E.getHash(m),u.handler.table_name=d,f[d]=f[d]||{},(i.isUndefined(u.auto_resize_column_based_on_data)||u.auto_resize_column_based_on_data!==u.preferences.column_data_auto_resize)&&(u.auto_resize_column_based_on_data=u.preferences.column_data_auto_resize,f[d]={}),u.max_width_changed=!1,(i.isUndefined(u.old_column_data_max_width)||u.old_column_data_max_width!=u.preferences.column_data_max_width)&&(u.old_column_data_max_width=u.preferences.column_data_max_width,u.max_width_changed=!0),i.each(r,(function(t){t.display_name=i.escape(t.display_name),t.column_type=i.escape(t.column_type);var r={id:i.escape(t.name),pos:t.pos,field:t.name,nonative_field:'"'.concat(t.name,'"'),name:t.label,display_name:t.display_name,column_type:t.column_type,column_type_internal:t.column_type_internal,cell:t.cell,not_null:t.not_null,has_default_val:t.has_default_val,is_array:t.is_array,can_edit:t.can_edit},o=t.column_type.trim(),a=t.name.length>o.length?i.escape(t.display_name):o,l=0;if("geometry"!=t.cell&&"geography"!=t.cell||(l+=28),i.isUndefined(t.can_edit)||(l+=12),i.isUndefined(f[d][r.nonative_field])?"by_data"===u.preferences.column_data_auto_resize?(r.addWidth=l,r.width=NaN):(r.width=E.calculateColumnWidth(a),r.width+=l,f[d][t.nonative_field]=r.width):r.width=f[d][r.nonative_field],"oid"==t.cell&&"oid"==t.name?r.editor=null:"Json"==t.cell?(r.editor=t.can_edit?ee.Editors.JsonText:ee.Editors.ReadOnlyJsonText,r.formatter=ee.Formatters.JsonString):"number"==t.cell||"oid"==t.cell||-1!==n.inArray(t.type,["xid","real"])?(r.editor=t.can_edit?ee.Editors.CustomNumber:ee.Editors.ReadOnlyText,r.formatter=ee.Formatters.Numbers):"boolean"==t.cell?(r.editor=t.can_edit?ee.Editors.Checkbox:ee.Editors.ReadOnlyCheckbox,r.formatter=ee.Formatters.Checkmark):"binary"==t.cell?r.formatter=ee.Formatters.Binary:"geometry"==t.cell||"geography"==t.cell?r.can_edit=!1:(r.editor=t.can_edit?ee.Editors.pgText:ee.Editors.ReadOnlypgText,r.formatter=ee.Formatters.Text),!i.isUndefined(t.can_edit)){var s="";s=t.can_edit?e("Editable column"):e("Read-only column"),r.toolTip=s}c.push(r)}));var y=new v;c=u.grid_columns=y.getColumnDefinitions(c),i.each(c,(function(e){"geometry"!=e.column_type_internal&&"geography"!=e.column_type_internal||R.add_header_button(e),i.isUndefined(e.can_edit)||E.addEditableIcon(e,e.can_edit)})),l&&(c[0].width=E.calculateColumnWidth(l));var h={editable:!0,enableAddRow:o,enableCellNavigation:!0,enableColumnReorder:!1,asyncEditorLoading:!1,autoEdit:!1},g=n("#datagrid"),w=n(this.data_output_panel.$container.parent().parent()).height()-35;g.height(w);var O=u.dataView=new ee.Data.DataView,S=u.grid=new ee.Grid(g,O,c,h);O.getItemMetadata=function(e){var t="",n=u.handler.data_store;return i.has(u.handler,"data_store")&&(e in n.added_index&&n.added_index[e]in n.added?(t="new_row",n.added[n.added_index[e]].err&&(t+=" error")):e in n.updated_index&&e in n.updated&&(t="updated_row",n.updated[n.updated_index[e]].err&&(t+=" error"))),!i.isUndefined(u.handler.rows_to_disable)&&u.handler.rows_to_disable.length>0&&-1!==i.indexOf(u.handler.rows_to_disable,e)&&(t+=" disabled_row"),{cssClasses:t}},S.registerPlugin(new ee.AutoTooltips({enableForHeaderCells:!1})),S.registerPlugin(new _),S.setSelectionModel(new C),S.registerPlugin(y),S.registerPlugin(new ee.AutoColumnSize);var j=new ee.Plugins.HeaderButtons;j.onCommand.subscribe((function(e,t){if("view-geometries"===t.command){var n=t.grid.getColumns(),r=n.indexOf(t.column),o=t.grid.getSelectedRows();if(0===o.length)if(u.handler.has_more_rows)u.fetch_next_all((function(){y.onGridSelectAll.notify(t,new ee.EventData);var e=t.grid.getData().getItems();R.render_geometries(u.handler,e,n,r)}));else{y.onGridSelectAll.notify(t,new ee.EventData);var a=t.grid.getData().getItems();R.render_geometries(u.handler,a,n,r)}else{var l=t.grid.getData().getItems(),s=i.map(o,(function(e){return l[e]}));R.render_geometries(u.handler,s,n,r)}}})),S.registerPlugin(j);var k={keys:i.isEmpty(u.handler.primary_keys)&&u.handler.has_oids?u.handler.oids:u.handler.primary_keys,vals:t,columns:r,grid:S,selection:S.getSelectionModel(),editor:u,client_primary_key:u.client_primary_key,has_oids:u.handler.has_oids};u.handler.slickgrid=S,u.handler.slickgrid.onScroll.subscribe((function(){setTimeout((function(){var e=u.handler.gridView.grid.getSelectionModel(),t=e.getSelectedRanges();t.length>1&&e.setSelectedRanges(t)}),100),Object.keys(u.handler.data_store.deleted).length>0&&setTimeout((function(){n(u.handler.gridView.grid.getCanvasNode()).find("div.selected").removeClass("strikeout"),n(u.handler.gridView.grid.getCanvasNode()).find("div.selected").addClass("strikeout")}),100)})),u.handler.slickgrid.CSVOptions={quoting:u.preferences.results_grid_quoting,quote_char:u.preferences.results_grid_quote_char,field_separator:u.preferences.results_grid_field_separator},k.selection&&k.selection.onSelectedRangesChanged.subscribe(P.bind(k)),S.onColumnsResized.subscribe(function(){var e=this.getColumns();i.each(e,(function(e){u.handler.col_size[u.handler.table_name][e.nonative_field]=e.width}))}.bind(S)),y.onBeforeGridSelectAll.subscribe((function(e,t){u.handler.has_more_rows&&(e.stopImmediatePropagation(),u.fetch_next_all((function(){y.onGridSelectAll.notify(t,new ee.EventData)})))})),y.onBeforeGridColumnSelectAll.subscribe((function(e,t){u.handler.has_more_rows&&(e.stopImmediatePropagation(),u.fetch_next_all((function(){y.onGridColumnSelectAll.notify(t,new ee.EventData)})))})),O.onRowCountChanged.subscribe((function(){S.updateRowCount(),S.render()})),O.onRowsChanged.subscribe((function(e,t){S.invalidateRows(t.rows),S.render(),"by_data"===u.preferences.column_data_auto_resize&&S.resizeAllColumns&&S.resizeAllColumns(u.preferences.column_data_max_width,u.max_width_changed)})),S.onBeforeEditCell.subscribe((function(e,t){if("bytea"==t.column.column_type_internal||"bytea[]"==t.column.column_type_internal)return!1;var n=t.item;if(u.handler.rows_to_disable&&i.contains(u.handler.rows_to_disable,t.row))return!1;if(u.handler.can_edit&&n&&u.client_primary_key in n){var r=n[u.client_primary_key],o=u.handler.primary_keys,a={};if(r in u.handler.primary_keys_data)return;i.each(o,(function(e,t){a[t]=n[t]})),u.handler.primary_keys_data[r]=a}})),S.onKeyDown.subscribe((function(e,t){var n=e.keyCode;(e.ctrlKey||e.metaKey)&&65==n&&u.handler.has_more_rows?u.fetch_next_all((function(){x(e,t)})):x(e,t)})),n(".slick-viewport").on("blur","input.editor-text",(function(){window.setTimeout((function(){ee.GlobalEditorLock.isActive()&&ee.GlobalEditorLock.commitCurrentEdit()}))})),S.onCellChange.subscribe(function(e,t){var r=t.grid.getColumns()[t.cell].field,o=t.item[r],a=t.item[u.client_primary_key]||null,l={};u.handler.numberOfModifiedCells++,t.grid.addCellCssStyles(u.handler.numberOfModifiedCells,p({},t.row,p({},r,"highlighted_grid_cells")));var s=t.grid.getDataItem(t.row);if(u.primary_keys&&i.all(i.values(i.pick(s,u.primary_keys)),(function(e){return null!=e}))&&u.handler.temp_new_rows){var d=u.handler.temp_new_rows.indexOf(t.row);d>-1&&u.handler.temp_new_rows.splice(d,1)}l[r]=o,a&&(a in u.handler.data_store.added?(i.extend(u.handler.data_store.added[a].data,l),u.handler.data_store.added[a].err=!1):a in u.handler.data_store.updated?(i.extend(u.handler.data_store.updated[a].data,l),u.handler.data_store.updated[a].err=!1):(u.handler.data_store.updated[a]={err:!1,data:l,primary_keys:u.handler.primary_keys_data[a]},u.handler.data_store.updated_index[t.row]=a)),n("#btn-save-data").prop("disabled",!1)}.bind(k)),S.onAddNewRow.subscribe(function(e,t){var r=t.column,o=t.item,a=this.grid.getDataLength(),l=(u.client_primary_key_counter++).toString(),s=this.grid.getData();i.isUndefined(o[0])&&u.handler.temp_new_rows.push(a),o&&(o[u.client_primary_key]=l),i.each(t.grid.getColumns(),(function(e){K(o[e.field])&&(o[e.field]=void 0)})),s.addItem(o),u.handler.data_store.added[l]={err:!1,data:o},u.handler.data_store.added_index[a]=l;({})[r.name]=i.where(this.columns,{pos:r.pos})[0].type,S.updateRowCount(),S.render();var d=s.getRowByItem(o);u.handler.numberOfModifiedCells++,t.grid.addCellCssStyles(u.handler.numberOfModifiedCells,p({},d,p({},r.field,"highlighted_grid_cells"))),n("#btn-save-data").prop("disabled",!1)}.bind(k)),S.onViewportChanged.subscribe((function(e,t){var n=t.grid.getRenderedRange(),r=t.grid.getDataLength();u.handler.has_more_rows&&!u.handler.fetching_rows&&n.bottom>r-100&&setTimeout(u.fetch_next.bind(u))})),S.onValidationError.subscribe((function(e,t){s.default.error(t.validationResults.msg)})),n(window).resize((function(){u.data_output_panel.isVisible()&&u.grid_resize(S)})),u.data_output_panel.on(Y.EVENT.RESIZE_ENDED,(function(){u.data_output_panel.isVisible()&&u.grid_resize(S)})),u.data_output_panel.on(Y.EVENT.RESIZED,(function(){u.data_output_panel.isVisible()&&("by_data"===u.preferences.column_data_auto_resize?S.resizeAllColumns&&S.resizeAllColumns(u.preferences.column_data_max_width,u.max_width_changed):u.grid.resizeAllColumns&&u.grid.resizeAllColumns())})),u.data_output_panel.on(Y.EVENT.VISIBILITY_CHANGED,(function(){u.data_output_panel.isVisible()&&u.grid_resize(S)}));for(var D=0;D<t.length;D++){for(var T={},N=1;N<c.length;N++)T[c[N].field]=t[D][c[N].pos];T[u.client_primary_key]=(u.client_primary_key_counter++).toString(),t[D]=T}O.setItems(t,u.client_primary_key),0===t.length&&"by_data"===u.preferences.column_data_auto_resize&&u.grid.resizeAllColumns&&u.grid.resizeAllColumns()},fetch_next_all:function(e){this.fetch_next(!0,e)},fetch_next:function(r,o){var i=this,a="";i.handler.fetching_rows=!0,n("#btn-flash").prop("disabled",!0),n("#btn-save-results-to-file").prop("disabled",!0),r?(i.handler.trigger("pgadmin-sqleditor:loading-icon:show",e("Fetching all records...")),a=t("sqleditor.fetch_all",{trans_id:i.transId,fetch_all:1})):a=t("sqleditor.fetch",{trans_id:i.transId}),n.ajax({url:a,method:"GET"}).done((function(e){i.handler.has_more_rows=e.data.has_more_rows,setTimeout((function(){n("#btn-flash").prop("disabled",!1)}),700),n("#btn-save-results-to-file").prop("disabled",!1),i.handler.trigger("pgadmin-sqleditor:loading-icon:hide"),i.update_grid_data(e.data.result),i.handler.fetching_rows=!1,"function"==typeof o&&o()})).fail((function(e){n("#btn-flash").prop("disabled",!1),n("#btn-save-results-to-file").prop("disabled",!1),i.handler.trigger("pgadmin-sqleditor:loading-icon:hide"),i.handler.has_more_rows=!1,i.handler.fetching_rows=!1,"function"==typeof o&&o();var t=k.handleQueryToolAjaxError(c,i,e,null,[],!1);t&&i.update_msg_history(!1,t)}))},update_grid_data:function(e){this.dataView.beginUpdate();var t,n=u(e);try{for(n.s();!(t=n.n()).done;){for(var r=t.value,o={},i=1;i<this.grid_columns.length;i++)o[this.grid_columns[i].field]=r[this.grid_columns[i].pos];o[this.client_primary_key]=(this.client_primary_key_counter++).toString(),this.dataView.addItem(o)}}catch(e){n.e(e)}finally{n.f()}this.dataView.endUpdate()},grid_resize:function(e){var t=n("#datagrid").height(),r=n(this.data_output_panel.$container.parent().parent()).height()-35,o=e.getViewport(),i=e.getRenderedRange(),a=e.getActiveCell();t!=r&&n("#datagrid").css({height:r+"px"}),e.resizeCanvas(),a&&e.scrollCellIntoView(a.row,a.cell),o.top!=i.top&&(o.bottom-2==i.bottom?e.scrollRowIntoView(o.bottom):e.scrollRowIntoView(o.bottom-2))},fetch_query_history:function(){var e=this;n.ajax({url:t("sqleditor.get_query_history",{trans_id:e.handler.transId}),method:"GET",contentType:"application/json"}).done((function(t){t.data.result.map((function(t){var n=JSON.parse(t);n.start_time=new Date(n.start_time),e.history_collection.add(n)}))})).fail((function(){}))},render_history_grid:function(){var e=this;e.history_collection||(e.history_collection=new te([])),e.historyComponent||(e.historyComponent=new ne(n("#history_grid"),e.history_collection),e.historyComponent.onCopyToEditorClick((function(t){e.query_tool_obj.setValue(t),e.sql_panel_obj.focus(),setTimeout((function(){e.query_tool_obj.focus(),e.query_tool_obj.setCursor(e.query_tool_obj.lineCount(),0)}),100)})),e.historyComponent.render(),e.history_panel.off(Y.EVENT.VISIBILITY_CHANGED),e.history_panel.on(Y.EVENT.VISIBILITY_CHANGED,(function(){e.history_panel.isVisible()&&setTimeout((function(){e.historyComponent.focus()}),100)}))),e.handler.is_query_tool||e.historyComponent.setEditorPref({copy_to_editor:!1})},on_delete:function(){var e=this;e.handler.trigger("pgadmin-sqleditor:button:deleterow",e,e.handler)},_stopEventPropogation:function(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()},_closeDropDown:function(e){var t=e&&(e.currentTarget||e.target);t&&n(t).closest(".editor-toolbar").find(".show").removeClass("show")},on_save_file:function(e){this._stopEventPropogation(e),this._closeDropDown(e),this.handler.close_on_save=!1,this.handler.trigger("pgadmin-sqleditor:button:save_file")},on_save_as:function(e){var t=this;this._stopEventPropogation(e),this._closeDropDown(e),t.handler.close_on_save=!1,t.handler.trigger("pgadmin-sqleditor:button:save_file",t,t.handler,!0)},on_find:function(e){this._stopEventPropogation(e),this._closeDropDown(e),this.query_tool_obj.execCommand("find")},on_find_next:function(e){this._stopEventPropogation(e),this._closeDropDown(e),this.query_tool_obj.execCommand("findNext")},on_find_previous:function(e){this._stopEventPropogation(e),this._closeDropDown(e),this.query_tool_obj.execCommand("findPrev")},on_replace:function(e){this._stopEventPropogation(e),this._closeDropDown(e),this.query_tool_obj.execCommand("replace")},on_replace_all:function(e){this._stopEventPropogation(e),this._closeDropDown(e),this.query_tool_obj.execCommand("replaceAll")},on_find_persistent:function(e){this._stopEventPropogation(e),this._closeDropDown(e),this.query_tool_obj.execCommand("findPersistent")},on_jump:function(e){this._stopEventPropogation(e),this._closeDropDown(e),this.query_tool_obj.execCommand("jumpToLine")},on_show_filter:function(){var e=this;e.handler.trigger("pgadmin-sqleditor:button:show_filter",e,e.handler)},on_new_connection:function(){var e=this;e.handler.trigger("pgadmin-sqleditor:button:show_new_connection",e,e.handler)},on_include_filter:function(e){var t=this;this._stopEventPropogation(e),this._closeDropDown(e),t.handler.trigger("pgadmin-sqleditor:button:include_filter",t,t.handler)},on_exclude_filter:function(e){var t=this;this._stopEventPropogation(e),this._closeDropDown(e),t.handler.trigger("pgadmin-sqleditor:button:exclude_filter",t,t.handler)},on_remove_filter:function(e){var t=this;this._stopEventPropogation(e),this._closeDropDown(e),t.handler.trigger("pgadmin-sqleditor:button:remove_filter",t,t.handler)},on_cancel:function(){n("#filter").addClass("d-none"),n("#editor-panel").removeClass("sql-editor-busy-fetching")},on_copy_row:function(){var e=this;e.handler.trigger("pgadmin-sqleditor:button:copy_row",e,e.handler)},on_copy_row_with_header:function(e){var t=this;this._stopEventPropogation(e),t.handler.trigger("pgadmin-sqleditor:button:copy_row_with_header",t,t.handler)},on_paste_row:function(){var e=this;e.handler.trigger("pgadmin-sqleditor:button:paste_row",e,e.handler)},on_limit_change:function(){var e=this;e.handler.trigger("pgadmin-sqleditor:button:limit",e,e.handler)},on_save_data:function(){this.handler.history_query_source=re.SAVE_DATA,q.saveDataChanges(this.handler)},on_flash:function(){n("#btn-flash").prop("disabled",!0);var e=n("#btn-flash").attr("data-click-counter");e=(parseInt(e)+1)%10,n("#btn-flash").attr("data-click-counter",e),this.handler.history_query_source=re.EXECUTE,q.executeQuery(this.handler)},on_cancel_query:function(){var e=this;e.handler.trigger("pgadmin-sqleditor:button:cancel-query",e,e.handler)},on_comment_line_code:function(){q.commentLineCode(this.handler)},on_uncomment_line_code:function(){q.uncommentLineCode(this.handler)},on_toggle_comment_block_code:function(){q.commentBlockCode(this.handler)},on_indent_code:function(){var e=this;e.handler.trigger("pgadmin-sqleditor:indent_selected_code",e,e.handler)},on_unindent_code:function(){var e=this;e.handler.trigger("pgadmin-sqleditor:unindent_selected_code",e,e.handler)},on_format_sql:function(){var e=this;e.handler.trigger("pgadmin-sqleditor:format_sql",e,e.handler)},on_clear:function(t){var n=this;this._stopEventPropogation(t),this._closeDropDown(t),n.handler.is_query_changed?s.default.confirm(e("Unsaved changes"),e("Are you sure you wish to discard the current changes?"),(function(){n.query_tool_obj.setValue(""),setTimeout((function(){n.query_tool_obj.focus()}),200)}),(function(){return!0})):n.query_tool_obj.setValue("")},on_clear_history:function(r){var o=this;this._stopEventPropogation(r),this._closeDropDown(r),o.history_collection.length()&&s.default.confirm(e("Clear history"),e("Are you sure you wish to clear the history?")+"</br>"+e("This will remove all of your query history from this and other sessions for this database."),(function(){o.history_collection&&o.history_collection.reset(),o.handler.is_query_tool&&n.ajax({url:t("sqleditor.clear_query_history",{trans_id:o.handler.transId}),method:"DELETE",contentType:"application/json"}).done((function(){})).fail((function(){})),setTimeout((function(){o.query_tool_obj.focus()}),200)}),(function(){return!0}))},on_auto_commit:function(e){var t=this;this._stopEventPropogation(e),t.handler.trigger("pgadmin-sqleditor:button:auto_commit",t,t.handler)},on_auto_rollback:function(e){var t=this;this._stopEventPropogation(e),t.handler.trigger("pgadmin-sqleditor:button:auto_rollback",t,t.handler)},on_explain:function(e){this._stopEventPropogation(e),this._closeDropDown(e),this.handler.history_query_source=re.EXPLAIN,q.explain(this.handler)},on_explain_analyze:function(e){this._stopEventPropogation(e),this._closeDropDown(e),this.handler.history_query_source=re.EXPLAIN_ANALYZE,q.explainAnalyze(this.handler)},on_explain_verbose:function(e){var t=this;this._stopEventPropogation(e),t.handler.trigger("pgadmin-sqleditor:button:explain-verbose",t,t.handler)},on_explain_costs:function(e){var t=this;this._stopEventPropogation(e),t.handler.trigger("pgadmin-sqleditor:button:explain-costs",t,t.handler)},on_explain_buffers:function(e){var t=this;this._stopEventPropogation(e),t.handler.trigger("pgadmin-sqleditor:button:explain-buffers",t,t.handler)},on_explain_timing:function(e){var t=this;this._stopEventPropogation(e),t.handler.trigger("pgadmin-sqleditor:button:explain-timing",t,t.handler)},on_explain_summary:function(e){var t=this;this._stopEventPropogation(e),t.handler.trigger("pgadmin-sqleditor:button:explain-summary",t,t.handler)},on_explain_settings:function(e){var t=this;this._stopEventPropogation(e),t.handler.trigger("pgadmin-sqleditor:button:explain-settings",t,t.handler)},do_not_close_menu:function(e){e.stopPropagation()},on_show_query_tool:function(e){var t=this;this._stopEventPropogation(e),this._closeDropDown(e),t.handler.trigger("pgadmin-sqleditor:button:show_query_tool",t,t.handler)},on_file_load:function(e){var t=this;this._stopEventPropogation(e),this._closeDropDown(e),t.handler.trigger("pgadmin-sqleditor:button:load_file",t,t.handler)},on_download:function(){q.download(this.handler)},keyAction:function(e){var t;t=M.processEventQueryTool(this.handler,q,e,this.docker),i.isNull(t)||i.isUndefined(t)||""==t||setTimeout((function(){X.Events.trigger("pgadmin:query_tool:".concat(t,":focus"))}),100)},on_commit_transaction:function(){this.handler.close_on_idle_transaction=!1,this.handler.history_query_source=re.COMMIT,q.executeCommit(this.handler)},on_rollback_transaction:function(){this.handler.close_on_idle_transaction=!1,this.handler.history_query_source=re.ROLLBACK,q.executeRollback(this.handler)},on_manage_macros:function(){var e=this;e.handler.trigger("pgadmin-sqleditor:button:manage_macros",e,e.handler)},on_execute_macro:function(e){var t=n(e.currentTarget).data("macro-id");this.handler.history_query_source=re.EXECUTE,q.executeMacro(this.handler,t)},set_selected_option:function(e){this.connection_list.forEach((function(t){t.server==e.server&&t.database==e.database&&t.user==e.user&&t.role==e.role?e.is_selected=!0:t.is_selected=!1}))},on_change_connection:function(t,r){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t.is_selected){var i=this;o?s.default.confirm(e("Change connection"),e("By changing the connection you will lose all your unsaved data for the current connection. <br> Do you want to continue?"),(function(){i.change_connection(t,r,!0)}),(function(){return n("#main_loader").addClass("d-none"),d.newConnectionDialog().destroy(),!0})):i.change_connection(t,r,!1)}},change_connection:function(e,r,o){var a=this,l=null;r?((l=n("#show_filter_progress")).removeClass("d-none"),l.find(".sql-editor-busy-text").text("Connecting to database...")):(l=n("#main_loader")).removeClass("d-none"),a.set_selected_option(e),n.ajax({url:t("datagrid.update_query_tool_connection",{trans_id:a.transId,sgid:e.server_group,sid:e.server,did:e.database}),method:"POST",contentType:"application/json",data:JSON.stringify(e)}).done((function(t){if(t.success){delete e.password,a.transId=t.data.tran_id,a.handler.transId=t.data.tran_id,a.handler.url_params={did:e.database,is_query_tool:a.handler.url_params.is_query_tool,server_type:a.handler.url_params.server_type,sgid:e.server_group,sid:e.server,title:e.title},a.set_editor_title(i.unescape(e.conn_title)),a.handler.setTitle(i.unescape(a.handler.url_params.title));var n=e.server_name+"/"+e.database_name+"- Database connected";if(s.default.success(n),r){var u={server_group:a.handler.url_params.sgid,server:e.server,database:e.database,user:e.user,title:e.title,conn_title:e.conn_title,role:e.role,is_allow_new_connection:!0,database_name:e.database_name,server_name:e.server_name,is_selected:!0};delete u.password,o&&a.connection_list.unshift(u),a.render_connection(a.connection_list),l.addClass("d-none"),d.newConnectionDialog().destroy(),d.connectServer().destroy()}else l.addClass("d-none"),d.connectServer().destroy()}return!0})).fail((function(t){if(428==t.status){var n=e;r&&(n={}),d.connectServer("Connect to server",t.responseJSON.result,e.server,!1,n)}else s.default.error(t.responseJSON.errormsg)}))}}),se=function(){this.initialize.apply(this,arguments)},ue=function(){(G.default&&G.default.closed||G.default.pgAdmin&&G.default.pgAdmin.Browser&&G.default.pgAdmin.Browser.preference_version()<=0)&&s.default.alert(e("Connection lost"),e("The pgAdmin browser window has been closed and the connection to the server is lost. Please close this window and open a new pgAdmin session."),(function(){window.close()}),e("Close"))};return i.extend(se.prototype,m.Events,{initialize:function(t){var r=this;this.container=t,this.state={},this.csrf_token=c.csrf_token,ue(),F.modifyAlertifyAnimation(),d.dlgGetServerPass||d.dialog("dlgGetServerPass",(function(){return{main:function(e,t){this.set("title",e),this.setting("message",t)},setup:function(){return{buttons:[{text:e("OK"),key:13,className:"btn btn-primary"},{text:e("Cancel"),key:27,className:"btn btn-danger"}],focus:{element:"#password",select:!0},options:{modal:0,resizable:!1,maximizable:!1,pinnable:!1}}},build:function(){},settings:{message:null},prepare:function(){this.setContent(this.setting("message"))},callback:function(t){if(t.button.text==e("OK")){var o=n(this.elements.content).find("#frmPassword").serialize();r.init_connection(!1,o)}}}})),this.on("pgadmin-datagrid:transaction:created",(function(e){r.transId=e.gridTransId,r.warn_before_continue()})),X.Events.on("pgadmin:user:logged-in",(function(){r.initTransaction()}))},saveState:function(e,t){this.state=e?{fn:e,args:t}:{}},initTransaction:function(){var r,o=this;o.is_query_tool?(r="datagrid.initialize_query_tool",o.url_params.did&&(r="datagrid.initialize_query_tool_with_did")):r="datagrid.initialize_datagrid";var i=t(r,f(f({},o.url_params),{},{trans_id:o.transId}));n.ajax({url:i,type:"POST",data:o.is_query_tool?null:JSON.stringify(o.url_params.sql_filter),contentType:"application/json"}).done((function(e){X.Events.trigger("pgadmin:query_tool:connected:"+o.transId,e.data)})).fail((function(t,n,r){if(410===t.status){var i=o.browser_preferences.new_browser_tab_open;i&&i.includes("qt")?X.report_error(e("Error fetching rows - %s.",t.statusText),t.responseJSON.errormsg,void 0,window.close):X.report_error(e("Error fetching rows - %s.",t.statusText),t.responseJSON.errormsg,void 0,o.close.bind(o))}else{if(-1!==t.responseText.search("Ticket expired"))J.fetch_ticket().then((function(){o.initTransaction()}),(function(){X.Events.trigger("pgadmin:query_tool:connected_fail:"+o.transId,t,r)}));else X.Events.trigger("pgadmin:query_tool:connected_fail:"+o.transId,t,r)}}))},handle_connection_lost:function(e,t){void 0!==t.responseJSON&&t.responseJSON.data&&!t.responseJSON.data.conn_id||void 0!==t.data&&t.data.data&&!t.data.data.conn_id?this.init_connection(e):this.warn_before_continue()},handle_cryptkey_missing:function(){var e=this;X.set_master_password("",(function(){e.warn_before_continue()}))},warn_before_continue:function(){var t=this;s.default.confirm(e("Connection Warning"),'<p style="float:left margin-right:0.5em"><span class="fa fa-exclamation-triangle warn-icon" aria-hidden="true" role="img"></span></p><p style="display: inline-block;"><span class="warn-header">'+e("The application has lost the database connection:")+'</span><br><span class="warn-body">'+e("⁃ If the connection was idle it may have been forcibly disconnected.")+"<br>"+e("⁃ The application server or database server may have been restarted.")+"<br>"+e("⁃ The user session may have timed out.")+'</span><br><span class="warn-footer">'+e("Do you want to continue and establish a new session?")+"</span></p>",(function(){if("fn"in t.state){var e=t.state.fn,n=t.state.args;t.saveState(),-1==n.indexOf("connect")&&n.push("connect"),e in t?t[e].apply(t,n):console.warn("The callback is not valid for this context")}}),(function(){t.saveState()}),e("Continue"),e("Cancel"))},init_connection:function(r,o){var i=this;n.post(t("NODE-server.connect_id",{gid:this.url_params.sgid,sid:this.url_params.sid}),o).done((function(e){if(1==e.success)if(s.default.success(e.info),r)i.initTransaction();else if("fn"in i.state){var t=i.state.fn,n=i.state.args;i.saveState(),i[t].apply(i,n)}})).fail((function(t){var n=k.handleQueryToolAjaxError(c,i,t,null,[],!1);n&&d.dlgGetServerPass(e("Connect to Server"),n)}))},start:function(t,r,o,a){var l=this;if(l.is_query_tool="true"===r.is_query_tool,l.rows_affected=0,l.marked_line_no=0,l.has_more_rows=!1,l.fetching_rows=!1,l.close_on_save=!1,l.close_on_idle_transaction=!1,l.last_transaction_status=-1,l.server_type=r.server_type,l.url_params=r,l.is_transaction_buttons_disabled=!0,l.is_save_results_to_file_disabled=!0,!l.gridView){l.gridView=new le({el:l.container,handler:l,layout:o}),l.transId=l.gridView.transId=t,l.macros=l.gridView.macros=a,l.gridView.current_file=void 0,l.gridView.render();var u=l.gridView.data_output_panel.$container.find("#fetching_data"),d=u.find(".sql-editor-busy-text"),f=n(".sql-editor-busy-text-status");l.on("pgadmin-sqleditor:loading-icon:message",(function(e){d.text(e),f.text(e)})).on("pgadmin-sqleditor:loading-icon:show",(function(e){u.removeClass("d-none"),f.removeClass("d-none"),d.text(e),f.text(e)})).on("pgadmin-sqleditor:loading-icon:hide",(function(){u.addClass("d-none"),f.addClass("d-none")})),n("#main_loader").addClass("d-none"),l.trigger("pgadmin-sqleditor:loading-icon:hide"),l.gridView.set_editor_title("("+e("Obtaining connection...")+" ".concat(i.unescape(r.title)));var p=function(){(l.is_query_tool?["#btn-flash","#btn-explain","#btn-explain-analyze"]:["#btn-flash"]).forEach((function(e){n(e).prop("disabled",!1)})),n("#btn-conn-status i").removeClass("obtaining-conn");var e=G.default.pgAdmin.Browser.tree.getTreeNodeHierarchy(G.default.pgAdmin.Browser.tree.selected()),t=" ".concat(i.unescape(r.title));l.gridView.set_editor_title(i.unescape(t));var o={server_group:l.gridView.handler.url_params.sgid,server:l.gridView.handler.url_params.sid,database:l.gridView.handler.url_params.did,user:e.server.user.name,role:null,title:i.unescape(r.title),conn_title:i.unescape(t),is_allow_new_connection:!1,database_name:i.unescape(e.database.label),server_name:i.unescape(e.server.label),is_selected:!0};delete o.password,l.gridView.connection_list.unshift(o),l.gridView.render_connection(l.gridView.connection_list)};if(X.Events.on("pgadmin:query_tool:connected:"+t,p),X.Events.on("pgadmin:query_tool:connected_fail:"+t,p),X.Events.on("pgadmin:query_tool:connected:"+t,(function(e){l.gridView.set_server_version(e.serverVersion)})),X.Events.on("pgadmin:query_tool:connected_fail:"+t,(function(e,t){s.default.pgRespErrorNotify(e,t)})),l.initTransaction(),n(window).on("keydown",(function(e){0===n(".sql-editor").find(e.target).length&&e.target!=n("body.wcDesktop")[0]||!l.gridView.keyAction||l.gridView.keyAction(e)})),l.init_events(),l.is_query_tool){if(r.query_url)n.ajax({url:r.query_url,type:"GET"}).done((function(e){l.gridView.query_tool_obj.refresh(),e&&l.gridView.query_tool_obj.setValue(e)})).fail((function(t){if(k.handleQueryToolAjaxError(c,l,t,null,[],!1)){var n=l.browser_preferences.new_browser_tab_open;n&&n.includes("qt")?X.report_error(e("Error fetching SQL for script - %s.",t.statusText),t.responseJSON.errormsg,void 0,window.close):X.report_error(e("Error fetching SQL for script - %s.",t.statusText),t.responseJSON.errormsg,void 0,l.close.bind(l))}}));else if(r.sql_id){var m=localStorage.getItem(r.sql_id);localStorage.removeItem(r.sql_id),m&&l.gridView.query_tool_obj.setValue(m)}}else{l.gridView.query_tool_obj.setOption("readOnly",!0);var b=l.gridView.query_tool_obj.getWrapperElement();b&&(b.className+=" bg-gray-lighter opacity-5 hide-cursor-workaround"),l.disable_tool_buttons(!0),X.Events.on("pgadmin:query_tool:connected:"+t,(function(){l.check_data_changes_to_execute_query()}))}}},set_value_to_editor:function(e){this.gridView&&this.gridView.query_tool_obj&&!i.isUndefined(e)&&""!=e&&this.gridView.query_tool_obj.setValue(e)},init_events:function(){var e=this;c.Browser.Events.on("pgadmin-storage:finish_btn:select_file",e._select_file_handler,e),c.Browser.Events.on("pgadmin-storage:finish_btn:create_file",e._save_file_handler,e),e.is_query_tool&&e.gridView.query_tool_obj.on("change",e._on_query_change.bind(e)),e.on("pgadmin-sqleditor:button:load_file",e._load_file,e),e.on("pgadmin-sqleditor:button:save_file",e._save_file,e),e.on("pgadmin-sqleditor:button:deleterow",e._delete,e),e.on("pgadmin-sqleditor:button:show_filter",e._show_filter,e),e.on("pgadmin-sqleditor:button:show_new_connection",e._show_new_connection,e),e.on("pgadmin-sqleditor:button:include_filter",e._include_filter,e),e.on("pgadmin-sqleditor:button:exclude_filter",e._exclude_filter,e),e.on("pgadmin-sqleditor:button:remove_filter",e._remove_filter,e),e.on("pgadmin-sqleditor:button:copy_row",e._copy_row,e),e.on("pgadmin-sqleditor:button:copy_row_with_header",e._copy_row_with_header,e),e.on("pgadmin-sqleditor:button:paste_row",e._paste_row,e),e.on("pgadmin-sqleditor:button:limit",e._set_limit,e),e.on("pgadmin-sqleditor:button:cancel-query",e._cancel_query,e),e.on("pgadmin-sqleditor:button:auto_rollback",e._auto_rollback,e),e.on("pgadmin-sqleditor:button:auto_commit",e._auto_commit,e),e.on("pgadmin-sqleditor:button:explain-verbose",e._explain_verbose,e),e.on("pgadmin-sqleditor:button:explain-costs",e._explain_costs,e),e.on("pgadmin-sqleditor:button:explain-buffers",e._explain_buffers,e),e.on("pgadmin-sqleditor:button:explain-timing",e._explain_timing,e),e.on("pgadmin-sqleditor:button:explain-summary",e._explain_summary,e),e.on("pgadmin-sqleditor:button:explain-settings",e._explain_settings,e),e.on("pgadmin-sqleditor:button:show_query_tool",e._show_query_tool,e),e.on("pgadmin-sqleditor:indent_selected_code",e._indent_selected_code,e),e.on("pgadmin-sqleditor:unindent_selected_code",e._unindent_selected_code,e),e.on("pgadmin-sqleditor:format_sql",e._format_sql,e),e.on("pgadmin-sqleditor:button:manage_macros",e._manage_macros,e),e.on("pgadmin-sqleditor:button:execute_macro",e._execute_macro,e),window.parent.$(window.parent.document).on("pgadmin-sqleditor:rows-copied",e._copied_in_other_session)},check_data_changes_to_execute_query:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this;i.has(a,"data_store")&&(i.size(a.data_store.added)||i.size(a.data_store.updated)||i.size(a.data_store.deleted))?s.default.confirm(e("Unsaved changes"),e("The data has been modified, but not saved. Are you sure you wish to discard the changes?"),(function(){void 0!==o?a._execute_macro_query(t,r,o):a.is_query_tool?a._execute_sql_query(t,r):a._execute_view_data_query()}),(function(){return n("#btn-flash").prop("disabled",!1),!0})):void 0!==o?a._execute_macro_query(t,r,o):a.is_query_tool?a._execute_sql_query(t,r):a._execute_view_data_query()},_execute_view_data_query:function(){var r=this,o=t("sqleditor.view_data_start",{trans_id:r.transId});r.query_start_time=new Date,r.rows_affected=0,r._init_polling_flags(),r.has_more_rows=!1,r.fetching_rows=!1,r.trigger("pgadmin-sqleditor:loading-icon:show",e("Running query...")),n("#btn-flash").prop("disabled",!0),r.enable_disable_download_btn(!0),r.trigger("pgadmin-sqleditor:loading-icon:message",e("Waiting for the query to complete...")),arguments.length>0&&"connect"==arguments[arguments.length-1]&&(o+="?connect=1"),n.ajax({url:o,method:"GET"}).done((function(e){e.data.status?(r.can_edit=e.data.can_edit,r.can_filter=e.data.can_filter,r.info_notifier_timeout=e.data.info_notifier_timeout,r.gridView.query_tool_obj.setValue(e.data.sql),r.query=e.data.sql,r.can_filter&&e.data.filter_applied?(n("#btn-filter").removeClass("btn-secondary"),n("#btn-filter-dropdown").removeClass("btn-secondary"),n("#btn-filter").addClass("btn-primary"),n("#btn-filter-dropdown").addClass("btn-primary")):(n("#btn-filter").removeClass("btn-primary"),n("#btn-filter-dropdown").removeClass("btn-primary"),n("#btn-filter").addClass("btn-secondary"),n("#btn-filter-dropdown").addClass("btn-secondary")),n("#btn-copy-row").prop("disabled",!0),n("#btn-paste-row").prop("disabled",!0),n(".limit").val(e.data.limit),r._poll()):(r.trigger("pgadmin-sqleditor:loading-icon:hide"),r.update_msg_history(!1,e.data.result))})).fail((function(e){r.trigger("pgadmin-sqleditor:loading-icon:hide");var t=k.handleQueryToolAjaxError(c,r,e,"_execute_view_data_query",[],!0);t&&r.update_msg_history(!1,t)}))},_execute_macro_query:function(e,r,o){var i=this;i.has_more_rows=!1,i.fetching_rows=!1,n.ajax({url:t("sqleditor.get_macro",{macro_id:o,trans_id:i.transId}),method:"GET",contentType:"application/json",dataType:"json"}).done((function(t){if(t){var n=t.sql.replace(/\$SELECTION\$/gi,i.gridView.query_tool_obj.getSelection()),o=new j.ExecuteQuery(i,c.Browser.UserManagement);o.poll=X.override_activity_event_decorator(o.poll).bind(o),o.execute(n,e,r)}})).fail((function(){}))},_execute_sql_query:function(e,t){var n=this,r="";if(n.has_more_rows=!1,n.fetching_rows=!1,i.isUndefined(n.special_sql)){var o=n.gridView.query_tool_obj.getSelection();r=o.length>0?o:n.gridView.query_tool_obj.getValue()}else r=n.special_sql;var a=new j.ExecuteQuery(this,c.Browser.UserManagement);a.poll=X.override_activity_event_decorator(a.poll).bind(a),a.execute(r,e,t)},call_render_after_poll:function(e){V.callRenderAfterPoll(this,s.default,e)},_poll:function(){new j.ExecuteQuery(this,c.Browser.UserManagement).delayedPoll(this)},_render:function(t){var r=this;r.colinfo=t.colinfo,r.primary_keys=i.isEmpty(t.primary_keys)&&t.has_oids?t.oids:t.primary_keys,r.client_primary_key=t.client_primary_key,r.cell_selected=!1,r.selected_model=null,r.changedModels=[],r.has_oids=t.has_oids,r.oids=t.oids,n(".sql-editor-explain").html(ae),r.explain_plan=!1,null!==r.primary_keys&&void 0!==r.primary_keys&&0!==i.size(r.primary_keys)||0!=r.has_oids?r.can_edit=!0:r.can_edit=!1,r.can_filter&&(n(".limit").prop("disabled",!1),n(".limit").addClass("limit-enabled"),n("#btn-filter").prop("disabled",!1),n("#btn-filter-dropdown").prop("disabled",!1)),n("#btn-save-data").prop("disabled",!0),n("#btn-delete-row").prop("disabled",!0),r.can_edit||(n("#btn-delete-row").prop("disabled",!0),n("#btn-copy-row").prop("disabled",!0),n("#btn-paste-row").prop("disabled",!0)),r._fetch_column_metadata.call(r,t,function(){var o=this;o.trigger("pgadmin-sqleditor:loading-icon:message",e("Loading data from the database server and rendering..."),o),o.total_time=U.calculateQueryRunTime(o.query_start_time,o.query_end_time);var a=e("Successfully run. Total query runtime: %s.",o.total_time),l=e("%s rows affected.",o.rows_affected);o.info_notifier_timeout>=0&&s.default.success(a+" "+l,o.info_notifier_timeout);var u=a+"\n"+l;i.isNull(t.additional_messages)||i.isUndefined(t.additional_messages)||(u=t.additional_messages+"\n"+u),o.update_msg_history(!0,u,!1);var d=[],c=null;if(t.result&&!i.isEmpty(o.colinfo)&&"QUERY PLAN"==o.colinfo[0].name&&!i.isEmpty(t.types)&&t.types[0]&&"json"===t.types[0].typname&&(c=JSON.parse(t.result[0][0])),c&&c[0]&&c[0].hasOwnProperty("Plan")&&i.isObject(c[0].Plan)){var f=[JSON.stringify(c,null,2)];d.push(f),o.gridView.data_output_panel.focus(),setTimeout((function(){o.gridView.render_grid(d,o.columns,o.can_edit,o.client_primary_key,0),o.gridView.explain_panel.focus(),h.DrawJSONPlan(n(".sql-editor-explain"),c)}),10)}else o.gridView.data_output_panel.focus(),setTimeout((function(){o.gridView.render_grid(t.result,o.columns,o.can_edit,o.client_primary_key,t.rows_affected)}),10);o.trigger("pgadmin-sqleditor:loading-icon:hide"),!i.isUndefined(t)&&Array.isArray(t.result)&&t.result.length>0?r.enable_disable_download_btn(!1):r.enable_disable_download_btn(!0)}.bind(r))},_fetch_column_metadata:function(e,t){var n=e.colinfo,r=e.primary_keys,o=[],a=this,l=new Array;i.each(e.types,(function(e){l[e.oid]=[e.typname]})),i.each(n,(function(e){var t=!1,n=a.can_edit&&(!a.is_query_tool||e.is_editable);n&&i.size(r)>0&&i.each(r,(function(n,r){r===e.name&&(t=!0)}));var s,u,d="",c="unknown";switch(l[e.type_code]?c=l[e.type_code][0]:l[l.length-1][0]&&(c=l[l.length-1][0]),d+=t?"[PK] "+c:c,e.precision&&e.precision>=0&&65535!=e.precision&&(d+=" ("+e.precision,d+=e.scale&&65535!=e.scale?","+e.scale+")":")"),c){case"oid":u="oid";break;case"json":case"json[]":case"jsonb":case"jsonb[]":u="Json";break;case"smallint":case"smallint[]":case"integer":case"integer[]":case"bigint":case"bigint[]":case"decimal":case"decimal[]":case"numeric":case"numeric[]":case"real":case"real[]":case"double precision":case"double precision[]":u="number";break;case"boolean":u="boolean";break;case"character":case"character[]":case'"char"':case'"char"[]':case"character varying":case"character varying[]":e.internal_size&&e.internal_size>=0&&65535!=e.internal_size&&(d+=" ("+e.internal_size+")"),u="string";break;case"bytea":case"bytea[]":u="binary";break;case"geometry":u="geometry";break;case"geography":u="geography";break;default:u="string"}s=e.display_name+"<br>"+d;var f=c.lastIndexOf("[]"),p={name:e.name,display_name:e.display_name,column_type:d,column_type_internal:c,pos:e.pos,label:s,cell:u,can_edit:"oid"!=e.name&&n,type:c,not_null:e.not_null,has_default_val:e.has_default_val,is_array:f>-1&&f+2==c.length};o.push(p)})),a.columns=o,t&&"function"==typeof t&&t()},resetQueryHistoryObject:function(e){e.total_time="-"},set_sql_message:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?n(".sql-editor-message").append(e):n(".sql-editor-message").text(e),setTimeout((function(){n(".sql-editor-message").scrollTop(n(".sql-editor-message")[0].scrollHeight)}),10)},update_msg_history:function(t,r,o){var a=this;if(void 0===o&&(o=!0),a.gridView.messages_panel.focus(),o?(a.gridView.handler.slickgrid&&a.gridView.handler.slickgrid.destroy(),a.columns=void 0,a.collection=void 0,a.set_sql_message(r)):a.set_sql_message(i.escape(r),!0),"Busy"!=t){setTimeout((function(){n("#btn-flash").prop("disabled",!1)}),400),a.trigger("pgadmin-sqleditor:loading-icon:hide"),a.total_time||(a.total_time=U.calculateQueryRunTime(a.query_start_time,new Date)),i.isUndefined(a.history_query_source)&&(a.history_query_source=re.VIEW_DATA);var l={status:t,start_time:a.query_start_time,query:a.query,row_affected:a.rows_affected,total_time:a.total_time,message:r,query_source:a.history_query_source,is_pgadmin_query:!a.is_query_tool};if(!a.is_query_tool){var s=e('This query was generated by pgAdmin as part of a "View/Edit Data" operation');l.info=s}a.add_to_history(l)}},add_to_history:function(e){n.ajax({url:t("sqleditor.add_query_history",{trans_id:this.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(e)}).done((function(){})).fail((function(){})),this.gridView.history_collection.add(e)},is_editable:function(e){return!(e instanceof m.Collection)&&this.get("can_edit")},enable_disable_download_btn:function(e){this.is_save_results_to_file_disabled=e,n("#btn-save-results-to-file").prop("disabled",e)},rows_to_delete:function(e){var t=this,n=t.primary_keys;t.temp_new_rows=[],e.forEach((function(e,r){var o=i.pick(e,i.keys(n));Object.keys(o).length>0||t.temp_new_rows.push(r)})),t.rows_to_disable=i.clone(t.temp_new_rows)},_delete:function(){var t=this,r=[],o=i.size(t.data_store.added),a=i.size(t.data_store.updated);if(o&&i.each(t.data_store.added,(function(e,n){n in t.data_store.staged_rows&&r.push(n)})),i.size(t.data_store.staged_rows)>0&&i.size(t.data_store.staged_rows)===i.size(r)){var l=t.slickgrid,d=l.getData();l.resetActiveCell(),d.beginUpdate();var c,f=u(r);try{for(f.s();!(c=f.n()).done;){var p=c.value;delete t.data_store.staged_rows[p],delete t.data_store.added[p],delete t.data_store.added_index[p],d.deleteItem(p)}}catch(e){f.e(e)}finally{f.f()}d.endUpdate(),t.rows_to_delete.apply(t,[d.getItems()]),l.resetActiveCell(),l.setSelectedRows([]),l.invalidate(),n("#btn-delete-row").prop("disabled",!0),n("#btn-copy-row").prop("disabled",!0),i.size(t.data_store.added)||a?n("#btn-save-data").prop("disabled",!1):n("#btn-save-data").prop("disabled",!0),s.default.success(e("Row(s) deleted."))}else{var m=!0;i.each(i.keys(t.data_store.staged_rows),(function(e){e in t.data_store.deleted&&(m=!1)})),m?(t.data_store.deleted=Object.assign({},t.data_store.deleted,t.data_store.staged_rows),n(t.gridView.grid.getCanvasNode()).find("div.selected").addClass("strikeout")):(n(t.gridView.grid.getCanvasNode()).find("div.selected").removeClass("strikeout"),i.each(i.keys(t.data_store.staged_rows),(function(e){e in t.data_store.deleted&&delete t.data_store.deleted[e]}))),i.size(t.data_store.added)||a||i.size(t.data_store.deleted)?n("#btn-save-data").prop("disabled",!1):n("#btn-save-data").prop("disabled",!0)}},_save_file:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.gridView.current_file;if(i.isUndefined(n)||e){var r={supported_types:["*","sql"],dialog_type:"create_file",dialog_title:"Save File",btn_primary:"Save"};c.FileManager.init(),c.FileManager.show_dialog(r)}else t._save_file_handler(n)},save_data:function(){var r=this;if(r.can_edit){var o=i.size(r.data_store.added),a=i.size(r.data_store.updated),l=i.size(r.data_store.deleted);if(o||a||l){r.trigger("pgadmin-sqleditor:loading-icon:show",e("Saving the updated data...")),r.is_query_tool&&r.disable_tool_buttons(!0,!0);var d=r.data_store,f=r.gridView;d.columns=f?f.handler.columns:r.columns;var p=!1,m=new Date;n.ajax({url:t("sqleditor.save",{trans_id:r.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(d)}).done((function(t){var a=r.slickgrid,c=a.getData(),f=c.getLength(),b=[],y=t.data.transaction_status;r.last_transaction_status=y;var h=y>0;if(h?r.disable_transaction_buttons(!1):r.disable_transaction_buttons(!0),r.is_query_tool&&r.disable_tool_buttons(!1),t.data.status){n("#btn-save-data").prop("disabled",!0),p=!0;for(var g=1;g<=r.numberOfModifiedCells;g++)a.removeCellCssStyles(g);if(r.numberOfModifiedCells=0,o&&(c.beginUpdate(),i.each(t.data.query_results,(function(e){if(!i.isNull(e.row_added)){var t=Object.keys(e.row_added)[0];i.each(d.added_index,(function(n,r){if(n==t){var o=a.getDataItem(r);i.extend(o,e.row_added[t])}}))}})),c.endUpdate()),i.each(b,(function(e){e.is_row_copied&&delete e.is_row_copied})),a.copied_rows&&delete a.copied_rows,l){var v=i.keys(r.data_store.deleted);if(f==v.length)b=[],c.setItems(b,r.client_primary_key);else{c.beginUpdate();var _,w=u(v);try{for(w.s();!(_=w.n()).done;){var O=_.value,S=a.getData().getItemById(O);b.push(S),c.deleteItem(S[r.client_primary_key])}}catch(e){w.e(e)}finally{w.f()}c.endUpdate()}r.rows_to_delete.apply(r,[b])}a.setSelectedRows([]),r.reset_data_store(),r.primary_keys_data={},r.set_sql_message(""),s.default.success(e("Data saved successfully.")),h&&s.default.info(e("Auto-commit is off. You still need to commit changes to the database."))}else{r.set_sql_message(t.data.result);var x=e("%s.",t.data.result);if(s.default.error(x,2e4),0!=y&&s.default.info(e("Saving data changes was rolled back but the current transaction is still active; previous queries are unaffected.")),a.setSelectedRows([]),i.has(t.data,"_rowid")&&(!i.isUndefined(t.data._rowid)||!i.isNull(t.data._rowid))){var C=r._find_rowindex(t.data._rowid);if(C in r.data_store.added_index){var P=r.handler.temp_new_rows.indexOf(t.data._rowid);P>-1&&r.handler.temp_new_rows.splice(P,1),r.data_store.added[r.data_store.added_index[C]].err=!0}else C in r.data_store.updated_index&&(r.data_store.updated[r.data_store.updated_index[C]].err=!0)}a.gotoCell(C,1)}var E=e('This query was generated by pgAdmin as part of a "Save Data" operation');i.each(t.data.query_results,(function(e){var t={status:e.status,start_time:m,query:e.sql,row_affected:e.rows_affected,total_time:null,message:e.result,query_source:re.SAVE_DATA,is_pgadmin_query:!0,info:E};r.add_to_history(t)})),r.trigger("pgadmin-sqleditor:loading-icon:hide"),a.invalidate(),r.close_on_save&&(p?r.check_needed_confirmations_before_closing_panel():r.close_on_save=!1)})).fail((function(e){var t=[f],n=k.handleQueryToolAjaxError(c,r,e,"save_data",t,!0);r.is_query_tool&&r.disable_tool_buttons(!1),n&&r.update_msg_history(!1,n)}))}}},reset_data_store:function(){this.data_store={updated:{},added:{},staged_rows:{},deleted:{},updated_index:{},added_index:{}}},_find_rowindex:function(e){var t,n=this.slickgrid.getData().getItems(),r=0,o=-1;if(i.isObject(e))t=e;else{if(!i.isString(e))return o;(e={})[this.client_primary_key]=e,t=e}return i.find(n,(function(e){var n=[];if(n.push(e),i.findWhere(n,t))return o=r,!0;r++})),o},_save_as:function(){return this._save_file(!0)},setTitle:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=r.browser_preferences.new_browser_tab_open;o&&o.includes("qt")?window.document.title=i.escape(e):i.each(G.default.pgAdmin.Browser.docker.findPanels("frm_datagrid"),(function(o){o.isVisible()&&(n&&(o.is_dirty_editor=!0),$.setQueryToolDockerTitle(o,r.is_query_tool,e,t))}))},_load_file:function(){var t=this;t.is_query_changed?s.default.confirm(e("Unsaved changes"),e("Are you sure you wish to discard the current changes?"),(function(){t._open_select_file_manager()}),(function(){return!0})):t._open_select_file_manager()},_open_select_file_manager:function(){c.FileManager.init(),c.FileManager.show_dialog({supported_types:["*","sql"],dialog_type:"select_file"})},_select_file_handler:function(r){var o=this,i=r,a={file_name:decodeURI(r)};o.trigger("pgadmin-sqleditor:loading-icon:show",e("Loading the file..."));var l=n(".sql-editor-busy-fetching");l.addClass("show_progress"),n.ajax({url:t("sqleditor.load_file"),method:"POST",contentType:"application/json",data:JSON.stringify(a)}).done((function(e){o.gridView.query_tool_obj.setValue(e),o.gridView.current_file=r,o.gridView.query_tool_obj.file_data=e,o.setTitle(o.gridView.current_file.split("\\").pop().split("/").pop(),!0),o.trigger("pgadmin-sqleditor:loading-icon:hide"),l.removeClass("show_progress"),n("#btn-save-file").prop("disabled",!0),n("#btn-file-menu-save").css("display","none"),o.is_query_changed=!1,setTimeout((function(){o.gridView.query_tool_obj.focus()}),200)})).fail((function(e){o.trigger("pgadmin-sqleditor:loading-icon:hide");var t=[i],n=k.handleQueryToolAjaxError(c,o,e,"_select_file_handler",t,!1);n&&s.default.error(n),l.removeClass("show_progress")}))},_save_file_handler:function(r){var o=this,i=r,a={file_name:decodeURI(r),file_content:o.gridView.query_tool_obj.getValue()},l=o.gridView.query_tool_obj.getValue();o.trigger("pgadmin-sqleditor:loading-icon:show",e("Saving the queries in the file...")),n.ajax({url:t("sqleditor.save_file"),method:"POST",contentType:"application/json",data:JSON.stringify(a)}).done((function(t){t.data.status&&(s.default.success(e("File saved successfully.")),o.gridView.current_file=r,o.setTitle(o.gridView.current_file.replace(/^.*[\\\/]/g,""),!0),o.gridView.query_tool_obj.file_data=l,n("#btn-save-file").prop("disabled",!0),n("#btn-file-menu-save").css("display","none"),o.is_query_changed=!1,setTimeout((function(){o.gridView.query_tool_obj.focus()}),200)),o.trigger("pgadmin-sqleditor:loading-icon:hide"),o.close_on_save&&o.check_needed_confirmations_before_closing_panel()})).fail((function(e){o.trigger("pgadmin-sqleditor:loading-icon:hide");var t=[i],n=k.handleQueryToolAjaxError(c,o,e,"_save_file_handler",t,!1);n&&s.default.error(n)}))},_on_query_change:function(){var e=this;if(e.is_query_changed)e.gridView.current_file&&(e.gridView.query_tool_obj.file_data==e.gridView.query_tool_obj.getValue()?(t=e.gridView.current_file.replace(/^.*[\\\/]/g,""),o=!1):(t=e.gridView.current_file.replace(/^.*[\\\/]/g,"")+" *",o=!0),e.setTitle(t,!0,o));else{if(e.is_query_changed=!0,e.gridView.current_file){var t=e.gridView.current_file.replace(/^.*[\\\/]/g,"")+" *";e.setTitle(t,!0)}else{var r=e.browser_preferences.new_browser_tab_open,o=!1;r&&r.includes("qt")?t=window.document.title+" *":(i.each(G.default.pgAdmin.Browser.docker.findPanels("frm_datagrid"),(function(t){t.isVisible()&&(e.gridView.panel_title=n(t._title).text())})),t=e.gridView.panel_title+" *",o=!0),e.setTitle(t,!1,o)}n("#btn-save-file").prop("disabled",!1),n("#btn-file-menu-save").css("display","block"),n("#btn-file-menu-dropdown").prop("disabled",!1)}},_init_polling_flags:function(){var e=this;e.POLL_FALLBACK_TIME=function(){var t=parseInt((Date.now()-e.query_start_time.getTime())/1e3);return t>=10&&t<30?500:t>=30&&t<60?1e3:t>=60&&t<90?2e3:t>=90?5e3:1}},_show_filter:function(){var e=this,t=!1;arguments.length>0&&"connect"==arguments[arguments.length-1]&&(t=!0),D.dialog(e,t)},_show_new_connection:function(){var e=this,t=!1;arguments.length>0&&"connect"==arguments[arguments.length-1]&&(t=!0),T.dialog(e,t,e.browser_preferences)},_include_filter:function(){var r,o,a,l,u=this,d={};o=(r=u.slickgrid).getActiveCell(),i.isNull(o)||i.isUndefined(o)||(a=r.getColumns()[o.cell],l=r.getDataItem(o.row,o.cell),i.isNull(l)||i.isUndefined(l)||(d[a.field]=i.isUndefined(l[a.field])?"":l[a.field],u.trigger("pgadmin-sqleditor:loading-icon:show",e("Applying the new filter...")),n.ajax({url:t("sqleditor.inclusive_filter",{trans_id:u.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(d)}).done((function(t){u.trigger("pgadmin-sqleditor:loading-icon:hide"),setTimeout((function(){t.data.status?q.executeQuery(u):s.default.alert(e("Filter By Selection Error"),t.data.result)}))})).fail((function(t){u.trigger("pgadmin-sqleditor:loading-icon:hide");var n=k.handleQueryToolAjaxError(c,u,t,"_include_filter",[],!0);n&&s.default.alert(e("Filter By Selection Error"),n)}))))},_exclude_filter:function(){var r,o,a,l,u=this,d={};o=(r=u.slickgrid).getActiveCell(),i.isNull(o)||i.isUndefined(o)||(a=r.getColumns()[o.cell],l=r.getDataItem(o.row,o.cell),i.isNull(l)||i.isUndefined(l)||(d[a.field]=i.isUndefined(l[a.field])?"":l[a.field],u.trigger("pgadmin-sqleditor:loading-icon:show",e("Applying the new filter...")),n.ajax({url:t("sqleditor.exclusive_filter",{trans_id:u.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(d)}).done((function(t){u.trigger("pgadmin-sqleditor:loading-icon:hide"),setTimeout((function(){t.data.status?q.executeQuery(u):s.default.alert(e("Filter Exclude Selection Error"),t.data.result)}),10)})).fail((function(t){u.trigger("pgadmin-sqleditor:loading-icon:hide");var n=k.handleQueryToolAjaxError(c,u,t,"_exclude_filter",[],!0);n&&s.default.alert(e("Filter Exclude Selection Error"),n)}))))},_remove_filter:function(){var r=this;r.trigger("pgadmin-sqleditor:loading-icon:show",e("Removing the filter...")),n.ajax({url:t("sqleditor.remove_filter",{trans_id:r.transId}),method:"POST"}).done((function(t){r.trigger("pgadmin-sqleditor:loading-icon:hide"),setTimeout((function(){t.data.status?q.executeQuery(r):s.default.alert(e("Remove Filter Error"),t.data.result)}))})).fail((function(t){r.trigger("pgadmin-sqleditor:loading-icon:hide");var n=k.handleQueryToolAjaxError(c,r,t,"_remove_filter",[],!0);n&&s.default.alert(e("Remove Filter Error"),n)}))},_copy_row:O,_copy_row_with_header:function(){n(".copy-with-header").toggleClass("visibility-hidden")},_copied_in_other_session:function(e,t){c.SqlEditor.copiedInOtherSessionWithHeaders=t,n("#btn-paste-row").prop("disabled",!1)},_paste_row:function(){var e=this,t=w.getTextFromClipboard(),r=y.CSVToArray(t,e.preferences.results_grid_field_separator,e.preferences.results_grid_quote_char);c.SqlEditor.copiedInOtherSessionWithHeaders&&(r=r.slice(1));var o=0;if((r=r.reduce((function(t,n){var r={};for(var i in e.columns){var a=n[i];""===a&&(a=e.columns[i].has_default_val?void 0:null===e.copied_rows[o][e.columns[i].display_name]?null:""),"boolean"===e.columns[i].cell&&(a="true"==a||"false"!=a&&null),r[e.columns[i].name]=a}return t.push(r),o++,t}),[])).length>0){n("#btn-save-data").prop("disabled",!1);var a=e.slickgrid,l=a.getData(),s=l.getLength(),u=[];for(var d in e.columns)e.columns[d].is_array&&u.push(e.columns[d].name);l.beginUpdate(),i.each(r,(function(t){var n=function(e){var t={};return i.each(e,(function(n,r){void 0!==e[r]&&(i.isObject(e[r])&&-1==u.indexOf(r)?t[String(r)]=JSON.stringify(e[r]):t[String(r)]=e[r])})),t}(t),r=(e.gridView.client_primary_key_counter++).toString();n.is_row_copied=!0,e.temp_new_rows.push(s),n[e.client_primary_key]=r,e.has_oids&&n.oid&&(n.oid=null),l.addItem(n),e.data_store.added[r]={err:!1,data:n},e.data_store.added_index[s]=r,s++})),l.endUpdate(),a.invalidateRow(a.getSelectedRows()),a.updateRowCount(),a.render(),a.scrollRowIntoView(l.getLength()),a.setSelectedRows([])}},_set_limit:function(){var r=this,o=parseInt(n(".limit").val());r.trigger("pgadmin-sqleditor:loading-icon:show",e("Setting the limit on the result...")),n.ajax({url:t("sqleditor.set_limit",{trans_id:r.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(o)}).done((function(t){r.trigger("pgadmin-sqleditor:loading-icon:hide"),setTimeout((function(){t.data.status?q.executeQuery(r):s.default.alert(e("Change limit Error"),t.data.result)}),10)})).fail((function(t){r.trigger("pgadmin-sqleditor:loading-icon:hide");var n=k.handleQueryToolAjaxError(c,r,t,"_set_limit",[],!0);n&&s.default.alert(e("Change limit Error"),n)}))},disable_tool_buttons:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e;this.is_query_tool||(r=!0),n("#btn-explain").prop("disabled",r),n("#btn-explain-analyze").prop("disabled",r),n("#btn-explain-options-dropdown").prop("disabled",r),n("#btn-edit-dropdown").prop("disabled",r),n("#btn-load-file").prop("disabled",r),this.gridView.current_file?this.gridView.query_tool_obj.file_data!=this.gridView.query_tool_obj.getValue()&&n("#btn-save-file").prop("disabled",r):n("#btn-save-file").prop("disabled",r),n("#btn-file-menu-dropdown").prop("disabled",r),n("#btn-find").prop("disabled",r),n("#btn-find-menu-dropdown").prop("disabled",r),n("#btn-macro-dropdown").prop("disabled",r),this.is_query_tool?(null!==t?n("#btn-cancel-query").prop("disabled",t):n("#btn-cancel-query").prop("disabled",!e),this.is_transaction_buttons_disabled?n("#btn-query-dropdown").prop("disabled",e):n("#btn-query-dropdown").prop("disabled",!0)):n("#btn-query-dropdown").prop("disabled",r)},disable_transaction_buttons:function(e){this.is_transaction_buttons_disabled=e,this.is_query_tool&&(n("#btn-commit").prop("disabled",e),n("#btn-rollback").prop("disabled",e))},_highlight_error:function(e){var t=this,n=0,r=0,o=0,a=0;t.gridView.query_tool_obj.removeLineClass(t.marked_line_no,"wrap","CodeMirror-activeline-background"),t.gridView.query_tool_obj.getSelection().length>0&&(a=t.gridView.query_tool_obj.getCursor(!0).line);var l=/LINE (\d+)/.exec(e),s=/Character: (\d+)/.exec(e);if(null!=l&&null!=s){n=t.marked_line_no=parseInt(l[1])-1+a;for(var u=parseInt(s[1])-1,d=0,c=a>0?a:0;c<n;c++)d+=t.gridView.query_tool_obj.getLine(c).length+1;r=u-d;var f=t.gridView.query_tool_obj.getLine(n);if(i.isUndefined(f))return;(o=f.indexOf(" ",r))<0&&(o=f.length),t.gridView.marker=t.gridView.query_tool_obj.markText({line:n,ch:r},{line:n,ch:o},{className:"sql-editor-mark"}),t.gridView.query_tool_obj.addLineClass(t.marked_line_no,"wrap","CodeMirror-activeline-background")}},_cancel_query:function(){var r=this;n.ajax({url:t("sqleditor.cancel_transaction",{trans_id:r.transId}),method:"POST",contentType:"application/json"}).done((function(t){t.data.status||s.default.alert(e("Cancel Query Error"),t.data.result),r.disable_tool_buttons(!1),oe=!1,i.isUndefined(r.download_results_obj)||(r.download_results_obj.abort(),n("#btn-flash").prop("disabled",!1),r.trigger("pgadmin-sqleditor:loading-icon:hide")),setTimeout((function(){r.gridView.query_tool_obj.focus()}),200)})).fail((function(t){r.disable_tool_buttons(!1);var n=k.handleQueryToolAjaxError(c,r,t,"_cancel_query",[],!1);n&&s.default.alert(e("Cancel Query Error"),n)}))},trigger_csv_download:function(r){var o=this,a=t("sqleditor.query_tool_download",{trans_id:o.transId}),l={filename:r};n("#btn-flash").prop("disabled",!0),o.enable_disable_download_btn(!0),o.disable_tool_buttons(!0),o.set_sql_message(""),o.trigger("pgadmin-sqleditor:loading-icon:show",e("Downloading Results...")),o.download_results_obj=n.ajax({type:"POST",url:a,data:l,cache:!1}).done((function(e){if(i.isUndefined(e.data)){var t=new Blob([e],{type:"text/csv"}),a=(window.URL||window.webkitURL).createObjectURL(t),l=c.Browser.get_browser(),s=document.createElement("a");document.body.appendChild(s),"IE"===l.name&&window.navigator.msSaveBlob?window.navigator.msSaveBlob(t,r):(s.setAttribute("href",a),s.setAttribute("download",r),s.click()),document.body.removeChild(s),o.download_results_obj=void 0}else e.status||(o._highlight_error(e.data.result),o.set_sql_message(e.data.result));n("#btn-flash").prop("disabled",!1),o.enable_disable_download_btn(!1),o.disable_tool_buttons(!1),o.trigger("pgadmin-sqleditor:loading-icon:hide")})).fail((function(t){var r="";n("#btn-flash").prop("disabled",!1),o.enable_disable_download_btn(!1),o.disable_tool_buttons(!1),o.trigger("pgadmin-sqleditor:loading-icon:hide"),(r="abort"==t.statusText?e("CSV Download cancelled."):k.handleQueryToolAjaxError(c,o,t,"trigger_csv_download",[],!0))&&s.default.alert(e("Download CSV error"),r)}))},call_cache_preferences:function(){G.default.pgAdmin.Browser.cache_preferences("sqleditor"),X.preference_version(X.generate_preference_version())},_auto_rollback:function(){var r=this,o=!0;!0===n(".auto-rollback").hasClass("visibility-hidden")?n(".auto-rollback").removeClass("visibility-hidden"):(n(".auto-rollback").addClass("visibility-hidden"),o=!1),n.ajax({url:t("sqleditor.auto_rollback",{trans_id:r.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(o)}).done((function(t){t.data.status||s.default.alert(e("Auto Rollback Error"),t.data.result)})).fail((function(t){var n=k.handleQueryToolAjaxError(c,r,t,"_auto_rollback",[],!0);n&&s.default.alert(e("Auto Rollback Error"),n)}))},_auto_commit:function(){var r=this,o=!0;!0===n(".auto-commit").hasClass("visibility-hidden")?n(".auto-commit").removeClass("visibility-hidden"):(n(".auto-commit").addClass("visibility-hidden"),o=!1),n.ajax({url:t("sqleditor.auto_commit",{trans_id:r.transId}),method:"POST",contentType:"application/json",data:JSON.stringify(o)}).done((function(t){t.data.status||s.default.alert(e("Auto Commit Error"),t.data.result)})).fail((function(t){var n=k.handleQueryToolAjaxError(c,r,t,"_auto_commit",[],!0);n&&s.default.alert(e("Auto Commit Error"),n)}))},_toggle_explain_option:function(e){var t=".explain-".concat(e);n(t).toggleClass("visibility-hidden")},_explain_verbose:function(){this._toggle_explain_option("verbose")},_explain_costs:function(){this._toggle_explain_option("costs")},_explain_buffers:function(){this._toggle_explain_option("buffers")},_explain_timing:function(){this._toggle_explain_option("timing")},_explain_summary:function(){this._toggle_explain_option("summary")},_explain_settings:function(){this._toggle_explain_option("settings")},_show_query_tool:function(){var e=this.browser_preferences.new_browser_tab_open;e&&e.includes("qt")&&ue(),this._open_query_tool(this)},_open_query_tool:function(e){var n=y.getRandomInt(1,9999999),r=t("datagrid.panel",{trans_id:n});r+="?is_query_tool=".concat(!0)+"&sgid=".concat(e.url_params.sgid)+"&sid=".concat(e.url_params.sid)+"&server_type=".concat(e.url_params.server_type),e.url_params.did&&(r+="&did=".concat(e.url_params.did));var o=e.url_params.title;if("false"==e.url_params.is_query_tool){var i=e.url_params.title.split("/");i.length>2&&(o=i[i.length-2]+"/"+i[i.length-1])}(0,a.launchDataGrid)(G.default.pgAdmin.DataGrid,n,r,o,"",d)},_indent_selected_code:function(){this.gridView.query_tool_obj.execCommand("indentMore")},_unindent_selected_code:function(){this.gridView.query_tool_obj.execCommand("indentLess")},_format_sql:function(){var e=this.gridView.query_tool_obj,r=!0,o="";""==(o=e.getSelection())&&(o=e.getValue(),r=!1),n.ajax({url:t("sql.format"),data:JSON.stringify({sql:o}),method:"POST",contentType:"application/json",dataType:"json"}).done((function(t){!0===r?e.replaceSelection(t.data.sql,"around"):e.setValue(t.data.sql)})).fail((function(){}))},_manage_macros:function(){Q.dialog(this)},_execute_macro:function(){q.executeMacro(this.handler)},isQueryRunning:function(){return oe},setIsQueryRunning:function(e){oe=e},check_needed_confirmations_before_closing_panel:function(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this;r.ignore_on_close&&!n||(r.ignore_on_close={unsaved_data:!1,unsaved_query:!1});var o=r.ignore_on_close.unsaved_data,a=r.ignore_on_close.unsaved_query;if(!o&&r.can_edit&&r.preferences.prompt_save_data_changes&&r.data_store&&(i.size(r.data_store.added)||i.size(r.data_store.updated)||i.size(r.data_store.deleted)))t=e("The data has changed. Do you want to save changes?"),r.unsaved_changes_user_confirmation(t,!0);else if(!a&&r.is_query_tool&&r.is_query_changed&&r.preferences.prompt_save_query_changes)t=e("The query text has changed. Do you want to save changes?"),r.unsaved_changes_user_confirmation(t,!1);else if(!r.preferences.prompt_commit_transaction||r.last_transaction_status!==z.TRANSACTION_STATUS_INTRANS&&r.last_transaction_status!==z.TRANSACTION_STATUS_INERROR)r.ignore_on_close=void 0,r.close();else{var l=r.last_transaction_status==z.TRANSACTION_STATUS_INERROR;r.uncommitted_transaction_user_confirmation(l)}return!1},uncommitted_transaction_user_confirmation:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this;d.confirmCommit||d.dialog("confirmCommit",(function(){return{main:function(e,t,n){this.is_commit_disabled=n,this.setHeader(e),this.setContent(t)},setup:function(){return{buttons:[{text:e("Cancel"),key:27,invokeOnClose:!0,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:e("Rollback"),className:"btn btn-primary fa fa-lg pg-alertify-button"},{text:e("Commit"),className:"btn btn-primary fa fa-lg pg-alertify-button"}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},prepare:function(){this.is_commit_disabled?this.__internal.buttons[2].element.disabled=!0:this.__internal.buttons[2].element.disabled=!1},callback:function(e){switch(e.index){case 0:break;case 1:n.close_on_idle_transaction=!0,q.executeRollback(n);break;case 2:n.close_on_idle_transaction=!0,q.executeCommit(n)}}}}));var r=e("The current transaction is not commited to the database. Do you want to commit or rollback the transaction?");d.confirmCommit(e("Commit transaction?"),r,t)},unsaved_changes_user_confirmation:function(r,o){var i=this;d.confirmSave||d.dialog("confirmSave",(function(){return{main:function(e,t,n){this.is_unsaved_data=n,this.setHeader(e),this.setContent(t)},setup:function(){return{buttons:[{text:e("Cancel"),key:27,invokeOnClose:!0,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:e("Don't save"),className:"btn btn-secondary fa fa-lg fa-trash-alt pg-alertify-button"},{text:e("Save"),className:"btn btn-primary fa fa-lg fa-save pg-alertify-button"}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},callback:function(r){switch(r.index){case 0:break;case 1:i.close_on_save=!1,i.is_unsaved_data=this.is_unsaved_data,n.ajax({url:t("sqleditor._check_server_connection_status",{sid:i.url_params.sid,sgid:i.url_params.sgid}),headers:{"Cache-Control":"no-cache"}}).done((function(t){t.data.result.server?(r.cancel=!0,i.is_unsaved_data?i.ignore_on_close.unsaved_data=!0:i.ignore_on_close.unsaved_query=!0,i.check_needed_confirmations_before_closing_panel()||(r.cancel=!0)):s.default.confirm(e("Warning"),e("The current transaction has been rolled back because the server was disconnected."),(function(){setTimeout((function(){i.close()}),200)}),(function(){return!0}),e("OK"),e("Cancel"))})).fail((function(){}));break;case 2:i.close_on_save=!0,this.is_unsaved_data?i.save_data():i._save_file()}}}})),d.confirmSave(e("Save changes?"),r,o)},close:function(){var e=this;X.Events.off("pgadmin:user:logged-in",this.initTransaction),window.onbeforeunload=null,e.gridView.currentPanel.off(Y.EVENT.CLOSING),i.isUndefined(e.col_size)||delete e.col_size,G.default.pgAdmin.Browser.docker.removePanel(e.gridView.currentPanel)},update_notifications:function(e){B.updateNotifications(e)},set_title_and_render_connection:function(e,t){var n=this;n.gridView.set_editor_title(i.unescape(e)),n.gridView.handler.setTitle(i.unescape(e)),n.gridView.connection_list.forEach((function(r){if(t==r.database_name)return r.database_name=t,r.title=e,"is_selected"in r&&r.is_selected&&n.gridView.$el.find("ul#connections-list li.selected-connection > a").text(e),!0}))},check_db_name_change:function(e){var t=this,n=G.default.pgAdmin.Browser.tree.selected(),r=G.default.pgAdmin.Browser.tree.translateTreeNodeIdFromReactTree(n),o=G.default.pgAdmin.Browser.tree.findNode(r[1]),a=G.default.pgAdmin.Browser.tree.findNode(r[3]),s=a.data.label,u=a.data._id;if(e.data_obj.db_id==u&&!i.isEqual(s,e.data_obj.db_name)){var d="Current database has been moved or renamed to ".concat(e.data_obj.db_name,". Click on the OK button to refresh the database name."),c="";if(t.is_query_tool){var f=t.gridView.browser_preferences.qt_tab_title_placeholder,p={database:e.data_obj.db_name,username:o.data.user.name,server:o.data.label,type:"query_tool"};c=$.generateTitle(f,p)}else c=(0,l.generateDatagridTitle)(G.default.pgAdmin.Browser,n,null,e.data_obj);$.refresh_db_node(d,a.domNode),t.set_title_and_render_connection(c,a.data.label)}}}),c.SqlEditor={create:function(e){return new se(e)},jquery:n},c.SqlEditor}.apply(t,r))||(e.exports=o)},90491:(e,t,n)=>{var r,o;n(47042),n(91038),n(78783),n(82526),n(41817),n(32165),n(79753),n(26699),n(32023),n(32564),n(82772),n(68309),n(41539),n(39714),n(83710),n(15306),n(74916),n(24812),n(5735),n(83753),n(69600),n(69826),n(66992),n(33948);var i,a=(i=n(55958))&&i.__esModule?i:{default:i};function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}r=[n(91669),n(28008),n(19755),n(81311),n(55455),n(33883),n(72316),n(83879),n(95283),n(66235),n(12030),n(6537),n(44092),n(92026),n(40634),n(14753),n(63790)],void 0===(o=function(e,t,n,r,o,i,u,d,c,f,p,m,b,y,h){if(i.UserManagement)return i.UserManagement;var g=t("user_management.users"),v=t("user_management.roles"),_=t("user_management.auth_sources"),w=y.INTERNAL,O=y.LDAP,S=y.KERBEROS,x=y.OAUTH2,C=!(1!=m.auth_sources.length||!m.auth_sources.includes(w)),P=d.Extension.PasswordDepCell=d.Extension.PasswordCell.extend({initialize:function(){d.Extension.PasswordCell.prototype.initialize.apply(this,arguments),d.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function(){this.$el.empty(),this.render();var e=this.model,t=this.column,n=this.column.get("editable");return(r.isFunction(n)?!!n.apply(t,[e]):!!n)?this.$el.addClass("editable"):this.$el.removeClass("editable"),this.delegateEvents(),this},render:function(){d.NumberCell.prototype.render.apply(this,arguments);var e=this.model,t=this.column,n=this.column.get("editable"),o=r.isFunction(n)?!!n.apply(t,[e]):!!n;return o?this.$el.addClass("editable"):this.$el.removeClass("editable"),this},remove:d.Extension.DependentCell.prototype.remove});return i.UserManagement={init:function(){if(!this.initialized)return this.initialized=!0,this},change_password:function(t){h.url_dialog(e("Chagne Password"),t,"change_user_password.html")},isPgaLoginRequired:function(e){return void 0===e.responseJSON&&void 0!==e.data?401===e.status&&e.data&&e.data.info&&"PGADMIN_LOGIN_REQUIRED"===e.data.info:401===e.status&&e.responseJSON&&e.responseJSON.info&&"PGADMIN_LOGIN_REQUIRED"===e.responseJSON.info},pgaLogin:function(n){var r=e("pgAdmin 4 login");n=n||t("security.login"),o.PgaLogin||o.dialog("PgaLogin",(function(){return{main:function(e,t){this.set({title:e,url:t})},build:function(){o.pgDialogBuild.apply(this)},settings:{url:void 0},setup:function(){return{buttons:[{text:e("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{padding:!1,overflow:!1,modal:!0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){return setTimeout((function(){return o.PgaLogin().destroy()}))}},prepare:function(){var e=this,t=document.createElement("iframe"),n=this.setting("url");t.onload=function(){-1==(this.contentDocument||this.contentWindow.document).location.href.indexOf(n)&&(this.contentWindow.stop(),this.onload=null,e.close(),i.Events.trigger("pgadmin:user:logged-in"))},t.frameBorder="no",t.width="100%",t.height="100%",t.src=n,e.elements.content.appendChild(t)}}})),o.PgaLogin(r,n).resizeTo(i.stdW.md,i.stdH.md)},is_editable:function(e){return e instanceof u.Collection||e.get("id")!=m.id},show_users:function(){if(m.is_admin){var f=[],y=[],h=i.Node.Model.extend({idAttribute:"id",urlRoot:g,defaults:{id:void 0,username:void 0,email:void 0,active:!0,role:"2",newPassword:void 0,confirmPassword:void 0,auth_source:w,authOnlyInternal:C},schema:[{id:"auth_source",label:e("Authentication source"),type:"text",control:"Select2",url:t("user_management.auth_sources"),cellHeaderClasses:"width_percent_30",visible:function(e){return!e.get("authOnlyInternal")},disabled:!1,cell:"Select2",select2:{allowClear:!1,openOnEnter:!1,first_empty:!1},options:function(){return y},editable:function(e){return e instanceof u.Collection||e.isNew()&&!e.get("authOnlyInternal")}},{id:"username",label:e("Username"),type:"text",cell:d.Extension.StringDepCell,cellHeaderClasses:"width_percent_30",deps:["auth_source"],editable:function(e){return!e.get("authOnlyInternal")&&e.get("auth_source")!=w||(e.isNew()&&null!=e.get("username")&&""!=e.get("username")&&setTimeout((function(){e.set("username",void 0)}),10),!1)},disabled:!1},{id:"email",label:e("Email"),type:"text",cell:d.Extension.StringDepCell,cellHeaderClasses:"width_percent_30",deps:["id"],editable:function(e){return!e.get("authOnlyInternal")||!(e instanceof u.Collection)&&!!e.isNew()}},{id:"role",label:e("Role"),type:"text",control:"Select2",cellHeaderClasses:"width_percent_20",cell:"select2",select2:{allowClear:!1,openOnEnter:!1,first_empty:!1},options:function(e){var t=[];return e instanceof c.Control?r.each(f,(function(e){t.push({label:e.name,value:e.id.toString()})})):r.each(f,(function(e){t.push([e.name,e.id.toString()])})),t},editable:function(e){return self.is_editable(e)}},{id:"active",label:e("Active"),type:"switch",cell:"switch",cellHeaderClasses:"width_percent_10",sortable:!1,editable:function(e){return self.is_editable(e)}},{id:"newPassword",label:e("New password"),type:"password",disabled:!1,control:"input",cell:P,cellHeaderClasses:"width_percent_20",deps:["auth_source"],sortable:!1,editable:function(e){return e.get("auth_source")==w}},{id:"confirmPassword",label:e("Confirm password"),type:"password",disabled:!1,control:"input",cell:P,cellHeaderClasses:"width_percent_20",deps:["auth_source"],sortable:!1,editable:function(e){return e.get("auth_source")==w}},{id:"locked",label:e("Locked"),type:"switch",cell:"switch",disabled:!1,sortable:!1,editable:function(e){return e.get("id")!=m.id}}],validate:function(){var t=null,n=this.changed||{};if(this.get("auth_source")==w&&("email"in n||!this.isNew())&&(r.isUndefined(this.get("email"))||r.isNull(this.get("email"))||""==String(this.get("email")).replace(/^\s+|\s+$/g,"")))return t=e("Email address cannot be empty."),this.errorModel.set("email",t),t;if(this.get("email")&&!/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(this.get("email")))return t=e("Invalid email address: %s.",this.get("email")),this.errorModel.set("email",t),t;if(this.get("email")&&this.collection.nonFilter.where({email:this.get("email"),auth_source:w}).length>1)return t=e("The email address %s already exists.",this.get("email")),this.errorModel.set("email",t),t;if(this.errorModel.unset("email"),"role"in n&&(r.isUndefined(this.get("role"))||r.isNull(this.get("role"))||""==String(this.get("role")).replace(/^\s+|\s+$/g,"")))return t=e("Role cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("role",t),t;if(this.errorModel.unset("role"),this.get("auth_source")==w)if(this.isNew()){if("newPassword"in n&&(r.isUndefined(this.get("newPassword"))||r.isNull(this.get("newPassword"))||""==this.get("newPassword")))return t=e("Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("newPassword",t),t;if(!r.isUndefined(this.get("newPassword"))&&!r.isNull(this.get("newPassword"))&&this.get("newPassword").length<6)return t=e("Password must be at least 6 characters for user %s.",this.get("email")||""),this.errorModel.set("newPassword",t),t;if(this.errorModel.unset("newPassword"),"confirmPassword"in n&&(r.isUndefined(this.get("confirmPassword"))||r.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword")))return t=e("Confirm Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;if(this.errorModel.unset("confirmPassword"),this.get("newPassword")&&this.get("confirmPassword")&&this.get("newPassword")!=this.get("confirmPassword"))return t=e("Passwords do not match for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;this.errorModel.unset("confirmPassword")}else if((r.isUndefined(this.get("newPassword"))||r.isNull(this.get("newPassword"))||""==this.get("newPassword"))&&(r.isUndefined(this.get("confirmPassword"))||r.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword")))this.errorModel.unset("newPassword"),""==this.get("newPassword")&&this.set({newPassword:void 0}),this.errorModel.unset("confirmPassword"),""==this.get("confirmPassword")&&this.set({confirmPassword:void 0});else{if(!r.isUndefined(this.get("newPassword"))&&!r.isNull(this.get("newPassword"))&&""==!this.get("newPassword")&&this.get("newPassword").length<6)return t=e("Password must be at least 6 characters for user %s.",this.get("email")||""),this.errorModel.set("newPassword",t),t;if(r.isUndefined(this.get("confirmPassword"))||r.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword"))return t=e("Confirm Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;if(this.get("newPassword")&&this.get("confirmPassword")&&this.get("newPassword")!=this.get("confirmPassword"))return t=e("Passwords do not match for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;this.errorModel.unset("newPassword"),this.errorModel.unset("confirmPassword")}else if(this.get("username")&&this.collection.nonFilter.where({username:this.get("username"),auth_source:O}).length>1||this.collection.nonFilter.where({username:this.get("username"),auth_source:S}).length>1||this.collection.nonFilter.where({username:this.get("username"),auth_source:x}).length>1)return t=e("The username %s already exists.",this.get("username")),this.errorModel.set("username",t),t;return null}}),E=c.generateGridColumnsFromModel(null,h,"edit"),j=d.Extension.DeleteCell.extend({raiseError:function(){a.default.error(e("Error during deleting user."))},changeOwnership:function(l,s){var u=this,d=c.Select2Control.extend({fetchData:function(){var e=this,o=e.field.get("url");o=t(o,{uid:s}),n.ajax({url:o,headers:{"Cache-Control":"no-cache"}}).done((function(t){var n=e.field.get("transform");if(t.data.status){var o=t.data.result.data;n&&r.isFunction(n)?e.field.set("options",n.bind(e,o)):e.field.set("options",o)}else n&&r.isFunction(n)?e.field.set("options",n.bind(e,[])):e.field.set("options",[]);c.Select2Control.prototype.render.apply(e,arguments)})).fail((function(e){var t="";t=404==e.status?"Unable to find url.":e.responseJSON.errormsg,a.default.error(t)}))},render:function(){return this.fetchData(),c.Select2Control.prototype.render.apply(this,arguments)},onChange:function(){c.Select2Control.prototype.onChange.apply(this,arguments)}}),f=i.DataModel.extend({schema:[{id:"note_text_ch_owner",control:c.NoteControl,text:"Select the user that will take ownership of the shared servers created by <b>"+u.model.get("username")+"</b>. <b>"+l.data.shared_servers+"</b> shared servers are currently owned by this user.",group:e("General")},{id:"user",name:"user",label:e("User"),type:"text",editable:!0,select2:{allowClear:!0,width:"100%",first_empty:!0},control:d,url:"user_management.admin_users",helpMessage:e("Note: If no user is selected, the shared servers will be deleted.")}]});o.changeOwnershipDialog||o.dialog("changeOwnershipDialog",(function(){var t=n("<div class='change-ownership'></div>");return{main:function(e){this.msg=e},build:function(){this.elements.content.appendChild(t.get(0)),o.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button","data-btn-name":"cancel"},{text:e("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button","data-btn-name":"ok"}],options:{title:"Change ownership",padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!1,pinnable:!1,closableByDimmer:!1,modal:!1,autoReset:!1,closable:!0}}},prepare:function(){var e=this;t.html(""),e.ownershipModel=new f;var n=p.generateViewSchema(null,e.ownershipModel,"create",null,null,!0,null),r=this.view=new p.Dialog({el:"<div></div>",model:e.ownershipModel,schema:n});t.append(r.render().$el[0])},callback:function(t){if("ok"===t.button["data-btn-name"]){t.cancel=!0;var n=this.ownershipModel.toJSON();""==n.user||null==n.user?a.default.confirm(e("Delete user?"),e("The shared servers owned by <b>"+u.model.get("username")+"</b> will be deleted. Do you wish to continue?"),(function(){u.model.destroy({wait:!0,success:function(){a.default.success(e("User deleted.")),o.changeOwnershipDialog().destroy(),o.UserManagement().destroy()},error:u.raiseError}),o.changeOwnershipDialog().destroy()}),(function(){return!0})):u.changeOwner(n.user,s)}else o.changeOwnershipDialog().destroy()}}})),o.changeOwnershipDialog("Change ownership").resizeTo(i.stdW.md,i.stdH.md)},changeOwner:function(r,i){n.ajax({url:t("user_management.change_owner"),method:"POST",data:{new_owner:r,old_owner:i}}).done((function(t){o.changeOwnershipDialog().destroy(),o.UserManagement().destroy(),a.default.success(e(t.info))})).fail((function(){a.default.error(e("Unable to change owner."))}))},deleteUser:function(){var t=this;a.default.confirm(e("Delete user?"),e("Are you sure you wish to delete this user?"),(function(){t.model.destroy({wait:!0,success:function(){a.default.success(e("User deleted."))},error:t.raiseError})}),(function(){return!0}))},deleteRow:function(o){var i=this;if(o.preventDefault(),i.model.get("id")==m.id)return a.default.alert(e("Cannot delete user."),e("Cannot delete currently logged in user."),(function(){return!0})),!0;!(!r.isUndefined(this.column.get("canDeleteRow"))&&r.isFunction(this.column.get("canDeleteRow")))||d.callByNeed(this.column.get("canDeleteRow"),this.column,this.model)?i.model.isNew()?i.model.destroy():1==i.model.get("role")?n.ajax({url:t("user_management.shared_servers",{uid:i.model.get("id")}),method:"GET",async:!1}).done((function(e){e.data.shared_servers>0?i.changeOwnership(e,i.model.get("id")):i.deleteUser()})).fail((function(){i.deleteUser()})):i.deleteUser():a.default.alert(e("Error"),e("This user cannot be deleted."),(function(){return!0}))}});E.columns.unshift({name:"pg-backform-delete",label:"",cell:j,editable:!1,cell_priority:-1,canDeleteRow:!0}),o.UserManagement||o.dialog("UserManagement",(function(){return{main:function(e){this.set("title",e)},build:function(){o.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e("Users"),url:t("help.static",{filename:"user_management.html"})}},{text:e("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button user_management_pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{title:e("User Management"),padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){this.view&&(this.view.remove({data:!0,internal:!0,silent:!0}),this.$content.remove())}},prepare:function(){var t=r.template(['<div class="pg-prop-footer" style="visibility:hidden;">',' <div class="pg-prop-status-bar">','    <div class="error-in-footer"> ','      <div class="d-flex px-2 py-1"> ','        <div class="pr-2"> ','          <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i> ',"        </div> ",'        <div class="alert-text" role="status"></div> ','        <div class="ml-auto close-error-bar"> ','          <a class="close-error fa fa-times text-danger"></a> ',"        </div> ","      </div> ","    </div> "," </div>","</div>"].join("\n")),o=n(t()),i=d.Row.extend({userInvalidClass:"bg-user-invalid",initialize:function(){d.Row.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"pgadmin:user:invalid",this.userInvalid),this.listenTo(this.model,"pgadmin:user:valid",this.userValid)},userInvalid:function(){n(this.el).removeClass("new"),n(this.el).addClass(this.userInvalidClass)},userValid:function(){n(this.el).removeClass(this.userInvalidClass)}}),c=u.Collection.extend({model:h,url:g,initialize:function(){u.Collection.prototype.initialize.apply(this,arguments);var e=this;e.changedUser=null,e.invalidUsers={},e.nonFilter=this,e.on("add",e.onModelAdd),e.on("remove",e.onModelRemove),e.on("pgadmin-session:model:invalid",(function(t,n){e.invalidUsers[n.cid]=t,n.trigger("pgadmin:user:invalid",n),o.find(".alert-text").html(t),o.css("visibility","visible")})),e.on("pgadmin-session:model:valid",(function(t){delete e.invalidUsers[t.cid],t.trigger("pgadmin:user:valid",t),this.updateErrorMsg(),this.saveUser(t)}))},onModelAdd:function(e){e.startNewSession()},onModelRemove:function(e){delete this.invalidUsers[e.cid],this.updateErrorMsg()},updateErrorMsg:function(){var e=null;for(var t in this.invalidUsers)if(e=this.invalidUsers[t])break;e?(o.find(".alert-text").html(e),o.css("visibility","visible")):(o.find(".alert-text").empty(),o.css("visibility","hidden"))},saveUser:function(t){var n=t.toJSON(!0);if(t.isNew()&&(t.get("auth_source")==O||t.get("auth_source")==S||t.get("auth_source")==x)&&(!t.get("username")||!t.get("auth_source")||!t.get("role"))||t.isNew()&&t.get("auth_source")==w&&(!t.get("email")||!t.get("role")||!t.get("newPassword")||!t.get("confirmPassword")||t.get("newPassword")!=t.get("confirmPassword"))||!t.isNew()&&t.get("newPassword")!=t.get("confirmPassword"))return!1;t.sessChanged()&&n&&!r.isEmpty(n)&&(t.stopSession(),t.save({},{attrs:n,wait:!0,success:function(){var n=t.get("auth_source");t.set({newPassword:void 0,confirmPassword:void 0,auth_source:void 0}),t.set({auth_source:n}),t.startNewSession(),a.default.success(e("User '%s' saved.",t.get("username")))},error:function(n,r){t.startNewSession(),a.default.error(e("Error saving user: '%s'",r.responseJSON.errormsg))}}))}}),p=this.userCollection=new c,m='<div class="navtab-inline-controls pgadmin-controls">\n                    <div class="input-group">\n                      <div class="input-group-prepend">\n                        <span class="input-group-text fa fa-search" id="labelSearch"></span>\n                        </div>\n                          <input type="search" class="form-control" id="txtGridSearch" placeholder="'+e("Search")+'" aria-label="'+e("Search")+'" aria-describedby="labelSearch" />\n                        </div>\n                        <button id="btn_add" type="button" class="btn btn-secondary btn-navtab-inline add" title="'+e("Add")+'">\n                          <span class="fa fa-plus "></span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>',C=r.template(m),P={canAdd:!0,add_title:e("Add new user")},j=n("<div></div>",{class:"user_container flex-grow-1"});n.ajax({url:v,method:"GET",async:!1}).done((function(e){f=e})).fail((function(){setTimeout((function(){a.default.alert(e("Error"),e("Cannot load user roles."))}),100)})),n.ajax({url:_,method:"GET",async:!1}).done((function(e){y=e})).fail((function(){setTimeout((function(){a.default.alert(e("Error"),e("Cannot load user Sources."))}),100)}));var k,D=this.view=new d.Grid({row:i,columns:E.columns,collection:p,className:"backgrid table table-bordered table-noouter-border table-bottom-border table-hover"});j.append(D.render().$el[0]),this.$content=n("<div class='user_management object subnode subnode-noouter-border d-flex flex-column'></div>").append(C(P)).append(j).append(o),this.elements.content.appendChild(this.$content[0]),p.nonFilter=(k=p,new d.Extension.ClientSideFilter({collection:k,placeholder:e("Filter by email"),wait:150})).setCustomSearchBox(n("#txtGridSearch")).shadowCollection,p.fetch(),this.$content.find("a.close-error").on("click",(function(){o.find(".alert-text").empty(),o.css("visibility","hidden")})),this.$content.find("button.add").first().on("click",(function(e){e.preventDefault();var t,r=!1,o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(p.models.entries());try{for(o.s();!(t=o.n()).done;){var i=l(t.value,2),a=i[0];if(i[1].isNew()){var u=D.body.rows[a].$el;u.addClass("new"),n(u).pgMakeVisible("backgrid"),n(u).find(".email").trigger("click"),r=!0}}}catch(e){o.e(e)}finally{o.f()}if(!r){n(D.body.$el.find(n("tr.new"))).removeClass("new");var d=new h(null,{handler:p,top:p,collection:p});p.add(d);var c=D.body.rows[p.indexOf(d)].$el;c.addClass("new"),n(c).pgMakeVisible("backgrid"),n(c).find(".email").trigger("click")}return!1})),b.findAndSetFocus(this.$content)},callback:function(t){if("dialog_help"==t.button.element.name)return t.cancel=!0,void i.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);if("close"==t.button.element.name){var n=this;r.all(this.userCollection.pluck("id"))&&r.isEmpty(this.userCollection.invalidUsers)||(t.cancel=!0,a.default.confirm(e("Discard unsaved changes?"),e("Are you sure you want to close the dialog? Any unsaved changes will be lost."),(function(){return n.close(),!0}),(function(){return!0})))}}}})),o.UserManagement(!0).resizeTo(i.stdW.lg,i.stdH.md)}}},i.UserManagement}.apply(t,r))||(e.exports=o)},52677:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),n(88674),n(41539),n(35666);var o,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=n(73935),l=n(90999),s=n(79226),u=n(46521),d=n(95197),c=(o=n(55112))&&o.__esModule?o:{default:o};function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,l,"next",e)}function l(e){p(i,r,o,a,l,"throw",e)}a(void 0)}))}}var b=function(){var e=m(regeneratorRuntime.mark((function e(t){var n,r,o,f,p,b,y,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/browser",(r=new d.ManageTreeNodes).init(n),o={pathStyle:"unix",getItems:function(){var e=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.readNode(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sortComparator:function(e,t){if(e._metadata&&"column"==e._metadata.data._type)return 0;if(e.constructor===t.constructor)return c.default.natural_sort(e.fileName,t.fileName);var n=0;return e.constructor===u.Directory?n=-1:t.constructor===u.Directory&&(n=1),n}},f=function(){var e=m(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t+"/"+n.id,e.abrupt("return",r.addNode(t,o,n));case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.removeNode(t,n);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.updateNode(t,n);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),y=new l.TreeModelX(o,n),h=function(e){return t.tree=new s.Tree(e,r,t),!0},e.next=11,y.root.ensureLoaded();case 11:return e.next=13,(0,a.render)(i.createElement(l.FileTreeX,{model:y,onReady:h,create:f,remove:p,update:b}),document.getElementById("tree"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.exports={initBrowserTree:b}},95197:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(78783),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.isCollectionNode=w,t.TreeNode=t.ManageTreeNodes=void 0,n(35666),n(88674),n(41539),n(68309),n(40561),n(82772),n(26699),n(32023),n(15306),n(74916),n(69600),n(66992),n(33948),n(65069),n(19601),n(32564),n(69070);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(43229)),i=c(n(28008)),a=c(n(55112)),l=c(n(81311)),s=n(46521),u=n(79226),d=n(68016);function c(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,l,"next",e)}function l(e){p(i,r,o,a,l,"throw",e)}a(void 0)}))}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(){function e(t){var n=this;b(this,e),g(this,"init",(function(e){return new Promise((function(t,r){n.tree={},n.tree[e]={name:"root",type:s.FileType.Directory,metadata:{parent:null,children:[],data:null}},t()}))})),g(this,"updateNode",(function(e,t){return new Promise((function(r,o){var i=n.findNode(e);i&&(i.name=t.label,i.metadata.data=t),r(!0)}))})),g(this,"removeNode",function(){var e=m(regeneratorRuntime.mark((function e(t,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=n.findNode(t))&&o.parentNode&&(o.children=[],o.parentNode.children.splice(o.parentNode.children.indexOf(o),1)),e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g(this,"addNode",(function(e,t,r){return new Promise((function(t,o){r.type=r.inode?s.FileType.Directory:s.FileType.File,r._label=r.label,r.label=l.default.escape(r.label),r.is_collection=w(r._type);var i={parent:e,children:[],data:r},a=n.findNode(e),u=new _(r.id,r,{},a,i,r.type);null!=a&&a.children.push(u),t(u)}))})),g(this,"readNode",(function(e){return new Promise((function(t,r){var l=e,u=n.findNode(e),d=a.default.Browser.URL;u&&u.children.length>0&&(!u.type===s.FileType.File?r("It's a leaf node"):0!=u.children.length&&t(u.children));var c=n;function f(){return(f=m(regeneratorRuntime.mark((function n(){var r,s,f,p,b,y,h,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(b=function(){return(b=m(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest","X-pgA-CSRFToken":a.default.csrf_token}});case 2:if(200!=(n=e.sent).status){e.next=14;break}return e.prev=4,e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r.data);case 11:e.prev=11,e.t0=e.catch(4),console.warn(e.t0);case 14:throw new Error("Node Load Error...");case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)},p=function(e){return b.apply(this,arguments)},r="","/browser"==e?r=(0,i.default)("browser.nodes"):(s=c.generate_url(e),null==u.metadata.data._pid?r=u.metadata.data._type+"/children/"+u.metadata.data._id:u.metadata.data._type.includes("coll-")?(f=u.metadata.data._type.replace("coll-",""),r=f+"/nodes/"+s+"/"):r=u.metadata.data._type+"/children/"+s+"/"+u.metadata.data._id,r=d+r,l=u.path,"server"!=u.metadata.data._type||u.metadata.data.connected||(r=null)),y=null,!r){n.next=9;break}return n.next=8,p(r);case 8:y=n.sent;case 9:return h=o.BFSRequire("path"),g=function(){var t=m(regeneratorRuntime.mark((function t(n){var r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=regeneratorRuntime.keys(n);case 1:if((t.t1=t.t0()).done){t.next=9;break}return r=t.t1.value,o=n[r],i=h.join(e,o.id),t.next=7,c.addNode(l,i,o);case 7:t.next=1;break;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.next=13,g(y);case 13:u.children.length>0?t(u.children):t(null);case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){f.apply(this,arguments)}()}))})),g(this,"generate_url",(function(e){for(var t=e,r=[],o=[];"/"!=t;){var i=n.findNode(t),a=d.unix.dirname(t);i.parentNode&&i.parentNode.path==a&&(null===i.parentNode.metadata.data||i.parentNode.metadata.data._type.includes("coll-")||(i.parentNode.metadata.data._type.includes("partition")?o.push(i.parentNode.metadata.data._id):r.push(i.parentNode.metadata.data._id))),t=a}return(o=o.reverse()).length>0&&(r[0]=o[o.length-1]),r.reverse().join("/")})),this.tree={},this.tempTree=new _(void 0,{})}return h(e,[{key:"findNode",value:function(e){return null==e||0===e.length||"/browser"==e?this.tempTree:(0,u.findInTree)(this.tempTree,e)}}]),e}();t.ManageTreeNodes=v;var _=function(){function e(t,n,r,o,i,a){b(this,e),this.id=t,this.data=n,this.setParent(o),this.children=[],this.domNode=r,this.metadata=i,this.name=i?i.data.label:"",this.type=a||void 0}return h(e,[{key:"hasParent",value:function(){return null!==this.parentNode&&void 0!==this.parentNode}},{key:"parent",value:function(){return this.parentNode}},{key:"setParent",value:function(e){this.parentNode=e,this.path=this.id,this.id&&(null!=e&&void 0!==e.path?this.path=e.path+"/"+this.id:this.path="/browser/"+this.id)}},{key:"getData",value:function(){if(void 0!==this.data)return null===this.data?null:Object.assign({},this.data)}},{key:"getHtmlIdentifier",value:function(){return this.domNode}},{key:"ancestorNode",value:function(e){for(var t=this;t.hasParent();)if(e(t=t.parent()))return t;return null}},{key:"anyFamilyMember",value:function(e){return!!e(this)||null!==this.ancestorNode(e)}},{key:"anyParent",value:function(e){return null!==this.ancestorNode(e)}},{key:"reload",value:function(e){var t=this;return new Promise((function(n){t.unload(e).then((function(){e.setInode(t.domNode),e.deselect(t.domNode),setTimeout((function(){e.selectNode(t.domNode)}),0),n()}))}))}},{key:"unload",value:function(e){var t=this;return new Promise((function(n,r){t.children=[],e.unload(t.domNode).then((function(){n(!0)}),(function(){r()}))}))}},{key:"open",value:function(e,t){var n=this;return new Promise((function(r,o){!t||null!=n.domNode&&void 0!==n.domNode?e.isOpen(n.domNode)?r(!0):e.open(n.domNode).then((function(e){return r(!0)}),(function(e){return o(!0)})):r(!0)}))}}]),e}();function w(e){return!(!a.default.Browser.Nodes||!(e in a.default.Browser.Nodes))&&(void 0!==a.default.Browser.Nodes[e].is_collection&&a.default.Browser.Nodes[e].is_collection)}t.TreeNode=_},92026:t=>{t.exports=e},8012:e=>{e.exports=t},1506:e=>{e.exports=n},96481:e=>{e.exports=r},34622:e=>{e.exports=o},6537:e=>{e.exports=i},52536:e=>{e.exports=a}},u={};function d(e){if(u[e])return u[e].exports;var t=u[e]={id:e,loaded:!1,exports:{}};return s[e].call(t.exports,t,t.exports,d),t.loaded=!0,t.exports}d.m=s,d.x=e=>{},d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.f={},d.e=e=>Promise.all(Object.keys(d.f).reduce(((t,n)=>(d.f[n](e,t),t)),[])),d.u=e=>({92:"snapsvg",322:"geometry",708:"jsoneditorchunk"}[e]+".chunk.js?id="+{92:"21fb8cc984c0f792381a",322:"33a538ce6c45dd6057ec",708:"74e0a086eff9b1e3741c"}[e]),d.miniCssF=e=>"vendor_others.css",d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l={},d.l=(e,t,n,r)=>{if(l[e])l[e].push(t);else{var o,i;if(void 0!==n)for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var u=a[s];if(u.getAttribute("src")==e){o=u;break}}o||(i=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,d.nc&&o.setAttribute("nonce",d.nc),o.src=e),l[e]=[t];var c=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var r=l[e];if(delete l[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(n))),t)return t(n)},f=setTimeout(c.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=c.bind(null,o.onerror),o.onload=c.bind(null,o.onload),i&&document.head.appendChild(o)}},d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),d.j=745,d.p="",(()=>{var e={745:0,528:0,602:0,255:0},t=[[78474,688,160,196,619]];d.f.j=(t,n)=>{var r=d.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>{r=e[t]=[n,o]}));n.push(r[2]=o);var i=d.p+d.u(t),a=new Error;d.l(i,(n=>{if(d.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,r[1](a)}}),"chunk-"+t,t)}};var n=e=>{},r=(r,o)=>{for(var i,a,[l,s,u,c]=o,f=0,p=[];f<l.length;f++)a=l[f],d.o(e,a)&&e[a]&&p.push(e[a][0]),e[a]=0;for(i in s)d.o(s,i)&&(d.m[i]=s[i]);for(u&&u(d),r&&r(o);p.length;)p.shift()();return c&&t.push.apply(t,c),n()},o=self.webpackChunk=self.webpackChunk||[];function i(){for(var n,r=0;r<t.length;r++){for(var o=t[r],i=!0,a=1;a<o.length;a++){var l=o[a];0!==e[l]&&(i=!1)}i&&(t.splice(r--,1),n=d(d.s=o[0]))}return 0===t.length&&(d.x(),d.x=e=>{}),n}o.forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o));var a=d.x;d.x=()=>(d.x=a||(e=>{}),(n=i)())})();var c=d.x();return c=c.default})()));
//# sourceMappingURL=schema_diff.js.map